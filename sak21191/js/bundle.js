!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a){var b=a("./src/sakura"),c=a("detect-dom-ready");c(function(){new b})},{"./src/sakura":216,"detect-dom-ready":20}],2:[function(a,b){var c=function(){function b(c){c=c||{},this.list=Array.prototype.concat.apply(a("./lang.json").words,a("badwords-list").array),this.placeHolder=c.placeHolder||"*",this.Factory=b}return b.prototype.isProfane=function(a){for(var b=a.split(" "),c=0;c<b.length;c++){var d=b[c].toLowerCase().replace(/\*|\+|\-|\./g,"");if(~this.list.indexOf(d))return!0}return!1},b.prototype.replaceWord=function(a){return a.replace(/\*|\+|\-|\./g,"").replace(/\w/g,this.placeHolder)},b.prototype.clean=function(a){return a.split(" ").map(function(a){return this.isProfane(a)?this.replaceWord(a):a}.bind(this)).join(" ")},b.prototype.addWords=function(a){a=a instanceof Array?a:[a],this.list=this.list.concat(a)},b}();String.prototype.clean=String.prototype.clean||function(){},b.exports=new c},{"./lang.json":3,"badwords-list":5}],3:[function(a,b){b.exports={words:["ahole","anus","ash0le","ash0les","asholes","ass","Ass Monkey","Assface","assh0le","assh0lez","asshole","assholes","assholz","asswipe","azzhole","bassterds","bastard","bastards","bastardz","basterds","basterdz","Biatch","bitch","bitches","Blow Job","boffing","butthole","buttwipe","c0ck","c0cks","c0k","Carpet Muncher","cawk","cawks","Clit","cnts","cntz","cock","cockhead","cock-head","cocks","CockSucker","cock-sucker","crap","cum","cunt","cunts","cuntz","dick","dild0","dild0s","dildo","dildos","dilld0","dilld0s","dominatricks","dominatrics","dominatrix","dyke","enema","f u c k","f u c k e r","fag","fag1t","faget","fagg1t","faggit","faggot","fagit","fags","fagz","faig","faigs","fart","flipping the bird","fuck","fucker","fuckin","fucking","fucks","Fudge Packer","fuk","Fukah","Fuken","fuker","Fukin","Fukk","Fukkah","Fukken","Fukker","Fukkin","g00k","gay","gayboy","gaygirl","gays","gayz","God-damned","h00r","h0ar","h0re","hells","hoar","hoor","hoore","jackoff","jap","japs","jerk-off","jisim","jiss","jizm","jizz","knob","knobs","knobz","kunt","kunts","kuntz","Lesbian","Lezzian","Lipshits","Lipshitz","masochist","masokist","massterbait","masstrbait","masstrbate","masterbaiter","masterbate","masterbates","Motha Fucker","Motha Fuker","Motha Fukkah","Motha Fukker","Mother Fucker","Mother Fukah","Mother Fuker","Mother Fukkah","Mother Fukker","mother-fucker","Mutha Fucker","Mutha Fukah","Mutha Fuker","Mutha Fukkah","Mutha Fukker","n1gr","nastt","nigger;","nigur;","niiger;","niigr;","orafis","orgasim;","orgasm","orgasum","oriface","orifice","orifiss","packi","packie","packy","paki","pakie","paky","pecker","peeenus","peeenusss","peenus","peinus","pen1s","penas","penis","penis-breath","penus","penuus","Phuc","Phuck","Phuk","Phuker","Phukker","polac","polack","polak","Poonani","pr1c","pr1ck","pr1k","pusse","pussee","pussy","puuke","puuker","queer","queers","queerz","qweers","qweerz","qweir","recktum","rectum","retard","sadist","scank","schlong","screwing","semen","sex","sexy","Sh!t","sh1t","sh1ter","sh1ts","sh1tter","sh1tz","shit","shits","shitter","Shitty","Shity","shitz","Shyt","Shyte","Shytty","Shyty","skanck","skank","skankee","skankey","skanks","Skanky","slut","sluts","Slutty","slutz","son-of-a-bitch","tit","turd","va1jina","vag1na","vagiina","vagina","vaj1na","vajina","vullva","vulva","w0p","wh00r","wh0re","whore","xrated","xxx","b!+ch","bitch","blowjob","clit","arschloch","fuck","shit","ass","asshole","b!tch","b17ch","b1tch","bastard","bi+ch","boiolas","buceta","c0ck","cawk","chink","cipa","clits","cock","cum","cunt","dildo","dirsa","ejakulate","fatass","fcuk","fuk","fux0r","hoer","hore","jism","kawk","l3itch","l3i+ch","lesbian","masturbate","masterbat*","masterbat3","motherfucker","s.o.b.","mofo","nazi","nigga","nigger","nutsack","phuck","pimpis","pusse","pussy","scrotum","sh!t","shemale","shi+","sh!+","slut","smut","teets","tits","boobs","b00bs","teez","testical","testicle","titt","w00se","jackoff","wank","whoar","whore","*damn","*dyke","*fuck*","*shit*","@$$","amcik","andskota","arse*","assrammer","ayir","bi7ch","bitch*","bollock*","breasts","butt-pirate","cabron","cazzo","chraa","chuj","Cock*","cunt*","d4mn","daygo","dego","dick*","dike*","dupa","dziwka","ejackulate","Ekrem*","Ekto","enculer","faen","fag*","fanculo","fanny","feces","feg","Felcher","ficken","fitt*","Flikker","foreskin","Fotze","Fu(*","fuk*","futkretzn","gay","gook","guiena","h0r","h4x0r","hell","helvete","hoer*","honkey","Huevon","hui","injun","jizz","kanker*","kike","klootzak","kraut","knulle","kuk","kuksuger","Kurac","kurwa","kusi*","kyrpa*","lesbo","mamhoon","masturbat*","merd*","mibun","monkleigh","mouliewop","muie","mulkku","muschi","nazis","nepesaurio","nigger*","orospu","paska*","perse","picka","pierdol*","pillu*","pimmel","piss*","pizda","poontsee","poop","porn","p0rn","pr0n","preteen","pula","pule","puta","puto","qahbeh","queef*","rautenberg","schaffer","scheiss*","schlampe","schmuck","screw","sh!t*","sharmuta","sharmute","shipal","shiz","skribz","skurwysyn","sphencter","spic","spierdalaj","splooge","suka","b00b*","testicle*","titt*","twat","vittu","wank*","wetback*","wichser","wop*","yed","zabourah"]}},{}],4:[function(a,b){b.exports=["4r5e","5h1t","5hit","a55","anal","anus","ar5e","arrse","arse","ass","ass-fucker","asses","assfucker","assfukka","asshole","assholes","asswhole","a_s_s","b!tch","b00bs","b17ch","b1tch","ballbag","balls","ballsack","bastard","beastial","beastiality","bellend","bestial","bestiality","bi+ch","biatch","bitch","bitcher","bitchers","bitches","bitchin","bitching","bloody","blow job","blowjob","blowjobs","boiolas","bollock","bollok","boner","boob","boobs","booobs","boooobs","booooobs","booooooobs","breasts","buceta","bugger","bum","bunny fucker","butt","butthole","buttmuch","buttplug","c0ck","c0cksucker","carpet muncher","cawk","chink","cipa","cl1t","clit","clitoris","clits","cnut","cock","cock-sucker","cockface","cockhead","cockmunch","cockmuncher","cocks","cocksuck","cocksucked","cocksucker","cocksucking","cocksucks","cocksuka","cocksukka","cok","cokmuncher","coksucka","coon","cox","crap","cum","cummer","cumming","cums","cumshot","cunilingus","cunillingus","cunnilingus","cunt","cuntlick","cuntlicker","cuntlicking","cunts","cyalis","cyberfuc","cyberfuck","cyberfucked","cyberfucker","cyberfuckers","cyberfucking","d1ck","damn","dick","dickhead","dildo","dildos","dink","dinks","dirsa","dlck","dog-fucker","doggin","dogging","donkeyribber","doosh","duche","dyke","ejaculate","ejaculated","ejaculates","ejaculating","ejaculatings","ejaculation","ejakulate","f u c k","f u c k e r","f4nny","fag","fagging","faggitt","faggot","faggs","fagot","fagots","fags","fanny","fannyflaps","fannyfucker","fanyy","fatass","fcuk","fcuker","fcuking","feck","fecker","felching","fellate","fellatio","fingerfuck","fingerfucked","fingerfucker","fingerfuckers","fingerfucking","fingerfucks","fistfuck","fistfucked","fistfucker","fistfuckers","fistfucking","fistfuckings","fistfucks","flange","fook","fooker","fuck","fucka","fucked","fucker","fuckers","fuckhead","fuckheads","fuckin","fucking","fuckings","fuckingshitmotherfucker","fuckme","fucks","fuckwhit","fuckwit","fudge packer","fudgepacker","fuk","fuker","fukker","fukkin","fuks","fukwhit","fukwit","fux","fux0r","f_u_c_k","gangbang","gangbanged","gangbangs","gaylord","gaysex","goatse","God","god-dam","god-damned","goddamn","goddamned","hardcoresex","hell","heshe","hoar","hoare","hoer","homo","hore","horniest","horny","hotsex","jack-off","jackoff","jap","jerk-off","jism","jiz","jizm","jizz","kawk","knob","knobead","knobed","knobend","knobhead","knobjocky","knobjokey","kock","kondum","kondums","kum","kummer","kumming","kums","kunilingus","l3i+ch","l3itch","labia","lust","lusting","m0f0","m0fo","m45terbate","ma5terb8","ma5terbate","masochist","master-bate","masterb8","masterbat*","masterbat3","masterbate","masterbation","masterbations","masturbate","mo-fo","mof0","mofo","mothafuck","mothafucka","mothafuckas","mothafuckaz","mothafucked","mothafucker","mothafuckers","mothafuckin","mothafucking","mothafuckings","mothafucks","mother fucker","motherfuck","motherfucked","motherfucker","motherfuckers","motherfuckin","motherfucking","motherfuckings","motherfuckka","motherfucks","muff","mutha","muthafecker","muthafuckker","muther","mutherfucker","n1gga","n1gger","nazi","nigg3r","nigg4h","nigga","niggah","niggas","niggaz","nigger","niggers","nob","nob jokey","nobhead","nobjocky","nobjokey","numbnuts","nutsack","orgasim","orgasims","orgasm","orgasms","p0rn","pawn","pecker","penis","penisfucker","phonesex","phuck","phuk","phuked","phuking","phukked","phukking","phuks","phuq","pigfucker","pimpis","piss","pissed","pisser","pissers","pisses","pissflaps","pissin","pissing","pissoff","poop","porn","porno","pornography","pornos","prick","pricks","pron","pube","pusse","pussi","pussies","pussy","pussys","rectum","retard","rimjaw","rimming","s hit","s.o.b.","sadist","schlong","screwing","scroat","scrote","scrotum","semen","sex","sh!+","sh!t","sh1t","shag","shagger","shaggin","shagging","shemale","shi+","shit","shitdick","shite","shited","shitey","shitfuck","shitfull","shithead","shiting","shitings","shits","shitted","shitter","shitters","shitting","shittings","shitty","skank","slut","sluts","smegma","smut","snatch","son-of-a-bitch","spac","spunk","s_h_i_t","t1tt1e5","t1tties","teets","teez","testical","testicle","tit","titfuck","tits","titt","tittie5","tittiefucker","titties","tittyfuck","tittywank","titwank","tosser","turd","tw4t","twat","twathead","twatty","twunt","twunter","v14gra","v1gra","vagina","viagra","vulva","w00se","wang","wank","wanker","wanky","whoar","whore","willies","willy","xrated","xxx"]},{}],5:[function(a,b){b.exports={object:a("./object"),array:a("./array"),regex:a("./regexp")}},{"./array":4,"./object":6,"./regexp":7}],6:[function(a,b){b.exports={"4r5e":1,"5h1t":1,"5hit":1,a55:1,anal:1,anus:1,ar5e:1,arrse:1,arse:1,ass:1,"ass-fucker":1,asses:1,assfucker:1,assfukka:1,asshole:1,assholes:1,asswhole:1,a_s_s:1,"b!tch":1,b00bs:1,b17ch:1,b1tch:1,ballbag:1,balls:1,ballsack:1,bastard:1,beastial:1,beastiality:1,bellend:1,bestial:1,bestiality:1,"bi+ch":1,biatch:1,bitch:1,bitcher:1,bitchers:1,bitches:1,bitchin:1,bitching:1,bloody:1,"blow job":1,blowjob:1,blowjobs:1,boiolas:1,bollock:1,bollok:1,boner:1,boob:1,boobs:1,booobs:1,boooobs:1,booooobs:1,booooooobs:1,breasts:1,buceta:1,bugger:1,bum:1,"bunny fucker":1,butt:1,butthole:1,buttmuch:1,buttplug:1,c0ck:1,c0cksucker:1,"carpet muncher":1,cawk:1,chink:1,cipa:1,cl1t:1,clit:1,clitoris:1,clits:1,cnut:1,cock:1,"cock-sucker":1,cockface:1,cockhead:1,cockmunch:1,cockmuncher:1,cocks:1,cocksuck:1,cocksucked:1,cocksucker:1,cocksucking:1,cocksucks:1,cocksuka:1,cocksukka:1,cok:1,cokmuncher:1,coksucka:1,coon:1,cox:1,crap:1,cum:1,cummer:1,cumming:1,cums:1,cumshot:1,cunilingus:1,cunillingus:1,cunnilingus:1,cunt:1,cuntlick:1,cuntlicker:1,cuntlicking:1,cunts:1,cyalis:1,cyberfuc:1,cyberfuck:1,cyberfucked:1,cyberfucker:1,cyberfuckers:1,cyberfucking:1,d1ck:1,damn:1,dick:1,dickhead:1,dildo:1,dildos:1,dink:1,dinks:1,dirsa:1,dlck:1,"dog-fucker":1,doggin:1,dogging:1,donkeyribber:1,doosh:1,duche:1,dyke:1,ejaculate:1,ejaculated:1,ejaculates:1,ejaculating:1,ejaculatings:1,ejaculation:1,ejakulate:1,"f u c k":1,"f u c k e r":1,f4nny:1,fag:1,fagging:1,faggitt:1,faggot:1,faggs:1,fagot:1,fagots:1,fags:1,fanny:1,fannyflaps:1,fannyfucker:1,fanyy:1,fatass:1,fcuk:1,fcuker:1,fcuking:1,feck:1,fecker:1,felching:1,fellate:1,fellatio:1,fingerfuck:1,fingerfucked:1,fingerfucker:1,fingerfuckers:1,fingerfucking:1,fingerfucks:1,fistfuck:1,fistfucked:1,fistfucker:1,fistfuckers:1,fistfucking:1,fistfuckings:1,fistfucks:1,flange:1,fook:1,fooker:1,fuck:1,fucka:1,fucked:1,fucker:1,fuckers:1,fuckhead:1,fuckheads:1,fuckin:1,fucking:1,fuckings:1,fuckingshitmotherfucker:1,fuckme:1,fucks:1,fuckwhit:1,fuckwit:1,"fudge packer":1,fudgepacker:1,fuk:1,fuker:1,fukker:1,fukkin:1,fuks:1,fukwhit:1,fukwit:1,fux:1,fux0r:1,f_u_c_k:1,gangbang:1,gangbanged:1,gangbangs:1,gaylord:1,gaysex:1,goatse:1,God:1,"god-dam":1,"god-damned":1,goddamn:1,goddamned:1,hardcoresex:1,hell:1,heshe:1,hoar:1,hoare:1,hoer:1,homo:1,hore:1,horniest:1,horny:1,hotsex:1,"jack-off":1,jackoff:1,jap:1,"jerk-off":1,jism:1,jiz:1,jizm:1,jizz:1,kawk:1,knob:1,knobead:1,knobed:1,knobend:1,knobhead:1,knobjocky:1,knobjokey:1,kock:1,kondum:1,kondums:1,kum:1,kummer:1,kumming:1,kums:1,kunilingus:1,"l3i+ch":1,l3itch:1,labia:1,lust:1,lusting:1,m0f0:1,m0fo:1,m45terbate:1,ma5terb8:1,ma5terbate:1,masochist:1,"master-bate":1,masterb8:1,"masterbat*":1,masterbat3:1,masterbate:1,masterbation:1,masterbations:1,masturbate:1,"mo-fo":1,mof0:1,mofo:1,mothafuck:1,mothafucka:1,mothafuckas:1,mothafuckaz:1,mothafucked:1,mothafucker:1,mothafuckers:1,mothafuckin:1,mothafucking:1,mothafuckings:1,mothafucks:1,"mother fucker":1,motherfuck:1,motherfucked:1,motherfucker:1,motherfuckers:1,motherfuckin:1,motherfucking:1,motherfuckings:1,motherfuckka:1,motherfucks:1,muff:1,mutha:1,muthafecker:1,muthafuckker:1,muther:1,mutherfucker:1,n1gga:1,n1gger:1,nazi:1,nigg3r:1,nigg4h:1,nigga:1,niggah:1,niggas:1,niggaz:1,nigger:1,niggers:1,nob:1,"nob jokey":1,nobhead:1,nobjocky:1,nobjokey:1,numbnuts:1,nutsack:1,orgasim:1,orgasims:1,orgasm:1,orgasms:1,p0rn:1,pawn:1,pecker:1,penis:1,penisfucker:1,phonesex:1,phuck:1,phuk:1,phuked:1,phuking:1,phukked:1,phukking:1,phuks:1,phuq:1,pigfucker:1,pimpis:1,piss:1,pissed:1,pisser:1,pissers:1,pisses:1,pissflaps:1,pissin:1,pissing:1,pissoff:1,poop:1,porn:1,porno:1,pornography:1,pornos:1,prick:1,pricks:1,pron:1,pube:1,pusse:1,pussi:1,pussies:1,pussy:1,pussys:1,rectum:1,retard:1,rimjaw:1,rimming:1,"s hit":1,"s.o.b.":1,sadist:1,schlong:1,screwing:1,scroat:1,scrote:1,scrotum:1,semen:1,sex:1,"sh!+":1,"sh!t":1,sh1t:1,shag:1,shagger:1,shaggin:1,shagging:1,shemale:1,"shi+":1,shit:1,shitdick:1,shite:1,shited:1,shitey:1,shitfuck:1,shitfull:1,shithead:1,shiting:1,shitings:1,shits:1,shitted:1,shitter:1,shitters:1,shitting:1,shittings:1,shitty:1,skank:1,slut:1,sluts:1,smegma:1,smut:1,snatch:1,"son-of-a-bitch":1,spac:1,spunk:1,s_h_i_t:1,t1tt1e5:1,t1tties:1,teets:1,teez:1,testical:1,testicle:1,tit:1,titfuck:1,tits:1,titt:1,tittie5:1,tittiefucker:1,titties:1,tittyfuck:1,tittywank:1,titwank:1,tosser:1,turd:1,tw4t:1,twat:1,twathead:1,twatty:1,twunt:1,twunter:1,v14gra:1,v1gra:1,vagina:1,viagra:1,vulva:1,w00se:1,wang:1,wank:1,wanker:1,wanky:1,whoar:1,whore:1,willies:1,willy:1,xrated:1,xxx:1}},{}],7:[function(a,b){b.exports=/\b(4r5e|5h1t|5hit|a55|anal|anus|ar5e|arrse|arse|ass|ass-fucker|asses|assfucker|assfukka|asshole|assholes|asswhole|a_s_s|b!tch|b00bs|b17ch|b1tch|ballbag|balls|ballsack|bastard|beastial|beastiality|bellend|bestial|bestiality|bi\+ch|biatch|bitch|bitcher|bitchers|bitches|bitchin|bitching|bloody|blow job|blowjob|blowjobs|boiolas|bollock|bollok|boner|boob|boobs|booobs|boooobs|booooobs|booooooobs|breasts|buceta|bugger|bum|bunny fucker|butt|butthole|buttmuch|buttplug|c0ck|c0cksucker|carpet muncher|cawk|chink|cipa|cl1t|clit|clitoris|clits|cnut|cock|cock-sucker|cockface|cockhead|cockmunch|cockmuncher|cocks|cocksuck|cocksucked|cocksucker|cocksucking|cocksucks|cocksuka|cocksukka|cok|cokmuncher|coksucka|coon|cox|crap|cum|cummer|cumming|cums|cumshot|cunilingus|cunillingus|cunnilingus|cunt|cuntlick|cuntlicker|cuntlicking|cunts|cyalis|cyberfuc|cyberfuck|cyberfucked|cyberfucker|cyberfuckers|cyberfucking|d1ck|damn|dick|dickhead|dildo|dildos|dink|dinks|dirsa|dlck|dog-fucker|doggin|dogging|donkeyribber|doosh|duche|dyke|ejaculate|ejaculated|ejaculates|ejaculating|ejaculatings|ejaculation|ejakulate|f u c k|f u c k e r|f4nny|fag|fagging|faggitt|faggot|faggs|fagot|fagots|fags|fanny|fannyflaps|fannyfucker|fanyy|fatass|fcuk|fcuker|fcuking|feck|fecker|felching|fellate|fellatio|fingerfuck|fingerfucked|fingerfucker|fingerfuckers|fingerfucking|fingerfucks|fistfuck|fistfucked|fistfucker|fistfuckers|fistfucking|fistfuckings|fistfucks|flange|fook|fooker|fuck|fucka|fucked|fucker|fuckers|fuckhead|fuckheads|fuckin|fucking|fuckings|fuckingshitmotherfucker|fuckme|fucks|fuckwhit|fuckwit|fudge packer|fudgepacker|fuk|fuker|fukker|fukkin|fuks|fukwhit|fukwit|fux|fux0r|f_u_c_k|gangbang|gangbanged|gangbangs|gaylord|gaysex|goatse|God|god-dam|god-damned|goddamn|goddamned|hardcoresex|hell|heshe|hoar|hoare|hoer|homo|hore|horniest|horny|hotsex|jack-off|jackoff|jap|jerk-off|jism|jiz|jizm|jizz|kawk|knob|knobead|knobed|knobend|knobhead|knobjocky|knobjokey|kock|kondum|kondums|kum|kummer|kumming|kums|kunilingus|l3i\+ch|l3itch|labia|lust|lusting|m0f0|m0fo|m45terbate|ma5terb8|ma5terbate|masochist|master-bate|masterb8|masterbat*|masterbat3|masterbate|masterbation|masterbations|masturbate|mo-fo|mof0|mofo|mothafuck|mothafucka|mothafuckas|mothafuckaz|mothafucked|mothafucker|mothafuckers|mothafuckin|mothafucking|mothafuckings|mothafucks|mother fucker|motherfuck|motherfucked|motherfucker|motherfuckers|motherfuckin|motherfucking|motherfuckings|motherfuckka|motherfucks|muff|mutha|muthafecker|muthafuckker|muther|mutherfucker|n1gga|n1gger|nazi|nigg3r|nigg4h|nigga|niggah|niggas|niggaz|nigger|niggers|nob|nob jokey|nobhead|nobjocky|nobjokey|numbnuts|nutsack|orgasim|orgasims|orgasm|orgasms|p0rn|pawn|pecker|penis|penisfucker|phonesex|phuck|phuk|phuked|phuking|phukked|phukking|phuks|phuq|pigfucker|pimpis|piss|pissed|pisser|pissers|pisses|pissflaps|pissin|pissing|pissoff|poop|porn|porno|pornography|pornos|prick|pricks|pron|pube|pusse|pussi|pussies|pussy|pussys|rectum|retard|rimjaw|rimming|s hit|s.o.b.|sadist|schlong|screwing|scroat|scrote|scrotum|semen|sex|sh!\+|sh!t|sh1t|shag|shagger|shaggin|shagging|shemale|shi\+|shit|shitdick|shite|shited|shitey|shitfuck|shitfull|shithead|shiting|shitings|shits|shitted|shitter|shitters|shitting|shittings|shitty|skank|slut|sluts|smegma|smut|snatch|son-of-a-bitch|spac|spunk|s_h_i_t|t1tt1e5|t1tties|teets|teez|testical|testicle|tit|titfuck|tits|titt|tittie5|tittiefucker|titties|tittyfuck|tittywank|titwank|tosser|turd|tw4t|twat|twathead|twatty|twunt|twunter|v14gra|v1gra|vagina|viagra|vulva|w00se|wang|wank|wanker|wanky|whoar|whore|willies|willy|xrated|xxx)\b/gi},{}],8:[function(a,b){(function(c){function d(a){return this instanceof d?void(this.settingsFunc=a):new d(a)}var e=a("bw-vm"),f=a("bw-viewmediator"),g=a("bw-router"),h=a("dom-event");d.prototype={init:function(){var a=function(a){var b=this.s=a;if(void 0===b)throw new Error("Your settings function must return a settings Object");if(void 0===b.routes)throw new Error("Your settings object must define routes");b.autoResize=void 0===b.autoResize?!0:b.autoResize,this.onRouteCallBack=a.onRoute,a.routes.onRoute=this.show.bind(this),this.router=g(a.routes),this.vm=e(this.s),b.autoResize&&void 0!==c.innerWidth&&void 0!==c.innerHeight&&(h(c,"resize",this.onResize.bind(this)),this.onResize()),b.initSection?this.show(b.initSection.bind(void 0,this.router.init.bind(this.router))):this.router.init()}.bind(this),b=this.settingsFunc(a);b&&b.then?b.then(a):b&&b.routes&&a(b)},go:function(a){this.router.go(a)},destroy:function(){this.router.destroy()},resize:function(a,b){this.vm.resize(a,b)},show:function(a,b){if(this.onRouteCallBack&&this.onRouteCallBack(a,b),Array.isArray(a)){for(var c=[],d=0,e=a.length;e>d;d++)"object"==typeof a[d]?c[d]=a[d]:"function"==typeof a[d]&&(c[d]=new a[d]);this.doShow(f.apply(void 0,c),b)}else"object"==typeof a?this.doShow(a,b):"function"==typeof a&&this.doShow(new a,b)},doShow:function(a,b){this.vm.show(a,b)},onResize:function(){this.resize(c.innerWidth,c.innerHeight)}},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"bw-router":9,"bw-viewmediator":12,"bw-vm":13,"dom-event":14}],9:[function(a,b){(function(c){function d(a){if(!(this instanceof d))return new d(a);var b=this.s=a||{};b.postHash=b.postHash||"!",b.onRoute=b.onRoute||function(){},this.router=g()}var e=a("dom-event"),f=e.off,g=a("routes"),h=function(){};d.prototype={init:function(){var a=this.s;if(void 0===a["/"]){for(var b in a)if("/"==b[0]){a.start=b;break}}else a.start="/";for(var b in a)"/"==b[0]&&this.router.addRoute(b,h);return this.onURL=this.onURL.bind(this),c.location&&e(c,"hashchange",this.onURL),this.onURL(),this},destroy:function(){f(c,"hashchange",this.onURL)},add:function(a,b){var c=this.s;return c[a]=b,this},go:function(a){"/"!=a[0]&&(a="/"+a);var b=this.getRouteData(a),d=this.getSection(b);c.location&&this.useURL(d)?c.location.hash=this.s.postHash+a:this.doRoute(b,d)},doRoute:function(a,b){var c=this.s;b?(a.route!=this.lastRoute||b.duplicate)&&("string"==typeof b?this.go(b):b.section?c.onRoute(b.section,a):c.onRoute(b,a),this.lastRoute=a.route):c[404]&&c.onRoute(c[404],a)},getRouteData:function(a){return this.router.match(a)},getSection:function(a){return a?this.s[a.route]:null},useURL:function(a){return a&&(void 0===a.section||a.section&&a.useURL||void 0===a.useURL)},onURL:function(){var a,b,d="/";c.location&&""!=c.location.hash&&(d=c.location.hash.substr(1+this.s.postHash.length)),a=this.getRouteData(d),b=this.getSection(a),this.useURL(b)?this.doRoute(a,b):this.doRoute(a,null)}},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"dom-event":10,routes:11}],10:[function(a,b){function c(a,b,c,d){return!a.addEventListener&&(b="on"+b),(a.addEventListener||a.attachEvent).call(a,b,c,d),c}function d(a,b,c,d){return!a.removeEventListener&&(b="on"+b),(a.removeEventListener||a.detachEvent).call(a,b,c,d),c}b.exports=c,b.exports.on=c,b.exports.off=d},{}],11:[function(a,b,c){(function(d){!function(a){if("object"==typeof c)b.exports=a();else if("function"==typeof define&&define.amd)define(a);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof d?e=d:"undefined"!=typeof self&&(e=self),e.routes=a()}}(function(){return function b(c,d,e){function f(h,i){if(!d[h]){if(!c[h]){var j="function"==typeof a&&a;if(!i&&j)return j(h,!0);if(g)return g(h,!0);throw new Error("Cannot find module '"+h+"'")}var k=d[h]={exports:{}};c[h][0].call(k.exports,function(a){var b=c[h][1][a];return f(b?b:a)},k,k.exports,b,c,d,e)}return d[h].exports}for(var g="function"==typeof a&&a,h=0;h<e.length;h++)f(e[h]);return f}({1:[function(a,b){var c=function(a){var b,c,e=[];return a instanceof RegExp?(c=a,b=a.toString()):(c=d(a,e),b=a),{re:c,src:a.toString(),keys:e}},d=function(a,b){return a=a.concat("/?").replace(/\/\(/g,"(?:/").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?|\*/g,function(a,c,d,e,f,g){return"*"===a?(b.push(void 0),a):(b.push(e),c=c||"",""+(g?"":c)+"(?:"+(g?c:"")+(d||"")+(f||"([^/]+?)")+")"+(g||""))}).replace(/([\/.])/g,"\\$1").replace(/\*/g,"(.*)"),new RegExp("^"+a+"$","i")},e=function(a,b,c){for(var d,e=c||0,f=a.length;f>e;++e){var g=a[e],h=g.re,i=g.keys,j=[],k={};if(d=b.match(h)){for(var l=1,f=d.length;f>l;++l){var m=i[l-1],n="string"==typeof d[l]?unescape(d[l]):d[l];m?k[m]=n:j.push(n)}return{params:k,splats:j,route:g.src,next:e+1}}}},f=function(){return{routes:[],routeMap:{},addRoute:function(a,b){if(!a)throw new Error(" route requires a path");if(!b)throw new Error(" route "+a.toString()+" requires a callback");var d=c(a);d.fn=b,this.routes.push(d),this.routeMap[a]=b},match:function(a,b){var c=e(this.routes,a,b);return c&&(c.fn=this.routeMap[c.route],c.next=this.match.bind(this,a,c.next)),c}}};f.Route=c,f.pathToRegExp=d,f.match=e,f.Router=f,b.exports=f},{}]},{},[1])(1)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],12:[function(a,b){function c(){if(!(this instanceof c)){var a=Object.create(c.prototype);return c.apply(a,arguments),a}this.items=arguments}c.prototype={init:function(a,b){for(var c=0,d=0,e=this.items.length,f=function(){++c==d&&b()},g=0;e>g;g++)"function"==typeof this.items[g].init&&d++;for(var g=0;e>g;g++)"function"==typeof this.items[g].init&&this.items[g].init(a,f)},resize:function(a,b){for(var c=0,d=this.items.length;d>c;c++)"function"==typeof this.items[c].resize&&this.items[c].resize(a,b)},aniIn:function(a,b){this.doAni("aniIn",a,b)},aniOut:function(a,b){this.doAni("aniOut",a,b)},doAni:function(a,b,c){for(var d=numItem=0,e=function(){++d==numItem&&c()},f=0,g=this.items.length;g>f;f++)"function"==typeof this.items[f][a]&&numItem++;for(var f=0,g=this.items.length;g>f;f++)"function"==typeof this.items[f][a]&&this.items[f][a](b,e)},destroy:function(a,b){for(var c=numItem=0,d=function(){++c==numItem&&b()},e=0,f=this.items.length;f>e;e++)"function"==typeof this.items[e].destroy&&numItem++;for(var e=0,f=this.items.length;f>e;e++)"function"==typeof this.items[e].destroy&&this.items[e].destroy(a,d)}},b.exports=c},{}],13:[function(a,b){function c(a){if(!(this instanceof c))return new c(a);var b=this.s=a||{};b.overlap=void 0===b.overlap?!0:b.overlap,b.width=b.width||980,b.height=b.height||570,this.cContent=null,this.nContent=null}c.prototype={get overlap(){return this.s.overlap},set overlap(a){this.s.overlap=a},show:function(a,b,c){void 0===c&&"function"==typeof b&&(c=b,b=null),this.data=b,a!=this.nContent&&a!=this.cContent&&(this.nContent&&this.nContent.destroy&&this.nContent.destroy(this.data,function(){}),this.nContent=a,a.init?a.init(this.data,this.swap.bind(this,this.nContent,c)):this.swap(this.nContent,c))},clear:function(a){if(this.nContent&&this.nContent.destroy&&this.nContent.destroy(this.data,function(){}),this.cContent){var b=function(b){b.destroy&&b.destroy(this.data,function(){}),a&&a(b)}.bind(this,this.cContent);this.cContent.aniOut?this.cContent.aniOut(this.data,b):b()}},resize:function(a,b){var c=this.s;c.width=a,c.height=b,this.cContent&&this.cContent.resize&&this.cContent.resize(a,b)},swap:function(a,b){if(a==this.nContent){var c,d=this.s,e=this.cContent,f=function(){d.onEndAniIn&&d.onEndAniIn(a,e),b&&b(a,e)};a.resize&&a.resize(d.width,d.height),d.onStartAniIn&&d.onStartAniIn(a,this.cContent),this.cContent?(c=function(){d.onEndAniOut&&d.onEndAniOut(a,e),e.destroy&&e.destroy(this.data,function(){}),d.overlap||(a.aniIn?a.aniIn(this.data,f):f())}.bind(this),d.onStartAniOut&&d.onStartAniOut(a,e),e.aniOut?e.aniOut(this.data,c):c(),d.overlap&&(a.aniIn?a.aniIn(this.data,f):f())):a.aniIn?a.aniIn(this.data,f):f(),this.cContent=a,this.nContent=null}}},b.exports=c},{}],14:[function(a,b){function c(a,b,c,d){if(a instanceof NodeList)for(var f=0,g=a.length;g>f;f++)e(a[f],b,c,d);else e(a,b,c,d);return c}function d(a,b,c,d){if(a instanceof NodeList)for(var e=0,g=a.length;g>e;e++)f(a[e],b,c,d);else f(a,b,c,d);return c}function e(a,b,c,d){(a.addEventListener||a.attachEvent).call(a,b,c,d)}function f(a,b,c,d){(a.removeEventListener||a.detachEvent).call(a,b,c,d)}b.exports=c,b.exports.on=c,b.exports.off=d},{}],15:[function(a,b,c){arguments[4][13][0].apply(c,arguments)},{dup:13}],16:[function(a,b){b.exports=a("./vendor/dat.gui"),b.exports.color=a("./vendor/dat.color")},{"./vendor/dat.color":17,"./vendor/dat.gui":18}],17:[function(a,b){var c=b.exports=c||{};c.color=c.color||{},c.utils=c.utils||{},c.utils.common=function(){var a=Array.prototype.forEach,b=Array.prototype.slice;return{BREAK:{},extend:function(a){return this.each(b.call(arguments,1),function(b){for(var c in b)this.isUndefined(b[c])||(a[c]=b[c])},this),a},defaults:function(a){return this.each(b.call(arguments,1),function(b){for(var c in b)this.isUndefined(a[c])&&(a[c]=b[c])},this),a},compose:function(){var a=b.call(arguments);return function(){for(var c=b.call(arguments),d=a.length-1;d>=0;d--)c=[a[d].apply(this,c)];return c[0]}},each:function(b,c,d){if(a&&b.forEach===a)b.forEach(c,d);else if(b.length===b.length+0){for(var e=0,f=b.length;f>e;e++)if(e in b&&c.call(d,b[e],e)===this.BREAK)return}else for(var e in b)if(c.call(d,b[e],e)===this.BREAK)return},defer:function(a){setTimeout(a,0)},toArray:function(a){return a.toArray?a.toArray():b.call(a)},isUndefined:function(a){return void 0===a},isNull:function(a){return null===a},isNaN:function(a){return a!==a},isArray:Array.isArray||function(a){return a.constructor===Array},isObject:function(a){return a===Object(a)},isNumber:function(a){return a===a+0},isString:function(a){return a===a+""},isBoolean:function(a){return a===!1||a===!0},isFunction:function(a){return"[object Function]"===Object.prototype.toString.call(a)}}}(),c.color.toString=function(a){return function(b){if(1==b.a||a.isUndefined(b.a)){for(var c=b.hex.toString(16);c.length<6;)c="0"+c;return"#"+c}return"rgba("+Math.round(b.r)+","+Math.round(b.g)+","+Math.round(b.b)+","+b.a+")"}}(c.utils.common),c.Color=c.color.Color=function(a,b,c,d){function e(a,b,c){Object.defineProperty(a,b,{get:function(){return"RGB"===this.__state.space?this.__state[b]:(g(this,b,c),this.__state[b])},set:function(a){"RGB"!==this.__state.space&&(g(this,b,c),this.__state.space="RGB"),this.__state[b]=a}})}function f(a,b){Object.defineProperty(a,b,{get:function(){return"HSV"===this.__state.space?this.__state[b]:(h(this),this.__state[b])},set:function(a){"HSV"!==this.__state.space&&(h(this),this.__state.space="HSV"),this.__state[b]=a}})}function g(a,c,e){if("HEX"===a.__state.space)a.__state[c]=b.component_from_hex(a.__state.hex,e);else{if("HSV"!==a.__state.space)throw"Corrupted color state";d.extend(a.__state,b.hsv_to_rgb(a.__state.h,a.__state.s,a.__state.v))}}function h(a){var c=b.rgb_to_hsv(a.r,a.g,a.b);d.extend(a.__state,{s:c.s,v:c.v}),d.isNaN(c.h)?d.isUndefined(a.__state.h)&&(a.__state.h=0):a.__state.h=c.h}var i=function(){if(this.__state=a.apply(this,arguments),this.__state===!1)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};return i.COMPONENTS=["r","g","b","h","s","v","hex","a"],d.extend(i.prototype,{toString:function(){return c(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),e(i.prototype,"r",2),e(i.prototype,"g",1),e(i.prototype,"b",0),f(i.prototype,"h"),f(i.prototype,"s"),f(i.prototype,"v"),Object.defineProperty(i.prototype,"a",{get:function(){return this.__state.a},set:function(a){this.__state.a=a}}),Object.defineProperty(i.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=b.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(a){this.__state.space="HEX",this.__state.hex=a}}),i}(c.color.interpret=function(a,b){var c,d,e=function(){d=!1;var a=arguments.length>1?b.toArray(arguments):arguments[0];return b.each(f,function(e){return e.litmus(a)?(b.each(e.conversions,function(e,f){return c=e.read(a),d===!1&&c!==!1?(d=c,c.conversionName=f,c.conversion=e,b.BREAK):void 0}),b.BREAK):void 0}),d},f=[{litmus:b.isString,conversions:{THREE_CHAR_HEX:{read:function(a){var b=a.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null===b?!1:{space:"HEX",hex:parseInt("0x"+b[1].toString()+b[1].toString()+b[2].toString()+b[2].toString()+b[3].toString()+b[3].toString())}},write:a},SIX_CHAR_HEX:{read:function(a){var b=a.match(/^#([A-F0-9]{6})$/i);return null===b?!1:{space:"HEX",hex:parseInt("0x"+b[1].toString())}},write:a},CSS_RGB:{read:function(a){var b=a.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null===b?!1:{space:"RGB",r:parseFloat(b[1]),g:parseFloat(b[2]),b:parseFloat(b[3])}},write:a},CSS_RGBA:{read:function(a){var b=a.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null===b?!1:{space:"RGB",r:parseFloat(b[1]),g:parseFloat(b[2]),b:parseFloat(b[3]),a:parseFloat(b[4])}},write:a}}},{litmus:b.isNumber,conversions:{HEX:{read:function(a){return{space:"HEX",hex:a,conversionName:"HEX"}},write:function(a){return a.hex}}}},{litmus:b.isArray,conversions:{RGB_ARRAY:{read:function(a){return 3!=a.length?!1:{space:"RGB",r:a[0],g:a[1],b:a[2]}},write:function(a){return[a.r,a.g,a.b]}},RGBA_ARRAY:{read:function(a){return 4!=a.length?!1:{space:"RGB",r:a[0],g:a[1],b:a[2],a:a[3]}},write:function(a){return[a.r,a.g,a.b,a.a]
}}}},{litmus:b.isObject,conversions:{RGBA_OBJ:{read:function(a){return b.isNumber(a.r)&&b.isNumber(a.g)&&b.isNumber(a.b)&&b.isNumber(a.a)?{space:"RGB",r:a.r,g:a.g,b:a.b,a:a.a}:!1},write:function(a){return{r:a.r,g:a.g,b:a.b,a:a.a}}},RGB_OBJ:{read:function(a){return b.isNumber(a.r)&&b.isNumber(a.g)&&b.isNumber(a.b)?{space:"RGB",r:a.r,g:a.g,b:a.b}:!1},write:function(a){return{r:a.r,g:a.g,b:a.b}}},HSVA_OBJ:{read:function(a){return b.isNumber(a.h)&&b.isNumber(a.s)&&b.isNumber(a.v)&&b.isNumber(a.a)?{space:"HSV",h:a.h,s:a.s,v:a.v,a:a.a}:!1},write:function(a){return{h:a.h,s:a.s,v:a.v,a:a.a}}},HSV_OBJ:{read:function(a){return b.isNumber(a.h)&&b.isNumber(a.s)&&b.isNumber(a.v)?{space:"HSV",h:a.h,s:a.s,v:a.v}:!1},write:function(a){return{h:a.h,s:a.s,v:a.v}}}}}];return e}(c.color.toString,c.utils.common),c.color.math=function(){var a;return{hsv_to_rgb:function(a,b,c){var d=Math.floor(a/60)%6,e=a/60-Math.floor(a/60),f=c*(1-b),g=c*(1-e*b),h=c*(1-(1-e)*b),i=[[c,h,f],[g,c,f],[f,c,h],[f,g,c],[h,f,c],[c,f,g]][d];return{r:255*i[0],g:255*i[1],b:255*i[2]}},rgb_to_hsv:function(a,b,c){var d,e,f=Math.min(a,b,c),g=Math.max(a,b,c),h=g-f;return 0==g?{h:0/0,s:0,v:0}:(e=h/g,d=a==g?(b-c)/h:b==g?2+(c-a)/h:4+(a-b)/h,d/=6,0>d&&(d+=1),{h:360*d,s:e,v:g/255})},rgb_to_hex:function(a,b,c){var d=this.hex_with_component(0,2,a);return d=this.hex_with_component(d,1,b),d=this.hex_with_component(d,0,c)},component_from_hex:function(a,b){return a>>8*b&255},hex_with_component:function(b,c,d){return d<<(a=8*c)|b&~(255<<a)}}}(),c.color.toString,c.utils.common)},{}],18:[function(a,b){var c=b.exports=c||{};c.gui=c.gui||{},c.utils=c.utils||{},c.controllers=c.controllers||{},c.dom=c.dom||{},c.color=c.color||{},c.utils.css=function(){return{load:function(a,b){b=b||document;var c=b.createElement("link");c.type="text/css",c.rel="stylesheet",c.href=a,b.getElementsByTagName("head")[0].appendChild(c)},inject:function(a,b){b=b||document;var c=document.createElement("style");c.type="text/css",c.innerHTML=a,b.getElementsByTagName("head")[0].appendChild(c)}}}(),c.utils.common=function(){var a=Array.prototype.forEach,b=Array.prototype.slice;return{BREAK:{},extend:function(a){return this.each(b.call(arguments,1),function(b){for(var c in b)this.isUndefined(b[c])||(a[c]=b[c])},this),a},defaults:function(a){return this.each(b.call(arguments,1),function(b){for(var c in b)this.isUndefined(a[c])&&(a[c]=b[c])},this),a},compose:function(){var a=b.call(arguments);return function(){for(var c=b.call(arguments),d=a.length-1;d>=0;d--)c=[a[d].apply(this,c)];return c[0]}},each:function(b,c,d){if(a&&b.forEach===a)b.forEach(c,d);else if(b.length===b.length+0){for(var e=0,f=b.length;f>e;e++)if(e in b&&c.call(d,b[e],e)===this.BREAK)return}else for(var e in b)if(c.call(d,b[e],e)===this.BREAK)return},defer:function(a){setTimeout(a,0)},toArray:function(a){return a.toArray?a.toArray():b.call(a)},isUndefined:function(a){return void 0===a},isNull:function(a){return null===a},isNaN:function(a){return a!==a},isArray:Array.isArray||function(a){return a.constructor===Array},isObject:function(a){return a===Object(a)},isNumber:function(a){return a===a+0},isString:function(a){return a===a+""},isBoolean:function(a){return a===!1||a===!0},isFunction:function(a){return"[object Function]"===Object.prototype.toString.call(a)}}}(),c.controllers.Controller=function(a){var b=function(a,b){this.initialValue=a[b],this.domElement=document.createElement("div"),this.object=a,this.property=b,this.__onChange=void 0,this.__onFinishChange=void 0};return a.extend(b.prototype,{onChange:function(a){return this.__onChange=a,this},onFinishChange:function(a){return this.__onFinishChange=a,this},setValue:function(a){return this.object[this.property]=a,this.__onChange&&this.__onChange.call(this,a),this.updateDisplay(),this},getValue:function(){return this.object[this.property]},updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}}),b}(c.utils.common),c.dom.dom=function(a){function b(b){if("0"===b||a.isUndefined(b))return 0;var c=b.match(e);return a.isNull(c)?0:parseFloat(c[1])}var c={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},d={};a.each(c,function(b,c){a.each(b,function(a){d[a]=c})});var e=/(\d+(\.\d+)?)px/,f={makeSelectable:function(a,b){void 0!==a&&void 0!==a.style&&(a.onselectstart=b?function(){return!1}:function(){},a.style.MozUserSelect=b?"auto":"none",a.style.KhtmlUserSelect=b?"auto":"none",a.unselectable=b?"on":"off")},makeFullscreen:function(b,c,d){a.isUndefined(c)&&(c=!0),a.isUndefined(d)&&(d=!0),b.style.position="absolute",c&&(b.style.left=0,b.style.right=0),d&&(b.style.top=0,b.style.bottom=0)},fakeEvent:function(b,c,e,f){e=e||{};var g=d[c];if(!g)throw new Error("Event type "+c+" not supported.");var h=document.createEvent(g);switch(g){case"MouseEvents":var i=e.x||e.clientX||0,j=e.y||e.clientY||0;h.initMouseEvent(c,e.bubbles||!1,e.cancelable||!0,window,e.clickCount||1,0,0,i,j,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var k=h.initKeyboardEvent||h.initKeyEvent;a.defaults(e,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),k(c,e.bubbles||!1,e.cancelable,window,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.keyCode,e.charCode);break;default:h.initEvent(c,e.bubbles||!1,e.cancelable||!0)}a.defaults(h,f),b.dispatchEvent(h)},bind:function(a,b,c,d){return d=d||!1,a.addEventListener?a.addEventListener(b,c,d):a.attachEvent&&a.attachEvent("on"+b,c),f},unbind:function(a,b,c,d){return d=d||!1,a.removeEventListener?a.removeEventListener(b,c,d):a.detachEvent&&a.detachEvent("on"+b,c),f},addClass:function(a,b){if(void 0===a.className)a.className=b;else if(a.className!==b){var c=a.className.split(/ +/);-1==c.indexOf(b)&&(c.push(b),a.className=c.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return f},removeClass:function(a,b){if(b)if(void 0===a.className);else if(a.className===b)a.removeAttribute("class");else{var c=a.className.split(/ +/),d=c.indexOf(b);-1!=d&&(c.splice(d,1),a.className=c.join(" "))}else a.className=void 0;return f},hasClass:function(a,b){return new RegExp("(?:^|\\s+)"+b+"(?:\\s+|$)").test(a.className)||!1},getWidth:function(a){var c=getComputedStyle(a);return b(c["border-left-width"])+b(c["border-right-width"])+b(c["padding-left"])+b(c["padding-right"])+b(c.width)},getHeight:function(a){var c=getComputedStyle(a);return b(c["border-top-width"])+b(c["border-bottom-width"])+b(c["padding-top"])+b(c["padding-bottom"])+b(c.height)},getOffset:function(a){var b={left:0,top:0};if(a.offsetParent)do b.left+=a.offsetLeft,b.top+=a.offsetTop;while(a=a.offsetParent);return b},isActive:function(a){return a===document.activeElement&&(a.type||a.href)}};return f}(c.utils.common),c.controllers.OptionController=function(a,b,c){var d=function(a,e,f){d.superclass.call(this,a,e);var g=this;if(this.__select=document.createElement("select"),c.isArray(f)){var h={};c.each(f,function(a){h[a]=a}),f=h}c.each(f,function(a,b){var c=document.createElement("option");c.innerHTML=b,c.setAttribute("value",a),g.__select.appendChild(c)}),this.updateDisplay(),b.bind(this.__select,"change",function(){var a=this.options[this.selectedIndex].value;g.setValue(a)}),this.domElement.appendChild(this.__select)};return d.superclass=a,c.extend(d.prototype,a.prototype,{setValue:function(a){var b=d.superclass.prototype.setValue.call(this,a);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),b},updateDisplay:function(){return this.__select.value=this.getValue(),d.superclass.prototype.updateDisplay.call(this)}}),d}(c.controllers.Controller,c.dom.dom,c.utils.common),c.controllers.NumberController=function(a,b){function c(a){return a=a.toString(),a.indexOf(".")>-1?a.length-a.indexOf(".")-1:0}var d=function(a,e,f){d.superclass.call(this,a,e),f=f||{},this.__min=f.min,this.__max=f.max,this.__step=f.step,this.__impliedStep=b.isUndefined(this.__step)?0==this.initialValue?1:Math.pow(10,Math.floor(Math.log(this.initialValue)/Math.LN10))/10:this.__step,this.__precision=c(this.__impliedStep)};return d.superclass=a,b.extend(d.prototype,a.prototype,{setValue:function(a){return void 0!==this.__min&&a<this.__min?a=this.__min:void 0!==this.__max&&a>this.__max&&(a=this.__max),void 0!==this.__step&&a%this.__step!=0&&(a=Math.round(a/this.__step)*this.__step),d.superclass.prototype.setValue.call(this,a)},min:function(a){return this.__min=a,this},max:function(a){return this.__max=a,this},step:function(a){return this.__step=a,this}}),d}(c.controllers.Controller,c.utils.common),c.controllers.NumberControllerBox=function(a,b,c){function d(a,b){var c=Math.pow(10,b);return Math.round(a*c)/c}var e=function(a,d,f){function g(){var a=parseFloat(m.__input.value);c.isNaN(a)||m.setValue(a)}function h(){g(),m.__onFinishChange&&m.__onFinishChange.call(m,m.getValue())}function i(a){b.bind(window,"mousemove",j),b.bind(window,"mouseup",k),l=a.clientY}function j(a){var b=l-a.clientY;m.setValue(m.getValue()+b*m.__impliedStep),l=a.clientY}function k(){b.unbind(window,"mousemove",j),b.unbind(window,"mouseup",k)}this.__truncationSuspended=!1,e.superclass.call(this,a,d,f);var l,m=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),b.bind(this.__input,"change",g),b.bind(this.__input,"blur",h),b.bind(this.__input,"mousedown",i),b.bind(this.__input,"keydown",function(a){13===a.keyCode&&(m.__truncationSuspended=!0,this.blur(),m.__truncationSuspended=!1)}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return e.superclass=a,c.extend(e.prototype,a.prototype,{updateDisplay:function(){return this.__input.value=this.__truncationSuspended?this.getValue():d(this.getValue(),this.__precision),e.superclass.prototype.updateDisplay.call(this)}}),e}(c.controllers.NumberController,c.dom.dom,c.utils.common),c.controllers.NumberControllerSlider=function(a,b,c,d,e){function f(a,b,c,d,e){return d+(e-d)*((a-b)/(c-b))}var g=function(a,c,d,e,h){function i(a){b.bind(window,"mousemove",j),b.bind(window,"mouseup",k),j(a)}function j(a){a.preventDefault();var c=b.getOffset(l.__background),d=b.getWidth(l.__background);return l.setValue(f(a.clientX,c.left,c.left+d,l.__min,l.__max)),!1}function k(){b.unbind(window,"mousemove",j),b.unbind(window,"mouseup",k),l.__onFinishChange&&l.__onFinishChange.call(l,l.getValue())}g.superclass.call(this,a,c,{min:d,max:e,step:h});var l=this;this.__background=document.createElement("div"),this.__foreground=document.createElement("div"),b.bind(this.__background,"mousedown",i),b.addClass(this.__background,"slider"),b.addClass(this.__foreground,"slider-fg"),this.updateDisplay(),this.__background.appendChild(this.__foreground),this.domElement.appendChild(this.__background)};return g.superclass=a,g.useDefaultStyles=function(){c.inject(e)},d.extend(g.prototype,a.prototype,{updateDisplay:function(){var a=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*a+"%",g.superclass.prototype.updateDisplay.call(this)}}),g}(c.controllers.NumberController,c.dom.dom,c.utils.css,c.utils.common,".slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}"),c.controllers.FunctionController=function(a,b,c){var d=function(a,c,e){d.superclass.call(this,a,c);var f=this;this.__button=document.createElement("div"),this.__button.innerHTML=void 0===e?"Fire":e,b.bind(this.__button,"click",function(a){return a.preventDefault(),f.fire(),!1}),b.addClass(this.__button,"button"),this.domElement.appendChild(this.__button)};return d.superclass=a,c.extend(d.prototype,a.prototype,{fire:function(){this.__onChange&&this.__onChange.call(this),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.getValue().call(this.object)}}),d}(c.controllers.Controller,c.dom.dom,c.utils.common),c.controllers.BooleanController=function(a,b,c){var d=function(a,c){function e(){f.setValue(!f.__prev)}d.superclass.call(this,a,c);var f=this;this.__prev=this.getValue(),this.__checkbox=document.createElement("input"),this.__checkbox.setAttribute("type","checkbox"),b.bind(this.__checkbox,"change",e,!1),this.domElement.appendChild(this.__checkbox),this.updateDisplay()};return d.superclass=a,c.extend(d.prototype,a.prototype,{setValue:function(a){var b=d.superclass.prototype.setValue.call(this,a);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),b},updateDisplay:function(){return this.getValue()===!0?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1,d.superclass.prototype.updateDisplay.call(this)}}),d}(c.controllers.Controller,c.dom.dom,c.utils.common),c.color.toString=function(a){return function(b){if(1==b.a||a.isUndefined(b.a)){for(var c=b.hex.toString(16);c.length<6;)c="0"+c;return"#"+c}return"rgba("+Math.round(b.r)+","+Math.round(b.g)+","+Math.round(b.b)+","+b.a+")"}}(c.utils.common),c.color.interpret=function(a,b){var c,d,e=function(){d=!1;var a=arguments.length>1?b.toArray(arguments):arguments[0];return b.each(f,function(e){return e.litmus(a)?(b.each(e.conversions,function(e,f){return c=e.read(a),d===!1&&c!==!1?(d=c,c.conversionName=f,c.conversion=e,b.BREAK):void 0}),b.BREAK):void 0}),d},f=[{litmus:b.isString,conversions:{THREE_CHAR_HEX:{read:function(a){var b=a.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null===b?!1:{space:"HEX",hex:parseInt("0x"+b[1].toString()+b[1].toString()+b[2].toString()+b[2].toString()+b[3].toString()+b[3].toString())}},write:a},SIX_CHAR_HEX:{read:function(a){var b=a.match(/^#([A-F0-9]{6})$/i);return null===b?!1:{space:"HEX",hex:parseInt("0x"+b[1].toString())}},write:a},CSS_RGB:{read:function(a){var b=a.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null===b?!1:{space:"RGB",r:parseFloat(b[1]),g:parseFloat(b[2]),b:parseFloat(b[3])}},write:a},CSS_RGBA:{read:function(a){var b=a.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null===b?!1:{space:"RGB",r:parseFloat(b[1]),g:parseFloat(b[2]),b:parseFloat(b[3]),a:parseFloat(b[4])}},write:a}}},{litmus:b.isNumber,conversions:{HEX:{read:function(a){return{space:"HEX",hex:a,conversionName:"HEX"}},write:function(a){return a.hex}}}},{litmus:b.isArray,conversions:{RGB_ARRAY:{read:function(a){return 3!=a.length?!1:{space:"RGB",r:a[0],g:a[1],b:a[2]}},write:function(a){return[a.r,a.g,a.b]}},RGBA_ARRAY:{read:function(a){return 4!=a.length?!1:{space:"RGB",r:a[0],g:a[1],b:a[2],a:a[3]}},write:function(a){return[a.r,a.g,a.b,a.a]}}}},{litmus:b.isObject,conversions:{RGBA_OBJ:{read:function(a){return b.isNumber(a.r)&&b.isNumber(a.g)&&b.isNumber(a.b)&&b.isNumber(a.a)?{space:"RGB",r:a.r,g:a.g,b:a.b,a:a.a}:!1},write:function(a){return{r:a.r,g:a.g,b:a.b,a:a.a}}},RGB_OBJ:{read:function(a){return b.isNumber(a.r)&&b.isNumber(a.g)&&b.isNumber(a.b)?{space:"RGB",r:a.r,g:a.g,b:a.b}:!1},write:function(a){return{r:a.r,g:a.g,b:a.b}}},HSVA_OBJ:{read:function(a){return b.isNumber(a.h)&&b.isNumber(a.s)&&b.isNumber(a.v)&&b.isNumber(a.a)?{space:"HSV",h:a.h,s:a.s,v:a.v,a:a.a}:!1},write:function(a){return{h:a.h,s:a.s,v:a.v,a:a.a}}},HSV_OBJ:{read:function(a){return b.isNumber(a.h)&&b.isNumber(a.s)&&b.isNumber(a.v)?{space:"HSV",h:a.h,s:a.s,v:a.v}:!1},write:function(a){return{h:a.h,s:a.s,v:a.v}}}}}];return e}(c.color.toString,c.utils.common),c.GUI=c.gui.GUI=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(a,b,c,f){if(void 0===b[c])throw new Error("Object "+b+' has no property "'+c+'"');var g;if(f.color)g=new k(b,c);else{var h=[b,c].concat(f.factoryArgs);g=d.apply(a,h)}f.before instanceof e&&(f.before=f.before.__li),s(a,g),n.addClass(g.domElement,"c");var i=document.createElement("span");n.addClass(i,"property-name"),i.innerHTML=g.property;var j=document.createElement("div");j.appendChild(i),j.appendChild(g.domElement);var l=q(a,j,f.before);return n.addClass(l,M.CLASS_CONTROLLER_ROW),n.addClass(l,typeof g.getValue()),r(a,l,g),a.__controllers.push(g),g}function q(a,b,c){var d=document.createElement("li");return b&&d.appendChild(b),c?a.__ul.insertBefore(d,params.before):a.__ul.appendChild(d),a.onResize(),d}function r(a,b,c){if(c.__li=b,c.__gui=a,o.extend(c,{options:function(b){return arguments.length>1?(c.remove(),p(a,c.object,c.property,{before:c.__li.nextElementSibling,factoryArgs:[o.toArray(arguments)]})):o.isArray(b)||o.isObject(b)?(c.remove(),p(a,c.object,c.property,{before:c.__li.nextElementSibling,factoryArgs:[b]})):void 0},name:function(a){return c.__li.firstElementChild.firstElementChild.innerHTML=a,c},listen:function(){return c.__gui.listen(c),c},remove:function(){return c.__gui.remove(c),c}}),c instanceof i){var d=new h(c.object,c.property,{min:c.__min,max:c.__max,step:c.__step});o.each(["updateDisplay","onChange","onFinishChange"],function(a){var b=c[a],e=d[a];c[a]=d[a]=function(){var a=Array.prototype.slice.call(arguments);return b.apply(c,a),e.apply(d,a)}}),n.addClass(b,"has-slider"),c.domElement.insertBefore(d.domElement,c.domElement.firstElementChild)}else if(c instanceof h){var e=function(b){return o.isNumber(c.__min)&&o.isNumber(c.__max)?(c.remove(),p(a,c.object,c.property,{before:c.__li.nextElementSibling,factoryArgs:[c.__min,c.__max,c.__step]})):b};c.min=o.compose(e,c.min),c.max=o.compose(e,c.max)}else c instanceof f?(n.bind(b,"click",function(){n.fakeEvent(c.__checkbox,"click")}),n.bind(c.__checkbox,"click",function(a){a.stopPropagation()})):c instanceof g?(n.bind(b,"click",function(){n.fakeEvent(c.__button,"click")}),n.bind(b,"mouseover",function(){n.addClass(c.__button,"hover")}),n.bind(b,"mouseout",function(){n.removeClass(c.__button,"hover")})):c instanceof k&&(n.addClass(b,"color"),c.updateDisplay=o.compose(function(a){return b.style.borderLeftColor=c.__color.toString(),a},c.updateDisplay),c.updateDisplay());c.setValue=o.compose(function(b){return a.getRoot().__preset_select&&c.isModified()&&A(a.getRoot(),!0),b},c.setValue)}function s(a,b){var c=a.getRoot(),d=c.__rememberedObjects.indexOf(b.object);if(-1!=d){var e=c.__rememberedObjectIndecesToControllers[d];if(void 0===e&&(e={},c.__rememberedObjectIndecesToControllers[d]=e),e[b.property]=b,c.load&&c.load.remembered){var f,g=c.load.remembered;if(g[a.preset])f=g[a.preset];else{if(!g[H])return;f=g[H]}if(f[d]&&void 0!==f[d][b.property]){var h=f[d][b.property];b.initialValue=h,b.setValue(h)}}}}function t(a,b){return document.location.href+"."+b}function u(a){function b(){j.style.display=a.useLocalStorage?"block":"none"}var c=a.__save_row=document.createElement("li");n.addClass(a.domElement,"has-save"),a.__ul.insertBefore(c,a.__ul.firstChild),n.addClass(c,"save-row");var d=document.createElement("span");d.innerHTML="&nbsp;",n.addClass(d,"button gears");var e=document.createElement("span");e.innerHTML="Save",n.addClass(e,"button"),n.addClass(e,"save");var f=document.createElement("span");f.innerHTML="New",n.addClass(f,"button"),n.addClass(f,"save-as");var g=document.createElement("span");g.innerHTML="Revert",n.addClass(g,"button"),n.addClass(g,"revert");var h=a.__preset_select=document.createElement("select");if(a.load&&a.load.remembered?o.each(a.load.remembered,function(b,c){y(a,c,c==a.preset)}):y(a,H,!1),n.bind(h,"change",function(){for(var b=0;b<a.__preset_select.length;b++)a.__preset_select[b].innerHTML=a.__preset_select[b].value;a.preset=this.value}),c.appendChild(h),c.appendChild(d),c.appendChild(e),c.appendChild(f),c.appendChild(g),I){var i=document.getElementById("dg-save-locally"),j=document.getElementById("dg-local-explain");i.style.display="block";var k=document.getElementById("dg-local-storage");"true"===localStorage.getItem(t(a,"isLocal"))&&k.setAttribute("checked","checked"),b(),n.bind(k,"change",function(){a.useLocalStorage=!a.useLocalStorage,b()})}var l=document.getElementById("dg-new-constructor");n.bind(l,"keydown",function(a){!a.metaKey||67!==a.which&&67!=a.keyCode||C.hide()}),n.bind(d,"click",function(){l.innerHTML=JSON.stringify(a.getSaveObject(),void 0,2),C.show(),l.focus(),l.select()}),n.bind(e,"click",function(){a.save()}),n.bind(f,"click",function(){var b=prompt("Enter a new preset name.");b&&a.saveAs(b)}),n.bind(g,"click",function(){a.revert()})}function v(a){function b(b){return b.preventDefault(),e=b.clientX,n.addClass(a.__closeButton,M.CLASS_DRAG),n.bind(window,"mousemove",c),n.bind(window,"mouseup",d),!1}function c(b){return b.preventDefault(),a.width+=e-b.clientX,a.onResize(),e=b.clientX,!1}function d(){n.removeClass(a.__closeButton,M.CLASS_DRAG),n.unbind(window,"mousemove",c),n.unbind(window,"mouseup",d)}a.__resize_handle=document.createElement("div"),o.extend(a.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});var e;n.bind(a.__resize_handle,"mousedown",b),n.bind(a.__closeButton,"mousedown",b),a.domElement.insertBefore(a.__resize_handle,a.domElement.firstElementChild)}function w(a,b){a.domElement.style.width=b+"px",a.__save_row&&a.autoPlace&&(a.__save_row.style.width=b+"px"),a.__closeButton&&(a.__closeButton.style.width=b+"px")}function x(a,b){var c={};return o.each(a.__rememberedObjects,function(d,e){var f={},g=a.__rememberedObjectIndecesToControllers[e];o.each(g,function(a,c){f[c]=b?a.initialValue:a.getValue()}),c[e]=f}),c}function y(a,b,c){var d=document.createElement("option");d.innerHTML=b,d.value=b,a.__preset_select.appendChild(d),c&&(a.__preset_select.selectedIndex=a.__preset_select.length-1)}function z(a){for(var b=0;b<a.__preset_select.length;b++)a.__preset_select[b].value==a.preset&&(a.__preset_select.selectedIndex=b)}function A(a,b){var c=a.__preset_select[a.__preset_select.selectedIndex];c.innerHTML=b?c.value+"*":c.value}function B(a){0!=a.length&&l(function(){B(a)}),o.each(a,function(a){a.updateDisplay()})}a.inject(c);var C,D,E="dg",F=72,G=20,H="Default",I=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(a){return!1}}(),J=!0,K=!1,L=[],M=function(a){function b(){localStorage.setItem(t(d,"gui"),JSON.stringify(d.getSaveObject()))}function c(){var a=d.getRoot();a.width+=1,o.defer(function(){a.width-=1})}var d=this;this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),n.addClass(this.domElement,E),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],a=a||{},a=o.defaults(a,{autoPlace:!0,width:M.DEFAULT_WIDTH}),a=o.defaults(a,{resizable:a.autoPlace,hideable:a.autoPlace}),o.isUndefined(a.load)?a.load={preset:H}:a.preset&&(a.load.preset=a.preset),o.isUndefined(a.parent)&&a.hideable&&L.push(this),a.resizable=o.isUndefined(a.parent)&&a.resizable,a.autoPlace&&o.isUndefined(a.scrollable)&&(a.scrollable=!0);var e=I&&"true"===localStorage.getItem(t(this,"isLocal"));if(Object.defineProperties(this,{parent:{get:function(){return a.parent}},scrollable:{get:function(){return a.scrollable}},autoPlace:{get:function(){return a.autoPlace}},preset:{get:function(){return d.parent?d.getRoot().preset:a.load.preset},set:function(b){d.parent?d.getRoot().preset=b:a.load.preset=b,z(this),d.revert()}},width:{get:function(){return a.width},set:function(b){a.width=b,w(d,b)}},name:{get:function(){return a.name},set:function(b){a.name=b,g&&(g.innerHTML=a.name)}},closed:{get:function(){return a.closed},set:function(b){a.closed=b,a.closed?n.addClass(d.__ul,M.CLASS_CLOSED):n.removeClass(d.__ul,M.CLASS_CLOSED),this.onResize(),d.__closeButton&&(d.__closeButton.innerHTML=b?M.TEXT_OPEN:M.TEXT_CLOSED)}},load:{get:function(){return a.load}},useLocalStorage:{get:function(){return e},set:function(a){I&&(e=a,a?n.bind(window,"unload",b):n.unbind(window,"unload",b),localStorage.setItem(t(d,"isLocal"),a))}}}),o.isUndefined(a.parent)){if(a.closed=!1,n.addClass(this.domElement,M.CLASS_MAIN),n.makeSelectable(this.domElement,!1),I&&e){d.useLocalStorage=!0;var f=localStorage.getItem(t(this,"gui"));f&&(a.load=JSON.parse(f))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=M.TEXT_CLOSED,n.addClass(this.__closeButton,M.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),n.bind(this.__closeButton,"click",function(){d.closed=!d.closed})}else{void 0===a.closed&&(a.closed=!0);var g=document.createTextNode(a.name);n.addClass(g,"controller-name");var h=q(d,g),i=function(a){return a.preventDefault(),d.closed=!d.closed,!1};n.addClass(this.__ul,M.CLASS_CLOSED),n.addClass(h,"title"),n.bind(h,"click",i),a.closed||(this.closed=!1)}a.autoPlace&&(o.isUndefined(a.parent)&&(J&&(D=document.createElement("div"),n.addClass(D,E),n.addClass(D,M.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(D),J=!1),D.appendChild(this.domElement),n.addClass(this.domElement,M.CLASS_AUTO_PLACE)),this.parent||w(d,a.width)),n.bind(window,"resize",function(){d.onResize()}),n.bind(this.__ul,"webkitTransitionEnd",function(){d.onResize()}),n.bind(this.__ul,"transitionend",function(){d.onResize()}),n.bind(this.__ul,"oTransitionEnd",function(){d.onResize()}),this.onResize(),a.resizable&&v(this);d.getRoot();a.parent||c()};return M.toggleHide=function(){K=!K,o.each(L,function(a){a.domElement.style.zIndex=K?-999:999,a.domElement.style.opacity=K?0:1})},M.CLASS_AUTO_PLACE="a",M.CLASS_AUTO_PLACE_CONTAINER="ac",M.CLASS_MAIN="main",M.CLASS_CONTROLLER_ROW="cr",M.CLASS_TOO_TALL="taller-than-window",M.CLASS_CLOSED="closed",M.CLASS_CLOSE_BUTTON="close-button",M.CLASS_DRAG="drag",M.DEFAULT_WIDTH=245,M.TEXT_CLOSED="Close Controls",M.TEXT_OPEN="Open Controls",n.bind(window,"keydown",function(a){"text"===document.activeElement.type||a.which!==F&&a.keyCode!=F||M.toggleHide()},!1),o.extend(M.prototype,{add:function(a,b){return p(this,a,b,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(a,b){return p(this,a,b,{color:!0})},remove:function(a){this.__ul.removeChild(a.__li),this.__controllers.slice(this.__controllers.indexOf(a),1);var b=this;o.defer(function(){b.onResize()})},destroy:function(){this.autoPlace&&D.removeChild(this.domElement)},addFolder:function(a){if(void 0!==this.__folders[a])throw new Error('You already have a folder in this GUI by the name "'+a+'"');var b={name:a,parent:this};b.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[a]&&(b.closed=this.load.folders[a].closed,b.load=this.load.folders[a]);var c=new M(b);this.__folders[a]=c;var d=q(this,c.domElement);return n.addClass(d,"folder"),c},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var a=this.getRoot();if(a.scrollable){var b=n.getOffset(a.__ul).top,c=0;o.each(a.__ul.childNodes,function(b){a.autoPlace&&b===a.__save_row||(c+=n.getHeight(b))}),window.innerHeight-b-G<c?(n.addClass(a.domElement,M.CLASS_TOO_TALL),a.__ul.style.height=window.innerHeight-b-G+"px"):(n.removeClass(a.domElement,M.CLASS_TOO_TALL),a.__ul.style.height="auto")}a.__resize_handle&&o.defer(function(){a.__resize_handle.style.height=a.__ul.offsetHeight+"px"}),a.__closeButton&&(a.__closeButton.style.width=a.width+"px")},remember:function(){if(o.isUndefined(C)&&(C=new m,C.domElement.innerHTML=b),this.parent)throw new Error("You can only call remember on a top level GUI.");var a=this;o.each(Array.prototype.slice.call(arguments),function(b){0==a.__rememberedObjects.length&&u(a),-1==a.__rememberedObjects.indexOf(b)&&a.__rememberedObjects.push(b)}),this.autoPlace&&w(this,this.width)},getRoot:function(){for(var a=this;a.parent;)a=a.parent;return a},getSaveObject:function(){var a=this.load;return a.closed=this.closed,this.__rememberedObjects.length>0&&(a.preset=this.preset,a.remembered||(a.remembered={}),a.remembered[this.preset]=x(this)),a.folders={},o.each(this.__folders,function(b,c){a.folders[c]=b.getSaveObject()}),a},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=x(this),A(this,!1)},saveAs:function(a){this.load.remembered||(this.load.remembered={},this.load.remembered[H]=x(this,!0)),this.load.remembered[a]=x(this),this.preset=a,y(this,a,!0)},revert:function(a){o.each(this.__controllers,function(b){this.getRoot().load.remembered?s(a||this.getRoot(),b):b.setValue(b.initialValue)},this),o.each(this.__folders,function(a){a.revert(a)}),a||A(this.getRoot(),!1)},listen:function(a){var b=0==this.__listening.length;this.__listening.push(a),b&&B(this.__listening)}}),M}(c.utils.css,'<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>',".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear;border:0;position:absolute;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-x:hidden}.dg.a.has-save ul{margin-top:27px}.dg.a.has-save ul.closed{margin-top:0}.dg.a .save-row{position:fixed;top:0;z-index:1002}.dg li{-webkit-transition:height 0.1s ease-out;-o-transition:height 0.1s ease-out;-moz-transition:height 0.1s ease-out;transition:height 0.1s ease-out}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;overflow:hidden;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li > *{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:9px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n",c.controllers.factory=function(a,b,c,d,e,f,g){return function(h,i){var j=h[i];
return g.isArray(arguments[2])||g.isObject(arguments[2])?new a(h,i,arguments[2]):g.isNumber(j)?g.isNumber(arguments[2])&&g.isNumber(arguments[3])?new c(h,i,arguments[2],arguments[3]):new b(h,i,{min:arguments[2],max:arguments[3]}):g.isString(j)?new d(h,i):g.isFunction(j)?new e(h,i,""):g.isBoolean(j)?new f(h,i):void 0}}(c.controllers.OptionController,c.controllers.NumberControllerBox,c.controllers.NumberControllerSlider,c.controllers.StringController=function(a,b,c){var d=function(a,c){function e(){g.setValue(g.__input.value)}function f(){g.__onFinishChange&&g.__onFinishChange.call(g,g.getValue())}d.superclass.call(this,a,c);var g=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),b.bind(this.__input,"keyup",e),b.bind(this.__input,"change",e),b.bind(this.__input,"blur",f),b.bind(this.__input,"keydown",function(a){13===a.keyCode&&this.blur()}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return d.superclass=a,c.extend(d.prototype,a.prototype,{updateDisplay:function(){return b.isActive(this.__input)||(this.__input.value=this.getValue()),d.superclass.prototype.updateDisplay.call(this)}}),d}(c.controllers.Controller,c.dom.dom,c.utils.common),c.controllers.FunctionController,c.controllers.BooleanController,c.utils.common),c.controllers.Controller,c.controllers.BooleanController,c.controllers.FunctionController,c.controllers.NumberControllerBox,c.controllers.NumberControllerSlider,c.controllers.OptionController,c.controllers.ColorController=function(a,b,c,d,e){function f(a,b,c,d){a.style.background="",e.each(i,function(e){a.style.cssText+="background: "+e+"linear-gradient("+b+", "+c+" 0%, "+d+" 100%); "})}function g(a){a.style.background="",a.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",a.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",a.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",a.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",a.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var h=function(a,i){function j(a){n(a),b.bind(window,"mousemove",n),b.bind(window,"mouseup",k)}function k(){b.unbind(window,"mousemove",n),b.unbind(window,"mouseup",k)}function l(){var a=d(this.value);a!==!1?(p.__color.__state=a,p.setValue(p.__color.toOriginal())):this.value=p.__color.toString()}function m(){b.unbind(window,"mousemove",o),b.unbind(window,"mouseup",m)}function n(a){a.preventDefault();var c=b.getWidth(p.__saturation_field),d=b.getOffset(p.__saturation_field),e=(a.clientX-d.left+document.body.scrollLeft)/c,f=1-(a.clientY-d.top+document.body.scrollTop)/c;return f>1?f=1:0>f&&(f=0),e>1?e=1:0>e&&(e=0),p.__color.v=f,p.__color.s=e,p.setValue(p.__color.toOriginal()),!1}function o(a){a.preventDefault();var c=b.getHeight(p.__hue_field),d=b.getOffset(p.__hue_field),e=1-(a.clientY-d.top+document.body.scrollTop)/c;return e>1?e=1:0>e&&(e=0),p.__color.h=360*e,p.setValue(p.__color.toOriginal()),!1}h.superclass.call(this,a,i),this.__color=new c(this.getValue()),this.__temp=new c(0);var p=this;this.domElement=document.createElement("div"),b.makeSelectable(this.domElement,!1),this.__selector=document.createElement("div"),this.__selector.className="selector",this.__saturation_field=document.createElement("div"),this.__saturation_field.className="saturation-field",this.__field_knob=document.createElement("div"),this.__field_knob.className="field-knob",this.__field_knob_border="2px solid ",this.__hue_knob=document.createElement("div"),this.__hue_knob.className="hue-knob",this.__hue_field=document.createElement("div"),this.__hue_field.className="hue-field",this.__input=document.createElement("input"),this.__input.type="text",this.__input_textShadow="0 1px 1px ",b.bind(this.__input,"keydown",function(a){13===a.keyCode&&l.call(this)}),b.bind(this.__input,"blur",l),b.bind(this.__selector,"mousedown",function(){b.addClass(this,"drag").bind(window,"mouseup",function(){b.removeClass(p.__selector,"drag")})});var q=document.createElement("div");e.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),e.extend(this.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(this.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),e.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),e.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),e.extend(q.style,{width:"100%",height:"100%",background:"none"}),f(q,"top","rgba(0,0,0,0)","#000"),e.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"}),g(this.__hue_field),e.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"}),b.bind(this.__saturation_field,"mousedown",j),b.bind(this.__field_knob,"mousedown",j),b.bind(this.__hue_field,"mousedown",function(a){o(a),b.bind(window,"mousemove",o),b.bind(window,"mouseup",m)}),this.__saturation_field.appendChild(q),this.__selector.appendChild(this.__field_knob),this.__selector.appendChild(this.__saturation_field),this.__selector.appendChild(this.__hue_field),this.__hue_field.appendChild(this.__hue_knob),this.domElement.appendChild(this.__input),this.domElement.appendChild(this.__selector),this.updateDisplay()};h.superclass=a,e.extend(h.prototype,a.prototype,{updateDisplay:function(){var a=d(this.getValue());if(a!==!1){var b=!1;e.each(c.COMPONENTS,function(c){return e.isUndefined(a[c])||e.isUndefined(this.__color.__state[c])||a[c]===this.__color.__state[c]?void 0:(b=!0,{})},this),b&&e.extend(this.__color.__state,a)}e.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var g=this.__color.v<.5||this.__color.s>.5?255:0,h=255-g;e.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+g+","+g+","+g+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,f(this.__saturation_field,"left","#fff",this.__temp.toString()),e.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+g+","+g+","+g+")",textShadow:this.__input_textShadow+"rgba("+h+","+h+","+h+",.7)"})}});var i=["-moz-","-o-","-webkit-","-ms-",""];return h}(c.controllers.Controller,c.dom.dom,c.color.Color=function(a,b,c,d){function e(a,b,c){Object.defineProperty(a,b,{get:function(){return"RGB"===this.__state.space?this.__state[b]:(g(this,b,c),this.__state[b])},set:function(a){"RGB"!==this.__state.space&&(g(this,b,c),this.__state.space="RGB"),this.__state[b]=a}})}function f(a,b){Object.defineProperty(a,b,{get:function(){return"HSV"===this.__state.space?this.__state[b]:(h(this),this.__state[b])},set:function(a){"HSV"!==this.__state.space&&(h(this),this.__state.space="HSV"),this.__state[b]=a}})}function g(a,c,e){if("HEX"===a.__state.space)a.__state[c]=b.component_from_hex(a.__state.hex,e);else{if("HSV"!==a.__state.space)throw"Corrupted color state";d.extend(a.__state,b.hsv_to_rgb(a.__state.h,a.__state.s,a.__state.v))}}function h(a){var c=b.rgb_to_hsv(a.r,a.g,a.b);d.extend(a.__state,{s:c.s,v:c.v}),d.isNaN(c.h)?d.isUndefined(a.__state.h)&&(a.__state.h=0):a.__state.h=c.h}var i=function(){if(this.__state=a.apply(this,arguments),this.__state===!1)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};return i.COMPONENTS=["r","g","b","h","s","v","hex","a"],d.extend(i.prototype,{toString:function(){return c(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),e(i.prototype,"r",2),e(i.prototype,"g",1),e(i.prototype,"b",0),f(i.prototype,"h"),f(i.prototype,"s"),f(i.prototype,"v"),Object.defineProperty(i.prototype,"a",{get:function(){return this.__state.a},set:function(a){this.__state.a=a}}),Object.defineProperty(i.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=b.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(a){this.__state.space="HEX",this.__state.hex=a}}),i}(c.color.interpret,c.color.math=function(){var a;return{hsv_to_rgb:function(a,b,c){var d=Math.floor(a/60)%6,e=a/60-Math.floor(a/60),f=c*(1-b),g=c*(1-e*b),h=c*(1-(1-e)*b),i=[[c,h,f],[g,c,f],[f,c,h],[f,g,c],[h,f,c],[c,f,g]][d];return{r:255*i[0],g:255*i[1],b:255*i[2]}},rgb_to_hsv:function(a,b,c){var d,e,f=Math.min(a,b,c),g=Math.max(a,b,c),h=g-f;return 0==g?{h:0/0,s:0,v:0}:(e=h/g,d=a==g?(b-c)/h:b==g?2+(c-a)/h:4+(a-b)/h,d/=6,0>d&&(d+=1),{h:360*d,s:e,v:g/255})},rgb_to_hex:function(a,b,c){var d=this.hex_with_component(0,2,a);return d=this.hex_with_component(d,1,b),d=this.hex_with_component(d,0,c)},component_from_hex:function(a,b){return a>>8*b&255},hex_with_component:function(b,c,d){return d<<(a=8*c)|b&~(255<<a)}}}(),c.color.toString,c.utils.common),c.color.interpret,c.utils.common),c.utils.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}(),c.dom.CenteredDiv=function(a,b){var c=function(){this.backgroundElement=document.createElement("div"),b.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear"}),a.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),b.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var c=this;a.bind(this.backgroundElement,"click",function(){c.hide()})};return c.prototype.show=function(){var a=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),b.defer(function(){a.backgroundElement.style.opacity=1,a.domElement.style.opacity=1,a.domElement.style.webkitTransform="scale(1)"})},c.prototype.hide=function(){var b=this,c=function(){b.domElement.style.display="none",b.backgroundElement.style.display="none",a.unbind(b.domElement,"webkitTransitionEnd",c),a.unbind(b.domElement,"transitionend",c),a.unbind(b.domElement,"oTransitionEnd",c)};a.bind(this.domElement,"webkitTransitionEnd",c),a.bind(this.domElement,"transitionend",c),a.bind(this.domElement,"oTransitionEnd",c),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"},c.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-a.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-a.getHeight(this.domElement)/2+"px"},c}(c.dom.dom,c.utils.common),c.dom.dom,c.utils.common)},{}],19:[function(a,b,c){function d(a){return a.concat(a[1].exec(navigator.userAgent))}function e(a){return!!a[2]}for(var f=[["chrome",/Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+)\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/iPad\;\sCPU\sOS\s([0-9\._]+)/],["ios",/iPhone\;\sCPU\siPhone\sOS\s([0-9\._]+)/],["safari",/Safari\/([0-9\._]+)/]],d=f.map(d).filter(e)[0],g=d&&d[3].split(/[._]/).slice(0,3);g&&g.length<3;)g.push("0");c.name=d&&d[0],c.version=g&&g.join(".")},{}],20:[function(a,b){b.exports=a("./lib/detect-dom-ready")},{"./lib/detect-dom-ready":21}],21:[function(a,b){"use strict";b.exports=function(a){if(document.addEventListener)document.addEventListener("DOMContentLoaded",function(){a()},!1);else if(document.attachEvent&&(document.attachEvent("onreadystatechange",function(){return"complete"===document.readyState?void a():void 0}),document.documentElement.doScroll&&window===window.top)){try{document.documentElement.doScroll("left")}catch(b){return void a()}return void a()}}},{}],22:[function(a,b){function c(a,b,c){var d=i[b];if("undefined"==typeof d&&(d=e(b)),d){if(void 0===c)return a.style[d];"number"==typeof c&&(c+=j[d]||""),a.style[d]=c}}function d(a,b){for(var d in b)b.hasOwnProperty(d)&&c(a,d,b[d])}function e(a){var b=h(a),c=g(b);return i[b]=i[a]=i[c]=c,c}function f(){"use strict";2===arguments.length?d(arguments[0],arguments[1]):c(arguments[0],arguments[1],arguments[2])}var g=a("prefix-style"),h=a("to-camel-case"),i={"float":"cssFloat"},j={};["top","right","bottom","left","width","height","fontSize","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","padding","margin","perspective"].forEach(function(a){j[a]="px"}),b.exports=f,b.exports.set=f,b.exports.get=function(a,b){return Array.isArray(b)?b.reduce(function(b,d){return b[d]=c(a,d||""),b},{}):c(a,b||"")}},{"prefix-style":23,"to-camel-case":24}],23:[function(a,b){var c=null;b.exports=function(a){var b=["Moz","Khtml","Webkit","O","ms"],d=a.charAt(0).toUpperCase()+a.slice(1);if(c||(c=document.createElement("div")),a in c.style)return a;for(var e=b.length;e--;)if(b[e]+d in c.style)return b[e]+d;return!1}},{}],24:[function(a,b){function c(a){return d(a).replace(/\s(\w)/g,function(a,b){return b.toUpperCase()})}var d=a("to-space-case");b.exports=c},{"to-space-case":25}],25:[function(a,b){function c(a){return d(a).replace(/[\W_]+(.|$)/g,function(a,b){return b?" "+b:""})}var d=a("to-no-case");b.exports=c},{"to-no-case":26}],26:[function(a,b){function c(a){return f.test(a)?a.toLowerCase():(h.test(a)&&(a=d(a)),g.test(a)&&(a=e(a)),a.toLowerCase())}function d(a){return a.replace(i,function(a,b){return b?" "+b:""})}function e(a){return a.replace(j,function(a,b,c){return b+" "+c.toLowerCase().split("").join(" ")})}b.exports=c;var f=/\s/,g=/[a-z][A-Z]/,h=/[\W_]/,i=/[\W_]+(.|$)/g,j=/(.)([A-Z]+)/g},{}],27:[function(a,b,c){arguments[4][14][0].apply(c,arguments)},{dup:14}],28:[function(a,b){function c(a,b){return e(a,b)}function d(a,b){return c(a,b)[0]}var e=a("qwery");b.exports={one:d,all:c}},{qwery:30}],29:[function(a,b){function c(a,b){return b||(b=document),b.querySelector?b.querySelector(a):e.one(a,b)}function d(a,b){return b||(b=document),b.querySelectorAll?b.querySelectorAll(a):e.all(a,b)}var e=a("./fallback");b.exports=c,b.exports.all=d},{"./fallback":28}],30:[function(a,b){/*!
  * @preserve Qwery - A Blazing Fast query selector engine
  * https://github.com/ded/qwery
  * copyright Dustin Diaz 2012
  * MIT License
  */
!function(a,c,d){"undefined"!=typeof b&&b.exports?b.exports=d():"function"==typeof define&&define.amd?define(d):c[a]=d()}("qwery",this,function(){function a(){this.c={}}function b(a){return W.g(a)||W.s(a,"(^|\\s+)"+a+"(\\s+|$)",1)}function c(a,b){for(var c=0,d=a.length;d>c;c++)b(a[c])}function d(a){for(var b=[],c=0,d=a.length;d>c;++c)p(a[c])?b=b.concat(a[c]):b[b.length]=a[c];return b}function e(a){for(var b=0,c=a.length,d=[];c>b;b++)d[b]=a[b];return d}function f(a){for(;(a=a.previousSibling)&&1!=a[C];);return a}function g(a){return a.match(U)}function h(a,c,d,e,f,g,h,i,k,l,m){var n,o,p,q,r;if(1!==this[C])return!1;if(c&&"*"!==c&&this[B]&&this[B].toLowerCase()!==c)return!1;if(d&&(o=d.match(D))&&o[1]!==this.id)return!1;if(d&&(r=d.match(E)))for(n=r.length;n--;)if(!b(r[n].slice(1)).test(this.className))return!1;if(k&&s.pseudos[k]&&!s.pseudos[k](this,m))return!1;if(e&&!h){q=this.attributes;for(p in q)if(Object.prototype.hasOwnProperty.call(q,p)&&(q[p].name||p)==f)return this}return e&&!j(g,_(this,f)||"",h)?!1:this}function i(a){return X.g(a)||X.s(a,a.replace(N,"\\$1"))}function j(a,b,c){switch(a){case"=":return b==c;case"^=":return b.match(Y.g("^="+c)||Y.s("^="+c,"^"+i(c),1));case"$=":return b.match(Y.g("$="+c)||Y.s("$="+c,i(c)+"$",1));case"*=":return b.match(Y.g(c)||Y.s(c,i(c),1));case"~=":return b.match(Y.g("~="+c)||Y.s("~="+c,"(?:^|\\s+)"+i(c)+"(?:\\s+|$)",1));case"|=":return b.match(Y.g("|="+c)||Y.s("|="+c,"^"+i(c)+"(-|$)",1))}return 0}function k(a,b){var d,e,f,i,j,k,l,n=[],o=[],p=b,q=Z.g(a)||Z.s(a,a.split(T)),s=a.match(S);if(!q.length)return n;if(i=(q=q.slice(0)).pop(),q.length&&(f=q[q.length-1].match(F))&&(p=r(b,f[1])),!p)return n;for(k=g(i),j=p!==b&&9!==p[C]&&s&&/^[+~]$/.test(s[s.length-1])?function(a){for(;p=p.nextSibling;)1==p[C]&&(k[1]?k[1]==p[B].toLowerCase():1)&&(a[a.length]=p);return a}([]):p[y](k[1]||"*"),d=0,e=j.length;e>d;d++)(l=h.apply(j[d],k))&&(n[n.length]=l);return q.length?(c(n,function(a){m(a,q,s)&&(o[o.length]=a)}),o):n}function l(a,b,c){if(n(b))return a==b;if(p(b))return!!~d(b).indexOf(a);for(var e,f,i=b.split(",");b=i.pop();)if(e=Z.g(b)||Z.s(b,b.split(T)),f=b.match(S),e=e.slice(0),h.apply(a,g(e.pop()))&&(!e.length||m(a,e,f,c)))return!0;return!1}function m(a,b,c,d){function e(a,d,i){for(;i=V[c[d]](i,a);)if(n(i)&&h.apply(i,g(b[d]))){if(!d)return i;if(f=e(i,d-1,i))return f}}var f;return(f=e(a,b.length-1,a))&&(!d||$(f,d))}function n(a,b){return a&&"object"==typeof a&&(b=a[C])&&(1==b||9==b)}function o(a){var b,c,d=[];a:for(b=0;b<a.length;++b){for(c=0;c<d.length;++c)if(d[c]==a[b])continue a;d[d.length]=a[b]}return d}function p(a){return"object"==typeof a&&isFinite(a.length)}function q(a){return a?"string"==typeof a?s(a)[0]:!a[C]&&p(a)?a[0]:a:v}function r(a,b,c){return 9===a[C]?a.getElementById(b):a.ownerDocument&&((c=a.ownerDocument.getElementById(b))&&$(c,a)&&c||!$(a,a.ownerDocument)&&u('[id="'+b+'"]',a)[0])}function s(a,b){var c,f,g=q(b);if(!g||!a)return[];if(a===window||n(a))return!b||a!==window&&n(g)&&$(a,g)?[a]:[];if(a&&p(a))return d(a);if(c=a.match(R)){if(c[1])return(f=r(g,c[1]))?[f]:[];if(c[2])return e(g[y](c[2]));if(ab&&c[3])return e(g[x](c[3]))}return u(a,g)}function t(a,b){return function(c){var d,e;return J.test(c)?void(9!==a[C]&&((e=d=a.getAttribute("id"))||a.setAttribute("id",e="__qwerymeupscotty"),c='[id="'+e+'"]'+c,b(a.parentNode||a,c,!0),d||a.removeAttribute("id"))):void(c.length&&b(a,c,!1))}}var u,v=document,w=v.documentElement,x="getElementsByClassName",y="getElementsByTagName",z="querySelectorAll",A="useNativeQSA",B="tagName",C="nodeType",D=/#([\w\-]+)/,E=/\.[\w\-]+/g,F=/^#([\w\-]+)$/,G=/^\.([\w\-]+)$/,H=/^([\w\-]+)$/,I=/^([\w]+)?\.([\w\-]+)$/,J=/(^|,)\s*[>~+]/,K=/^\s+|\s*([,\s\+\~>]|$)\s*/g,L=/[\s\>\+\~]/,M=/(?![\s\w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^'"]*\]|[\s\w\+\-]*\))/,N=/([.*+?\^=!:${}()|\[\]\/\\])/g,O=/^(\*|[a-z0-9]+)?(?:([\.\#]+[\w\-\.#]+)?)/,P=/\[([\w\-]+)(?:([\|\^\$\*\~]?\=)['"]?([ \w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^]+)["']?)?\]/,Q=/:([\w\-]+)(\(['"]?([^()]+)['"]?\))?/,R=new RegExp(F.source+"|"+H.source+"|"+G.source),S=new RegExp("("+L.source+")"+M.source,"g"),T=new RegExp(L.source+M.source),U=new RegExp(O.source+"("+P.source+")?("+Q.source+")?"),V={" ":function(a){return a&&a!==w&&a.parentNode},">":function(a,b){return a&&a.parentNode==b.parentNode&&a.parentNode},"~":function(a){return a&&a.previousSibling},"+":function(a,b,c,d){return a?(c=f(a))&&(d=f(b))&&c==d&&c:!1}};a.prototype={g:function(a){return this.c[a]||void 0},s:function(a,b,c){return b=c?new RegExp(b):b,this.c[a]=b}};var W=new a,X=new a,Y=new a,Z=new a,$="compareDocumentPosition"in w?function(a,b){return 16==(16&b.compareDocumentPosition(a))}:"contains"in w?function(a,b){return b=9===b[C]||b==window?w:b,b!==a&&b.contains(a)}:function(a,b){for(;a=a.parentNode;)if(a===b)return 1;return 0},_=function(){var a=v.createElement("p");return(a.innerHTML='<a href="#x">x</a>')&&"#x"!=a.firstChild.getAttribute("href")?function(a,b){return"class"===b?a.className:"href"===b||"src"===b?a.getAttribute(b,2):a.getAttribute(b)}:function(a,b){return a.getAttribute(b)}}(),ab=!!v[x],bb=v.querySelector&&v[z],cb=function(a,b){var d,f,g=[];try{return 9!==b[C]&&J.test(a)?(c(d=a.split(","),t(b,function(a,b){f=a[z](b),1==f.length?g[g.length]=f.item(0):f.length&&(g=g.concat(e(f)))})),d.length>1&&g.length>1?o(g):g):e(b[z](a))}catch(h){}return db(a,b)},db=function(a,d){var e,f,g,h,i,j,l=[];if(a=a.replace(K,"$1"),f=a.match(I)){for(i=b(f[2]),e=d[y](f[1]||"*"),g=0,h=e.length;h>g;g++)i.test(e[g].className)&&(l[l.length]=e[g]);return l}return c(j=a.split(","),t(d,function(a,b,c){for(i=k(b,a),g=0,h=i.length;h>g;g++)(9===a[C]||c||$(i[g],d))&&(l[l.length]=i[g])})),j.length>1&&l.length>1?o(l):l},eb=function(a){"undefined"!=typeof a[A]&&(u=a[A]&&bb?cb:db)};return eb({useNativeQSA:!0}),s.configure=eb,s.uniq=o,s.is=l,s.pseudos={},s})},{}],31:[function(a,b){function c(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1}function d(a){if(!(this instanceof d))return new d(a);a||(a={}),a.nodeType&&(a={el:a}),this.opts=a,this.el=a.el||document.body,"object"!=typeof this.el&&(this.el=document.querySelector(this.el))}b.exports=function(a){return new d(a)},d.prototype.add=function(a){var b=this.el;if(b){if(""===b.className)return b.className=a;var d=b.className.split(" ");return c(d,a)>-1?d:(d.push(a),b.className=d.join(" "),d)}},d.prototype.remove=function(a){var b=this.el;if(b&&""!==b.className){var d=b.className.split(" "),e=c(d,a);return e>-1&&d.splice(e,1),b.className=d.join(" "),d}},d.prototype.has=function(a){var b=this.el;if(b){var d=b.className.split(" ");return c(d,a)>-1}}},{}],32:[function(a,b){var c=[],d=c.forEach,e=c.slice;b.exports=function(a){return d.call(e.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a}},{}],33:[function(a,b){var c,d=Object.prototype.hasOwnProperty,e=Object.prototype.toString,f=function(a){"use strict";if(!a||"[object Object]"!==e.call(a))return!1;var b=d.call(a,"constructor"),f=a.constructor&&a.constructor.prototype&&d.call(a.constructor.prototype,"isPrototypeOf");if(a.constructor&&!b&&!f)return!1;var g;for(g in a);return g===c||d.call(a,g)};b.exports=function g(){"use strict";var a,b,d,e,h,i,j=arguments[0],k=1,l=arguments.length,m=!1;for("boolean"==typeof j?(m=j,j=arguments[1]||{},k=2):("object"!=typeof j&&"function"!=typeof j||null==j)&&(j={});l>k;++k)if(a=arguments[k],null!=a)for(b in a)d=j[b],e=a[b],j!==e&&(m&&e&&(f(e)||(h=Array.isArray(e)))?(h?(h=!1,i=d&&Array.isArray(d)?d:[]):i=d&&f(d)?d:{},j[b]=g(m,i,e)):e!==c&&(j[b]=e));return j}},{}],34:[function(a,b){!function(){"use strict";/**
	 * @preserve FastClick: polyfill to remove click delays on browsers with touch UIs.
	 *
	 * @codingstandard ftlabs-jsv2
	 * @copyright The Financial Times Limited [All Rights Reserved]
	 * @license MIT License (see LICENSE.txt)
	 */
function a(b,c){function e(a,b){return function(){return a.apply(b,arguments)}}var f;if(c=c||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=c.touchBoundary||10,this.layer=b,this.tapDelay=c.tapDelay||200,this.tapTimeout=c.tapTimeout||700,!a.notNeeded(b)){for(var g=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],h=this,i=0,j=g.length;j>i;i++)h[g[i]]=e(h[g[i]],h);d&&(b.addEventListener("mouseover",this.onMouse,!0),b.addEventListener("mousedown",this.onMouse,!0),b.addEventListener("mouseup",this.onMouse,!0)),b.addEventListener("click",this.onClick,!0),b.addEventListener("touchstart",this.onTouchStart,!1),b.addEventListener("touchmove",this.onTouchMove,!1),b.addEventListener("touchend",this.onTouchEnd,!1),b.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(b.removeEventListener=function(a,c,d){var e=Node.prototype.removeEventListener;"click"===a?e.call(b,a,c.hijacked||c,d):e.call(b,a,c,d)},b.addEventListener=function(a,c,d){var e=Node.prototype.addEventListener;"click"===a?e.call(b,a,c.hijacked||(c.hijacked=function(a){a.propagationStopped||c(a)}),d):e.call(b,a,c,d)}),"function"==typeof b.onclick&&(f=b.onclick,b.addEventListener("click",function(a){f(a)},!1),b.onclick=null)}}var c=navigator.userAgent.indexOf("Windows Phone")>=0,d=navigator.userAgent.indexOf("Android")>0&&!c,e=/iP(ad|hone|od)/.test(navigator.userAgent)&&!c,f=e&&/OS 4_\d(_\d)?/.test(navigator.userAgent),g=e&&/OS [6-7]_\d/.test(navigator.userAgent),h=navigator.userAgent.indexOf("BB10")>0;a.prototype.needsClick=function(a){switch(a.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(a.disabled)return!0;break;case"input":if(e&&"file"===a.type||a.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(a.className)},a.prototype.needsFocus=function(a){switch(a.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!d;case"input":switch(a.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!a.disabled&&!a.readOnly;default:return/\bneedsfocus\b/.test(a.className)}},a.prototype.sendClick=function(a,b){var c,d;document.activeElement&&document.activeElement!==a&&document.activeElement.blur(),d=b.changedTouches[0],c=document.createEvent("MouseEvents"),c.initMouseEvent(this.determineEventType(a),!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),c.forwardedTouchEvent=!0,a.dispatchEvent(c)},a.prototype.determineEventType=function(a){return d&&"select"===a.tagName.toLowerCase()?"mousedown":"click"},a.prototype.focus=function(a){var b;e&&a.setSelectionRange&&0!==a.type.indexOf("date")&&"time"!==a.type&&"month"!==a.type?(b=a.value.length,a.setSelectionRange(b,b)):a.focus()},a.prototype.updateScrollParent=function(a){var b,c;if(b=a.fastClickScrollParent,!b||!b.contains(a)){c=a;do{if(c.scrollHeight>c.offsetHeight){b=c,a.fastClickScrollParent=c;break}c=c.parentElement}while(c)}b&&(b.fastClickLastScrollTop=b.scrollTop)},a.prototype.getTargetElementFromEventTarget=function(a){return a.nodeType===Node.TEXT_NODE?a.parentNode:a},a.prototype.onTouchStart=function(a){var b,c,d;if(a.targetTouches.length>1)return!0;if(b=this.getTargetElementFromEventTarget(a.target),c=a.targetTouches[0],e){if(d=window.getSelection(),d.rangeCount&&!d.isCollapsed)return!0;if(!f){if(c.identifier&&c.identifier===this.lastTouchIdentifier)return a.preventDefault(),!1;this.lastTouchIdentifier=c.identifier,this.updateScrollParent(b)}}return this.trackingClick=!0,this.trackingClickStart=a.timeStamp,this.targetElement=b,this.touchStartX=c.pageX,this.touchStartY=c.pageY,a.timeStamp-this.lastClickTime<this.tapDelay&&a.preventDefault(),!0},a.prototype.touchHasMoved=function(a){var b=a.changedTouches[0],c=this.touchBoundary;return Math.abs(b.pageX-this.touchStartX)>c||Math.abs(b.pageY-this.touchStartY)>c?!0:!1},a.prototype.onTouchMove=function(a){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(a.target)||this.touchHasMoved(a))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},a.prototype.findControl=function(a){return void 0!==a.control?a.control:a.htmlFor?document.getElementById(a.htmlFor):a.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},a.prototype.onTouchEnd=function(a){var b,c,h,i,j,k=this.targetElement;if(!this.trackingClick)return!0;if(a.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(a.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=a.timeStamp,c=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,g&&(j=a.changedTouches[0],k=document.elementFromPoint(j.pageX-window.pageXOffset,j.pageY-window.pageYOffset)||k,k.fastClickScrollParent=this.targetElement.fastClickScrollParent),h=k.tagName.toLowerCase(),"label"===h){if(b=this.findControl(k)){if(this.focus(k),d)return!1;k=b}}else if(this.needsFocus(k))return a.timeStamp-c>100||e&&window.top!==window&&"input"===h?(this.targetElement=null,!1):(this.focus(k),this.sendClick(k,a),e&&"select"===h||(this.targetElement=null,a.preventDefault()),!1);return e&&!f&&(i=k.fastClickScrollParent,i&&i.fastClickLastScrollTop!==i.scrollTop)?!0:(this.needsClick(k)||(a.preventDefault(),this.sendClick(k,a)),!1)},a.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},a.prototype.onMouse=function(a){return this.targetElement?a.forwardedTouchEvent?!0:a.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(a.stopImmediatePropagation?a.stopImmediatePropagation():a.propagationStopped=!0,a.stopPropagation(),a.preventDefault(),!1):!0:!0},a.prototype.onClick=function(a){var b;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===a.target.type&&0===a.detail?!0:(b=this.onMouse(a),b||(this.targetElement=null),b)},a.prototype.destroy=function(){var a=this.layer;d&&(a.removeEventListener("mouseover",this.onMouse,!0),a.removeEventListener("mousedown",this.onMouse,!0),a.removeEventListener("mouseup",this.onMouse,!0)),a.removeEventListener("click",this.onClick,!0),a.removeEventListener("touchstart",this.onTouchStart,!1),a.removeEventListener("touchmove",this.onTouchMove,!1),a.removeEventListener("touchend",this.onTouchEnd,!1),a.removeEventListener("touchcancel",this.onTouchCancel,!1)},a.notNeeded=function(a){var b,c,e,f;if("undefined"==typeof window.ontouchstart)return!0;if(c=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!d)return!0;if(b=document.querySelector("meta[name=viewport]")){if(-1!==b.content.indexOf("user-scalable=no"))return!0;if(c>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(h&&(e=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),e[1]>=10&&e[2]>=3&&(b=document.querySelector("meta[name=viewport]")))){if(-1!==b.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===a.style.msTouchAction||"manipulation"===a.style.touchAction?!0:(f=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],f>=27&&(b=document.querySelector("meta[name=viewport]"),b&&(-1!==b.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))?!0:"none"===a.style.touchAction||"manipulation"===a.style.touchAction?!0:!1)},a.attach=function(b,c){return new a(b,c)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return a}):"undefined"!=typeof b&&b.exports?(b.exports=a.attach,b.exports.FastClick=a):window.FastClick=a}()},{}],35:[function(a,b){var c,d=a("promise"),e=a("../")();b.exports=function(a,b){return e().then(function(a){c||(c=new a.Geocoder)}).then(function(){return new d(function(d){c.geocode(a,function(a){b&&b(a),d(a)})})})}},{"../":36,promise:81}],36:[function(a,b){function c(a,b,c,d){d?(b(d),c&&c(d)):(a(g),c&&c(void 0,g))}var d,e=a("scriptjs"),f=a("promise"),g=null,h=[];window.$$mapsCB=function(){g=google.maps;for(var a=0,b=h.length;b>a;a++)c.apply(void 0,h[a])},b.exports=function(a,b,i){return d=a||d,"function"==typeof b&&(i=b,b=[]),function(){return new f(function(a,f){if(d){if(g)c(a,f,i);else if(h.push([a,f,i]),1==h.length){var j="https://maps.googleapis.com/maps/api/js?callback=$$mapsCB&key="+d;b instanceof Array&&b.length>0&&(j+="&libraries="+b.join(",")),e(j)}}else c(a,f,i,new Error("No API key passed to require('google-maps-api')"))})}}},{promise:81,scriptjs:37}],37:[function(a,b){/*!
  * $script.js JS loader & dependency manager
  * https://github.com/ded/script.js
  * (c) Dustin Diaz 2014 | License MIT
  */
!function(a,c){"undefined"!=typeof b&&b.exports?b.exports=c():"function"==typeof define&&define.amd?define(c):this[a]=c()}("$script",function(){function a(a,b){for(var c=0,d=a.length;d>c;++c)if(!b(a[c]))return i;return 1}function b(b,c){a(b,function(a){return!c(a)})}function c(f,g,h){function i(a){return a.call?a():m[a]}function k(){if(!--s){m[r]=1,q&&q();for(var c in o)a(c.split("|"),i)&&!b(o[c],i)&&(o[c]=[])}}f=f[j]?f:[f];var l=g&&g.call,q=l?g:h,r=l?f.join(""):g,s=f.length;return setTimeout(function(){b(f,function a(b,c){return null===b?k():(b=c||-1!==b.indexOf(".js")||/^https?:\/\//.test(b)||!e?b:e+b+".js",p[b]?(r&&(n[r]=1),2==p[b]?k():setTimeout(function(){a(b,!0)},0)):(p[b]=1,r&&(n[r]=1),void d(b,k)))})},0),c}function d(a,b){var c,d=g.createElement("script");d.onload=d.onerror=d[l]=function(){d[k]&&!/^c|loade/.test(d[k])||c||(d.onload=d[l]=null,c=1,p[a]=2,b())},d.async=1,d.src=f?a+(-1===a.indexOf("?")?"?":"&")+f:a,h.insertBefore(d,h.lastChild)}var e,f,g=document,h=g.getElementsByTagName("head")[0],i=!1,j="push",k="readyState",l="onreadystatechange",m={},n={},o={},p={};return c.get=d,c.order=function(a,b,d){!function e(f){f=a.shift(),a.length?c(f,e):c(f,b,d)}()},c.path=function(a){e=a},c.urlArgs=function(a){f=a},c.ready=function(d,e,f){d=d[j]?d:[d];var g=[];return!b(d,function(a){m[a]||g[j](a)})&&a(d,function(a){return m[a]})?e():!function(a){o[a]=o[a]||[],o[a][j](e),f&&f(g)}(d.join("|")),c},c.done=function(a){c([null],a)},c})},{}],38:[function(){},{}],39:[function(a,b){function c(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function d(a){return"function"==typeof a}function e(a){return"number"==typeof a}function f(a){return"object"==typeof a&&null!==a}function g(a){return void 0===a}b.exports=c,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._maxListeners=void 0,c.defaultMaxListeners=10,c.prototype.setMaxListeners=function(a){if(!e(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},c.prototype.emit=function(a){var b,c,e,h,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||f(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;throw TypeError('Uncaught, unspecified "error" event.')}if(c=this._events[a],g(c))return!1;if(d(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(e=arguments.length,h=new Array(e-1),i=1;e>i;i++)h[i-1]=arguments[i];c.apply(this,h)}else if(f(c)){for(e=arguments.length,h=new Array(e-1),i=1;e>i;i++)h[i-1]=arguments[i];for(j=c.slice(),e=j.length,i=0;e>i;i++)j[i].apply(this,h)}return!0},c.prototype.addListener=function(a,b){var e;if(!d(b))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,d(b.listener)?b.listener:b),this._events[a]?f(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,f(this._events[a])&&!this._events[a].warned){var e;e=g(this._maxListeners)?c.defaultMaxListeners:this._maxListeners,e&&e>0&&this._events[a].length>e&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())}return this},c.prototype.on=c.prototype.addListener,c.prototype.once=function(a,b){function c(){this.removeListener(a,c),e||(e=!0,b.apply(this,arguments))}if(!d(b))throw TypeError("listener must be a function");var e=!1;return c.listener=b,this.on(a,c),this},c.prototype.removeListener=function(a,b){var c,e,g,h;if(!d(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],g=c.length,e=-1,c===b||d(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(f(c)){for(h=g;h-->0;)if(c[h]===b||c[h].listener&&c[h].listener===b){e=h;break}if(0>e)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(e,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},c.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],d(c))this.removeListener(a,c);else for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},c.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?d(this._events[a])?[this._events[a]]:this._events[a].slice():[]},c.listenerCount=function(a,b){var c;return c=a._events&&a._events[b]?d(a._events[b])?1:a._events[b].length:0}},{}],40:[function(a,b){function c(){if(!g){g=!0;for(var a,b=f.length;b;){a=f,f=[];for(var c=-1;++c<b;)a[c]();b=f.length}g=!1}}function d(){}var e=b.exports={},f=[],g=!1;e.nextTick=function(a){f.push(a),g||setTimeout(c,0)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=d,e.addListener=d,e.once=d,e.off=d,e.removeListener=d,e.removeAllListeners=d,e.emit=d,e.binding=function(){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},{}],41:[function(a,b){(function(a){/*!
 * VERSION: 1.15.1
 * DATE: 2015-01-20
 * UPDATES AND DOCS AT: http://greensock.com
 * 
 * Includes all of the following: TweenLite, TweenMax, TimelineLite, TimelineMax, EasePack, CSSPlugin, RoundPropsPlugin, BezierPlugin, AttrPlugin, DirectionalRotationPlugin
 *
 * @license Copyright (c) 2008-2015, GreenSock. All rights reserved.
 * This work is subject to the terms at http://greensock.com/standard-license or for
 * Club GreenSock members, the software agreement that was issued with your membership.
 * 
 * @author: Jack Doyle, jack@greensock.com
 **/
var c="undefined"!=typeof b&&b.exports&&"undefined"!=typeof a?a:this||window;(c._gsQueue||(c._gsQueue=[])).push(function(){"use strict";c._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(a,b,c){var d=function(a){var b,c=[],d=a.length;for(b=0;b!==d;c.push(a[b++]));return c},e=function(a,b,d){c.call(this,a,b,d),this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._dirty=!0,this.render=e.prototype.render},f=1e-10,g=c._internals,h=g.isSelector,i=g.isArray,j=e.prototype=c.to({},.1,{}),k=[];e.version="1.15.1",j.constructor=e,j.kill()._gc=!1,e.killTweensOf=e.killDelayedCallsTo=c.killTweensOf,e.getTweensOf=c.getTweensOf,e.lagSmoothing=c.lagSmoothing,e.ticker=c.ticker,e.render=c.render,j.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),c.prototype.invalidate.call(this)},j.updateTo=function(a,b){var d,e=this.ratio,f=this.vars.immediateRender||a.immediateRender;b&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay));for(d in a)this.vars[d]=a[d];if(this._initted||f)if(b)this._initted=!1,f&&this.render(0,!0,!0);else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&c._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var g=this._time;this.render(0,!0,!1),this._initted=!1,this.render(g,!0,!1)}else if(this._time>0||f){this._initted=!1,this._init();for(var h,i=1/(1-e),j=this._firstPT;j;)h=j.s+j.c,j.c*=i,j.s=h-j.c,j=j._next}return this},j.render=function(a,b,c){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var d,e,h,i,j,l,m,n,o=this._dirty?this.totalDuration():this._totalDuration,p=this._time,q=this._totalTime,r=this._cycle,s=this._duration,t=this._rawPrevTime;if(a>=o?(this._totalTime=o,this._cycle=this._repeat,this._yoyo&&0!==(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=s,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(d=!0,e="onComplete"),0===s&&(this._initted||!this.vars.lazy||c)&&(this._startTime===this._timeline._duration&&(a=0),(0===a||0>t||t===f)&&t!==a&&(c=!0,t>f&&(e="onReverseComplete")),this._rawPrevTime=n=!b||a||t===a?a:f)):1e-7>a?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==q||0===s&&t>0&&t!==f)&&(e="onReverseComplete",d=this._reversed),0>a&&(this._active=!1,0===s&&(this._initted||!this.vars.lazy||c)&&(t>=0&&(c=!0),this._rawPrevTime=n=!b||a||t===a?a:f)),this._initted||(c=!0)):(this._totalTime=this._time=a,0!==this._repeat&&(i=s+this._repeatDelay,this._cycle=this._totalTime/i>>0,0!==this._cycle&&this._cycle===this._totalTime/i&&this._cycle--,this._time=this._totalTime-this._cycle*i,this._yoyo&&0!==(1&this._cycle)&&(this._time=s-this._time),this._time>s?this._time=s:this._time<0&&(this._time=0)),this._easeType?(j=this._time/s,l=this._easeType,m=this._easePower,(1===l||3===l&&j>=.5)&&(j=1-j),3===l&&(j*=2),1===m?j*=j:2===m?j*=j*j:3===m?j*=j*j*j:4===m&&(j*=j*j*j*j),this.ratio=1===l?1-j:2===l?j:this._time/s<.5?j/2:1-j/2):this.ratio=this._ease.getRatio(this._time/s)),p===this._time&&!c&&r===this._cycle)return void(q!==this._totalTime&&this._onUpdate&&(b||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||k)));if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!c&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=p,this._totalTime=q,this._rawPrevTime=t,this._cycle=r,g.lazyTweens.push(this),void(this._lazy=[a,b]);this._time&&!d?this.ratio=this._ease.getRatio(this._time/s):d&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==p&&a>=0&&(this._active=!0),0===q&&(2===this._initted&&a>0&&this._init(),this._startAt&&(a>=0?this._startAt.render(a,b,c):e||(e="_dummyGS")),this.vars.onStart&&(0!==this._totalTime||0===s)&&(b||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||k))),h=this._firstPT;h;)h.f?h.t[h.p](h.c*this.ratio+h.s):h.t[h.p]=h.c*this.ratio+h.s,h=h._next;this._onUpdate&&(0>a&&this._startAt&&this._startTime&&this._startAt.render(a,b,c),b||(this._totalTime!==q||d)&&this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||k)),this._cycle!==r&&(b||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||k)),e&&(!this._gc||c)&&(0>a&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(a,b,c),d&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[e]&&this.vars[e].apply(this.vars[e+"Scope"]||this,this.vars[e+"Params"]||k),0===s&&this._rawPrevTime===f&&n!==f&&(this._rawPrevTime=0))},e.to=function(a,b,c){return new e(a,b,c)},e.from=function(a,b,c){return c.runBackwards=!0,c.immediateRender=0!=c.immediateRender,new e(a,b,c)},e.fromTo=function(a,b,c,d){return d.startAt=c,d.immediateRender=0!=d.immediateRender&&0!=c.immediateRender,new e(a,b,d)},e.staggerTo=e.allTo=function(a,b,f,g,j,l,m){g=g||0;var n,o,p,q,r=f.delay||0,s=[],t=function(){f.onComplete&&f.onComplete.apply(f.onCompleteScope||this,arguments),j.apply(m||this,l||k)};for(i(a)||("string"==typeof a&&(a=c.selector(a)||a),h(a)&&(a=d(a))),a=a||[],0>g&&(a=d(a),a.reverse(),g*=-1),n=a.length-1,p=0;n>=p;p++){o={};for(q in f)o[q]=f[q];o.delay=r,p===n&&j&&(o.onComplete=t),s[p]=new e(a[p],b,o),r+=g}return s},e.staggerFrom=e.allFrom=function(a,b,c,d,f,g,h){return c.runBackwards=!0,c.immediateRender=0!=c.immediateRender,e.staggerTo(a,b,c,d,f,g,h)},e.staggerFromTo=e.allFromTo=function(a,b,c,d,f,g,h,i){return d.startAt=c,d.immediateRender=0!=d.immediateRender&&0!=c.immediateRender,e.staggerTo(a,b,d,f,g,h,i)},e.delayedCall=function(a,b,c,d,f){return new e(b,0,{delay:a,onComplete:b,onCompleteParams:c,onCompleteScope:d,onReverseComplete:b,onReverseCompleteParams:c,onReverseCompleteScope:d,immediateRender:!1,useFrames:f,overwrite:0})},e.set=function(a,b){return new e(a,0,b)},e.isTweening=function(a){return c.getTweensOf(a,!0).length>0};var l=function(a,b){for(var d=[],e=0,f=a._first;f;)f instanceof c?d[e++]=f:(b&&(d[e++]=f),d=d.concat(l(f,b)),e=d.length),f=f._next;return d},m=e.getAllTweens=function(b){return l(a._rootTimeline,b).concat(l(a._rootFramesTimeline,b))};e.killAll=function(a,c,d,e){null==c&&(c=!0),null==d&&(d=!0);var f,g,h,i=m(0!=e),j=i.length,k=c&&d&&e;for(h=0;j>h;h++)g=i[h],(k||g instanceof b||(f=g.target===g.vars.onComplete)&&d||c&&!f)&&(a?g.totalTime(g._reversed?0:g.totalDuration()):g._enabled(!1,!1))},e.killChildTweensOf=function(a,b){if(null!=a){var f,j,k,l,m,n=g.tweenLookup;if("string"==typeof a&&(a=c.selector(a)||a),h(a)&&(a=d(a)),i(a))for(l=a.length;--l>-1;)e.killChildTweensOf(a[l],b);else{f=[];for(k in n)for(j=n[k].target.parentNode;j;)j===a&&(f=f.concat(n[k].tweens)),j=j.parentNode;for(m=f.length,l=0;m>l;l++)b&&f[l].totalTime(f[l].totalDuration()),f[l]._enabled(!1,!1)}}};var n=function(a,c,d,e){c=c!==!1,d=d!==!1,e=e!==!1;for(var f,g,h=m(e),i=c&&d&&e,j=h.length;--j>-1;)g=h[j],(i||g instanceof b||(f=g.target===g.vars.onComplete)&&d||c&&!f)&&g.paused(a)};return e.pauseAll=function(a,b,c){n(!0,a,b,c)},e.resumeAll=function(a,b,c){n(!1,a,b,c)},e.globalTimeScale=function(b){var d=a._rootTimeline,e=c.ticker.time;return arguments.length?(b=b||f,d._startTime=e-(e-d._startTime)*d._timeScale/b,d=a._rootFramesTimeline,e=c.ticker.frame,d._startTime=e-(e-d._startTime)*d._timeScale/b,d._timeScale=a._rootTimeline._timeScale=b,b):d._timeScale},j.progress=function(a){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-a:a)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},j.totalProgress=function(a){return arguments.length?this.totalTime(this.totalDuration()*a,!1):this._totalTime/this.totalDuration()},j.time=function(a,b){return arguments.length?(this._dirty&&this.totalDuration(),a>this._duration&&(a=this._duration),this._yoyo&&0!==(1&this._cycle)?a=this._duration-a+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(a+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(a,b)):this._time},j.duration=function(b){return arguments.length?a.prototype.duration.call(this,b):this._duration},j.totalDuration=function(a){return arguments.length?-1===this._repeat?this:this.duration((a-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},j.repeat=function(a){return arguments.length?(this._repeat=a,this._uncache(!0)):this._repeat},j.repeatDelay=function(a){return arguments.length?(this._repeatDelay=a,this._uncache(!0)):this._repeatDelay},j.yoyo=function(a){return arguments.length?(this._yoyo=a,this):this._yoyo},e},!0),c._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(a,b,d){var e=function(a){b.call(this,a),this._labels={},this.autoRemoveChildren=this.vars.autoRemoveChildren===!0,this.smoothChildTiming=this.vars.smoothChildTiming===!0,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var c,d,e=this.vars;for(d in e)c=e[d],j(c)&&-1!==c.join("").indexOf("{self}")&&(e[d]=this._swapSelfInParams(c));j(e.tweens)&&this.add(e.tweens,0,e.align,e.stagger)},f=1e-10,g=d._internals,h=e._internals={},i=g.isSelector,j=g.isArray,k=g.lazyTweens,l=g.lazyRender,m=[],n=c._gsDefine.globals,o=function(a){var b,c={};for(b in a)c[b]=a[b];return c},p=h.pauseCallback=function(a,b,c,d){var e=a._timeline,f=e._totalTime;!b&&this._forcingPlayhead||e._rawPrevTime===a._startTime||(e.pause(a._startTime),b&&b.apply(d||e,c||m),this._forcingPlayhead&&e.seek(f))},q=function(a){var b,c=[],d=a.length;for(b=0;b!==d;c.push(a[b++]));return c},r=e.prototype=new b;return e.version="1.15.1",r.constructor=e,r.kill()._gc=r._forcingPlayhead=!1,r.to=function(a,b,c,e){var f=c.repeat&&n.TweenMax||d;return b?this.add(new f(a,b,c),e):this.set(a,c,e)},r.from=function(a,b,c,e){return this.add((c.repeat&&n.TweenMax||d).from(a,b,c),e)},r.fromTo=function(a,b,c,e,f){var g=e.repeat&&n.TweenMax||d;return b?this.add(g.fromTo(a,b,c,e),f):this.set(a,e,f)},r.staggerTo=function(a,b,c,f,g,h,j,k){var l,m=new e({onComplete:h,onCompleteParams:j,onCompleteScope:k,smoothChildTiming:this.smoothChildTiming});for("string"==typeof a&&(a=d.selector(a)||a),a=a||[],i(a)&&(a=q(a)),f=f||0,0>f&&(a=q(a),a.reverse(),f*=-1),l=0;l<a.length;l++)c.startAt&&(c.startAt=o(c.startAt)),m.to(a[l],b,o(c),l*f);return this.add(m,g)},r.staggerFrom=function(a,b,c,d,e,f,g,h){return c.immediateRender=0!=c.immediateRender,c.runBackwards=!0,this.staggerTo(a,b,c,d,e,f,g,h)},r.staggerFromTo=function(a,b,c,d,e,f,g,h,i){return d.startAt=c,d.immediateRender=0!=d.immediateRender&&0!=c.immediateRender,this.staggerTo(a,b,d,e,f,g,h,i)},r.call=function(a,b,c,e){return this.add(d.delayedCall(0,a,b,c),e)},r.set=function(a,b,c){return c=this._parseTimeOrLabel(c,0,!0),null==b.immediateRender&&(b.immediateRender=c===this._time&&!this._paused),this.add(new d(a,0,b),c)},e.exportRoot=function(a,b){a=a||{},null==a.smoothChildTiming&&(a.smoothChildTiming=!0);var c,f,g=new e(a),h=g._timeline;for(null==b&&(b=!0),h._remove(g,!0),g._startTime=0,g._rawPrevTime=g._time=g._totalTime=h._time,c=h._first;c;)f=c._next,b&&c instanceof d&&c.target===c.vars.onComplete||g.add(c,c._startTime-c._delay),c=f;return h.add(g,0),g},r.add=function(c,f,g,h){var i,k,l,m,n,o;if("number"!=typeof f&&(f=this._parseTimeOrLabel(f,0,!0,c)),!(c instanceof a)){if(c instanceof Array||c&&c.push&&j(c)){for(g=g||"normal",h=h||0,i=f,k=c.length,l=0;k>l;l++)j(m=c[l])&&(m=new e({tweens:m})),this.add(m,i),"string"!=typeof m&&"function"!=typeof m&&("sequence"===g?i=m._startTime+m.totalDuration()/m._timeScale:"start"===g&&(m._startTime-=m.delay())),i+=h;return this._uncache(!0)}if("string"==typeof c)return this.addLabel(c,f);if("function"!=typeof c)throw"Cannot add "+c+" into the timeline; it is not a tween, timeline, function, or string.";c=d.delayedCall(0,c)}if(b.prototype.add.call(this,c,f),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(n=this,o=n.rawTime()>c._startTime;n._timeline;)o&&n._timeline.smoothChildTiming?n.totalTime(n._totalTime,!0):n._gc&&n._enabled(!0,!1),n=n._timeline;return this},r.remove=function(b){if(b instanceof a)return this._remove(b,!1);if(b instanceof Array||b&&b.push&&j(b)){for(var c=b.length;--c>-1;)this.remove(b[c]);return this}return"string"==typeof b?this.removeLabel(b):this.kill(null,b)},r._remove=function(a,c){b.prototype._remove.call(this,a,c);var d=this._last;return d?this._time>d._startTime+d._totalDuration/d._timeScale&&(this._time=this.duration(),this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},r.append=function(a,b){return this.add(a,this._parseTimeOrLabel(null,b,!0,a))},r.insert=r.insertMultiple=function(a,b,c,d){return this.add(a,b||0,c,d)},r.appendMultiple=function(a,b,c,d){return this.add(a,this._parseTimeOrLabel(null,b,!0,a),c,d)},r.addLabel=function(a,b){return this._labels[a]=this._parseTimeOrLabel(b),this},r.addPause=function(a,b,c,e){var f=d.delayedCall(0,p,["{self}",b,c,e],this);return f.data="isPause",this.add(f,a)},r.removeLabel=function(a){return delete this._labels[a],this},r.getLabelTime=function(a){return null!=this._labels[a]?this._labels[a]:-1},r._parseTimeOrLabel=function(b,c,d,e){var f;if(e instanceof a&&e.timeline===this)this.remove(e);else if(e&&(e instanceof Array||e.push&&j(e)))for(f=e.length;--f>-1;)e[f]instanceof a&&e[f].timeline===this&&this.remove(e[f]);if("string"==typeof c)return this._parseTimeOrLabel(c,d&&"number"==typeof b&&null==this._labels[c]?b-this.duration():0,d);if(c=c||0,"string"!=typeof b||!isNaN(b)&&null==this._labels[b])null==b&&(b=this.duration());else{if(f=b.indexOf("="),-1===f)return null==this._labels[b]?d?this._labels[b]=this.duration()+c:c:this._labels[b]+c;c=parseInt(b.charAt(f-1)+"1",10)*Number(b.substr(f+1)),b=f>1?this._parseTimeOrLabel(b.substr(0,f-1),0,d):this.duration()}return Number(b)+c},r.seek=function(a,b){return this.totalTime("number"==typeof a?a:this._parseTimeOrLabel(a),b!==!1)},r.stop=function(){return this.paused(!0)},r.gotoAndPlay=function(a,b){return this.play(a,b)},r.gotoAndStop=function(a,b){return this.pause(a,b)},r.render=function(a,b,c){this._gc&&this._enabled(!0,!1);var d,e,g,h,i,j=this._dirty?this.totalDuration():this._totalDuration,n=this._time,o=this._startTime,p=this._timeScale,q=this._paused;if(a>=j?(this._totalTime=this._time=j,this._reversed||this._hasPausedChild()||(e=!0,h="onComplete",0===this._duration&&(0===a||this._rawPrevTime<0||this._rawPrevTime===f)&&this._rawPrevTime!==a&&this._first&&(i=!0,this._rawPrevTime>f&&(h="onReverseComplete"))),this._rawPrevTime=this._duration||!b||a||this._rawPrevTime===a?a:f,a=j+1e-4):1e-7>a?(this._totalTime=this._time=0,(0!==n||0===this._duration&&this._rawPrevTime!==f&&(this._rawPrevTime>0||0>a&&this._rawPrevTime>=0))&&(h="onReverseComplete",e=this._reversed),0>a?(this._active=!1,this._rawPrevTime>=0&&this._first&&(i=!0),this._rawPrevTime=a):(this._rawPrevTime=this._duration||!b||a||this._rawPrevTime===a?a:f,a=0,this._initted||(i=!0))):this._totalTime=this._time=this._rawPrevTime=a,this._time!==n&&this._first||c||i){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==n&&a>0&&(this._active=!0),0===n&&this.vars.onStart&&0!==this._time&&(b||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||m)),this._time>=n)for(d=this._first;d&&(g=d._next,!this._paused||q);)(d._active||d._startTime<=this._time&&!d._paused&&!d._gc)&&(d._reversed?d.render((d._dirty?d.totalDuration():d._totalDuration)-(a-d._startTime)*d._timeScale,b,c):d.render((a-d._startTime)*d._timeScale,b,c)),d=g;else for(d=this._last;d&&(g=d._prev,!this._paused||q);)(d._active||d._startTime<=n&&!d._paused&&!d._gc)&&(d._reversed?d.render((d._dirty?d.totalDuration():d._totalDuration)-(a-d._startTime)*d._timeScale,b,c):d.render((a-d._startTime)*d._timeScale,b,c)),d=g;this._onUpdate&&(b||(k.length&&l(),this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||m))),h&&(this._gc||(o===this._startTime||p!==this._timeScale)&&(0===this._time||j>=this.totalDuration())&&(e&&(k.length&&l(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[h]&&this.vars[h].apply(this.vars[h+"Scope"]||this,this.vars[h+"Params"]||m)))}},r._hasPausedChild=function(){for(var a=this._first;a;){if(a._paused||a instanceof e&&a._hasPausedChild())return!0;a=a._next}return!1},r.getChildren=function(a,b,c,e){e=e||-9999999999;for(var f=[],g=this._first,h=0;g;)g._startTime<e||(g instanceof d?b!==!1&&(f[h++]=g):(c!==!1&&(f[h++]=g),a!==!1&&(f=f.concat(g.getChildren(!0,b,c)),h=f.length))),g=g._next;return f},r.getTweensOf=function(a,b){var c,e,f=this._gc,g=[],h=0;for(f&&this._enabled(!0,!0),c=d.getTweensOf(a),e=c.length;--e>-1;)(c[e].timeline===this||b&&this._contains(c[e]))&&(g[h++]=c[e]);return f&&this._enabled(!1,!0),g},r.recent=function(){return this._recent},r._contains=function(a){for(var b=a.timeline;b;){if(b===this)return!0;b=b.timeline}return!1},r.shiftChildren=function(a,b,c){c=c||0;for(var d,e=this._first,f=this._labels;e;)e._startTime>=c&&(e._startTime+=a),e=e._next;if(b)for(d in f)f[d]>=c&&(f[d]+=a);return this._uncache(!0)},r._kill=function(a,b){if(!a&&!b)return this._enabled(!1,!1);for(var c=b?this.getTweensOf(b):this.getChildren(!0,!0,!1),d=c.length,e=!1;--d>-1;)c[d]._kill(a,b)&&(e=!0);return e},r.clear=function(a){var b=this.getChildren(!1,!0,!0),c=b.length;for(this._time=this._totalTime=0;--c>-1;)b[c]._enabled(!1,!1);return a!==!1&&(this._labels={}),this._uncache(!0)},r.invalidate=function(){for(var b=this._first;b;)b.invalidate(),b=b._next;return a.prototype.invalidate.call(this)},r._enabled=function(a,c){if(a===this._gc)for(var d=this._first;d;)d._enabled(a,!0),d=d._next;return b.prototype._enabled.call(this,a,c)},r.totalTime=function(){this._forcingPlayhead=!0;var b=a.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,b},r.duration=function(a){return arguments.length?(0!==this.duration()&&0!==a&&this.timeScale(this._duration/a),this):(this._dirty&&this.totalDuration(),this._duration)},r.totalDuration=function(a){if(!arguments.length){if(this._dirty){for(var b,c,d=0,e=this._last,f=999999999999;e;)b=e._prev,e._dirty&&e.totalDuration(),e._startTime>f&&this._sortChildren&&!e._paused?this.add(e,e._startTime-e._delay):f=e._startTime,e._startTime<0&&!e._paused&&(d-=e._startTime,this._timeline.smoothChildTiming&&(this._startTime+=e._startTime/this._timeScale),this.shiftChildren(-e._startTime,!1,-9999999999),f=0),c=e._startTime+e._totalDuration/e._timeScale,c>d&&(d=c),e=b;this._duration=this._totalDuration=d,this._dirty=!1}return this._totalDuration}return 0!==this.totalDuration()&&0!==a&&this.timeScale(this._totalDuration/a),this},r.usesFrames=function(){for(var b=this._timeline;b._timeline;)b=b._timeline;return b===a._rootFramesTimeline},r.rawTime=function(){return this._paused?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},e},!0),c._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(a,b,c){var d=function(b){a.call(this,b),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._dirty=!0},e=1e-10,f=[],g=b._internals,h=g.lazyTweens,i=g.lazyRender,j=new c(null,null,1,0),k=d.prototype=new a;return k.constructor=d,k.kill()._gc=!1,d.version="1.15.1",k.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),a.prototype.invalidate.call(this)},k.addCallback=function(a,c,d,e){return this.add(b.delayedCall(0,a,d,e),c)},k.removeCallback=function(a,b){if(a)if(null==b)this._kill(null,a);else for(var c=this.getTweensOf(a,!1),d=c.length,e=this._parseTimeOrLabel(b);--d>-1;)c[d]._startTime===e&&c[d]._enabled(!1,!1);return this},k.removePause=function(b){return this.removeCallback(a._internals.pauseCallback,b)},k.tweenTo=function(a,c){c=c||{};var d,e,g,h={ease:j,useFrames:this.usesFrames(),immediateRender:!1};for(e in c)h[e]=c[e];return h.time=this._parseTimeOrLabel(a),d=Math.abs(Number(h.time)-this._time)/this._timeScale||.001,g=new b(this,d,h),h.onStart=function(){g.target.paused(!0),g.vars.time!==g.target.time()&&d===g.duration()&&g.duration(Math.abs(g.vars.time-g.target.time())/g.target._timeScale),c.onStart&&c.onStart.apply(c.onStartScope||g,c.onStartParams||f)},g},k.tweenFromTo=function(a,b,c){c=c||{},a=this._parseTimeOrLabel(a),c.startAt={onComplete:this.seek,onCompleteParams:[a],onCompleteScope:this},c.immediateRender=c.immediateRender!==!1;var d=this.tweenTo(b,c);return d.duration(Math.abs(d.vars.time-a)/this._timeScale||.001)},k.render=function(a,b,c){this._gc&&this._enabled(!0,!1);var d,g,j,k,l,m,n=this._dirty?this.totalDuration():this._totalDuration,o=this._duration,p=this._time,q=this._totalTime,r=this._startTime,s=this._timeScale,t=this._rawPrevTime,u=this._paused,v=this._cycle;if(a>=n?(this._locked||(this._totalTime=n,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(g=!0,k="onComplete",0===this._duration&&(0===a||0>t||t===e)&&t!==a&&this._first&&(l=!0,t>e&&(k="onReverseComplete"))),this._rawPrevTime=this._duration||!b||a||this._rawPrevTime===a?a:e,this._yoyo&&0!==(1&this._cycle)?this._time=a=0:(this._time=o,a=o+1e-4)):1e-7>a?(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==p||0===o&&t!==e&&(t>0||0>a&&t>=0)&&!this._locked)&&(k="onReverseComplete",g=this._reversed),0>a?(this._active=!1,t>=0&&this._first&&(l=!0),this._rawPrevTime=a):(this._rawPrevTime=o||!b||a||this._rawPrevTime===a?a:e,a=0,this._initted||(l=!0))):(0===o&&0>t&&(l=!0),this._time=this._rawPrevTime=a,this._locked||(this._totalTime=a,0!==this._repeat&&(m=o+this._repeatDelay,this._cycle=this._totalTime/m>>0,0!==this._cycle&&this._cycle===this._totalTime/m&&this._cycle--,this._time=this._totalTime-this._cycle*m,this._yoyo&&0!==(1&this._cycle)&&(this._time=o-this._time),this._time>o?(this._time=o,a=o+1e-4):this._time<0?this._time=a=0:a=this._time))),this._cycle!==v&&!this._locked){var w=this._yoyo&&0!==(1&v),x=w===(this._yoyo&&0!==(1&this._cycle)),y=this._totalTime,z=this._cycle,A=this._rawPrevTime,B=this._time;if(this._totalTime=v*o,this._cycle<v?w=!w:this._totalTime+=o,this._time=p,this._rawPrevTime=0===o?t-1e-4:t,this._cycle=v,this._locked=!0,p=w?0:o,this.render(p,b,0===o),b||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||f),x&&(p=w?o+1e-4:-1e-4,this.render(p,!0,!1)),this._locked=!1,this._paused&&!u)return;this._time=B,this._totalTime=y,this._cycle=z,this._rawPrevTime=A}if(!(this._time!==p&&this._first||c||l))return void(q!==this._totalTime&&this._onUpdate&&(b||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||f)));if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==q&&a>0&&(this._active=!0),0===q&&this.vars.onStart&&0!==this._totalTime&&(b||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||f)),this._time>=p)for(d=this._first;d&&(j=d._next,!this._paused||u);)(d._active||d._startTime<=this._time&&!d._paused&&!d._gc)&&(d._reversed?d.render((d._dirty?d.totalDuration():d._totalDuration)-(a-d._startTime)*d._timeScale,b,c):d.render((a-d._startTime)*d._timeScale,b,c)),d=j;else for(d=this._last;d&&(j=d._prev,!this._paused||u);)(d._active||d._startTime<=p&&!d._paused&&!d._gc)&&(d._reversed?d.render((d._dirty?d.totalDuration():d._totalDuration)-(a-d._startTime)*d._timeScale,b,c):d.render((a-d._startTime)*d._timeScale,b,c)),d=j;this._onUpdate&&(b||(h.length&&i(),this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||f))),k&&(this._locked||this._gc||(r===this._startTime||s!==this._timeScale)&&(0===this._time||n>=this.totalDuration())&&(g&&(h.length&&i(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[k]&&this.vars[k].apply(this.vars[k+"Scope"]||this,this.vars[k+"Params"]||f)))},k.getActive=function(a,b,c){null==a&&(a=!0),null==b&&(b=!0),null==c&&(c=!1);var d,e,f=[],g=this.getChildren(a,b,c),h=0,i=g.length;for(d=0;i>d;d++)e=g[d],e.isActive()&&(f[h++]=e);return f},k.getLabelAfter=function(a){a||0!==a&&(a=this._time);var b,c=this.getLabelsArray(),d=c.length;for(b=0;d>b;b++)if(c[b].time>a)return c[b].name;return null},k.getLabelBefore=function(a){null==a&&(a=this._time);for(var b=this.getLabelsArray(),c=b.length;--c>-1;)if(b[c].time<a)return b[c].name;return null},k.getLabelsArray=function(){var a,b=[],c=0;for(a in this._labels)b[c++]={time:this._labels[a],name:a};return b.sort(function(a,b){return a.time-b.time}),b},k.progress=function(a,b){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-a:a)+this._cycle*(this._duration+this._repeatDelay),b):this._time/this.duration()},k.totalProgress=function(a,b){return arguments.length?this.totalTime(this.totalDuration()*a,b):this._totalTime/this.totalDuration()},k.totalDuration=function(b){return arguments.length?-1===this._repeat?this:this.duration((b-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(a.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},k.time=function(a,b){return arguments.length?(this._dirty&&this.totalDuration(),a>this._duration&&(a=this._duration),this._yoyo&&0!==(1&this._cycle)?a=this._duration-a+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(a+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(a,b)):this._time},k.repeat=function(a){return arguments.length?(this._repeat=a,this._uncache(!0)):this._repeat},k.repeatDelay=function(a){return arguments.length?(this._repeatDelay=a,this._uncache(!0)):this._repeatDelay},k.yoyo=function(a){return arguments.length?(this._yoyo=a,this):this._yoyo},k.currentLabel=function(a){return arguments.length?this.seek(a,!0):this.getLabelBefore(this._time+1e-8)},d},!0),function(){var a=180/Math.PI,b=[],d=[],e=[],f={},g=c._gsDefine.globals,h=function(a,b,c,d){this.a=a,this.b=b,this.c=c,this.d=d,this.da=d-a,this.ca=c-a,this.ba=b-a},i=",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",j=function(a,b,c,d){var e={a:a},f={},g={},h={c:d},i=(a+b)/2,j=(b+c)/2,k=(c+d)/2,l=(i+j)/2,m=(j+k)/2,n=(m-l)/8;return e.b=i+(a-i)/4,f.b=l+n,e.c=f.a=(e.b+f.b)/2,f.c=g.a=(l+m)/2,g.b=m-n,h.b=k+(d-k)/4,g.c=h.a=(g.b+h.b)/2,[e,f,g,h]},k=function(a,c,f,g,h){var i,k,l,m,n,o,p,q,r,s,t,u,v,w=a.length-1,x=0,y=a[0].a;for(i=0;w>i;i++)n=a[x],k=n.a,l=n.d,m=a[x+1].d,h?(t=b[i],u=d[i],v=(u+t)*c*.25/(g?.5:e[i]||.5),o=l-(l-k)*(g?.5*c:0!==t?v/t:0),p=l+(m-l)*(g?.5*c:0!==u?v/u:0),q=l-(o+((p-o)*(3*t/(t+u)+.5)/4||0))):(o=l-(l-k)*c*.5,p=l+(m-l)*c*.5,q=l-(o+p)/2),o+=q,p+=q,n.c=r=o,n.b=0!==i?y:y=n.a+.6*(n.c-n.a),n.da=l-k,n.ca=r-k,n.ba=y-k,f?(s=j(k,y,r,l),a.splice(x,1,s[0],s[1],s[2],s[3]),x+=4):x++,y=p;n=a[x],n.b=y,n.c=y+.4*(n.d-y),n.da=n.d-n.a,n.ca=n.c-n.a,n.ba=y-n.a,f&&(s=j(n.a,y,n.c,n.d),a.splice(x,1,s[0],s[1],s[2],s[3]))},l=function(a,c,e,f){var g,i,j,k,l,m,n=[];if(f)for(a=[f].concat(a),i=a.length;--i>-1;)"string"==typeof(m=a[i][c])&&"="===m.charAt(1)&&(a[i][c]=f[c]+Number(m.charAt(0)+m.substr(2)));if(g=a.length-2,0>g)return n[0]=new h(a[0][c],0,0,a[-1>g?0:1][c]),n;for(i=0;g>i;i++)j=a[i][c],k=a[i+1][c],n[i]=new h(j,0,0,k),e&&(l=a[i+2][c],b[i]=(b[i]||0)+(k-j)*(k-j),d[i]=(d[i]||0)+(l-k)*(l-k));return n[i]=new h(a[i][c],0,0,a[i+1][c]),n},m=function(a,c,g,h,j,m){var n,o,p,q,r,s,t,u,v={},w=[],x=m||a[0];j="string"==typeof j?","+j+",":i,null==c&&(c=1);for(o in a[0])w.push(o);if(a.length>1){for(u=a[a.length-1],t=!0,n=w.length;--n>-1;)if(o=w[n],Math.abs(x[o]-u[o])>.05){t=!1;break}t&&(a=a.concat(),m&&a.unshift(m),a.push(a[1]),m=a[a.length-3])}for(b.length=d.length=e.length=0,n=w.length;--n>-1;)o=w[n],f[o]=-1!==j.indexOf(","+o+","),v[o]=l(a,o,f[o],m);for(n=b.length;--n>-1;)b[n]=Math.sqrt(b[n]),d[n]=Math.sqrt(d[n]);if(!h){for(n=w.length;--n>-1;)if(f[o])for(p=v[w[n]],s=p.length-1,q=0;s>q;q++)r=p[q+1].da/d[q]+p[q].da/b[q],e[q]=(e[q]||0)+r*r;for(n=e.length;--n>-1;)e[n]=Math.sqrt(e[n])}for(n=w.length,q=g?4:1;--n>-1;)o=w[n],p=v[o],k(p,c,g,h,f[o]),t&&(p.splice(0,q),p.splice(p.length-q,q));return v},n=function(a,b,c){b=b||"soft";var d,e,f,g,i,j,k,l,m,n,o,p={},q="cubic"===b?3:2,r="soft"===b,s=[];if(r&&c&&(a=[c].concat(a)),null==a||a.length<q+1)throw"invalid Bezier data";for(m in a[0])s.push(m);for(j=s.length;--j>-1;){for(m=s[j],p[m]=i=[],n=0,l=a.length,k=0;l>k;k++)d=null==c?a[k][m]:"string"==typeof(o=a[k][m])&&"="===o.charAt(1)?c[m]+Number(o.charAt(0)+o.substr(2)):Number(o),r&&k>1&&l-1>k&&(i[n++]=(d+i[n-2])/2),i[n++]=d;for(l=n-q+1,n=0,k=0;l>k;k+=q)d=i[k],e=i[k+1],f=i[k+2],g=2===q?0:i[k+3],i[n++]=o=3===q?new h(d,e,f,g):new h(d,(2*e+d)/3,(2*e+f)/3,f);i.length=n}return p},o=function(a,b,c){for(var d,e,f,g,h,i,j,k,l,m,n,o=1/c,p=a.length;--p>-1;)for(m=a[p],f=m.a,g=m.d-f,h=m.c-f,i=m.b-f,d=e=0,k=1;c>=k;k++)j=o*k,l=1-j,d=e-(e=(j*j*g+3*l*(j*h+l*i))*j),n=p*c+k-1,b[n]=(b[n]||0)+d*d},p=function(a,b){b=b>>0||6;var c,d,e,f,g=[],h=[],i=0,j=0,k=b-1,l=[],m=[];for(c in a)o(a[c],g,b);for(e=g.length,d=0;e>d;d++)i+=Math.sqrt(g[d]),f=d%b,m[f]=i,f===k&&(j+=i,f=d/b>>0,l[f]=m,h[f]=j,i=0,m=[]);return{length:j,lengths:h,segments:l}},q=c._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.4",API:2,global:!0,init:function(a,b,c){this._target=a,b instanceof Array&&(b={values:b}),this._func={},this._round={},this._props=[],this._timeRes=null==b.timeResolution?6:parseInt(b.timeResolution,10);var d,e,f,g,h,i=b.values||[],j={},k=i[0],l=b.autoRotate||c.vars.orientToBezier;this._autoRotate=l?l instanceof Array?l:[["x","y","rotation",l===!0?0:Number(l)||0]]:null;for(d in k)this._props.push(d);for(f=this._props.length;--f>-1;)d=this._props[f],this._overwriteProps.push(d),e=this._func[d]="function"==typeof a[d],j[d]=e?a[d.indexOf("set")||"function"!=typeof a["get"+d.substr(3)]?d:"get"+d.substr(3)]():parseFloat(a[d]),h||j[d]!==i[0][d]&&(h=j);if(this._beziers="cubic"!==b.type&&"quadratic"!==b.type&&"soft"!==b.type?m(i,isNaN(b.curviness)?1:b.curviness,!1,"thruBasic"===b.type,b.correlate,h):n(i,b.type,j),this._segCount=this._beziers[d].length,this._timeRes){var o=p(this._beziers,this._timeRes);this._length=o.length,this._lengths=o.lengths,this._segments=o.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(l=this._autoRotate)for(this._initialRotations=[],l[0]instanceof Array||(this._autoRotate=l=[l]),f=l.length;--f>-1;){for(g=0;3>g;g++)d=l[f][g],this._func[d]="function"==typeof a[d]?a[d.indexOf("set")||"function"!=typeof a["get"+d.substr(3)]?d:"get"+d.substr(3)]:!1;d=l[f][2],this._initialRotations[f]=this._func[d]?this._func[d].call(this._target):this._target[d]}return this._startRatio=c.vars.runBackwards?1:0,!0},set:function(b){var c,d,e,f,g,h,i,j,k,l,m=this._segCount,n=this._func,o=this._target,p=b!==this._startRatio;if(this._timeRes){if(k=this._lengths,l=this._curSeg,b*=this._length,e=this._li,b>this._l2&&m-1>e){for(j=m-1;j>e&&(this._l2=k[++e])<=b;);this._l1=k[e-1],this._li=e,this._curSeg=l=this._segments[e],this._s2=l[this._s1=this._si=0]}else if(b<this._l1&&e>0){for(;e>0&&(this._l1=k[--e])>=b;);0===e&&b<this._l1?this._l1=0:e++,this._l2=k[e],this._li=e,this._curSeg=l=this._segments[e],this._s1=l[(this._si=l.length-1)-1]||0,this._s2=l[this._si]
}if(c=e,b-=this._l1,e=this._si,b>this._s2&&e<l.length-1){for(j=l.length-1;j>e&&(this._s2=l[++e])<=b;);this._s1=l[e-1],this._si=e}else if(b<this._s1&&e>0){for(;e>0&&(this._s1=l[--e])>=b;);0===e&&b<this._s1?this._s1=0:e++,this._s2=l[e],this._si=e}h=(e+(b-this._s1)/(this._s2-this._s1))*this._prec}else c=0>b?0:b>=1?m-1:m*b>>0,h=(b-c*(1/m))*m;for(d=1-h,e=this._props.length;--e>-1;)f=this._props[e],g=this._beziers[f][c],i=(h*h*g.da+3*d*(h*g.ca+d*g.ba))*h+g.a,this._round[f]&&(i=Math.round(i)),n[f]?o[f](i):o[f]=i;if(this._autoRotate){var q,r,s,t,u,v,w,x=this._autoRotate;for(e=x.length;--e>-1;)f=x[e][2],v=x[e][3]||0,w=x[e][4]===!0?1:a,g=this._beziers[x[e][0]],q=this._beziers[x[e][1]],g&&q&&(g=g[c],q=q[c],r=g.a+(g.b-g.a)*h,t=g.b+(g.c-g.b)*h,r+=(t-r)*h,t+=(g.c+(g.d-g.c)*h-t)*h,s=q.a+(q.b-q.a)*h,u=q.b+(q.c-q.b)*h,s+=(u-s)*h,u+=(q.c+(q.d-q.c)*h-u)*h,i=p?Math.atan2(u-s,t-r)*w+v:this._initialRotations[e],n[f]?o[f](i):o[f]=i)}}}),r=q.prototype;q.bezierThrough=m,q.cubicToQuadratic=j,q._autoCSS=!0,q.quadraticToCubic=function(a,b,c){return new h(a,(2*b+a)/3,(2*b+c)/3,c)},q._cssRegister=function(){var a=g.CSSPlugin;if(a){var b=a._internals,c=b._parseToProxy,d=b._setPluginRatio,e=b.CSSPropTween;b._registerComplexSpecialProp("bezier",{parser:function(a,b,f,g,h,i){b instanceof Array&&(b={values:b}),i=new q;var j,k,l,m=b.values,n=m.length-1,o=[],p={};if(0>n)return h;for(j=0;n>=j;j++)l=c(a,m[j],g,h,i,n!==j),o[j]=l.end;for(k in b)p[k]=b[k];return p.values=o,h=new e(a,"bezier",0,0,l.pt,2),h.data=l,h.plugin=i,h.setRatio=d,0===p.autoRotate&&(p.autoRotate=!0),!p.autoRotate||p.autoRotate instanceof Array||(j=p.autoRotate===!0?0:Number(p.autoRotate),p.autoRotate=null!=l.end.left?[["left","top","rotation",j,!1]]:null!=l.end.x?[["x","y","rotation",j,!1]]:!1),p.autoRotate&&(g._transform||g._enableTransforms(!1),l.autoRotate=g._target._gsTransform),i._onInitTween(l.proxy,p,g._tween),h}})}},r._roundProps=function(a,b){for(var c=this._overwriteProps,d=c.length;--d>-1;)(a[c[d]]||a.bezier||a.bezierThrough)&&(this._round[c[d]]=b)},r._kill=function(a){var b,c,d=this._props;for(b in this._beziers)if(b in a)for(delete this._beziers[b],delete this._func[b],c=d.length;--c>-1;)d[c]===b&&d.splice(c,1);return this._super._kill.call(this,a)}}(),c._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(a,b){var d,e,f,g,h=function(){a.call(this,"css"),this._overwriteProps.length=0,this.setRatio=h.prototype.setRatio},i=c._gsDefine.globals,j={},k=h.prototype=new a("css");k.constructor=h,h.version="1.15.1",h.API=2,h.defaultTransformPerspective=0,h.defaultSkewType="compensated",k="px",h.suffixMap={top:k,right:k,bottom:k,left:k,width:k,height:k,fontSize:k,padding:k,margin:k,perspective:k,lineHeight:""};var l,m,n,o,p,q,r=/(?:\d|\-\d|\.\d|\-\.\d)+/g,s=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,t=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,u=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,v=/(?:\d|\-|\+|=|#|\.)*/g,w=/opacity *= *([^)]*)/i,x=/opacity:([^;]*)/i,y=/alpha\(opacity *=.+?\)/i,z=/^(rgb|hsl)/,A=/([A-Z])/g,B=/-([a-z])/gi,C=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,D=function(a,b){return b.toUpperCase()},E=/(?:Left|Right|Width)/i,F=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,G=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,H=/,(?=[^\)]*(?:\(|$))/gi,I=Math.PI/180,J=180/Math.PI,K={},L=document,M=function(a){return L.createElementNS?L.createElementNS("http://www.w3.org/1999/xhtml",a):L.createElement(a)},N=M("div"),O=M("img"),P=h._internals={_specialProps:j},Q=navigator.userAgent,R=function(){var a=Q.indexOf("Android"),b=M("a");return n=-1!==Q.indexOf("Safari")&&-1===Q.indexOf("Chrome")&&(-1===a||Number(Q.substr(a+8,1))>3),p=n&&Number(Q.substr(Q.indexOf("Version/")+8,1))<6,o=-1!==Q.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(Q)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(Q))&&(q=parseFloat(RegExp.$1)),b?(b.style.cssText="top:1px;opacity:.55;",/^0.55/.test(b.style.opacity)):!1}(),S=function(a){return w.test("string"==typeof a?a:(a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100:1},T=function(a){window.console&&console.log(a)},U="",V="",W=function(a,b){b=b||N;var c,d,e=b.style;if(void 0!==e[a])return a;for(a=a.charAt(0).toUpperCase()+a.substr(1),c=["O","Moz","ms","Ms","Webkit"],d=5;--d>-1&&void 0===e[c[d]+a];);return d>=0?(V=3===d?"ms":c[d],U="-"+V.toLowerCase()+"-",V+a):null},X=L.defaultView?L.defaultView.getComputedStyle:function(){},Y=h.getStyle=function(a,b,c,d,e){var f;return R||"opacity"!==b?(!d&&a.style[b]?f=a.style[b]:(c=c||X(a))?f=c[b]||c.getPropertyValue(b)||c.getPropertyValue(b.replace(A,"-$1").toLowerCase()):a.currentStyle&&(f=a.currentStyle[b]),null==e||f&&"none"!==f&&"auto"!==f&&"auto auto"!==f?f:e):S(a)},Z=P.convertToPixels=function(a,c,d,e,f){if("px"===e||!e)return d;if("auto"===e||!d)return 0;var g,i,j,k=E.test(c),l=a,m=N.style,n=0>d;if(n&&(d=-d),"%"===e&&-1!==c.indexOf("border"))g=d/100*(k?a.clientWidth:a.clientHeight);else{if(m.cssText="border:0 solid red;position:"+Y(a,"position")+";line-height:0;","%"!==e&&l.appendChild)m[k?"borderLeftWidth":"borderTopWidth"]=d+e;else{if(l=a.parentNode||L.body,i=l._gsCache,j=b.ticker.frame,i&&k&&i.time===j)return i.width*d/100;m[k?"width":"height"]=d+e}l.appendChild(N),g=parseFloat(N[k?"offsetWidth":"offsetHeight"]),l.removeChild(N),k&&"%"===e&&h.cacheWidths!==!1&&(i=l._gsCache=l._gsCache||{},i.time=j,i.width=g/d*100),0!==g||f||(g=Z(a,c,d,e,!0))}return n?-g:g},$=P.calculateOffset=function(a,b,c){if("absolute"!==Y(a,"position",c))return 0;var d="left"===b?"Left":"Top",e=Y(a,"margin"+d,c);return a["offset"+d]-(Z(a,b,parseFloat(e),e.replace(v,""))||0)},_=function(a,b){var c,d,e={};if(b=b||X(a,null))for(c in b)(-1===c.indexOf("Transform")||xb===c)&&(e[c]=b[c]);else if(b=a.currentStyle||a.style)for(c in b)"string"==typeof c&&void 0===e[c]&&(e[c.replace(B,D)]=b[c]);return R||(e.opacity=S(a)),d=Hb(a,b,!1),e.rotation=d.rotation,e.skewX=d.skewX,e.scaleX=d.scaleX,e.scaleY=d.scaleY,e.x=d.x,e.y=d.y,Ab&&(e.z=d.z,e.rotationX=d.rotationX,e.rotationY=d.rotationY,e.scaleZ=d.scaleZ),e.filters&&delete e.filters,e},ab=function(a,b,c,d,e){var f,g,h,i={},j=a.style;for(g in c)"cssText"!==g&&"length"!==g&&isNaN(g)&&(b[g]!==(f=c[g])||e&&e[g])&&-1===g.indexOf("Origin")&&("number"==typeof f||"string"==typeof f)&&(i[g]="auto"!==f||"left"!==g&&"top"!==g?""!==f&&"auto"!==f&&"none"!==f||"string"!=typeof b[g]||""===b[g].replace(u,"")?f:0:$(a,g),void 0!==j[g]&&(h=new ob(j,g,j[g],h)));if(d)for(g in d)"className"!==g&&(i[g]=d[g]);return{difs:i,firstMPT:h}},bb={width:["Left","Right"],height:["Top","Bottom"]},cb=["marginLeft","marginRight","marginTop","marginBottom"],db=function(a,b,c){var d=parseFloat("width"===b?a.offsetWidth:a.offsetHeight),e=bb[b],f=e.length;for(c=c||X(a,null);--f>-1;)d-=parseFloat(Y(a,"padding"+e[f],c,!0))||0,d-=parseFloat(Y(a,"border"+e[f]+"Width",c,!0))||0;return d},eb=function(a,b){(null==a||""===a||"auto"===a||"auto auto"===a)&&(a="0 0");var c=a.split(" "),d=-1!==a.indexOf("left")?"0%":-1!==a.indexOf("right")?"100%":c[0],e=-1!==a.indexOf("top")?"0%":-1!==a.indexOf("bottom")?"100%":c[1];return null==e?e="center"===d?"50%":"0":"center"===e&&(e="50%"),("center"===d||isNaN(parseFloat(d))&&-1===(d+"").indexOf("="))&&(d="50%"),b&&(b.oxp=-1!==d.indexOf("%"),b.oyp=-1!==e.indexOf("%"),b.oxr="="===d.charAt(1),b.oyr="="===e.charAt(1),b.ox=parseFloat(d.replace(u,"")),b.oy=parseFloat(e.replace(u,""))),d+" "+e+(c.length>2?" "+c[2]:"")},fb=function(a,b){return"string"==typeof a&&"="===a.charAt(1)?parseInt(a.charAt(0)+"1",10)*parseFloat(a.substr(2)):parseFloat(a)-parseFloat(b)},gb=function(a,b){return null==a?b:"string"==typeof a&&"="===a.charAt(1)?parseInt(a.charAt(0)+"1",10)*parseFloat(a.substr(2))+b:parseFloat(a)},hb=function(a,b,c,d){var e,f,g,h,i,j=1e-6;return null==a?h=b:"number"==typeof a?h=a:(e=360,f=a.split("_"),i="="===a.charAt(1),g=(i?parseInt(a.charAt(0)+"1",10)*parseFloat(f[0].substr(2)):parseFloat(f[0]))*(-1===a.indexOf("rad")?1:J)-(i?0:b),f.length&&(d&&(d[c]=b+g),-1!==a.indexOf("short")&&(g%=e,g!==g%(e/2)&&(g=0>g?g+e:g-e)),-1!==a.indexOf("_cw")&&0>g?g=(g+9999999999*e)%e-(g/e|0)*e:-1!==a.indexOf("ccw")&&g>0&&(g=(g-9999999999*e)%e-(g/e|0)*e)),h=b+g),j>h&&h>-j&&(h=0),h},ib={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},jb=function(a,b,c){return a=0>a?a+1:a>1?a-1:a,255*(1>6*a?b+(c-b)*a*6:.5>a?c:2>3*a?b+(c-b)*(2/3-a)*6:b)+.5|0},kb=h.parseColor=function(a){var b,c,d,e,f,g;return a&&""!==a?"number"==typeof a?[a>>16,a>>8&255,255&a]:(","===a.charAt(a.length-1)&&(a=a.substr(0,a.length-1)),ib[a]?ib[a]:"#"===a.charAt(0)?(4===a.length&&(b=a.charAt(1),c=a.charAt(2),d=a.charAt(3),a="#"+b+b+c+c+d+d),a=parseInt(a.substr(1),16),[a>>16,a>>8&255,255&a]):"hsl"===a.substr(0,3)?(a=a.match(r),e=Number(a[0])%360/360,f=Number(a[1])/100,g=Number(a[2])/100,c=.5>=g?g*(f+1):g+f-g*f,b=2*g-c,a.length>3&&(a[3]=Number(a[3])),a[0]=jb(e+1/3,b,c),a[1]=jb(e,b,c),a[2]=jb(e-1/3,b,c),a):(a=a.match(r)||ib.transparent,a[0]=Number(a[0]),a[1]=Number(a[1]),a[2]=Number(a[2]),a.length>3&&(a[3]=Number(a[3])),a)):ib.black},lb="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#.+?\\b";for(k in ib)lb+="|"+k+"\\b";lb=new RegExp(lb+")","gi");var mb=function(a,b,c,d){if(null==a)return function(a){return a};var e,f=b?(a.match(lb)||[""])[0]:"",g=a.split(f).join("").match(t)||[],h=a.substr(0,a.indexOf(g[0])),i=")"===a.charAt(a.length-1)?")":"",j=-1!==a.indexOf(" ")?" ":",",k=g.length,l=k>0?g[0].replace(r,""):"";return k?e=b?function(a){var b,m,n,o;if("number"==typeof a)a+=l;else if(d&&H.test(a)){for(o=a.replace(H,"|").split("|"),n=0;n<o.length;n++)o[n]=e(o[n]);return o.join(",")}if(b=(a.match(lb)||[f])[0],m=a.split(b).join("").match(t)||[],n=m.length,k>n--)for(;++n<k;)m[n]=c?m[(n-1)/2|0]:g[n];return h+m.join(j)+j+b+i+(-1!==a.indexOf("inset")?" inset":"")}:function(a){var b,f,m;if("number"==typeof a)a+=l;else if(d&&H.test(a)){for(f=a.replace(H,"|").split("|"),m=0;m<f.length;m++)f[m]=e(f[m]);return f.join(",")}if(b=a.match(t)||[],m=b.length,k>m--)for(;++m<k;)b[m]=c?b[(m-1)/2|0]:g[m];return h+b.join(j)+i}:function(a){return a}},nb=function(a){return a=a.split(","),function(b,c,d,e,f,g,h){var i,j=(c+"").split(" ");for(h={},i=0;4>i;i++)h[a[i]]=j[i]=j[i]||j[(i-1)/2>>0];return e.parse(b,h,f,g)}},ob=(P._setPluginRatio=function(a){this.plugin.setRatio(a);for(var b,c,d,e,f=this.data,g=f.proxy,h=f.firstMPT,i=1e-6;h;)b=g[h.v],h.r?b=Math.round(b):i>b&&b>-i&&(b=0),h.t[h.p]=b,h=h._next;if(f.autoRotate&&(f.autoRotate.rotation=g.rotation),1===a)for(h=f.firstMPT;h;){if(c=h.t,c.type){if(1===c.type){for(e=c.xs0+c.s+c.xs1,d=1;d<c.l;d++)e+=c["xn"+d]+c["xs"+(d+1)];c.e=e}}else c.e=c.s+c.xs0;h=h._next}},function(a,b,c,d,e){this.t=a,this.p=b,this.v=c,this.r=e,d&&(d._prev=this,this._next=d)}),pb=(P._parseToProxy=function(a,b,c,d,e,f){var g,h,i,j,k,l=d,m={},n={},o=c._transform,p=K;for(c._transform=null,K=b,d=k=c.parse(a,b,d,e),K=p,f&&(c._transform=o,l&&(l._prev=null,l._prev&&(l._prev._next=null)));d&&d!==l;){if(d.type<=1&&(h=d.p,n[h]=d.s+d.c,m[h]=d.s,f||(j=new ob(d,"s",h,j,d.r),d.c=0),1===d.type))for(g=d.l;--g>0;)i="xn"+g,h=d.p+"_"+i,n[h]=d.data[i],m[h]=d[i],f||(j=new ob(d,i,h,j,d.rxp[i]));d=d._next}return{proxy:m,end:n,firstMPT:j,pt:k}},P.CSSPropTween=function(a,b,c,e,f,h,i,j,k,l,m){this.t=a,this.p=b,this.s=c,this.c=e,this.n=i||b,a instanceof pb||g.push(this.n),this.r=j,this.type=h||0,k&&(this.pr=k,d=!0),this.b=void 0===l?c:l,this.e=void 0===m?c+e:m,f&&(this._next=f,f._prev=this)}),qb=h.parseComplex=function(a,b,c,d,e,f,g,h,i,j){c=c||f||"",g=new pb(a,b,0,0,g,j?2:1,null,!1,h,c,d),d+="";var k,m,n,o,p,q,t,u,v,w,x,y,A=c.split(", ").join(",").split(" "),B=d.split(", ").join(",").split(" "),C=A.length,D=l!==!1;for((-1!==d.indexOf(",")||-1!==c.indexOf(","))&&(A=A.join(" ").replace(H,", ").split(" "),B=B.join(" ").replace(H,", ").split(" "),C=A.length),C!==B.length&&(A=(f||"").split(" "),C=A.length),g.plugin=i,g.setRatio=j,k=0;C>k;k++)if(o=A[k],p=B[k],u=parseFloat(o),u||0===u)g.appendXtra("",u,fb(p,u),p.replace(s,""),D&&-1!==p.indexOf("px"),!0);else if(e&&("#"===o.charAt(0)||ib[o]||z.test(o)))y=","===p.charAt(p.length-1)?"),":")",o=kb(o),p=kb(p),v=o.length+p.length>6,v&&!R&&0===p[3]?(g["xs"+g.l]+=g.l?" transparent":"transparent",g.e=g.e.split(B[k]).join("transparent")):(R||(v=!1),g.appendXtra(v?"rgba(":"rgb(",o[0],p[0]-o[0],",",!0,!0).appendXtra("",o[1],p[1]-o[1],",",!0).appendXtra("",o[2],p[2]-o[2],v?",":y,!0),v&&(o=o.length<4?1:o[3],g.appendXtra("",o,(p.length<4?1:p[3])-o,y,!1)));else if(q=o.match(r)){if(t=p.match(s),!t||t.length!==q.length)return g;for(n=0,m=0;m<q.length;m++)x=q[m],w=o.indexOf(x,n),g.appendXtra(o.substr(n,w-n),Number(x),fb(t[m],x),"",D&&"px"===o.substr(w+x.length,2),0===m),n=w+x.length;g["xs"+g.l]+=o.substr(n)}else g["xs"+g.l]+=g.l?" "+o:o;if(-1!==d.indexOf("=")&&g.data){for(y=g.xs0+g.data.s,k=1;k<g.l;k++)y+=g["xs"+k]+g.data["xn"+k];g.e=y+g["xs"+k]}return g.l||(g.type=-1,g.xs0=g.e),g.xfirst||g},rb=9;for(k=pb.prototype,k.l=k.pr=0;--rb>0;)k["xn"+rb]=0,k["xs"+rb]="";k.xs0="",k._next=k._prev=k.xfirst=k.data=k.plugin=k.setRatio=k.rxp=null,k.appendXtra=function(a,b,c,d,e,f){var g=this,h=g.l;return g["xs"+h]+=f&&h?" "+a:a||"",c||0===h||g.plugin?(g.l++,g.type=g.setRatio?2:1,g["xs"+g.l]=d||"",h>0?(g.data["xn"+h]=b+c,g.rxp["xn"+h]=e,g["xn"+h]=b,g.plugin||(g.xfirst=new pb(g,"xn"+h,b,c,g.xfirst||g,0,g.n,e,g.pr),g.xfirst.xs0=0),g):(g.data={s:b+c},g.rxp={},g.s=b,g.c=c,g.r=e,g)):(g["xs"+h]+=b+(d||""),g)};var sb=function(a,b){b=b||{},this.p=b.prefix?W(a)||a:a,j[a]=j[this.p]=this,this.format=b.formatter||mb(b.defaultValue,b.color,b.collapsible,b.multi),b.parser&&(this.parse=b.parser),this.clrs=b.color,this.multi=b.multi,this.keyword=b.keyword,this.dflt=b.defaultValue,this.pr=b.priority||0},tb=P._registerComplexSpecialProp=function(a,b,c){"object"!=typeof b&&(b={parser:c});var d,e,f=a.split(","),g=b.defaultValue;for(c=c||[g],d=0;d<f.length;d++)b.prefix=0===d&&b.prefix,b.defaultValue=c[d]||g,e=new sb(f[d],b)},ub=function(a){if(!j[a]){var b=a.charAt(0).toUpperCase()+a.substr(1)+"Plugin";tb(a,{parser:function(a,c,d,e,f,g,h){var k=i.com.greensock.plugins[b];return k?(k._cssRegister(),j[d].parse(a,c,d,e,f,g,h)):(T("Error: "+b+" js file not loaded."),f)}})}};k=sb.prototype,k.parseComplex=function(a,b,c,d,e,f){var g,h,i,j,k,l,m=this.keyword;if(this.multi&&(H.test(c)||H.test(b)?(h=b.replace(H,"|").split("|"),i=c.replace(H,"|").split("|")):m&&(h=[b],i=[c])),i){for(j=i.length>h.length?i.length:h.length,g=0;j>g;g++)b=h[g]=h[g]||this.dflt,c=i[g]=i[g]||this.dflt,m&&(k=b.indexOf(m),l=c.indexOf(m),k!==l&&(c=-1===l?i:h,c[g]+=" "+m));b=h.join(", "),c=i.join(", ")}return qb(a,this.p,b,c,this.clrs,this.dflt,d,this.pr,e,f)},k.parse=function(a,b,c,d,e,g){return this.parseComplex(a.style,this.format(Y(a,this.p,f,!1,this.dflt)),this.format(b),e,g)},h.registerSpecialProp=function(a,b,c){tb(a,{parser:function(a,d,e,f,g,h){var i=new pb(a,e,0,0,g,2,e,!1,c);return i.plugin=h,i.setRatio=b(a,d,f._tween,e),i},priority:c})};var vb,wb="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),xb=W("transform"),yb=U+"transform",zb=W("transformOrigin"),Ab=null!==W("perspective"),Bb=P.Transform=function(){this.perspective=parseFloat(h.defaultTransformPerspective)||0,this.force3D=h.defaultForce3D!==!1&&Ab?h.defaultForce3D||"auto":!1},Cb=window.SVGElement,Db=function(a,b,c){var d,e=L.createElementNS("http://www.w3.org/2000/svg",a),f=/([a-z])([A-Z])/g;for(d in c)e.setAttributeNS(null,d.replace(f,"$1-$2").toLowerCase(),c[d]);return b.appendChild(e),e},Eb=document.documentElement,Fb=function(){var a,b,c,d=q||/Android/i.test(Q)&&!window.chrome;return L.createElementNS&&!d&&(a=Db("svg",Eb),b=Db("rect",a,{width:100,height:50,x:100}),c=b.getBoundingClientRect().width,b.style[zb]="50% 50%",b.style[xb]="scaleX(0.5)",d=c===b.getBoundingClientRect().width&&!(o&&Ab),Eb.removeChild(a)),d}(),Gb=function(a,b,c){var d=a.getBBox();b=eb(b).split(" "),c.xOrigin=(-1!==b[0].indexOf("%")?parseFloat(b[0])/100*d.width:parseFloat(b[0]))+d.x,c.yOrigin=(-1!==b[1].indexOf("%")?parseFloat(b[1])/100*d.height:parseFloat(b[1]))+d.y},Hb=P.getTransform=function(a,b,c,d){if(a._gsTransform&&c&&!d)return a._gsTransform;var e,g,i,j,k,l,m,n,o,p,q=c?a._gsTransform||new Bb:new Bb,r=q.scaleX<0,s=2e-5,t=1e5,u=Ab?parseFloat(Y(a,zb,b,!1,"0 0 0").split(" ")[2])||q.zOrigin||0:0,v=parseFloat(h.defaultTransformPerspective)||0;if(xb?g=Y(a,yb,b,!0):a.currentStyle&&(g=a.currentStyle.filter.match(F),g=g&&4===g.length?[g[0].substr(4),Number(g[2].substr(4)),Number(g[1].substr(4)),g[3].substr(4),q.x||0,q.y||0].join(","):""),e=!g||"none"===g||"matrix(1, 0, 0, 1, 0, 0)"===g,q.svg=!!(Cb&&"function"==typeof a.getBBox&&a.getCTM&&(!a.parentNode||a.parentNode.getBBox&&a.parentNode.getCTM)),q.svg&&(Gb(a,Y(a,zb,f,!1,"50% 50%")+"",q),vb=h.useSVGTransformAttr||Fb,i=a.getAttribute("transform"),e&&i&&-1!==i.indexOf("matrix")&&(g=i,e=0)),!e){for(i=(g||"").match(/(?:\-|\b)[\d\-\.e]+\b/gi)||[],j=i.length;--j>-1;)k=Number(i[j]),i[j]=(l=k-(k|=0))?(l*t+(0>l?-.5:.5)|0)/t+k:k;if(16===i.length){var w,x,y,z,A,B=i[0],C=i[1],D=i[2],E=i[3],G=i[4],H=i[5],I=i[6],K=i[7],L=i[8],M=i[9],N=i[10],O=i[12],P=i[13],Q=i[14],R=i[11],S=Math.atan2(I,N);q.zOrigin&&(Q=-q.zOrigin,O=L*Q-i[12],P=M*Q-i[13],Q=N*Q+q.zOrigin-i[14]),q.rotationX=S*J,S&&(z=Math.cos(-S),A=Math.sin(-S),w=G*z+L*A,x=H*z+M*A,y=I*z+N*A,L=G*-A+L*z,M=H*-A+M*z,N=I*-A+N*z,R=K*-A+R*z,G=w,H=x,I=y),S=Math.atan2(L,N),q.rotationY=S*J,S&&(z=Math.cos(-S),A=Math.sin(-S),w=B*z-L*A,x=C*z-M*A,y=D*z-N*A,M=C*A+M*z,N=D*A+N*z,R=E*A+R*z,B=w,C=x,D=y),S=Math.atan2(C,B),q.rotation=S*J,S&&(z=Math.cos(-S),A=Math.sin(-S),B=B*z+G*A,x=C*z+H*A,H=C*-A+H*z,I=D*-A+I*z,C=x),q.rotationX&&Math.abs(q.rotationX)+Math.abs(q.rotation)>359.9&&(q.rotationX=q.rotation=0,q.rotationY+=180),q.scaleX=(Math.sqrt(B*B+C*C)*t+.5|0)/t,q.scaleY=(Math.sqrt(H*H+M*M)*t+.5|0)/t,q.scaleZ=(Math.sqrt(I*I+N*N)*t+.5|0)/t,q.skewX=0,q.perspective=R?1/(0>R?-R:R):0,q.x=O,q.y=P,q.z=Q}else if(!(Ab&&!d&&i.length&&q.x===i[4]&&q.y===i[5]&&(q.rotationX||q.rotationY)||void 0!==q.x&&"none"===Y(a,"display",b))){var T=i.length>=6,U=T?i[0]:1,V=i[1]||0,W=i[2]||0,X=T?i[3]:1;q.x=i[4]||0,q.y=i[5]||0,m=Math.sqrt(U*U+V*V),n=Math.sqrt(X*X+W*W),o=U||V?Math.atan2(V,U)*J:q.rotation||0,p=W||X?Math.atan2(W,X)*J+o:q.skewX||0,Math.abs(p)>90&&Math.abs(p)<270&&(r?(m*=-1,p+=0>=o?180:-180,o+=0>=o?180:-180):(n*=-1,p+=0>=p?180:-180)),q.scaleX=m,q.scaleY=n,q.rotation=o,q.skewX=p,Ab&&(q.rotationX=q.rotationY=q.z=0,q.perspective=v,q.scaleZ=1)}q.zOrigin=u;for(j in q)q[j]<s&&q[j]>-s&&(q[j]=0)}return c&&(a._gsTransform=q),q},Ib=function(a){var b,c,d=this.data,e=-d.rotation*I,f=e+d.skewX*I,g=1e5,h=(Math.cos(e)*d.scaleX*g|0)/g,i=(Math.sin(e)*d.scaleX*g|0)/g,j=(Math.sin(f)*-d.scaleY*g|0)/g,k=(Math.cos(f)*d.scaleY*g|0)/g,l=this.t.style,m=this.t.currentStyle;if(m){c=i,i=-j,j=-c,b=m.filter,l.filter="";var n,o,p=this.t.offsetWidth,r=this.t.offsetHeight,s="absolute"!==m.position,t="progid:DXImageTransform.Microsoft.Matrix(M11="+h+", M12="+i+", M21="+j+", M22="+k,u=d.x+p*d.xPercent/100,x=d.y+r*d.yPercent/100;if(null!=d.ox&&(n=(d.oxp?p*d.ox*.01:d.ox)-p/2,o=(d.oyp?r*d.oy*.01:d.oy)-r/2,u+=n-(n*h+o*i),x+=o-(n*j+o*k)),s?(n=p/2,o=r/2,t+=", Dx="+(n-(n*h+o*i)+u)+", Dy="+(o-(n*j+o*k)+x)+")"):t+=", sizingMethod='auto expand')",l.filter=-1!==b.indexOf("DXImageTransform.Microsoft.Matrix(")?b.replace(G,t):t+" "+b,(0===a||1===a)&&1===h&&0===i&&0===j&&1===k&&(s&&-1===t.indexOf("Dx=0, Dy=0")||w.test(b)&&100!==parseFloat(RegExp.$1)||-1===b.indexOf("gradient("&&b.indexOf("Alpha"))&&l.removeAttribute("filter")),!s){var y,z,A,B=8>q?1:-1;for(n=d.ieOffsetX||0,o=d.ieOffsetY||0,d.ieOffsetX=Math.round((p-((0>h?-h:h)*p+(0>i?-i:i)*r))/2+u),d.ieOffsetY=Math.round((r-((0>k?-k:k)*r+(0>j?-j:j)*p))/2+x),rb=0;4>rb;rb++)z=cb[rb],y=m[z],c=-1!==y.indexOf("px")?parseFloat(y):Z(this.t,z,parseFloat(y),y.replace(v,""))||0,A=c!==d[z]?2>rb?-d.ieOffsetX:-d.ieOffsetY:2>rb?n-d.ieOffsetX:o-d.ieOffsetY,l[z]=(d[z]=Math.round(c-A*(0===rb||2===rb?1:B)))+"px"}}},Jb=P.set3DTransformRatio=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,p,q,r,s,t,u,v,w,x=this.data,y=this.t.style,z=x.rotation*I,A=x.scaleX,B=x.scaleY,C=x.scaleZ,D=x.x,E=x.y,F=x.z,G=x.perspective;if(!(1!==a&&0!==a&&x.force3D||x.force3D===!0||x.rotationY||x.rotationX||1!==C||G||F))return void Kb.call(this,a);if(o&&(p=1e-4,p>A&&A>-p&&(A=C=2e-5),p>B&&B>-p&&(B=C=2e-5),!G||x.z||x.rotationX||x.rotationY||(G=0)),z||x.skewX)q=b=Math.cos(z),r=e=Math.sin(z),x.skewX&&(z-=x.skewX*I,q=Math.cos(z),r=Math.sin(z),"simple"===x.skewType&&(s=Math.tan(x.skewX*I),s=Math.sqrt(1+s*s),q*=s,r*=s)),c=-r,f=q;else{if(!(x.rotationY||x.rotationX||1!==C||G||x.svg))return void(y[xb]=(x.xPercent||x.yPercent?"translate("+x.xPercent+"%,"+x.yPercent+"%) translate3d(":"translate3d(")+D+"px,"+E+"px,"+F+"px)"+(1!==A||1!==B?" scale("+A+","+B+")":""));b=f=1,c=e=0}j=1,d=g=h=i=k=l=0,m=G?-1/G:0,n=x.zOrigin,p=1e-6,v=",",w="0",z=x.rotationY*I,z&&(q=Math.cos(z),r=Math.sin(z),h=-r,k=m*-r,d=b*r,g=e*r,j=q,m*=q,b*=q,e*=q),z=x.rotationX*I,z&&(q=Math.cos(z),r=Math.sin(z),s=c*q+d*r,t=f*q+g*r,i=j*r,l=m*r,d=c*-r+d*q,g=f*-r+g*q,j*=q,m*=q,c=s,f=t),1!==C&&(d*=C,g*=C,j*=C,m*=C),1!==B&&(c*=B,f*=B,i*=B,l*=B),1!==A&&(b*=A,e*=A,h*=A,k*=A),(n||x.svg)&&(n&&(D+=d*-n,E+=g*-n,F+=j*-n+n),x.svg&&(D+=x.xOrigin-(x.xOrigin*b+x.yOrigin*c),E+=x.yOrigin-(x.xOrigin*e+x.yOrigin*f)),p>D&&D>-p&&(D=w),p>E&&E>-p&&(E=w),p>F&&F>-p&&(F=0)),u=x.xPercent||x.yPercent?"translate("+x.xPercent+"%,"+x.yPercent+"%) matrix3d(":"matrix3d(",u+=(p>b&&b>-p?w:b)+v+(p>e&&e>-p?w:e)+v+(p>h&&h>-p?w:h),u+=v+(p>k&&k>-p?w:k)+v+(p>c&&c>-p?w:c)+v+(p>f&&f>-p?w:f),x.rotationX||x.rotationY?(u+=v+(p>i&&i>-p?w:i)+v+(p>l&&l>-p?w:l)+v+(p>d&&d>-p?w:d),u+=v+(p>g&&g>-p?w:g)+v+(p>j&&j>-p?w:j)+v+(p>m&&m>-p?w:m)+v):u+=",0,0,0,0,1,0,",u+=D+v+E+v+F+v+(G?1+-F/G:1)+")",y[xb]=u},Kb=P.set2DTransformRatio=function(a){var b,c,d,e,f,g,h,i,j,k,l,m=this.data,n=this.t,o=n.style,p=m.x,q=m.y;return!(m.rotationX||m.rotationY||m.z||m.force3D===!0||"auto"===m.force3D&&1!==a&&0!==a)||m.svg&&vb||!Ab?(e=m.scaleX,f=m.scaleY,void(m.rotation||m.skewX||m.svg?(b=m.rotation*I,c=b-m.skewX*I,d=1e5,g=Math.cos(b)*e,h=Math.sin(b)*e,i=Math.sin(c)*-f,j=Math.cos(c)*f,m.svg&&(p+=m.xOrigin-(m.xOrigin*g+m.yOrigin*i),q+=m.yOrigin-(m.xOrigin*h+m.yOrigin*j),l=1e-6,l>p&&p>-l&&(p=0),l>q&&q>-l&&(q=0)),k=(g*d|0)/d+","+(h*d|0)/d+","+(i*d|0)/d+","+(j*d|0)/d+","+p+","+q+")",m.svg&&vb?n.setAttribute("transform","matrix("+k):o[xb]=(m.xPercent||m.yPercent?"translate("+m.xPercent+"%,"+m.yPercent+"%) matrix(":"matrix(")+k):o[xb]=(m.xPercent||m.yPercent?"translate("+m.xPercent+"%,"+m.yPercent+"%) matrix(":"matrix(")+e+",0,0,"+f+","+p+","+q+")")):(this.setRatio=Jb,void Jb.call(this,a))};k=Bb.prototype,k.x=k.y=k.z=k.skewX=k.skewY=k.rotation=k.rotationX=k.rotationY=k.zOrigin=k.xPercent=k.yPercent=0,k.scaleX=k.scaleY=k.scaleZ=1,tb("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent",{parser:function(a,b,c,d,e,g,i){if(d._lastParsedTransform===i)return e;d._lastParsedTransform=i;var j,k,l,m,n,o,p,q=d._transform=Hb(a,f,!0,i.parseTransform),r=a.style,s=1e-6,t=wb.length,u=i,v={};if("string"==typeof u.transform&&xb)l=N.style,l[xb]=u.transform,l.display="block",l.position="absolute",L.body.appendChild(N),j=Hb(N,null,!1),L.body.removeChild(N);else if("object"==typeof u){if(j={scaleX:gb(null!=u.scaleX?u.scaleX:u.scale,q.scaleX),scaleY:gb(null!=u.scaleY?u.scaleY:u.scale,q.scaleY),scaleZ:gb(u.scaleZ,q.scaleZ),x:gb(u.x,q.x),y:gb(u.y,q.y),z:gb(u.z,q.z),xPercent:gb(u.xPercent,q.xPercent),yPercent:gb(u.yPercent,q.yPercent),perspective:gb(u.transformPerspective,q.perspective)},p=u.directionalRotation,null!=p)if("object"==typeof p)for(l in p)u[l]=p[l];else u.rotation=p;"string"==typeof u.x&&-1!==u.x.indexOf("%")&&(j.x=0,j.xPercent=gb(u.x,q.xPercent)),"string"==typeof u.y&&-1!==u.y.indexOf("%")&&(j.y=0,j.yPercent=gb(u.y,q.yPercent)),j.rotation=hb("rotation"in u?u.rotation:"shortRotation"in u?u.shortRotation+"_short":"rotationZ"in u?u.rotationZ:q.rotation,q.rotation,"rotation",v),Ab&&(j.rotationX=hb("rotationX"in u?u.rotationX:"shortRotationX"in u?u.shortRotationX+"_short":q.rotationX||0,q.rotationX,"rotationX",v),j.rotationY=hb("rotationY"in u?u.rotationY:"shortRotationY"in u?u.shortRotationY+"_short":q.rotationY||0,q.rotationY,"rotationY",v)),j.skewX=null==u.skewX?q.skewX:hb(u.skewX,q.skewX),j.skewY=null==u.skewY?q.skewY:hb(u.skewY,q.skewY),(k=j.skewY-q.skewY)&&(j.skewX+=k,j.rotation+=k)}for(Ab&&null!=u.force3D&&(q.force3D=u.force3D,o=!0),q.skewType=u.skewType||q.skewType||h.defaultSkewType,n=q.force3D||q.z||q.rotationX||q.rotationY||j.z||j.rotationX||j.rotationY||j.perspective,n||null==u.scale||(j.scaleZ=1);--t>-1;)c=wb[t],m=j[c]-q[c],(m>s||-s>m||null!=u[c]||null!=K[c])&&(o=!0,e=new pb(q,c,q[c],m,e),c in v&&(e.e=v[c]),e.xs0=0,e.plugin=g,d._overwriteProps.push(e.n));return m=u.transformOrigin,m&&q.svg&&(Gb(a,eb(m),j),e=new pb(q,"xOrigin",q.xOrigin,j.xOrigin-q.xOrigin,e,-1,"transformOrigin"),e.b=q.xOrigin,e.e=e.xs0=j.xOrigin,e=new pb(q,"yOrigin",q.yOrigin,j.yOrigin-q.yOrigin,e,-1,"transformOrigin"),e.b=q.yOrigin,e.e=e.xs0=j.yOrigin,m="0px 0px"),(m||Ab&&n&&q.zOrigin)&&(xb?(o=!0,c=zb,m=(m||Y(a,c,f,!1,"50% 50%"))+"",e=new pb(r,c,0,0,e,-1,"transformOrigin"),e.b=r[c],e.plugin=g,Ab?(l=q.zOrigin,m=m.split(" "),q.zOrigin=(m.length>2&&(0===l||"0px"!==m[2])?parseFloat(m[2]):l)||0,e.xs0=e.e=m[0]+" "+(m[1]||"50%")+" 0px",e=new pb(q,"zOrigin",0,0,e,-1,e.n),e.b=l,e.xs0=e.e=q.zOrigin):e.xs0=e.e=m):eb(m+"",q)),o&&(d._transformType=q.svg&&vb||!n&&3!==this._transformType?2:3),e},prefix:!0}),tb("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),tb("borderRadius",{defaultValue:"0px",parser:function(a,b,c,d,g){b=this.format(b);var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],y=a.style;for(p=parseFloat(a.offsetWidth),q=parseFloat(a.offsetHeight),h=b.split(" "),i=0;i<x.length;i++)this.p.indexOf("border")&&(x[i]=W(x[i])),l=k=Y(a,x[i],f,!1,"0px"),-1!==l.indexOf(" ")&&(k=l.split(" "),l=k[0],k=k[1]),m=j=h[i],n=parseFloat(l),s=l.substr((n+"").length),t="="===m.charAt(1),t?(o=parseInt(m.charAt(0)+"1",10),m=m.substr(2),o*=parseFloat(m),r=m.substr((o+"").length-(0>o?1:0))||""):(o=parseFloat(m),r=m.substr((o+"").length)),""===r&&(r=e[c]||s),r!==s&&(u=Z(a,"borderLeft",n,s),v=Z(a,"borderTop",n,s),"%"===r?(l=u/p*100+"%",k=v/q*100+"%"):"em"===r?(w=Z(a,"borderLeft",1,"em"),l=u/w+"em",k=v/w+"em"):(l=u+"px",k=v+"px"),t&&(m=parseFloat(l)+o+r,j=parseFloat(k)+o+r)),g=qb(y,x[i],l+" "+k,m+" "+j,!1,"0px",g);return g},prefix:!0,formatter:mb("0px 0px 0px 0px",!1,!0)}),tb("backgroundPosition",{defaultValue:"0 0",parser:function(a,b,c,d,e,g){var h,i,j,k,l,m,n="background-position",o=f||X(a,null),p=this.format((o?q?o.getPropertyValue(n+"-x")+" "+o.getPropertyValue(n+"-y"):o.getPropertyValue(n):a.currentStyle.backgroundPositionX+" "+a.currentStyle.backgroundPositionY)||"0 0"),r=this.format(b);if(-1!==p.indexOf("%")!=(-1!==r.indexOf("%"))&&(m=Y(a,"backgroundImage").replace(C,""),m&&"none"!==m)){for(h=p.split(" "),i=r.split(" "),O.setAttribute("src",m),j=2;--j>-1;)p=h[j],k=-1!==p.indexOf("%"),k!==(-1!==i[j].indexOf("%"))&&(l=0===j?a.offsetWidth-O.width:a.offsetHeight-O.height,h[j]=k?parseFloat(p)/100*l+"px":parseFloat(p)/l*100+"%");p=h.join(" ")}return this.parseComplex(a.style,p,r,e,g)},formatter:eb}),tb("backgroundSize",{defaultValue:"0 0",formatter:eb}),tb("perspective",{defaultValue:"0px",prefix:!0}),tb("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),tb("transformStyle",{prefix:!0}),tb("backfaceVisibility",{prefix:!0}),tb("userSelect",{prefix:!0}),tb("margin",{parser:nb("marginTop,marginRight,marginBottom,marginLeft")}),tb("padding",{parser:nb("paddingTop,paddingRight,paddingBottom,paddingLeft")}),tb("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(a,b,c,d,e,g){var h,i,j;return 9>q?(i=a.currentStyle,j=8>q?" ":",",h="rect("+i.clipTop+j+i.clipRight+j+i.clipBottom+j+i.clipLeft+")",b=this.format(b).split(",").join(j)):(h=this.format(Y(a,this.p,f,!1,this.dflt)),b=this.format(b)),this.parseComplex(a.style,h,b,e,g)}}),tb("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),tb("autoRound,strictUnits",{parser:function(a,b,c,d,e){return e}}),tb("border",{defaultValue:"0px solid #000",parser:function(a,b,c,d,e,g){return this.parseComplex(a.style,this.format(Y(a,"borderTopWidth",f,!1,"0px")+" "+Y(a,"borderTopStyle",f,!1,"solid")+" "+Y(a,"borderTopColor",f,!1,"#000")),this.format(b),e,g)},color:!0,formatter:function(a){var b=a.split(" ");return b[0]+" "+(b[1]||"solid")+" "+(a.match(lb)||["#000"])[0]}}),tb("borderWidth",{parser:nb("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),tb("float,cssFloat,styleFloat",{parser:function(a,b,c,d,e){var f=a.style,g="cssFloat"in f?"cssFloat":"styleFloat";return new pb(f,g,0,0,e,-1,c,!1,0,f[g],b)}});var Lb=function(a){var b,c=this.t,d=c.filter||Y(this.data,"filter")||"",e=this.s+this.c*a|0;100===e&&(-1===d.indexOf("atrix(")&&-1===d.indexOf("radient(")&&-1===d.indexOf("oader(")?(c.removeAttribute("filter"),b=!Y(this.data,"filter")):(c.filter=d.replace(y,""),b=!0)),b||(this.xn1&&(c.filter=d=d||"alpha(opacity="+e+")"),-1===d.indexOf("pacity")?0===e&&this.xn1||(c.filter=d+" alpha(opacity="+e+")"):c.filter=d.replace(w,"opacity="+e))};tb("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(a,b,c,d,e,g){var h=parseFloat(Y(a,"opacity",f,!1,"1")),i=a.style,j="autoAlpha"===c;return"string"==typeof b&&"="===b.charAt(1)&&(b=("-"===b.charAt(0)?-1:1)*parseFloat(b.substr(2))+h),j&&1===h&&"hidden"===Y(a,"visibility",f)&&0!==b&&(h=0),R?e=new pb(i,"opacity",h,b-h,e):(e=new pb(i,"opacity",100*h,100*(b-h),e),e.xn1=j?1:0,i.zoom=1,e.type=2,e.b="alpha(opacity="+e.s+")",e.e="alpha(opacity="+(e.s+e.c)+")",e.data=a,e.plugin=g,e.setRatio=Lb),j&&(e=new pb(i,"visibility",0,0,e,-1,null,!1,0,0!==h?"inherit":"hidden",0===b?"hidden":"inherit"),e.xs0="inherit",d._overwriteProps.push(e.n),d._overwriteProps.push(c)),e}});var Mb=function(a,b){b&&(a.removeProperty?("ms"===b.substr(0,2)&&(b="M"+b.substr(1)),a.removeProperty(b.replace(A,"-$1").toLowerCase())):a.removeAttribute(b))},Nb=function(a){if(this.t._gsClassPT=this,1===a||0===a){this.t.setAttribute("class",0===a?this.b:this.e);for(var b=this.data,c=this.t.style;b;)b.v?c[b.p]=b.v:Mb(c,b.p),b=b._next;1===a&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};tb("className",{parser:function(a,b,c,e,g,h,i){var j,k,l,m,n,o=a.getAttribute("class")||"",p=a.style.cssText;if(g=e._classNamePT=new pb(a,c,0,0,g,2),g.setRatio=Nb,g.pr=-11,d=!0,g.b=o,k=_(a,f),l=a._gsClassPT){for(m={},n=l.data;n;)m[n.p]=1,n=n._next;l.setRatio(1)}return a._gsClassPT=g,g.e="="!==b.charAt(1)?b:o.replace(new RegExp("\\s*\\b"+b.substr(2)+"\\b"),"")+("+"===b.charAt(0)?" "+b.substr(2):""),e._tween._duration&&(a.setAttribute("class",g.e),j=ab(a,k,_(a),i,m),a.setAttribute("class",o),g.data=j.firstMPT,a.style.cssText=p,g=g.xfirst=e.parse(a,j.difs,g,h)),g}});var Ob=function(a){if((1===a||0===a)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var b,c,d,e,f=this.t.style,g=j.transform.parse;if("all"===this.e)f.cssText="",e=!0;else for(b=this.e.split(" ").join("").split(","),d=b.length;--d>-1;)c=b[d],j[c]&&(j[c].parse===g?e=!0:c="transformOrigin"===c?zb:j[c].p),Mb(f,c);e&&(Mb(f,xb),this.t._gsTransform&&delete this.t._gsTransform)}};for(tb("clearProps",{parser:function(a,b,c,e,f){return f=new pb(a,c,0,0,f,2),f.setRatio=Ob,f.e=b,f.pr=-10,f.data=e._tween,d=!0,f}}),k="bezier,throwProps,physicsProps,physics2D".split(","),rb=k.length;rb--;)ub(k[rb]);k=h.prototype,k._firstPT=k._lastParsedTransform=k._transform=null,k._onInitTween=function(a,b,c){if(!a.nodeType)return!1;
this._target=a,this._tween=c,this._vars=b,l=b.autoRound,d=!1,e=b.suffixMap||h.suffixMap,f=X(a,""),g=this._overwriteProps;var i,j,k,o,q,r,s,t,u,v=a.style;if(m&&""===v.zIndex&&(i=Y(a,"zIndex",f),("auto"===i||""===i)&&this._addLazySet(v,"zIndex",0)),"string"==typeof b&&(o=v.cssText,i=_(a,f),v.cssText=o+";"+b,i=ab(a,i,_(a)).difs,!R&&x.test(b)&&(i.opacity=parseFloat(RegExp.$1)),b=i,v.cssText=o),this._firstPT=j=this.parse(a,b,null),this._transformType){for(u=3===this._transformType,xb?n&&(m=!0,""===v.zIndex&&(s=Y(a,"zIndex",f),("auto"===s||""===s)&&this._addLazySet(v,"zIndex",0)),p&&this._addLazySet(v,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(u?"visible":"hidden"))):v.zoom=1,k=j;k&&k._next;)k=k._next;t=new pb(a,"transform",0,0,null,2),this._linkCSSP(t,null,k),t.setRatio=u&&Ab?Jb:xb?Kb:Ib,t.data=this._transform||Hb(a,f,!0),g.pop()}if(d){for(;j;){for(r=j._next,k=o;k&&k.pr>j.pr;)k=k._next;(j._prev=k?k._prev:q)?j._prev._next=j:o=j,(j._next=k)?k._prev=j:q=j,j=r}this._firstPT=o}return!0},k.parse=function(a,b,c,d){var g,h,i,k,m,n,o,p,q,r,s=a.style;for(g in b)n=b[g],h=j[g],h?c=h.parse(a,n,g,this,c,d,b):(m=Y(a,g,f)+"",q="string"==typeof n,"color"===g||"fill"===g||"stroke"===g||-1!==g.indexOf("Color")||q&&z.test(n)?(q||(n=kb(n),n=(n.length>3?"rgba(":"rgb(")+n.join(",")+")"),c=qb(s,g,m,n,!0,"transparent",c,0,d)):!q||-1===n.indexOf(" ")&&-1===n.indexOf(",")?(i=parseFloat(m),o=i||0===i?m.substr((i+"").length):"",(""===m||"auto"===m)&&("width"===g||"height"===g?(i=db(a,g,f),o="px"):"left"===g||"top"===g?(i=$(a,g,f),o="px"):(i="opacity"!==g?0:1,o="")),r=q&&"="===n.charAt(1),r?(k=parseInt(n.charAt(0)+"1",10),n=n.substr(2),k*=parseFloat(n),p=n.replace(v,"")):(k=parseFloat(n),p=q?n.replace(v,""):""),""===p&&(p=g in e?e[g]:o),n=k||0===k?(r?k+i:k)+p:b[g],o!==p&&""!==p&&(k||0===k)&&i&&(i=Z(a,g,i,o),"%"===p?(i/=Z(a,g,100,"%")/100,b.strictUnits!==!0&&(m=i+"%")):"em"===p?i/=Z(a,g,1,"em"):"px"!==p&&(k=Z(a,g,k,p),p="px"),r&&(k||0===k)&&(n=k+i+p)),r&&(k+=i),!i&&0!==i||!k&&0!==k?void 0!==s[g]&&(n||n+""!="NaN"&&null!=n)?(c=new pb(s,g,k||i||0,0,c,-1,g,!1,0,m,n),c.xs0="none"!==n||"display"!==g&&-1===g.indexOf("Style")?n:m):T("invalid "+g+" tween value: "+b[g]):(c=new pb(s,g,i,k-i,c,0,g,l!==!1&&("px"===p||"zIndex"===g),0,m,n),c.xs0=p)):c=qb(s,g,m,n,!0,null,c,0,d)),d&&c&&!c.plugin&&(c.plugin=d);return c},k.setRatio=function(a){var b,c,d,e=this._firstPT,f=1e-6;if(1!==a||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(a||this._tween._time!==this._tween._duration&&0!==this._tween._time||this._tween._rawPrevTime===-1e-6)for(;e;){if(b=e.c*a+e.s,e.r?b=Math.round(b):f>b&&b>-f&&(b=0),e.type)if(1===e.type)if(d=e.l,2===d)e.t[e.p]=e.xs0+b+e.xs1+e.xn1+e.xs2;else if(3===d)e.t[e.p]=e.xs0+b+e.xs1+e.xn1+e.xs2+e.xn2+e.xs3;else if(4===d)e.t[e.p]=e.xs0+b+e.xs1+e.xn1+e.xs2+e.xn2+e.xs3+e.xn3+e.xs4;else if(5===d)e.t[e.p]=e.xs0+b+e.xs1+e.xn1+e.xs2+e.xn2+e.xs3+e.xn3+e.xs4+e.xn4+e.xs5;else{for(c=e.xs0+b+e.xs1,d=1;d<e.l;d++)c+=e["xn"+d]+e["xs"+(d+1)];e.t[e.p]=c}else-1===e.type?e.t[e.p]=e.xs0:e.setRatio&&e.setRatio(a);else e.t[e.p]=b+e.xs0;e=e._next}else for(;e;)2!==e.type?e.t[e.p]=e.b:e.setRatio(a),e=e._next;else for(;e;)2!==e.type?e.t[e.p]=e.e:e.setRatio(a),e=e._next},k._enableTransforms=function(a){this._transform=this._transform||Hb(this._target,f,!0),this._transformType=this._transform.svg&&vb||!a&&3!==this._transformType?2:3};var Pb=function(){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};k._addLazySet=function(a,b,c){var d=this._firstPT=new pb(a,b,0,0,this._firstPT,2);d.e=c,d.setRatio=Pb,d.data=this},k._linkCSSP=function(a,b,c,d){return a&&(b&&(b._prev=a),a._next&&(a._next._prev=a._prev),a._prev?a._prev._next=a._next:this._firstPT===a&&(this._firstPT=a._next,d=!0),c?c._next=a:d||null!==this._firstPT||(this._firstPT=a),a._next=b,a._prev=c),a},k._kill=function(b){var c,d,e,f=b;if(b.autoAlpha||b.alpha){f={};for(d in b)f[d]=b[d];f.opacity=1,f.autoAlpha&&(f.visibility=1)}return b.className&&(c=this._classNamePT)&&(e=c.xfirst,e&&e._prev?this._linkCSSP(e._prev,c._next,e._prev._prev):e===this._firstPT&&(this._firstPT=c._next),c._next&&this._linkCSSP(c._next,c._next._next,e._prev),this._classNamePT=null),a.prototype._kill.call(this,f)};var Qb=function(a,b,c){var d,e,f,g;if(a.slice)for(e=a.length;--e>-1;)Qb(a[e],b,c);else for(d=a.childNodes,e=d.length;--e>-1;)f=d[e],g=f.type,f.style&&(b.push(_(f)),c&&c.push(f)),1!==g&&9!==g&&11!==g||!f.childNodes.length||Qb(f,b,c)};return h.cascadeTo=function(a,c,d){var e,f,g,h=b.to(a,c,d),i=[h],j=[],k=[],l=[],m=b._internals.reservedProps;for(a=h._targets||h.target,Qb(a,j,l),h.render(c,!0),Qb(a,k),h.render(0,!0),h._enabled(!0),e=l.length;--e>-1;)if(f=ab(l[e],j[e],k[e]),f.firstMPT){f=f.difs;for(g in d)m[g]&&(f[g]=d[g]);i.push(b.to(l[e],c,f))}return i},a.activate([h]),h},!0),function(){var a=c._gsDefine.plugin({propName:"roundProps",priority:-1,API:2,init:function(a,b,c){return this._tween=c,!0}}),b=a.prototype;b._onInitAllProps=function(){for(var a,b,c,d=this._tween,e=d.vars.roundProps instanceof Array?d.vars.roundProps:d.vars.roundProps.split(","),f=e.length,g={},h=d._propLookup.roundProps;--f>-1;)g[e[f]]=1;for(f=e.length;--f>-1;)for(a=e[f],b=d._firstPT;b;)c=b._next,b.pg?b.t._roundProps(g,!0):b.n===a&&(this._add(b.t,a,b.s,b.c),c&&(c._prev=b._prev),b._prev?b._prev._next=c:d._firstPT===b&&(d._firstPT=c),b._next=b._prev=null,d._propLookup[a]=h),b=c;return!1},b._add=function(a,b,c,d){this._addTween(a,b,c,c+d,b,!0),this._overwriteProps.push(b)}}(),c._gsDefine.plugin({propName:"attr",API:2,version:"0.3.3",init:function(a,b){var c,d,e;if("function"!=typeof a.setAttribute)return!1;this._target=a,this._proxy={},this._start={},this._end={};for(c in b)this._start[c]=this._proxy[c]=d=a.getAttribute(c),e=this._addTween(this._proxy,c,parseFloat(d),b[c],c),this._end[c]=e?e.s+e.c:b[c],this._overwriteProps.push(c);return!0},set:function(a){this._super.setRatio.call(this,a);for(var b,c=this._overwriteProps,d=c.length,e=1===a?this._end:a?this._proxy:this._start;--d>-1;)b=c[d],this._target.setAttribute(b,e[b]+"")}}),c._gsDefine.plugin({propName:"directionalRotation",version:"0.2.1",API:2,init:function(a,b){"object"!=typeof b&&(b={rotation:b}),this.finals={};var c,d,e,f,g,h,i=b.useRadians===!0?2*Math.PI:360,j=1e-6;for(c in b)"useRadians"!==c&&(h=(b[c]+"").split("_"),d=h[0],e=parseFloat("function"!=typeof a[c]?a[c]:a[c.indexOf("set")||"function"!=typeof a["get"+c.substr(3)]?c:"get"+c.substr(3)]()),f=this.finals[c]="string"==typeof d&&"="===d.charAt(1)?e+parseInt(d.charAt(0)+"1",10)*Number(d.substr(2)):Number(d)||0,g=f-e,h.length&&(d=h.join("_"),-1!==d.indexOf("short")&&(g%=i,g!==g%(i/2)&&(g=0>g?g+i:g-i)),-1!==d.indexOf("_cw")&&0>g?g=(g+9999999999*i)%i-(g/i|0)*i:-1!==d.indexOf("ccw")&&g>0&&(g=(g-9999999999*i)%i-(g/i|0)*i)),(g>j||-j>g)&&(this._addTween(a,c,e,e+g,c),this._overwriteProps.push(c)));return!0},set:function(a){var b;if(1!==a)this._super.setRatio.call(this,a);else for(b=this._firstPT;b;)b.f?b.t[b.p](this.finals[b.p]):b.t[b.p]=this.finals[b.p],b=b._next}})._autoCSS=!0,c._gsDefine("easing.Back",["easing.Ease"],function(a){var b,d,e,f=c.GreenSockGlobals||c,g=f.com.greensock,h=2*Math.PI,i=Math.PI/2,j=g._class,k=function(b,c){var d=j("easing."+b,function(){},!0),e=d.prototype=new a;return e.constructor=d,e.getRatio=c,d},l=a.register||function(){},m=function(a,b,c,d){var e=j("easing."+a,{easeOut:new b,easeIn:new c,easeInOut:new d},!0);return l(e,a),e},n=function(a,b,c){this.t=a,this.v=b,c&&(this.next=c,c.prev=this,this.c=c.v-b,this.gap=c.t-a)},o=function(b,c){var d=j("easing."+b,function(a){this._p1=a||0===a?a:1.70158,this._p2=1.525*this._p1},!0),e=d.prototype=new a;return e.constructor=d,e.getRatio=c,e.config=function(a){return new d(a)},d},p=m("Back",o("BackOut",function(a){return(a-=1)*a*((this._p1+1)*a+this._p1)+1}),o("BackIn",function(a){return a*a*((this._p1+1)*a-this._p1)}),o("BackInOut",function(a){return(a*=2)<1?.5*a*a*((this._p2+1)*a-this._p2):.5*((a-=2)*a*((this._p2+1)*a+this._p2)+2)})),q=j("easing.SlowMo",function(a,b,c){b=b||0===b?b:.7,null==a?a=.7:a>1&&(a=1),this._p=1!==a?b:0,this._p1=(1-a)/2,this._p2=a,this._p3=this._p1+this._p2,this._calcEnd=c===!0},!0),r=q.prototype=new a;return r.constructor=q,r.getRatio=function(a){var b=a+(.5-a)*this._p;return a<this._p1?this._calcEnd?1-(a=1-a/this._p1)*a:b-(a=1-a/this._p1)*a*a*a*b:a>this._p3?this._calcEnd?1-(a=(a-this._p3)/this._p1)*a:b+(a-b)*(a=(a-this._p3)/this._p1)*a*a*a:this._calcEnd?1:b},q.ease=new q(.7,.7),r.config=q.config=function(a,b,c){return new q(a,b,c)},b=j("easing.SteppedEase",function(a){a=a||1,this._p1=1/a,this._p2=a+1},!0),r=b.prototype=new a,r.constructor=b,r.getRatio=function(a){return 0>a?a=0:a>=1&&(a=.999999999),(this._p2*a>>0)*this._p1},r.config=b.config=function(a){return new b(a)},d=j("easing.RoughEase",function(b){b=b||{};for(var c,d,e,f,g,h,i=b.taper||"none",j=[],k=0,l=0|(b.points||20),m=l,o=b.randomize!==!1,p=b.clamp===!0,q=b.template instanceof a?b.template:null,r="number"==typeof b.strength?.4*b.strength:.4;--m>-1;)c=o?Math.random():1/l*m,d=q?q.getRatio(c):c,"none"===i?e=r:"out"===i?(f=1-c,e=f*f*r):"in"===i?e=c*c*r:.5>c?(f=2*c,e=f*f*.5*r):(f=2*(1-c),e=f*f*.5*r),o?d+=Math.random()*e-.5*e:m%2?d+=.5*e:d-=.5*e,p&&(d>1?d=1:0>d&&(d=0)),j[k++]={x:c,y:d};for(j.sort(function(a,b){return a.x-b.x}),h=new n(1,1,null),m=l;--m>-1;)g=j[m],h=new n(g.x,g.y,h);this._prev=new n(0,0,0!==h.t?h:h.next)},!0),r=d.prototype=new a,r.constructor=d,r.getRatio=function(a){var b=this._prev;if(a>b.t){for(;b.next&&a>=b.t;)b=b.next;b=b.prev}else for(;b.prev&&a<=b.t;)b=b.prev;return this._prev=b,b.v+(a-b.t)/b.gap*b.c},r.config=function(a){return new d(a)},d.ease=new d,m("Bounce",k("BounceOut",function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}),k("BounceIn",function(a){return(a=1-a)<1/2.75?1-7.5625*a*a:2/2.75>a?1-(7.5625*(a-=1.5/2.75)*a+.75):2.5/2.75>a?1-(7.5625*(a-=2.25/2.75)*a+.9375):1-(7.5625*(a-=2.625/2.75)*a+.984375)}),k("BounceInOut",function(a){var b=.5>a;return a=b?1-2*a:2*a-1,a=1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375,b?.5*(1-a):.5*a+.5})),m("Circ",k("CircOut",function(a){return Math.sqrt(1-(a-=1)*a)}),k("CircIn",function(a){return-(Math.sqrt(1-a*a)-1)}),k("CircInOut",function(a){return(a*=2)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)})),e=function(b,c,d){var e=j("easing."+b,function(a,b){this._p1=a||1,this._p2=b||d,this._p3=this._p2/h*(Math.asin(1/this._p1)||0)},!0),f=e.prototype=new a;return f.constructor=e,f.getRatio=c,f.config=function(a,b){return new e(a,b)},e},m("Elastic",e("ElasticOut",function(a){return this._p1*Math.pow(2,-10*a)*Math.sin((a-this._p3)*h/this._p2)+1},.3),e("ElasticIn",function(a){return-(this._p1*Math.pow(2,10*(a-=1))*Math.sin((a-this._p3)*h/this._p2))},.3),e("ElasticInOut",function(a){return(a*=2)<1?-.5*this._p1*Math.pow(2,10*(a-=1))*Math.sin((a-this._p3)*h/this._p2):this._p1*Math.pow(2,-10*(a-=1))*Math.sin((a-this._p3)*h/this._p2)*.5+1},.45)),m("Expo",k("ExpoOut",function(a){return 1-Math.pow(2,-10*a)}),k("ExpoIn",function(a){return Math.pow(2,10*(a-1))-.001}),k("ExpoInOut",function(a){return(a*=2)<1?.5*Math.pow(2,10*(a-1)):.5*(2-Math.pow(2,-10*(a-1)))})),m("Sine",k("SineOut",function(a){return Math.sin(a*i)}),k("SineIn",function(a){return-Math.cos(a*i)+1}),k("SineInOut",function(a){return-.5*(Math.cos(Math.PI*a)-1)})),j("easing.EaseLookup",{find:function(b){return a.map[b]}},!0),l(f.SlowMo,"SlowMo","ease,"),l(d,"RoughEase","ease,"),l(b,"SteppedEase","ease,"),p},!0)}),c._gsDefine&&c._gsQueue.pop()(),function(a,c){"use strict";var d=a.GreenSockGlobals=a.GreenSockGlobals||a;if(!d.TweenLite){var e,f,g,h,i,j=function(a){var b,c=a.split("."),e=d;for(b=0;b<c.length;b++)e[c[b]]=e=e[c[b]]||{};return e},k=j("com.greensock"),l=1e-10,m=function(a){var b,c=[],d=a.length;for(b=0;b!==d;c.push(a[b++]));return c},n=function(){},o=function(){var a=Object.prototype.toString,b=a.call([]);return function(c){return null!=c&&(c instanceof Array||"object"==typeof c&&!!c.push&&a.call(c)===b)}}(),p={},q=function(e,f,g,h){this.sc=p[e]?p[e].sc:[],p[e]=this,this.gsClass=null,this.func=g;var i=[];this.check=function(k){for(var l,m,n,o,r=f.length,s=r;--r>-1;)(l=p[f[r]]||new q(f[r],[])).gsClass?(i[r]=l.gsClass,s--):k&&l.sc.push(this);if(0===s&&g)for(m=("com.greensock."+e).split("."),n=m.pop(),o=j(m.join("."))[n]=this.gsClass=g.apply(g,i),h&&(d[n]=o,"function"==typeof define&&define.amd?define((a.GreenSockAMDPath?a.GreenSockAMDPath+"/":"")+e.split(".").pop(),[],function(){return o}):e===c&&"undefined"!=typeof b&&b.exports&&(b.exports=o)),r=0;r<this.sc.length;r++)this.sc[r].check()},this.check(!0)},r=a._gsDefine=function(a,b,c,d){return new q(a,b,c,d)},s=k._class=function(a,b,c){return b=b||function(){},r(a,[],function(){return b},c),b};r.globals=d;var t=[0,0,1,1],u=[],v=s("easing.Ease",function(a,b,c,d){this._func=a,this._type=c||0,this._power=d||0,this._params=b?t.concat(b):t},!0),w=v.map={},x=v.register=function(a,b,c,d){for(var e,f,g,h,i=b.split(","),j=i.length,l=(c||"easeIn,easeOut,easeInOut").split(",");--j>-1;)for(f=i[j],e=d?s("easing."+f,null,!0):k.easing[f]||{},g=l.length;--g>-1;)h=l[g],w[f+"."+h]=w[h+f]=e[h]=a.getRatio?a:a[h]||new a};for(g=v.prototype,g._calcEnd=!1,g.getRatio=function(a){if(this._func)return this._params[0]=a,this._func.apply(null,this._params);var b=this._type,c=this._power,d=1===b?1-a:2===b?a:.5>a?2*a:2*(1-a);return 1===c?d*=d:2===c?d*=d*d:3===c?d*=d*d*d:4===c&&(d*=d*d*d*d),1===b?1-d:2===b?d:.5>a?d/2:1-d/2},e=["Linear","Quad","Cubic","Quart","Quint,Strong"],f=e.length;--f>-1;)g=e[f]+",Power"+f,x(new v(null,null,1,f),g,"easeOut",!0),x(new v(null,null,2,f),g,"easeIn"+(0===f?",easeNone":"")),x(new v(null,null,3,f),g,"easeInOut");w.linear=k.easing.Linear.easeIn,w.swing=k.easing.Quad.easeInOut;var y=s("events.EventDispatcher",function(a){this._listeners={},this._eventTarget=a||this});g=y.prototype,g.addEventListener=function(a,b,c,d,e){e=e||0;var f,g,j=this._listeners[a],k=0;for(null==j&&(this._listeners[a]=j=[]),g=j.length;--g>-1;)f=j[g],f.c===b&&f.s===c?j.splice(g,1):0===k&&f.pr<e&&(k=g+1);j.splice(k,0,{c:b,s:c,up:d,pr:e}),this!==h||i||h.wake()},g.removeEventListener=function(a,b){var c,d=this._listeners[a];if(d)for(c=d.length;--c>-1;)if(d[c].c===b)return void d.splice(c,1)},g.dispatchEvent=function(a){var b,c,d,e=this._listeners[a];if(e)for(b=e.length,c=this._eventTarget;--b>-1;)d=e[b],d&&(d.up?d.c.call(d.s||c,{type:a,target:c}):d.c.call(d.s||c))};var z=a.requestAnimationFrame,A=a.cancelAnimationFrame,B=Date.now||function(){return(new Date).getTime()},C=B();for(e=["ms","moz","webkit","o"],f=e.length;--f>-1&&!z;)z=a[e[f]+"RequestAnimationFrame"],A=a[e[f]+"CancelAnimationFrame"]||a[e[f]+"CancelRequestAnimationFrame"];s("Ticker",function(a,b){var c,d,e,f,g,j=this,k=B(),m=b!==!1&&z,o=500,p=33,q="tick",r=function(a){var b,h,i=B()-C;i>o&&(k+=i-p),C+=i,j.time=(C-k)/1e3,b=j.time-g,(!c||b>0||a===!0)&&(j.frame++,g+=b+(b>=f?.004:f-b),h=!0),a!==!0&&(e=d(r)),h&&j.dispatchEvent(q)};y.call(j),j.time=j.frame=0,j.tick=function(){r(!0)},j.lagSmoothing=function(a,b){o=a||1/l,p=Math.min(b,o,0)},j.sleep=function(){null!=e&&(m&&A?A(e):clearTimeout(e),d=n,e=null,j===h&&(i=!1))},j.wake=function(){null!==e?j.sleep():j.frame>10&&(C=B()-o+5),d=0===c?n:m&&z?z:function(a){return setTimeout(a,1e3*(g-j.time)+1|0)},j===h&&(i=!0),r(2)},j.fps=function(a){return arguments.length?(c=a,f=1/(c||60),g=this.time+f,void j.wake()):c},j.useRAF=function(a){return arguments.length?(j.sleep(),m=a,void j.fps(c)):m},j.fps(a),setTimeout(function(){m&&(!e||j.frame<5)&&j.useRAF(!1)},1500)}),g=k.Ticker.prototype=new k.events.EventDispatcher,g.constructor=k.Ticker;var D=s("core.Animation",function(a,b){if(this.vars=b=b||{},this._duration=this._totalDuration=a||0,this._delay=Number(b.delay)||0,this._timeScale=1,this._active=b.immediateRender===!0,this.data=b.data,this._reversed=b.reversed===!0,S){i||h.wake();var c=this.vars.useFrames?R:S;c.add(this,c._time),this.vars.paused&&this.paused(!0)}});h=D.ticker=new k.Ticker,g=D.prototype,g._dirty=g._gc=g._initted=g._paused=!1,g._totalTime=g._time=0,g._rawPrevTime=-1,g._next=g._last=g._onUpdate=g._timeline=g.timeline=null,g._paused=!1;var E=function(){i&&B()-C>2e3&&h.wake(),setTimeout(E,2e3)};E(),g.play=function(a,b){return null!=a&&this.seek(a,b),this.reversed(!1).paused(!1)},g.pause=function(a,b){return null!=a&&this.seek(a,b),this.paused(!0)},g.resume=function(a,b){return null!=a&&this.seek(a,b),this.paused(!1)},g.seek=function(a,b){return this.totalTime(Number(a),b!==!1)},g.restart=function(a,b){return this.reversed(!1).paused(!1).totalTime(a?-this._delay:0,b!==!1,!0)},g.reverse=function(a,b){return null!=a&&this.seek(a||this.totalDuration(),b),this.reversed(!0).paused(!1)},g.render=function(){},g.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,(this._gc||!this.timeline)&&this._enabled(!0),this},g.isActive=function(){var a,b=this._timeline,c=this._startTime;return!b||!this._gc&&!this._paused&&b.isActive()&&(a=b.rawTime())>=c&&a<c+this.totalDuration()/this._timeScale},g._enabled=function(a,b){return i||h.wake(),this._gc=!a,this._active=this.isActive(),b!==!0&&(a&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!a&&this.timeline&&this._timeline._remove(this,!0)),!1},g._kill=function(){return this._enabled(!1,!1)},g.kill=function(a,b){return this._kill(a,b),this},g._uncache=function(a){for(var b=a?this:this.timeline;b;)b._dirty=!0,b=b.timeline;return this},g._swapSelfInParams=function(a){for(var b=a.length,c=a.concat();--b>-1;)"{self}"===a[b]&&(c[b]=this);return c},g.eventCallback=function(a,b,c,d){if("on"===(a||"").substr(0,2)){var e=this.vars;if(1===arguments.length)return e[a];null==b?delete e[a]:(e[a]=b,e[a+"Params"]=o(c)&&-1!==c.join("").indexOf("{self}")?this._swapSelfInParams(c):c,e[a+"Scope"]=d),"onUpdate"===a&&(this._onUpdate=b)}return this},g.delay=function(a){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+a-this._delay),this._delay=a,this):this._delay},g.duration=function(a){return arguments.length?(this._duration=this._totalDuration=a,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==a&&this.totalTime(this._totalTime*(a/this._duration),!0),this):(this._dirty=!1,this._duration)},g.totalDuration=function(a){return this._dirty=!1,arguments.length?this.duration(a):this._totalDuration},g.time=function(a,b){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(a>this._duration?this._duration:a,b)):this._time},g.totalTime=function(a,b,c){if(i||h.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(0>a&&!c&&(a+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var d=this._totalDuration,e=this._timeline;if(a>d&&!c&&(a=d),this._startTime=(this._paused?this._pauseTime:e._time)-(this._reversed?d-a:a)/this._timeScale,e._dirty||this._uncache(!1),e._timeline)for(;e._timeline;)e._timeline._time!==(e._startTime+e._totalTime)/e._timeScale&&e.totalTime(e._totalTime,!0),e=e._timeline}this._gc&&this._enabled(!0,!1),(this._totalTime!==a||0===this._duration)&&(this.render(a,b,!1),J.length&&T())}return this},g.progress=g.totalProgress=function(a,b){return arguments.length?this.totalTime(this.duration()*a,b):this._time/this.duration()},g.startTime=function(a){return arguments.length?(a!==this._startTime&&(this._startTime=a,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,a-this._delay)),this):this._startTime},g.endTime=function(a){return this._startTime+(0!=a?this.totalDuration():this.duration())/this._timeScale},g.timeScale=function(a){if(!arguments.length)return this._timeScale;if(a=a||l,this._timeline&&this._timeline.smoothChildTiming){var b=this._pauseTime,c=b||0===b?b:this._timeline.totalTime();this._startTime=c-(c-this._startTime)*this._timeScale/a}return this._timeScale=a,this._uncache(!1)},g.reversed=function(a){return arguments.length?(a!=this._reversed&&(this._reversed=a,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},g.paused=function(a){if(!arguments.length)return this._paused;if(a!=this._paused&&this._timeline){i||a||h.wake();var b=this._timeline,c=b.rawTime(),d=c-this._pauseTime;!a&&b.smoothChildTiming&&(this._startTime+=d,this._uncache(!1)),this._pauseTime=a?c:null,this._paused=a,this._active=this.isActive(),!a&&0!==d&&this._initted&&this.duration()&&this.render(b.smoothChildTiming?this._totalTime:(c-this._startTime)/this._timeScale,!0,!0)}return this._gc&&!a&&this._enabled(!0,!1),this};var F=s("core.SimpleTimeline",function(a){D.call(this,0,a),this.autoRemoveChildren=this.smoothChildTiming=!0});g=F.prototype=new D,g.constructor=F,g.kill()._gc=!1,g._first=g._last=g._recent=null,g._sortChildren=!1,g.add=g.insert=function(a,b){var c,d;if(a._startTime=Number(b||0)+a._delay,a._paused&&this!==a._timeline&&(a._pauseTime=a._startTime+(this.rawTime()-a._startTime)/a._timeScale),a.timeline&&a.timeline._remove(a,!0),a.timeline=a._timeline=this,a._gc&&a._enabled(!0,!0),c=this._last,this._sortChildren)for(d=a._startTime;c&&c._startTime>d;)c=c._prev;return c?(a._next=c._next,c._next=a):(a._next=this._first,this._first=a),a._next?a._next._prev=a:this._last=a,a._prev=c,this._recent=a,this._timeline&&this._uncache(!0),this},g._remove=function(a,b){return a.timeline===this&&(b||a._enabled(!1,!0),a._prev?a._prev._next=a._next:this._first===a&&(this._first=a._next),a._next?a._next._prev=a._prev:this._last===a&&(this._last=a._prev),a._next=a._prev=a.timeline=null,a===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},g.render=function(a,b,c){var d,e=this._first;for(this._totalTime=this._time=this._rawPrevTime=a;e;)d=e._next,(e._active||a>=e._startTime&&!e._paused)&&(e._reversed?e.render((e._dirty?e.totalDuration():e._totalDuration)-(a-e._startTime)*e._timeScale,b,c):e.render((a-e._startTime)*e._timeScale,b,c)),e=d},g.rawTime=function(){return i||h.wake(),this._totalTime};var G=s("TweenLite",function(b,c,d){if(D.call(this,c,d),this.render=G.prototype.render,null==b)throw"Cannot tween a null target.";this.target=b="string"!=typeof b?b:G.selector(b)||b;var e,f,g,h=b.jquery||b.length&&b!==a&&b[0]&&(b[0]===a||b[0].nodeType&&b[0].style&&!b.nodeType),i=this.vars.overwrite;if(this._overwrite=i=null==i?Q[G.defaultOverwrite]:"number"==typeof i?i>>0:Q[i],(h||b instanceof Array||b.push&&o(b))&&"number"!=typeof b[0])for(this._targets=g=m(b),this._propLookup=[],this._siblings=[],e=0;e<g.length;e++)f=g[e],f?"string"!=typeof f?f.length&&f!==a&&f[0]&&(f[0]===a||f[0].nodeType&&f[0].style&&!f.nodeType)?(g.splice(e--,1),this._targets=g=g.concat(m(f))):(this._siblings[e]=U(f,this,!1),1===i&&this._siblings[e].length>1&&W(f,this,null,1,this._siblings[e])):(f=g[e--]=G.selector(f),"string"==typeof f&&g.splice(e+1,1)):g.splice(e--,1);else this._propLookup={},this._siblings=U(b,this,!1),1===i&&this._siblings.length>1&&W(b,this,null,1,this._siblings);(this.vars.immediateRender||0===c&&0===this._delay&&this.vars.immediateRender!==!1)&&(this._time=-l,this.render(-this._delay))},!0),H=function(b){return b&&b.length&&b!==a&&b[0]&&(b[0]===a||b[0].nodeType&&b[0].style&&!b.nodeType)},I=function(a,b){var c,d={};for(c in a)P[c]||c in b&&"transform"!==c&&"x"!==c&&"y"!==c&&"width"!==c&&"height"!==c&&"className"!==c&&"border"!==c||!(!M[c]||M[c]&&M[c]._autoCSS)||(d[c]=a[c],delete a[c]);a.css=d};g=G.prototype=new D,g.constructor=G,g.kill()._gc=!1,g.ratio=0,g._firstPT=g._targets=g._overwrittenProps=g._startAt=null,g._notifyPluginsOfEnabled=g._lazy=!1,G.version="1.15.1",G.defaultEase=g._ease=new v(null,null,1,1),G.defaultOverwrite="auto",G.ticker=h,G.autoSleep=!0,G.lagSmoothing=function(a,b){h.lagSmoothing(a,b)},G.selector=a.$||a.jQuery||function(b){var c=a.$||a.jQuery;return c?(G.selector=c,c(b)):"undefined"==typeof document?b:document.querySelectorAll?document.querySelectorAll(b):document.getElementById("#"===b.charAt(0)?b.substr(1):b)};var J=[],K={},L=G._internals={isArray:o,isSelector:H,lazyTweens:J},M=G._plugins={},N=L.tweenLookup={},O=0,P=L.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1},Q={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,"true":1,"false":0},R=D._rootFramesTimeline=new F,S=D._rootTimeline=new F,T=L.lazyRender=function(){var a,b=J.length;for(K={};--b>-1;)a=J[b],a&&a._lazy!==!1&&(a.render(a._lazy[0],a._lazy[1],!0),a._lazy=!1);J.length=0};S._startTime=h.time,R._startTime=h.frame,S._active=R._active=!0,setTimeout(T,1),D._updateRoot=G.render=function(){var a,b,c;if(J.length&&T(),S.render((h.time-S._startTime)*S._timeScale,!1,!1),R.render((h.frame-R._startTime)*R._timeScale,!1,!1),J.length&&T(),!(h.frame%120)){for(c in N){for(b=N[c].tweens,a=b.length;--a>-1;)b[a]._gc&&b.splice(a,1);0===b.length&&delete N[c]}if(c=S._first,(!c||c._paused)&&G.autoSleep&&!R._first&&1===h._listeners.tick.length){for(;c&&c._paused;)c=c._next;c||h.sleep()}}},h.addEventListener("tick",D._updateRoot);var U=function(a,b,c){var d,e,f=a._gsTweenID;if(N[f||(a._gsTweenID=f="t"+O++)]||(N[f]={target:a,tweens:[]}),b&&(d=N[f].tweens,d[e=d.length]=b,c))for(;--e>-1;)d[e]===b&&d.splice(e,1);return N[f].tweens},V=function(a,b,c,d){var e,f,g=a.vars.onOverwrite;return g&&(e=g(a,b,c,d)),g=G.onOverwrite,g&&(f=g(a,b,c,d)),e!==!1&&f!==!1},W=function(a,b,c,d,e){var f,g,h,i;if(1===d||d>=4){for(i=e.length,f=0;i>f;f++)if((h=e[f])!==b)h._gc||V(h,b)&&h._enabled(!1,!1)&&(g=!0);else if(5===d)break;return g}var j,k=b._startTime+l,m=[],n=0,o=0===b._duration;for(f=e.length;--f>-1;)(h=e[f])===b||h._gc||h._paused||(h._timeline!==b._timeline?(j=j||X(b,0,o),0===X(h,j,o)&&(m[n++]=h)):h._startTime<=k&&h._startTime+h.totalDuration()/h._timeScale>k&&((o||!h._initted)&&k-h._startTime<=2e-10||(m[n++]=h)));for(f=n;--f>-1;)if(h=m[f],2===d&&h._kill(c,a,b)&&(g=!0),2!==d||!h._firstPT&&h._initted){if(2!==d&&!V(h,b))continue;h._enabled(!1,!1)&&(g=!0)}return g},X=function(a,b,c){for(var d=a._timeline,e=d._timeScale,f=a._startTime;d._timeline;){if(f+=d._startTime,e*=d._timeScale,d._paused)return-100;d=d._timeline}return f/=e,f>b?f-b:c&&f===b||!a._initted&&2*l>f-b?l:(f+=a.totalDuration()/a._timeScale/e)>b+l?0:f-b-l};g._init=function(){var a,b,c,d,e,f=this.vars,g=this._overwrittenProps,h=this._duration,i=!!f.immediateRender,j=f.ease;if(f.startAt){this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),e={};for(d in f.startAt)e[d]=f.startAt[d];if(e.overwrite=!1,e.immediateRender=!0,e.lazy=i&&f.lazy!==!1,e.startAt=e.delay=null,this._startAt=G.to(this.target,0,e),i)if(this._time>0)this._startAt=null;else if(0!==h)return}else if(f.runBackwards&&0!==h)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{0!==this._time&&(i=!1),c={};for(d in f)P[d]&&"autoCSS"!==d||(c[d]=f[d]);if(c.overwrite=0,c.data="isFromStart",c.lazy=i&&f.lazy!==!1,c.immediateRender=i,this._startAt=G.to(this.target,0,c),i){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=j=j?j instanceof v?j:"function"==typeof j?new v(j,f.easeParams):w[j]||G.defaultEase:G.defaultEase,f.easeParams instanceof Array&&j.config&&(this._ease=j.config.apply(j,f.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(a=this._targets.length;--a>-1;)this._initProps(this._targets[a],this._propLookup[a]={},this._siblings[a],g?g[a]:null)&&(b=!0);else b=this._initProps(this.target,this._propLookup,this._siblings,g);if(b&&G._onPluginEvent("_onInitAllProps",this),g&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),f.runBackwards)for(c=this._firstPT;c;)c.s+=c.c,c.c=-c.c,c=c._next;this._onUpdate=f.onUpdate,this._initted=!0},g._initProps=function(b,c,d,e){var f,g,h,i,j,k;if(null==b)return!1;K[b._gsTweenID]&&T(),this.vars.css||b.style&&b!==a&&b.nodeType&&M.css&&this.vars.autoCSS!==!1&&I(this.vars,b);for(f in this.vars){if(k=this.vars[f],P[f])k&&(k instanceof Array||k.push&&o(k))&&-1!==k.join("").indexOf("{self}")&&(this.vars[f]=k=this._swapSelfInParams(k,this));else if(M[f]&&(i=new M[f])._onInitTween(b,this.vars[f],this)){for(this._firstPT=j={_next:this._firstPT,t:i,p:"setRatio",s:0,c:1,f:!0,n:f,pg:!0,pr:i._priority},g=i._overwriteProps.length;--g>-1;)c[i._overwriteProps[g]]=this._firstPT;(i._priority||i._onInitAllProps)&&(h=!0),(i._onDisable||i._onEnable)&&(this._notifyPluginsOfEnabled=!0)}else this._firstPT=c[f]=j={_next:this._firstPT,t:b,p:f,f:"function"==typeof b[f],n:f,pg:!1,pr:0},j.s=j.f?b[f.indexOf("set")||"function"!=typeof b["get"+f.substr(3)]?f:"get"+f.substr(3)]():parseFloat(b[f]),j.c="string"==typeof k&&"="===k.charAt(1)?parseInt(k.charAt(0)+"1",10)*Number(k.substr(2)):Number(k)-j.s||0;j&&j._next&&(j._next._prev=j)}return e&&this._kill(e,b)?this._initProps(b,c,d,e):this._overwrite>1&&this._firstPT&&d.length>1&&W(b,this,c,this._overwrite,d)?(this._kill(c,b),this._initProps(b,c,d,e)):(this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration)&&(K[b._gsTweenID]=!0),h)},g.render=function(a,b,c){var d,e,f,g,h=this._time,i=this._duration,j=this._rawPrevTime;if(a>=i)this._totalTime=this._time=i,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(d=!0,e="onComplete"),0===i&&(this._initted||!this.vars.lazy||c)&&(this._startTime===this._timeline._duration&&(a=0),(0===a||0>j||j===l&&"isPause"!==this.data)&&j!==a&&(c=!0,j>l&&(e="onReverseComplete")),this._rawPrevTime=g=!b||a||j===a?a:l);else if(1e-7>a)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==h||0===i&&j>0&&j!==l)&&(e="onReverseComplete",d=this._reversed),0>a&&(this._active=!1,0===i&&(this._initted||!this.vars.lazy||c)&&(j>=0&&(j!==l||"isPause"!==this.data)&&(c=!0),this._rawPrevTime=g=!b||a||j===a?a:l)),this._initted||(c=!0);else if(this._totalTime=this._time=a,this._easeType){var k=a/i,m=this._easeType,n=this._easePower;(1===m||3===m&&k>=.5)&&(k=1-k),3===m&&(k*=2),1===n?k*=k:2===n?k*=k*k:3===n?k*=k*k*k:4===n&&(k*=k*k*k*k),this.ratio=1===m?1-k:2===m?k:.5>a/i?k/2:1-k/2}else this.ratio=this._ease.getRatio(a/i);if(this._time!==h||c){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!c&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=h,this._rawPrevTime=j,J.push(this),void(this._lazy=[a,b]);this._time&&!d?this.ratio=this._ease.getRatio(this._time/i):d&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==h&&a>=0&&(this._active=!0),0===h&&(this._startAt&&(a>=0?this._startAt.render(a,b,c):e||(e="_dummyGS")),this.vars.onStart&&(0!==this._time||0===i)&&(b||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||u))),f=this._firstPT;f;)f.f?f.t[f.p](f.c*this.ratio+f.s):f.t[f.p]=f.c*this.ratio+f.s,f=f._next;this._onUpdate&&(0>a&&this._startAt&&a!==-1e-4&&this._startAt.render(a,b,c),b||(this._time!==h||d)&&this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||u)),e&&(!this._gc||c)&&(0>a&&this._startAt&&!this._onUpdate&&a!==-1e-4&&this._startAt.render(a,b,c),d&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[e]&&this.vars[e].apply(this.vars[e+"Scope"]||this,this.vars[e+"Params"]||u),0===i&&this._rawPrevTime===l&&g!==l&&(this._rawPrevTime=0))}},g._kill=function(a,b,c){if("all"===a&&(a=null),null==a&&(null==b||b===this.target))return this._lazy=!1,this._enabled(!1,!1);
b="string"!=typeof b?b||this._targets||this.target:G.selector(b)||b;var d,e,f,g,h,i,j,k,l;if((o(b)||H(b))&&"number"!=typeof b[0])for(d=b.length;--d>-1;)this._kill(a,b[d])&&(i=!0);else{if(this._targets){for(d=this._targets.length;--d>-1;)if(b===this._targets[d]){h=this._propLookup[d]||{},this._overwrittenProps=this._overwrittenProps||[],e=this._overwrittenProps[d]=a?this._overwrittenProps[d]||{}:"all";break}}else{if(b!==this.target)return!1;h=this._propLookup,e=this._overwrittenProps=a?this._overwrittenProps||{}:"all"}if(h){if(j=a||h,k=a!==e&&"all"!==e&&a!==h&&("object"!=typeof a||!a._tempKill),c&&(G.onOverwrite||this.vars.onOverwrite)){for(f in j)h[f]&&(l||(l=[]),l.push(f));if(!V(this,c,b,l))return!1}for(f in j)(g=h[f])&&(g.pg&&g.t._kill(j)&&(i=!0),g.pg&&0!==g.t._overwriteProps.length||(g._prev?g._prev._next=g._next:g===this._firstPT&&(this._firstPT=g._next),g._next&&(g._next._prev=g._prev),g._next=g._prev=null),delete h[f]),k&&(e[f]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return i},g.invalidate=function(){return this._notifyPluginsOfEnabled&&G._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],D.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-l,this.render(-this._delay)),this},g._enabled=function(a,b){if(i||h.wake(),a&&this._gc){var c,d=this._targets;if(d)for(c=d.length;--c>-1;)this._siblings[c]=U(d[c],this,!0);else this._siblings=U(this.target,this,!0)}return D.prototype._enabled.call(this,a,b),this._notifyPluginsOfEnabled&&this._firstPT?G._onPluginEvent(a?"_onEnable":"_onDisable",this):!1},G.to=function(a,b,c){return new G(a,b,c)},G.from=function(a,b,c){return c.runBackwards=!0,c.immediateRender=0!=c.immediateRender,new G(a,b,c)},G.fromTo=function(a,b,c,d){return d.startAt=c,d.immediateRender=0!=d.immediateRender&&0!=c.immediateRender,new G(a,b,d)},G.delayedCall=function(a,b,c,d,e){return new G(b,0,{delay:a,onComplete:b,onCompleteParams:c,onCompleteScope:d,onReverseComplete:b,onReverseCompleteParams:c,onReverseCompleteScope:d,immediateRender:!1,lazy:!1,useFrames:e,overwrite:0})},G.set=function(a,b){return new G(a,0,b)},G.getTweensOf=function(a,b){if(null==a)return[];a="string"!=typeof a?a:G.selector(a)||a;var c,d,e,f;if((o(a)||H(a))&&"number"!=typeof a[0]){for(c=a.length,d=[];--c>-1;)d=d.concat(G.getTweensOf(a[c],b));for(c=d.length;--c>-1;)for(f=d[c],e=c;--e>-1;)f===d[e]&&d.splice(c,1)}else for(d=U(a).concat(),c=d.length;--c>-1;)(d[c]._gc||b&&!d[c].isActive())&&d.splice(c,1);return d},G.killTweensOf=G.killDelayedCallsTo=function(a,b,c){"object"==typeof b&&(c=b,b=!1);for(var d=G.getTweensOf(a,b),e=d.length;--e>-1;)d[e]._kill(c,a)};var Y=s("plugins.TweenPlugin",function(a,b){this._overwriteProps=(a||"").split(","),this._propName=this._overwriteProps[0],this._priority=b||0,this._super=Y.prototype},!0);if(g=Y.prototype,Y.version="1.10.1",Y.API=2,g._firstPT=null,g._addTween=function(a,b,c,d,e,f){var g,h;return null!=d&&(g="number"==typeof d||"="!==d.charAt(1)?Number(d)-c:parseInt(d.charAt(0)+"1",10)*Number(d.substr(2)))?(this._firstPT=h={_next:this._firstPT,t:a,p:b,s:c,c:g,f:"function"==typeof a[b],n:e||b,r:f},h._next&&(h._next._prev=h),h):void 0},g.setRatio=function(a){for(var b,c=this._firstPT,d=1e-6;c;)b=c.c*a+c.s,c.r?b=Math.round(b):d>b&&b>-d&&(b=0),c.f?c.t[c.p](b):c.t[c.p]=b,c=c._next},g._kill=function(a){var b,c=this._overwriteProps,d=this._firstPT;if(null!=a[this._propName])this._overwriteProps=[];else for(b=c.length;--b>-1;)null!=a[c[b]]&&c.splice(b,1);for(;d;)null!=a[d.n]&&(d._next&&(d._next._prev=d._prev),d._prev?(d._prev._next=d._next,d._prev=null):this._firstPT===d&&(this._firstPT=d._next)),d=d._next;return!1},g._roundProps=function(a,b){for(var c=this._firstPT;c;)(a[this._propName]||null!=c.n&&a[c.n.split(this._propName+"_").join("")])&&(c.r=b),c=c._next},G._onPluginEvent=function(a,b){var c,d,e,f,g,h=b._firstPT;if("_onInitAllProps"===a){for(;h;){for(g=h._next,d=e;d&&d.pr>h.pr;)d=d._next;(h._prev=d?d._prev:f)?h._prev._next=h:e=h,(h._next=d)?d._prev=h:f=h,h=g}h=b._firstPT=e}for(;h;)h.pg&&"function"==typeof h.t[a]&&h.t[a]()&&(c=!0),h=h._next;return c},Y.activate=function(a){for(var b=a.length;--b>-1;)a[b].API===Y.API&&(M[(new a[b])._propName]=a[b]);return!0},r.plugin=function(a){if(!(a&&a.propName&&a.init&&a.API))throw"illegal plugin definition.";var b,c=a.propName,d=a.priority||0,e=a.overwriteProps,f={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_roundProps",initAll:"_onInitAllProps"},g=s("plugins."+c.charAt(0).toUpperCase()+c.substr(1)+"Plugin",function(){Y.call(this,c,d),this._overwriteProps=e||[]},a.global===!0),h=g.prototype=new Y(c);h.constructor=g,g.API=a.API;for(b in f)"function"==typeof a[b]&&(h[f[b]]=a[b]);return g.version=a.version,Y.activate([g]),g},e=a._gsQueue){for(f=0;f<e.length;f++)e[f]();for(g in p)p[g].func||a.console.log("GSAP encountered missing dependency: com.greensock."+g)}i=!1}}("undefined"!=typeof b&&b.exports&&"undefined"!=typeof a?a:this||window,"TweenMax")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],42:[function(a,b,c){"use strict";var d=a("./handlebars.runtime")["default"],e=a("./handlebars/compiler/ast")["default"],f=a("./handlebars/compiler/base").parser,g=a("./handlebars/compiler/base").parse,h=a("./handlebars/compiler/compiler").Compiler,i=a("./handlebars/compiler/compiler").compile,j=a("./handlebars/compiler/compiler").precompile,k=a("./handlebars/compiler/javascript-compiler")["default"],l=d.create,m=function(){var a=l();return a.compile=function(b,c){return i(b,c,a)},a.precompile=function(b,c){return j(b,c,a)},a.AST=e,a.Compiler=h,a.JavaScriptCompiler=k,a.Parser=f,a.parse=g,a};d=m(),d.create=m,d["default"]=d,c["default"]=d},{"./handlebars.runtime":43,"./handlebars/compiler/ast":45,"./handlebars/compiler/base":46,"./handlebars/compiler/compiler":47,"./handlebars/compiler/javascript-compiler":49}],43:[function(a,b,c){"use strict";var d=a("./handlebars/base"),e=a("./handlebars/safe-string")["default"],f=a("./handlebars/exception")["default"],g=a("./handlebars/utils"),h=a("./handlebars/runtime"),i=function(){var a=new d.HandlebarsEnvironment;return g.extend(a,d),a.SafeString=e,a.Exception=f,a.Utils=g,a.escapeExpression=g.escapeExpression,a.VM=h,a.template=function(b){return h.template(b,a)},a},j=i();j.create=i,j["default"]=j,c["default"]=j},{"./handlebars/base":44,"./handlebars/exception":53,"./handlebars/runtime":54,"./handlebars/safe-string":55,"./handlebars/utils":56}],44:[function(a,b,c){"use strict";function d(a,b){this.helpers=a||{},this.partials=b||{},e(this)}function e(a){a.registerHelper("helperMissing",function(){if(1===arguments.length)return void 0;throw new g("Missing helper: '"+arguments[arguments.length-1].name+"'")}),a.registerHelper("blockHelperMissing",function(b,c){var d=c.inverse,e=c.fn;if(b===!0)return e(this);if(b===!1||null==b)return d(this);if(k(b))return b.length>0?(c.ids&&(c.ids=[c.name]),a.helpers.each(b,c)):d(this);if(c.data&&c.ids){var g=q(c.data);g.contextPath=f.appendContextPath(c.data.contextPath,c.name),c={data:g}}return e(b,c)}),a.registerHelper("each",function(a,b){if(!b)throw new g("Must pass iterator to #each");var c,d,e=b.fn,h=b.inverse,i=0,j="";if(b.data&&b.ids&&(d=f.appendContextPath(b.data.contextPath,b.ids[0])+"."),l(a)&&(a=a.call(this)),b.data&&(c=q(b.data)),a&&"object"==typeof a)if(k(a))for(var m=a.length;m>i;i++)c&&(c.index=i,c.first=0===i,c.last=i===a.length-1,d&&(c.contextPath=d+i)),j+=e(a[i],{data:c});else for(var n in a)a.hasOwnProperty(n)&&(c&&(c.key=n,c.index=i,c.first=0===i,d&&(c.contextPath=d+n)),j+=e(a[n],{data:c}),i++);return 0===i&&(j=h(this)),j}),a.registerHelper("if",function(a,b){return l(a)&&(a=a.call(this)),!b.hash.includeZero&&!a||f.isEmpty(a)?b.inverse(this):b.fn(this)}),a.registerHelper("unless",function(b,c){return a.helpers["if"].call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})}),a.registerHelper("with",function(a,b){l(a)&&(a=a.call(this));var c=b.fn;if(f.isEmpty(a))return b.inverse(this);if(b.data&&b.ids){var d=q(b.data);d.contextPath=f.appendContextPath(b.data.contextPath,b.ids[0]),b={data:d}}return c(a,b)}),a.registerHelper("log",function(b,c){var d=c.data&&null!=c.data.level?parseInt(c.data.level,10):1;a.log(d,b)}),a.registerHelper("lookup",function(a,b){return a&&a[b]})}var f=a("./utils"),g=a("./exception")["default"],h="2.0.0";c.VERSION=h;var i=6;c.COMPILER_REVISION=i;var j={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};c.REVISION_CHANGES=j;var k=f.isArray,l=f.isFunction,m=f.toString,n="[object Object]";c.HandlebarsEnvironment=d,d.prototype={constructor:d,logger:o,log:p,registerHelper:function(a,b){if(m.call(a)===n){if(b)throw new g("Arg not supported with multiple helpers");f.extend(this.helpers,a)}else this.helpers[a]=b},unregisterHelper:function(a){delete this.helpers[a]},registerPartial:function(a,b){m.call(a)===n?f.extend(this.partials,a):this.partials[a]=b},unregisterPartial:function(a){delete this.partials[a]}};var o={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(a,b){if(o.level<=a){var c=o.methodMap[a];"undefined"!=typeof console&&console[c]&&console[c].call(console,b)}}};c.logger=o;var p=o.log;c.log=p;var q=function(a){var b=f.extend({},a);return b._parent=a,b};c.createFrame=q},{"./exception":53,"./utils":56}],45:[function(a,b,c){"use strict";function d(a){a=a||{},this.firstLine=a.first_line,this.firstColumn=a.first_column,this.lastColumn=a.last_column,this.lastLine=a.last_line}var e=a("../exception")["default"],f={ProgramNode:function(a,b,c){d.call(this,c),this.type="program",this.statements=a,this.strip=b},MustacheNode:function(a,b,c,e,g){if(d.call(this,g),this.type="mustache",this.strip=e,null!=c&&c.charAt){var h=c.charAt(3)||c.charAt(2);this.escaped="{"!==h&&"&"!==h}else this.escaped=!!c;this.sexpr=a instanceof f.SexprNode?a:new f.SexprNode(a,b),this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(a,b,c){d.call(this,c),this.type="sexpr",this.hash=b;var e=this.id=a[0],f=this.params=a.slice(1);this.isHelper=!(!f.length&&!b),this.eligibleHelper=this.isHelper||e.isSimple},PartialNode:function(a,b,c,e,f){d.call(this,f),this.type="partial",this.partialName=a,this.context=b,this.hash=c,this.strip=e,this.strip.inlineStandalone=!0},BlockNode:function(a,b,c,e,f){d.call(this,f),this.type="block",this.mustache=a,this.program=b,this.inverse=c,this.strip=e,c&&!b&&(this.isInverse=!0)},RawBlockNode:function(a,b,c,g){if(d.call(this,g),a.sexpr.id.original!==c)throw new e(a.sexpr.id.original+" doesn't match "+c,this);b=new f.ContentNode(b,g),this.type="block",this.mustache=a,this.program=new f.ProgramNode([b],{},g)},ContentNode:function(a,b){d.call(this,b),this.type="content",this.original=this.string=a},HashNode:function(a,b){d.call(this,b),this.type="hash",this.pairs=a},IdNode:function(a,b){d.call(this,b),this.type="ID";for(var c="",f=[],g=0,h="",i=0,j=a.length;j>i;i++){var k=a[i].part;if(c+=(a[i].separator||"")+k,".."===k||"."===k||"this"===k){if(f.length>0)throw new e("Invalid path: "+c,this);".."===k?(g++,h+="../"):this.isScoped=!0}else f.push(k)}this.original=c,this.parts=f,this.string=f.join("."),this.depth=g,this.idName=h+this.string,this.isSimple=1===a.length&&!this.isScoped&&0===g,this.stringModeValue=this.string},PartialNameNode:function(a,b){d.call(this,b),this.type="PARTIAL_NAME",this.name=a.original},DataNode:function(a,b){d.call(this,b),this.type="DATA",this.id=a,this.stringModeValue=a.stringModeValue,this.idName="@"+a.stringModeValue},StringNode:function(a,b){d.call(this,b),this.type="STRING",this.original=this.string=this.stringModeValue=a},NumberNode:function(a,b){d.call(this,b),this.type="NUMBER",this.original=this.number=a,this.stringModeValue=Number(a)},BooleanNode:function(a,b){d.call(this,b),this.type="BOOLEAN",this.bool=a,this.stringModeValue="true"===a},CommentNode:function(a,b){d.call(this,b),this.type="comment",this.comment=a,this.strip={inlineStandalone:!0}}};c["default"]=f},{"../exception":53}],46:[function(a,b,c){"use strict";function d(a){return a.constructor===f.ProgramNode?a:(e.yy=i,e.parse(a))}var e=a("./parser")["default"],f=a("./ast")["default"],g=a("./helpers"),h=a("../utils").extend;c.parser=e;var i={};h(i,g,f),c.parse=d},{"../utils":56,"./ast":45,"./helpers":48,"./parser":50}],47:[function(a,b,c){"use strict";function d(){}function e(a,b,c){if(null==a||"string"!=typeof a&&a.constructor!==c.AST.ProgramNode)throw new h("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+a);b=b||{},"data"in b||(b.data=!0),b.compat&&(b.useDepths=!0);var d=c.parse(a),e=(new c.Compiler).compile(d,b);return(new c.JavaScriptCompiler).compile(e,b)}function f(a,b,c){function d(){var d=c.parse(a),e=(new c.Compiler).compile(d,b),f=(new c.JavaScriptCompiler).compile(e,b,void 0,!0);return c.template(f)}if(null==a||"string"!=typeof a&&a.constructor!==c.AST.ProgramNode)throw new h("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+a);b=b||{},"data"in b||(b.data=!0),b.compat&&(b.useDepths=!0);var e,f=function(a,b){return e||(e=d()),e.call(this,a,b)};return f._setup=function(a){return e||(e=d()),e._setup(a)},f._child=function(a,b,c){return e||(e=d()),e._child(a,b,c)},f}function g(a,b){if(a===b)return!0;if(i(a)&&i(b)&&a.length===b.length){for(var c=0;c<a.length;c++)if(!g(a[c],b[c]))return!1;return!0}}var h=a("../exception")["default"],i=a("../utils").isArray,j=[].slice;c.Compiler=d,d.prototype={compiler:d,equals:function(a){var b=this.opcodes.length;if(a.opcodes.length!==b)return!1;for(var c=0;b>c;c++){var d=this.opcodes[c],e=a.opcodes[c];if(d.opcode!==e.opcode||!g(d.args,e.args))return!1}for(b=this.children.length,c=0;b>c;c++)if(!this.children[c].equals(a.children[c]))return!1;return!0},guid:0,compile:function(a,b){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=b,this.stringParams=b.stringParams,this.trackIds=b.trackIds;var c=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0,lookup:!0},c)for(var d in c)this.options.knownHelpers[d]=c[d];return this.accept(a)},accept:function(a){return this[a.type](a)},program:function(a){for(var b=a.statements,c=0,d=b.length;d>c;c++)this.accept(b[c]);return this.isSimple=1===d,this.depths.list=this.depths.list.sort(function(a,b){return a-b}),this},compileProgram:function(a){var b,c=(new this.compiler).compile(a,this.options),d=this.guid++;this.usePartial=this.usePartial||c.usePartial,this.children[d]=c;for(var e=0,f=c.depths.list.length;f>e;e++)b=c.depths.list[e],2>b||this.addDepth(b-1);return d},block:function(a){var b=a.mustache,c=a.program,d=a.inverse;c&&(c=this.compileProgram(c)),d&&(d=this.compileProgram(d));var e=b.sexpr,f=this.classifySexpr(e);"helper"===f?this.helperSexpr(e,c,d):"simple"===f?(this.simpleSexpr(e),this.opcode("pushProgram",c),this.opcode("pushProgram",d),this.opcode("emptyHash"),this.opcode("blockValue",e.id.original)):(this.ambiguousSexpr(e,c,d),this.opcode("pushProgram",c),this.opcode("pushProgram",d),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(a){var b,c,d=a.pairs;for(this.opcode("pushHash"),b=0,c=d.length;c>b;b++)this.pushParam(d[b][1]);for(;b--;)this.opcode("assignToHash",d[b][0]);this.opcode("popHash")},partial:function(a){var b=a.partialName;this.usePartial=!0,a.hash?this.accept(a.hash):this.opcode("push","undefined"),a.context?this.accept(a.context):(this.opcode("getContext",0),this.opcode("pushContext")),this.opcode("invokePartial",b.name,a.indent||""),this.opcode("append")},content:function(a){a.string&&this.opcode("appendContent",a.string)},mustache:function(a){this.sexpr(a.sexpr),this.opcode(a.escaped&&!this.options.noEscape?"appendEscaped":"append")},ambiguousSexpr:function(a,b,c){var d=a.id,e=d.parts[0],f=null!=b||null!=c;this.opcode("getContext",d.depth),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.ID(d),this.opcode("invokeAmbiguous",e,f)},simpleSexpr:function(a){var b=a.id;"DATA"===b.type?this.DATA(b):b.parts.length?this.ID(b):(this.addDepth(b.depth),this.opcode("getContext",b.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(a,b,c){var d=this.setupFullMustacheParams(a,b,c),e=a.id,f=e.parts[0];if(this.options.knownHelpers[f])this.opcode("invokeKnownHelper",d.length,f);else{if(this.options.knownHelpersOnly)throw new h("You specified knownHelpersOnly, but used the unknown helper "+f,a);e.falsy=!0,this.ID(e),this.opcode("invokeHelper",d.length,e.original,e.isSimple)}},sexpr:function(a){var b=this.classifySexpr(a);"simple"===b?this.simpleSexpr(a):"helper"===b?this.helperSexpr(a):this.ambiguousSexpr(a)},ID:function(a){this.addDepth(a.depth),this.opcode("getContext",a.depth);var b=a.parts[0];b?this.opcode("lookupOnContext",a.parts,a.falsy,a.isScoped):this.opcode("pushContext")},DATA:function(a){this.options.data=!0,this.opcode("lookupData",a.id.depth,a.id.parts)},STRING:function(a){this.opcode("pushString",a.string)},NUMBER:function(a){this.opcode("pushLiteral",a.number)},BOOLEAN:function(a){this.opcode("pushLiteral",a.bool)},comment:function(){},opcode:function(a){this.opcodes.push({opcode:a,args:j.call(arguments,1)})},addDepth:function(a){0!==a&&(this.depths[a]||(this.depths[a]=!0,this.depths.list.push(a)))},classifySexpr:function(a){var b=a.isHelper,c=a.eligibleHelper,d=this.options;if(c&&!b){var e=a.id.parts[0];d.knownHelpers[e]?b=!0:d.knownHelpersOnly&&(c=!1)}return b?"helper":c?"ambiguous":"simple"},pushParams:function(a){for(var b=0,c=a.length;c>b;b++)this.pushParam(a[b])},pushParam:function(a){this.stringParams?(a.depth&&this.addDepth(a.depth),this.opcode("getContext",a.depth||0),this.opcode("pushStringParam",a.stringModeValue,a.type),"sexpr"===a.type&&this.sexpr(a)):(this.trackIds&&this.opcode("pushId",a.type,a.idName||a.stringModeValue),this.accept(a))},setupFullMustacheParams:function(a,b,c){var d=a.params;return this.pushParams(d),this.opcode("pushProgram",b),this.opcode("pushProgram",c),a.hash?this.hash(a.hash):this.opcode("emptyHash"),d}},c.precompile=e,c.compile=f},{"../exception":53,"../utils":56}],48:[function(a,b,c){"use strict";function d(a,b){return{left:"~"===a.charAt(2),right:"~"===b.charAt(b.length-3)}}function e(a,b,c,d,e,f){if(a.sexpr.id.original!==d.path.original)throw new k(a.sexpr.id.original+" doesn't match "+d.path.original,a);var l=c&&c.program,m={left:a.strip.left,right:d.strip.right,openStandalone:h(b.statements),closeStandalone:g((l||b).statements)};if(a.strip.right&&i(b.statements,null,!0),l){var n=c.strip;n.left&&j(b.statements,null,!0),n.right&&i(l.statements,null,!0),d.strip.left&&j(l.statements,null,!0),g(b.statements)&&h(l.statements)&&(j(b.statements),i(l.statements))}else d.strip.left&&j(b.statements,null,!0);return e?new this.BlockNode(a,l,b,m,f):new this.BlockNode(a,b,l,m,f)}function f(a,b){for(var c=0,d=a.length;d>c;c++){var e=a[c],f=e.strip;if(f){var k=g(a,c,b,"partial"===e.type),l=h(a,c,b),m=f.openStandalone&&k,n=f.closeStandalone&&l,o=f.inlineStandalone&&k&&l;f.right&&i(a,c,!0),f.left&&j(a,c,!0),o&&(i(a,c),j(a,c)&&"partial"===e.type&&(e.indent=/([ \t]+$)/.exec(a[c-1].original)?RegExp.$1:"")),m&&(i((e.program||e.inverse).statements),j(a,c)),n&&(i(a,c),j((e.inverse||e.program).statements))}}return a}function g(a,b,c){void 0===b&&(b=a.length);var d=a[b-1],e=a[b-2];return d?"content"===d.type?(e||!c?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(d.original):void 0:c}function h(a,b,c){void 0===b&&(b=-1);var d=a[b+1],e=a[b+2];return d?"content"===d.type?(e||!c?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(d.original):void 0:c}function i(a,b,c){var d=a[null==b?0:b+1];if(d&&"content"===d.type&&(c||!d.rightStripped)){var e=d.string;d.string=d.string.replace(c?/^\s+/:/^[ \t]*\r?\n?/,""),d.rightStripped=d.string!==e}}function j(a,b,c){var d=a[null==b?a.length-1:b-1];if(d&&"content"===d.type&&(c||!d.leftStripped)){var e=d.string;return d.string=d.string.replace(c?/\s+$/:/[ \t]+$/,""),d.leftStripped=d.string!==e,d.leftStripped}}var k=a("../exception")["default"];c.stripFlags=d,c.prepareBlock=e,c.prepareProgram=f},{"../exception":53}],49:[function(a,b,c){"use strict";function d(a){this.value=a}function e(){}var f=a("../base").COMPILER_REVISION,g=a("../base").REVISION_CHANGES,h=a("../exception")["default"];e.prototype={nameLookup:function(a,b){return e.isValidJavaScriptVariableName(b)?a+"."+b:a+"['"+b+"']"},depthedLookup:function(a){return this.aliases.lookup="this.lookup",'lookup(depths, "'+a+'")'},compilerInfo:function(){var a=f,b=g[a];return[a,b]},appendToBuffer:function(a){return this.environment.isSimple?"return "+a+";":{appendToBuffer:!0,content:a,toString:function(){return"buffer += "+a+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(a,b,c,d){this.environment=a,this.options=b,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!d,this.name=this.environment.name,this.isChild=!!c,this.context=c||{programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(a,b),this.useDepths=this.useDepths||a.depths.list.length||this.options.compat;var e,f,g,i=a.opcodes;for(f=0,g=i.length;g>f;f++)e=i[f],this[e.opcode].apply(this,e.args);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new h("Compile completed with content left on stack");var j=this.createFunctionContext(d);if(this.isChild)return j;var k={compiler:this.compilerInfo(),main:j},l=this.context.programs;for(f=0,g=l.length;g>f;f++)l[f]&&(k[f]=l[f]);return this.environment.usePartial&&(k.usePartial=!0),this.options.data&&(k.useData=!0),this.useDepths&&(k.useDepths=!0),this.options.compat&&(k.compat=!0),d||(k.compiler=JSON.stringify(k.compiler),k=this.objectLiteral(k)),k},preamble:function(){this.lastContext=0,this.source=[]},createFunctionContext:function(a){var b="",c=this.stackVars.concat(this.registers.list);c.length>0&&(b+=", "+c.join(", "));for(var d in this.aliases)this.aliases.hasOwnProperty(d)&&(b+=", "+d+"="+this.aliases[d]);var e=["depth0","helpers","partials","data"];this.useDepths&&e.push("depths");var f=this.mergeSource(b);return a?(e.push(f),Function.apply(this,e)):"function("+e.join(",")+") {\n  "+f+"}"},mergeSource:function(a){for(var b,c,d="",e=!this.forceBuffer,f=0,g=this.source.length;g>f;f++){var h=this.source[f];h.appendToBuffer?b=b?b+"\n    + "+h.content:h.content:(b&&(d?d+="buffer += "+b+";\n  ":(c=!0,d=b+";\n  "),b=void 0),d+=h+"\n  ",this.environment.isSimple||(e=!1))}return e?(b||!d)&&(d+="return "+(b||'""')+";\n"):(a+=", buffer = "+(c?"":this.initializeBuffer()),d+=b?"return buffer + "+b+";\n":"return buffer;\n"),a&&(d="var "+a.substring(2)+(c?"":";\n  ")+d),d},blockValue:function(a){this.aliases.blockHelperMissing="helpers.blockHelperMissing";var b=[this.contextName(0)];this.setupParams(a,0,b);var c=this.popStack();b.splice(1,0,c),this.push("blockHelperMissing.call("+b.join(", ")+")")},ambiguousBlockValue:function(){this.aliases.blockHelperMissing="helpers.blockHelperMissing";var a=[this.contextName(0)];this.setupParams("",0,a,!0),this.flushInline();var b=this.topStack();a.splice(1,0,b),this.pushSource("if (!"+this.lastHelper+") { "+b+" = blockHelperMissing.call("+a.join(", ")+"); }")},appendContent:function(a){this.pendingContent&&(a=this.pendingContent+a),this.pendingContent=a},append:function(){this.flushInline();var a=this.popStack();this.pushSource("if ("+a+" != null) { "+this.appendToBuffer(a)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(a){this.lastContext=a},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(a,b,c){var d=0,e=a.length;for(c||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(a[d++]));e>d;d++)this.replaceStack(function(c){var e=this.nameLookup(c,a[d],"context");return b?" && "+e:" != null ? "+e+" : "+c})},lookupData:function(a,b){this.pushStackLiteral(a?"this.data(data, "+a+")":"data");for(var c=b.length,d=0;c>d;d++)this.replaceStack(function(a){return" && "+this.nameLookup(a,b[d],"data")})},resolvePossibleLambda:function(){this.aliases.lambda="this.lambda",this.push("lambda("+this.popStack()+", "+this.contextName(0)+")")},pushStringParam:function(a,b){this.pushContext(),this.pushString(b),"sexpr"!==b&&("string"==typeof a?this.pushString(a):this.pushStackLiteral(a))},emptyHash:function(){this.pushStackLiteral("{}"),this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var a=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push("{"+a.ids.join(",")+"}"),this.stringParams&&(this.push("{"+a.contexts.join(",")+"}"),this.push("{"+a.types.join(",")+"}")),this.push("{\n    "+a.values.join(",\n    ")+"\n  }")},pushString:function(a){this.pushStackLiteral(this.quotedString(a))},push:function(a){return this.inlineStack.push(a),a},pushLiteral:function(a){this.pushStackLiteral(a)},pushProgram:function(a){this.pushStackLiteral(null!=a?this.programExpression(a):null)},invokeHelper:function(a,b,c){this.aliases.helperMissing="helpers.helperMissing";var d=this.popStack(),e=this.setupHelper(a,b),f=(c?e.name+" || ":"")+d+" || helperMissing";this.push("(("+f+").call("+e.callParams+"))")},invokeKnownHelper:function(a,b){var c=this.setupHelper(a,b);this.push(c.name+".call("+c.callParams+")")},invokeAmbiguous:function(a,b){this.aliases.functionType='"function"',this.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var c=this.popStack();this.emptyHash();var d=this.setupHelper(0,a,b),e=this.lastHelper=this.nameLookup("helpers",a,"helper");this.push("((helper = (helper = "+e+" || "+c+") != null ? helper : helperMissing"+(d.paramsInit?"),("+d.paramsInit:"")+"),(typeof helper === functionType ? helper.call("+d.callParams+") : helper))")},invokePartial:function(a,b){var c=[this.nameLookup("partials",a,"partial"),"'"+b+"'","'"+a+"'",this.popStack(),this.popStack(),"helpers","partials"];this.options.data?c.push("data"):this.options.compat&&c.push("undefined"),this.options.compat&&c.push("depths"),this.push("this.invokePartial("+c.join(", ")+")")},assignToHash:function(a){var b,c,d,e=this.popStack();this.trackIds&&(d=this.popStack()),this.stringParams&&(c=this.popStack(),b=this.popStack());var f=this.hash;b&&f.contexts.push("'"+a+"': "+b),c&&f.types.push("'"+a+"': "+c),d&&f.ids.push("'"+a+"': "+d),f.values.push("'"+a+"': ("+e+")")},pushId:function(a,b){"ID"===a||"DATA"===a?this.pushString(b):this.pushStackLiteral("sexpr"===a?"true":"null")},compiler:e,compileChildren:function(a,b){for(var c,d,e=a.children,f=0,g=e.length;g>f;f++){c=e[f],d=new this.compiler;var h=this.matchExistingProgram(c);null==h?(this.context.programs.push(""),h=this.context.programs.length,c.index=h,c.name="program"+h,this.context.programs[h]=d.compile(c,b,this.context,!this.precompile),this.context.environments[h]=c,this.useDepths=this.useDepths||d.useDepths):(c.index=h,c.name="program"+h)}},matchExistingProgram:function(a){for(var b=0,c=this.context.environments.length;c>b;b++){var d=this.context.environments[b];if(d&&d.equals(a))return b}},programExpression:function(a){var b=this.environment.children[a],c=(b.depths.list,this.useDepths),d=[b.index,"data"];return c&&d.push("depths"),"this.program("+d.join(", ")+")"},useRegister:function(a){this.registers[a]||(this.registers[a]=!0,this.registers.list.push(a))},pushStackLiteral:function(a){return this.push(new d(a))},pushSource:function(a){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),a&&this.source.push(a)},pushStack:function(a){this.flushInline();var b=this.incrStack();return this.pushSource(b+" = "+a+";"),this.compileStack.push(b),b},replaceStack:function(a){{var b,c,e,f="";this.isInline()}if(!this.isInline())throw new h("replaceStack on non-inline");var g=this.popStack(!0);if(g instanceof d)f=b=g.value,e=!0;else{c=!this.stackSlot;var i=c?this.incrStack():this.topStackName();f="("+this.push(i)+" = "+g+")",b=this.topStack()}var j=a.call(this,b);e||this.popStack(),c&&this.stackSlot--,this.push("("+f+j+")")},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var a=this.inlineStack;if(a.length){this.inlineStack=[];for(var b=0,c=a.length;c>b;b++){var e=a[b];e instanceof d?this.compileStack.push(e):this.pushStack(e)}}},isInline:function(){return this.inlineStack.length},popStack:function(a){var b=this.isInline(),c=(b?this.inlineStack:this.compileStack).pop();if(!a&&c instanceof d)return c.value;if(!b){if(!this.stackSlot)throw new h("Invalid stack pop");this.stackSlot--}return c},topStack:function(){var a=this.isInline()?this.inlineStack:this.compileStack,b=a[a.length-1];return b instanceof d?b.value:b},contextName:function(a){return this.useDepths&&a?"depths["+a+"]":"depth"+a},quotedString:function(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(this.quotedString(c)+":"+a[c]);return"{"+b.join(",")+"}"},setupHelper:function(a,b,c){var d=[],e=this.setupParams(b,a,d,c),f=this.nameLookup("helpers",b,"helper");return{params:d,paramsInit:e,name:f,callParams:[this.contextName(0)].concat(d).join(", ")}},setupOptions:function(a,b,c){var d,e,f,g={},h=[],i=[],j=[];g.name=this.quotedString(a),g.hash=this.popStack(),this.trackIds&&(g.hashIds=this.popStack()),this.stringParams&&(g.hashTypes=this.popStack(),g.hashContexts=this.popStack()),e=this.popStack(),f=this.popStack(),(f||e)&&(f||(f="this.noop"),e||(e="this.noop"),g.fn=f,g.inverse=e);for(var k=b;k--;)d=this.popStack(),c[k]=d,this.trackIds&&(j[k]=this.popStack()),this.stringParams&&(i[k]=this.popStack(),h[k]=this.popStack());return this.trackIds&&(g.ids="["+j.join(",")+"]"),this.stringParams&&(g.types="["+i.join(",")+"]",g.contexts="["+h.join(",")+"]"),this.options.data&&(g.data="data"),g},setupParams:function(a,b,c,d){var e=this.objectLiteral(this.setupOptions(a,b,c));return d?(this.useRegister("options"),c.push("options"),"options="+e):(c.push(e),"")}};for(var i="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),j=e.RESERVED_WORDS={},k=0,l=i.length;l>k;k++)j[i[k]]=!0;e.isValidJavaScriptVariableName=function(a){return!e.RESERVED_WORDS[a]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(a)},c["default"]=e},{"../base":44,"../exception":53}],50:[function(a,b,c){"use strict";var d=function(){function a(){this.yy={}}var b={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,CONTENT:12,COMMENT:13,openRawBlock:14,END_RAW_BLOCK:15,OPEN_RAW_BLOCK:16,sexpr:17,CLOSE_RAW_BLOCK:18,openBlock:19,block_option0:20,closeBlock:21,openInverse:22,block_option1:23,OPEN_BLOCK:24,CLOSE:25,OPEN_INVERSE:26,inverseAndProgram:27,INVERSE:28,OPEN_ENDBLOCK:29,path:30,OPEN:31,OPEN_UNESCAPED:32,CLOSE_UNESCAPED:33,OPEN_PARTIAL:34,partialName:35,param:36,partial_option0:37,partial_option1:38,sexpr_repetition0:39,sexpr_option0:40,dataName:41,STRING:42,NUMBER:43,BOOLEAN:44,OPEN_SEXPR:45,CLOSE_SEXPR:46,hash:47,hash_repetition_plus0:48,hashSegment:49,ID:50,EQUALS:51,DATA:52,pathSegments:53,SEP:54,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",12:"CONTENT",13:"COMMENT",15:"END_RAW_BLOCK",16:"OPEN_RAW_BLOCK",18:"CLOSE_RAW_BLOCK",24:"OPEN_BLOCK",25:"CLOSE",26:"OPEN_INVERSE",28:"INVERSE",29:"OPEN_ENDBLOCK",31:"OPEN",32:"OPEN_UNESCAPED",33:"CLOSE_UNESCAPED",34:"OPEN_PARTIAL",42:"STRING",43:"NUMBER",44:"BOOLEAN",45:"OPEN_SEXPR",46:"CLOSE_SEXPR",50:"ID",51:"EQUALS",52:"DATA",54:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[10,3],[14,3],[9,4],[9,4],[19,3],[22,3],[27,2],[21,3],[8,3],[8,3],[11,5],[11,4],[17,3],[17,1],[36,1],[36,1],[36,1],[36,1],[36,1],[36,3],[47,1],[49,3],[35,1],[35,1],[35,1],[41,2],[30,1],[53,3],[53,1],[6,0],[6,2],[20,0],[20,1],[23,0],[23,1],[37,0],[37,1],[38,0],[38,1],[39,0],[39,2],[40,0],[40,1],[48,1],[48,2]],performAction:function(a,b,c,d,e,f){var g=f.length-1;
switch(e){case 1:return d.prepareProgram(f[g-1].statements,!0),f[g-1];case 2:this.$=new d.ProgramNode(d.prepareProgram(f[g]),{},this._$);break;case 3:this.$=f[g];break;case 4:this.$=f[g];break;case 5:this.$=f[g];break;case 6:this.$=f[g];break;case 7:this.$=new d.ContentNode(f[g],this._$);break;case 8:this.$=new d.CommentNode(f[g],this._$);break;case 9:this.$=new d.RawBlockNode(f[g-2],f[g-1],f[g],this._$);break;case 10:this.$=new d.MustacheNode(f[g-1],null,"","",this._$);break;case 11:this.$=d.prepareBlock(f[g-3],f[g-2],f[g-1],f[g],!1,this._$);break;case 12:this.$=d.prepareBlock(f[g-3],f[g-2],f[g-1],f[g],!0,this._$);break;case 13:this.$=new d.MustacheNode(f[g-1],null,f[g-2],d.stripFlags(f[g-2],f[g]),this._$);break;case 14:this.$=new d.MustacheNode(f[g-1],null,f[g-2],d.stripFlags(f[g-2],f[g]),this._$);break;case 15:this.$={strip:d.stripFlags(f[g-1],f[g-1]),program:f[g]};break;case 16:this.$={path:f[g-1],strip:d.stripFlags(f[g-2],f[g])};break;case 17:this.$=new d.MustacheNode(f[g-1],null,f[g-2],d.stripFlags(f[g-2],f[g]),this._$);break;case 18:this.$=new d.MustacheNode(f[g-1],null,f[g-2],d.stripFlags(f[g-2],f[g]),this._$);break;case 19:this.$=new d.PartialNode(f[g-3],f[g-2],f[g-1],d.stripFlags(f[g-4],f[g]),this._$);break;case 20:this.$=new d.PartialNode(f[g-2],void 0,f[g-1],d.stripFlags(f[g-3],f[g]),this._$);break;case 21:this.$=new d.SexprNode([f[g-2]].concat(f[g-1]),f[g],this._$);break;case 22:this.$=new d.SexprNode([f[g]],null,this._$);break;case 23:this.$=f[g];break;case 24:this.$=new d.StringNode(f[g],this._$);break;case 25:this.$=new d.NumberNode(f[g],this._$);break;case 26:this.$=new d.BooleanNode(f[g],this._$);break;case 27:this.$=f[g];break;case 28:f[g-1].isHelper=!0,this.$=f[g-1];break;case 29:this.$=new d.HashNode(f[g],this._$);break;case 30:this.$=[f[g-2],f[g]];break;case 31:this.$=new d.PartialNameNode(f[g],this._$);break;case 32:this.$=new d.PartialNameNode(new d.StringNode(f[g],this._$),this._$);break;case 33:this.$=new d.PartialNameNode(new d.NumberNode(f[g],this._$));break;case 34:this.$=new d.DataNode(f[g],this._$);break;case 35:this.$=new d.IdNode(f[g],this._$);break;case 36:f[g-2].push({part:f[g],separator:f[g-1]}),this.$=f[g-2];break;case 37:this.$=[{part:f[g]}];break;case 38:this.$=[];break;case 39:f[g-1].push(f[g]);break;case 48:this.$=[];break;case 49:f[g-1].push(f[g]);break;case 52:this.$=[f[g]];break;case 53:f[g-1].push(f[g])}},table:[{3:1,4:2,5:[2,38],6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],31:[2,38],32:[2,38],34:[2,38]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:[1,10],13:[1,11],14:16,16:[1,20],19:14,22:15,24:[1,18],26:[1,19],28:[2,2],29:[2,2],31:[1,12],32:[1,13],34:[1,17]},{1:[2,1]},{5:[2,39],12:[2,39],13:[2,39],16:[2,39],24:[2,39],26:[2,39],28:[2,39],29:[2,39],31:[2,39],32:[2,39],34:[2,39]},{5:[2,3],12:[2,3],13:[2,3],16:[2,3],24:[2,3],26:[2,3],28:[2,3],29:[2,3],31:[2,3],32:[2,3],34:[2,3]},{5:[2,4],12:[2,4],13:[2,4],16:[2,4],24:[2,4],26:[2,4],28:[2,4],29:[2,4],31:[2,4],32:[2,4],34:[2,4]},{5:[2,5],12:[2,5],13:[2,5],16:[2,5],24:[2,5],26:[2,5],28:[2,5],29:[2,5],31:[2,5],32:[2,5],34:[2,5]},{5:[2,6],12:[2,6],13:[2,6],16:[2,6],24:[2,6],26:[2,6],28:[2,6],29:[2,6],31:[2,6],32:[2,6],34:[2,6]},{5:[2,7],12:[2,7],13:[2,7],16:[2,7],24:[2,7],26:[2,7],28:[2,7],29:[2,7],31:[2,7],32:[2,7],34:[2,7]},{5:[2,8],12:[2,8],13:[2,8],16:[2,8],24:[2,8],26:[2,8],28:[2,8],29:[2,8],31:[2,8],32:[2,8],34:[2,8]},{17:21,30:22,41:23,50:[1,26],52:[1,25],53:24},{17:27,30:22,41:23,50:[1,26],52:[1,25],53:24},{4:28,6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],28:[2,38],29:[2,38],31:[2,38],32:[2,38],34:[2,38]},{4:29,6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],28:[2,38],29:[2,38],31:[2,38],32:[2,38],34:[2,38]},{12:[1,30]},{30:32,35:31,42:[1,33],43:[1,34],50:[1,26],53:24},{17:35,30:22,41:23,50:[1,26],52:[1,25],53:24},{17:36,30:22,41:23,50:[1,26],52:[1,25],53:24},{17:37,30:22,41:23,50:[1,26],52:[1,25],53:24},{25:[1,38]},{18:[2,48],25:[2,48],33:[2,48],39:39,42:[2,48],43:[2,48],44:[2,48],45:[2,48],46:[2,48],50:[2,48],52:[2,48]},{18:[2,22],25:[2,22],33:[2,22],46:[2,22]},{18:[2,35],25:[2,35],33:[2,35],42:[2,35],43:[2,35],44:[2,35],45:[2,35],46:[2,35],50:[2,35],52:[2,35],54:[1,40]},{30:41,50:[1,26],53:24},{18:[2,37],25:[2,37],33:[2,37],42:[2,37],43:[2,37],44:[2,37],45:[2,37],46:[2,37],50:[2,37],52:[2,37],54:[2,37]},{33:[1,42]},{20:43,27:44,28:[1,45],29:[2,40]},{23:46,27:47,28:[1,45],29:[2,42]},{15:[1,48]},{25:[2,46],30:51,36:49,38:50,41:55,42:[1,52],43:[1,53],44:[1,54],45:[1,56],47:57,48:58,49:60,50:[1,59],52:[1,25],53:24},{25:[2,31],42:[2,31],43:[2,31],44:[2,31],45:[2,31],50:[2,31],52:[2,31]},{25:[2,32],42:[2,32],43:[2,32],44:[2,32],45:[2,32],50:[2,32],52:[2,32]},{25:[2,33],42:[2,33],43:[2,33],44:[2,33],45:[2,33],50:[2,33],52:[2,33]},{25:[1,61]},{25:[1,62]},{18:[1,63]},{5:[2,17],12:[2,17],13:[2,17],16:[2,17],24:[2,17],26:[2,17],28:[2,17],29:[2,17],31:[2,17],32:[2,17],34:[2,17]},{18:[2,50],25:[2,50],30:51,33:[2,50],36:65,40:64,41:55,42:[1,52],43:[1,53],44:[1,54],45:[1,56],46:[2,50],47:66,48:58,49:60,50:[1,59],52:[1,25],53:24},{50:[1,67]},{18:[2,34],25:[2,34],33:[2,34],42:[2,34],43:[2,34],44:[2,34],45:[2,34],46:[2,34],50:[2,34],52:[2,34]},{5:[2,18],12:[2,18],13:[2,18],16:[2,18],24:[2,18],26:[2,18],28:[2,18],29:[2,18],31:[2,18],32:[2,18],34:[2,18]},{21:68,29:[1,69]},{29:[2,41]},{4:70,6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],29:[2,38],31:[2,38],32:[2,38],34:[2,38]},{21:71,29:[1,69]},{29:[2,43]},{5:[2,9],12:[2,9],13:[2,9],16:[2,9],24:[2,9],26:[2,9],28:[2,9],29:[2,9],31:[2,9],32:[2,9],34:[2,9]},{25:[2,44],37:72,47:73,48:58,49:60,50:[1,74]},{25:[1,75]},{18:[2,23],25:[2,23],33:[2,23],42:[2,23],43:[2,23],44:[2,23],45:[2,23],46:[2,23],50:[2,23],52:[2,23]},{18:[2,24],25:[2,24],33:[2,24],42:[2,24],43:[2,24],44:[2,24],45:[2,24],46:[2,24],50:[2,24],52:[2,24]},{18:[2,25],25:[2,25],33:[2,25],42:[2,25],43:[2,25],44:[2,25],45:[2,25],46:[2,25],50:[2,25],52:[2,25]},{18:[2,26],25:[2,26],33:[2,26],42:[2,26],43:[2,26],44:[2,26],45:[2,26],46:[2,26],50:[2,26],52:[2,26]},{18:[2,27],25:[2,27],33:[2,27],42:[2,27],43:[2,27],44:[2,27],45:[2,27],46:[2,27],50:[2,27],52:[2,27]},{17:76,30:22,41:23,50:[1,26],52:[1,25],53:24},{25:[2,47]},{18:[2,29],25:[2,29],33:[2,29],46:[2,29],49:77,50:[1,74]},{18:[2,37],25:[2,37],33:[2,37],42:[2,37],43:[2,37],44:[2,37],45:[2,37],46:[2,37],50:[2,37],51:[1,78],52:[2,37],54:[2,37]},{18:[2,52],25:[2,52],33:[2,52],46:[2,52],50:[2,52]},{12:[2,13],13:[2,13],16:[2,13],24:[2,13],26:[2,13],28:[2,13],29:[2,13],31:[2,13],32:[2,13],34:[2,13]},{12:[2,14],13:[2,14],16:[2,14],24:[2,14],26:[2,14],28:[2,14],29:[2,14],31:[2,14],32:[2,14],34:[2,14]},{12:[2,10]},{18:[2,21],25:[2,21],33:[2,21],46:[2,21]},{18:[2,49],25:[2,49],33:[2,49],42:[2,49],43:[2,49],44:[2,49],45:[2,49],46:[2,49],50:[2,49],52:[2,49]},{18:[2,51],25:[2,51],33:[2,51],46:[2,51]},{18:[2,36],25:[2,36],33:[2,36],42:[2,36],43:[2,36],44:[2,36],45:[2,36],46:[2,36],50:[2,36],52:[2,36],54:[2,36]},{5:[2,11],12:[2,11],13:[2,11],16:[2,11],24:[2,11],26:[2,11],28:[2,11],29:[2,11],31:[2,11],32:[2,11],34:[2,11]},{30:79,50:[1,26],53:24},{29:[2,15]},{5:[2,12],12:[2,12],13:[2,12],16:[2,12],24:[2,12],26:[2,12],28:[2,12],29:[2,12],31:[2,12],32:[2,12],34:[2,12]},{25:[1,80]},{25:[2,45]},{51:[1,78]},{5:[2,20],12:[2,20],13:[2,20],16:[2,20],24:[2,20],26:[2,20],28:[2,20],29:[2,20],31:[2,20],32:[2,20],34:[2,20]},{46:[1,81]},{18:[2,53],25:[2,53],33:[2,53],46:[2,53],50:[2,53]},{30:51,36:82,41:55,42:[1,52],43:[1,53],44:[1,54],45:[1,56],50:[1,26],52:[1,25],53:24},{25:[1,83]},{5:[2,19],12:[2,19],13:[2,19],16:[2,19],24:[2,19],26:[2,19],28:[2,19],29:[2,19],31:[2,19],32:[2,19],34:[2,19]},{18:[2,28],25:[2,28],33:[2,28],42:[2,28],43:[2,28],44:[2,28],45:[2,28],46:[2,28],50:[2,28],52:[2,28]},{18:[2,30],25:[2,30],33:[2,30],46:[2,30],50:[2,30]},{5:[2,16],12:[2,16],13:[2,16],16:[2,16],24:[2,16],26:[2,16],28:[2,16],29:[2,16],31:[2,16],32:[2,16],34:[2,16]}],defaultActions:{4:[2,1],44:[2,41],47:[2,43],57:[2,47],63:[2,10],70:[2,15],73:[2,45]},parseError:function(a){throw new Error(a)},parse:function(a){function b(){var a;return a=c.lexer.lex()||1,"number"!=typeof a&&(a=c.symbols_[a]||a),a}var c=this,d=[0],e=[null],f=[],g=this.table,h="",i=0,j=0,k=0;this.lexer.setInput(a),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var l=this.lexer.yylloc;f.push(l);var m=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var n,o,p,q,r,s,t,u,v,w={};;){if(p=d[d.length-1],this.defaultActions[p]?q=this.defaultActions[p]:((null===n||"undefined"==typeof n)&&(n=b()),q=g[p]&&g[p][n]),"undefined"==typeof q||!q.length||!q[0]){var x="";if(!k){v=[];for(s in g[p])this.terminals_[s]&&s>2&&v.push("'"+this.terminals_[s]+"'");x=this.lexer.showPosition?"Parse error on line "+(i+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[n]||n)+"'":"Parse error on line "+(i+1)+": Unexpected "+(1==n?"end of input":"'"+(this.terminals_[n]||n)+"'"),this.parseError(x,{text:this.lexer.match,token:this.terminals_[n]||n,line:this.lexer.yylineno,loc:l,expected:v})}}if(q[0]instanceof Array&&q.length>1)throw new Error("Parse Error: multiple actions possible at state: "+p+", token: "+n);switch(q[0]){case 1:d.push(n),e.push(this.lexer.yytext),f.push(this.lexer.yylloc),d.push(q[1]),n=null,o?(n=o,o=null):(j=this.lexer.yyleng,h=this.lexer.yytext,i=this.lexer.yylineno,l=this.lexer.yylloc,k>0&&k--);break;case 2:if(t=this.productions_[q[1]][1],w.$=e[e.length-t],w._$={first_line:f[f.length-(t||1)].first_line,last_line:f[f.length-1].last_line,first_column:f[f.length-(t||1)].first_column,last_column:f[f.length-1].last_column},m&&(w._$.range=[f[f.length-(t||1)].range[0],f[f.length-1].range[1]]),r=this.performAction.call(w,h,j,i,this.yy,q[1],e,f),"undefined"!=typeof r)return r;t&&(d=d.slice(0,-1*t*2),e=e.slice(0,-1*t),f=f.slice(0,-1*t)),d.push(this.productions_[q[1]][0]),e.push(w.$),f.push(w._$),u=g[d[d.length-2]][d[d.length-1]],d.push(u);break;case 3:return!0}}return!0}},c=function(){var a={EOF:1,parseError:function(a,b){if(!this.yy.parser)throw new Error(a);this.yy.parser.parseError(a,b)},setInput:function(a){return this._input=a,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var a=this._input[0];this.yytext+=a,this.yyleng++,this.offset++,this.match+=a,this.matched+=a;var b=a.match(/(?:\r\n?|\n).*/g);return b?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),a},unput:function(a){var b=a.length,c=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-b-1),this.offset-=b;var d=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),c.length-1&&(this.yylineno-=c.length-1);var e=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:c?(c.length===d.length?this.yylloc.first_column:0)+d[d.length-c.length].length-c[0].length:this.yylloc.first_column-b},this.options.ranges&&(this.yylloc.range=[e[0],e[0]+this.yyleng-b]),this},more:function(){return this._more=!0,this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=new Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,b,c,d,e;this._more||(this.yytext="",this.match="");for(var f=this._currentRules(),g=0;g<f.length&&(c=this._input.match(this.rules[f[g]]),!c||b&&!(c[0].length>b[0].length)||(b=c,d=g,this.options.flex));g++);return b?(e=b[0].match(/(?:\r\n?|\n).*/g),e&&(this.yylineno+=e.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:e?e[e.length-1].length-e[e.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+b[0].length},this.yytext+=b[0],this.match+=b[0],this.matches=b,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(b[0].length),this.matched+=b[0],a=this.performAction.call(this,this.yy,this,f[d],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),a?a:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return"undefined"!=typeof a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(a){this.begin(a)}};return a.options={},a.performAction=function(a,b,c,d){function e(a,c){return b.yytext=b.yytext.substr(a,b.yyleng-c)}switch(c){case 0:if("\\\\"===b.yytext.slice(-2)?(e(0,1),this.begin("mu")):"\\"===b.yytext.slice(-1)?(e(0,1),this.begin("emu")):this.begin("mu"),b.yytext)return 12;break;case 1:return 12;case 2:return this.popState(),12;case 3:return b.yytext=b.yytext.substr(5,b.yyleng-9),this.popState(),15;case 4:return 12;case 5:return e(0,4),this.popState(),13;case 6:return 45;case 7:return 46;case 8:return 16;case 9:return this.popState(),this.begin("raw"),18;case 10:return 34;case 11:return 24;case 12:return 29;case 13:return this.popState(),28;case 14:return this.popState(),28;case 15:return 26;case 16:return 26;case 17:return 32;case 18:return 31;case 19:this.popState(),this.begin("com");break;case 20:return e(3,5),this.popState(),13;case 21:return 31;case 22:return 51;case 23:return 50;case 24:return 50;case 25:return 54;case 26:break;case 27:return this.popState(),33;case 28:return this.popState(),25;case 29:return b.yytext=e(1,2).replace(/\\"/g,'"'),42;case 30:return b.yytext=e(1,2).replace(/\\'/g,"'"),42;case 31:return 52;case 32:return 44;case 33:return 44;case 34:return 43;case 35:return 50;case 36:return b.yytext=e(1,2),50;case 37:return"INVALID";case 38:return 5}},a.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{\/)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],a.conditions={mu:{rules:[6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[5],inclusive:!1},raw:{rules:[3,4],inclusive:!1},INITIAL:{rules:[0,1,38],inclusive:!0}},a}();return b.lexer=c,a.prototype=b,b.Parser=a,new a}();c["default"]=d},{}],51:[function(a,b,c){"use strict";function d(a){return(new e).accept(a)}function e(){this.padding=0}var f=a("./visitor")["default"];c.print=d,c.PrintVisitor=e,e.prototype=new f,e.prototype.pad=function(a){for(var b="",c=0,d=this.padding;d>c;c++)b+="  ";return b=b+a+"\n"},e.prototype.program=function(a){var b,c,d="",e=a.statements;for(b=0,c=e.length;c>b;b++)d+=this.accept(e[b]);return this.padding--,d},e.prototype.block=function(a){var b="";return b+=this.pad("BLOCK:"),this.padding++,b+=this.accept(a.mustache),a.program&&(b+=this.pad("PROGRAM:"),this.padding++,b+=this.accept(a.program),this.padding--),a.inverse&&(a.program&&this.padding++,b+=this.pad("{{^}}"),this.padding++,b+=this.accept(a.inverse),this.padding--,a.program&&this.padding--),this.padding--,b},e.prototype.sexpr=function(a){for(var b,c=a.params,d=[],e=0,f=c.length;f>e;e++)d.push(this.accept(c[e]));return c="["+d.join(", ")+"]",b=a.hash?" "+this.accept(a.hash):"",this.accept(a.id)+" "+c+b},e.prototype.mustache=function(a){return this.pad("{{ "+this.accept(a.sexpr)+" }}")},e.prototype.partial=function(a){var b=this.accept(a.partialName);return a.context&&(b+=" "+this.accept(a.context)),a.hash&&(b+=" "+this.accept(a.hash)),this.pad("{{> "+b+" }}")},e.prototype.hash=function(a){for(var b,c,d=a.pairs,e=[],f=0,g=d.length;g>f;f++)b=d[f][0],c=this.accept(d[f][1]),e.push(b+"="+c);return"HASH{"+e.join(", ")+"}"},e.prototype.STRING=function(a){return'"'+a.string+'"'},e.prototype.NUMBER=function(a){return"NUMBER{"+a.number+"}"},e.prototype.BOOLEAN=function(a){return"BOOLEAN{"+a.bool+"}"},e.prototype.ID=function(a){var b=a.parts.join("/");return a.parts.length>1?"PATH:"+b:"ID:"+b},e.prototype.PARTIAL_NAME=function(a){return"PARTIAL:"+a.name},e.prototype.DATA=function(a){return"@"+this.accept(a.id)},e.prototype.content=function(a){return this.pad("CONTENT[ '"+a.string+"' ]")},e.prototype.comment=function(a){return this.pad("{{! '"+a.comment+"' }}")}},{"./visitor":52}],52:[function(a,b,c){"use strict";function d(){}d.prototype={constructor:d,accept:function(a){return this[a.type](a)}},c["default"]=d},{}],53:[function(a,b,c){"use strict";function d(a,b){var c;b&&b.firstLine&&(c=b.firstLine,a+=" - "+c+":"+b.firstColumn);for(var d=Error.prototype.constructor.call(this,a),f=0;f<e.length;f++)this[e[f]]=d[e[f]];c&&(this.lineNumber=c,this.column=b.firstColumn)}var e=["description","fileName","lineNumber","message","name","number","stack"];d.prototype=new Error,c["default"]=d},{}],54:[function(a,b,c){"use strict";function d(a){var b=a&&a[0]||1,c=l;if(b!==c){if(c>b){var d=m[c],e=m[b];throw new k("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+d+") or downgrade your runtime to an older version ("+e+").")}throw new k("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").")}}function e(a,b){if(!b)throw new k("No environment passed to template");if(!a||!a.main)throw new k("Unknown template object: "+typeof a);b.VM.checkRevision(a.compiler);var c=function(c,d,e,f,g,h,i,l,m){g&&(f=j.extend({},f,g));var n=b.VM.invokePartial.call(this,c,e,f,h,i,l,m);if(null==n&&b.compile){var o={helpers:h,partials:i,data:l,depths:m};i[e]=b.compile(c,{data:void 0!==l,compat:a.compat},b),n=i[e](f,o)}if(null!=n){if(d){for(var p=n.split("\n"),q=0,r=p.length;r>q&&(p[q]||q+1!==r);q++)p[q]=d+p[q];n=p.join("\n")}return n}throw new k("The partial "+e+" could not be compiled when running in runtime-only mode")},d={lookup:function(a,b){for(var c=a.length,d=0;c>d;d++)if(a[d]&&null!=a[d][b])return a[d][b]},lambda:function(a,b){return"function"==typeof a?a.call(b):a},escapeExpression:j.escapeExpression,invokePartial:c,fn:function(b){return a[b]},programs:[],program:function(a,b,c){var d=this.programs[a],e=this.fn(a);return b||c?d=f(this,a,e,b,c):d||(d=this.programs[a]=f(this,a,e)),d},data:function(a,b){for(;a&&b--;)a=a._parent;return a},merge:function(a,b){var c=a||b;return a&&b&&a!==b&&(c=j.extend({},b,a)),c},noop:b.VM.noop,compilerInfo:a.compiler},e=function(b,c){c=c||{};var f=c.data;e._setup(c),!c.partial&&a.useData&&(f=i(b,f));var g;return a.useDepths&&(g=c.depths?[b].concat(c.depths):[b]),a.main.call(d,b,d.helpers,d.partials,f,g)};return e.isTop=!0,e._setup=function(c){c.partial?(d.helpers=c.helpers,d.partials=c.partials):(d.helpers=d.merge(c.helpers,b.helpers),a.usePartial&&(d.partials=d.merge(c.partials,b.partials)))},e._child=function(b,c,e){if(a.useDepths&&!e)throw new k("must pass parent depths");return f(d,b,a[b],c,e)},e}function f(a,b,c,d,e){var f=function(b,f){return f=f||{},c.call(a,b,a.helpers,a.partials,f.data||d,e&&[b].concat(e))};return f.program=b,f.depth=e?e.length:0,f}function g(a,b,c,d,e,f,g){var h={partial:!0,helpers:d,partials:e,data:f,depths:g};if(void 0===a)throw new k("The partial "+b+" could not be found");return a instanceof Function?a(c,h):void 0}function h(){return""}function i(a,b){return b&&"root"in b||(b=b?n(b):{},b.root=a),b}var j=a("./utils"),k=a("./exception")["default"],l=a("./base").COMPILER_REVISION,m=a("./base").REVISION_CHANGES,n=a("./base").createFrame;c.checkRevision=d,c.template=e,c.program=f,c.invokePartial=g,c.noop=h},{"./base":44,"./exception":53,"./utils":56}],55:[function(a,b,c){"use strict";function d(a){this.string=a}d.prototype.toString=function(){return""+this.string},c["default"]=d},{}],56:[function(a,b,c){"use strict";function d(a){return j[a]}function e(a){for(var b=1;b<arguments.length;b++)for(var c in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],c)&&(a[c]=arguments[b][c]);return a}function f(a){return a instanceof i?a.toString():null==a?"":a?(a=""+a,l.test(a)?a.replace(k,d):a):a+""}function g(a){return a||0===a?o(a)&&0===a.length?!0:!1:!0}function h(a,b){return(a?a+".":"")+b}var i=a("./safe-string")["default"],j={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},k=/[&<>"'`]/g,l=/[&<>"'`]/;c.extend=e;var m=Object.prototype.toString;c.toString=m;var n=function(a){return"function"==typeof a};n(/x/)&&(n=function(a){return"function"==typeof a&&"[object Function]"===m.call(a)});var n;c.isFunction=n;var o=Array.isArray||function(a){return a&&"object"==typeof a?"[object Array]"===m.call(a):!1};c.isArray=o,c.escapeExpression=f,c.isEmpty=g,c.appendContextPath=h},{"./safe-string":55}],57:[function(a,b){var c=a("../dist/cjs/handlebars")["default"];c.Visitor=a("../dist/cjs/handlebars/compiler/visitor")["default"];var d=a("../dist/cjs/handlebars/compiler/printer");if(c.PrintVisitor=d.PrintVisitor,c.print=d.print,b.exports=c,"undefined"!=typeof a&&a.extensions){var e=function(b,d){var e=a("fs"),f=e.readFileSync(d,"utf8");b.exports=c.compile(f)};a.extensions[".handlebars"]=e,a.extensions[".hbs"]=e}},{"../dist/cjs/handlebars":42,"../dist/cjs/handlebars/compiler/printer":51,"../dist/cjs/handlebars/compiler/visitor":52,fs:38}],58:[function(a,b,c){/*!
 *  howler.js v1.1.25
 *  howlerjs.com
 *
 *  (c) 2013-2014, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
!function(){var a={},b=null,d=!0,e=!1;try{"undefined"!=typeof AudioContext?b=new AudioContext:"undefined"!=typeof webkitAudioContext?b=new webkitAudioContext:d=!1}catch(f){d=!1}if(!d)if("undefined"!=typeof Audio)try{new Audio}catch(f){e=!0}else e=!0;if(d){var g="undefined"==typeof b.createGain?b.createGainNode():b.createGain();g.gain.value=1,g.connect(b.destination)}var h=function(a){this._volume=1,this._muted=!1,this.usingWebAudio=d,this.ctx=b,this.noAudio=e,this._howls=[],this._codecs=a,this.iOSAutoEnable=!0};h.prototype={volume:function(a){var b=this;if(a=parseFloat(a),a>=0&&1>=a){b._volume=a,d&&(g.gain.value=a);for(var c in b._howls)if(b._howls.hasOwnProperty(c)&&b._howls[c]._webAudio===!1)for(var e=0;e<b._howls[c]._audioNode.length;e++)b._howls[c]._audioNode[e].volume=b._howls[c]._volume*b._volume;return b}return d?g.gain.value:b._volume},mute:function(){return this._setMuted(!0),this},unmute:function(){return this._setMuted(!1),this},_setMuted:function(a){var b=this;b._muted=a,d&&(g.gain.value=a?0:b._volume);for(var c in b._howls)if(b._howls.hasOwnProperty(c)&&b._howls[c]._webAudio===!1)for(var e=0;e<b._howls[c]._audioNode.length;e++)b._howls[c]._audioNode[e].muted=a},codecs:function(a){return this._codecs[a]},_enableiOSAudio:function(){var a=this;if(!b||!a._iOSEnabled&&/iPhone|iPad|iPod/i.test(navigator.userAgent)){a._iOSEnabled=!1;var c=function(){var d=b.createBuffer(1,1,22050),e=b.createBufferSource();e.buffer=d,e.connect(b.destination),"undefined"==typeof e.start?e.noteOn(0):e.start(0),setTimeout(function(){(e.playbackState===e.PLAYING_STATE||e.playbackState===e.FINISHED_STATE)&&(a._iOSEnabled=!0,a.iOSAutoEnable=!1,window.removeEventListener("touchstart",c,!1))},0)};return window.addEventListener("touchstart",c,!1),a}}};var i=null,j={};e||(i=new Audio,j={mp3:!!i.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!i.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!i.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!i.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!i.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(i.canPlayType("audio/x-m4a;")||i.canPlayType("audio/m4a;")||i.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(i.canPlayType("audio/x-mp4;")||i.canPlayType("audio/mp4;")||i.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!i.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")});var k=new h(j),l=function(a){var c=this;c._autoplay=a.autoplay||!1,c._buffer=a.buffer||!1,c._duration=a.duration||0,c._format=a.format||null,c._loop=a.loop||!1,c._loaded=!1,c._sprite=a.sprite||{},c._src=a.src||"",c._pos3d=a.pos3d||[0,0,-.5],c._volume=void 0!==a.volume?a.volume:1,c._urls=a.urls||[],c._rate=a.rate||1,c._model=a.model||null,c._onload=[a.onload||function(){}],c._onloaderror=[a.onloaderror||function(){}],c._onend=[a.onend||function(){}],c._onpause=[a.onpause||function(){}],c._onplay=[a.onplay||function(){}],c._onendTimer=[],c._webAudio=d&&!c._buffer,c._audioNode=[],c._webAudio&&c._setupAudioNode(),"undefined"!=typeof b&&b&&k.iOSAutoEnable&&k._enableiOSAudio(),k._howls.push(c),c.load()};if(l.prototype={load:function(){var a=this,b=null;if(e)return void a.on("loaderror");for(var c=0;c<a._urls.length;c++){var d,f;if(a._format)d=a._format;else{if(f=a._urls[c],d=/^data:audio\/([^;,]+);/i.exec(f),d||(d=/\.([^.]+)$/.exec(f.split("?",1)[0])),!d)return void a.on("loaderror");d=d[1].toLowerCase()}if(j[d]){b=a._urls[c];break}}if(!b)return void a.on("loaderror");if(a._src=b,a._webAudio)m(a,b);else{var g=new Audio;g.addEventListener("error",function(){g.error&&4===g.error.code&&(h.noAudio=!0),a.on("loaderror",{type:g.error?g.error.code:0})},!1),a._audioNode.push(g),g.src=b,g._pos=0,g.preload="auto",g.volume=k._muted?0:a._volume*k.volume();var i=function(){a._duration=Math.ceil(10*g.duration)/10,0===Object.getOwnPropertyNames(a._sprite).length&&(a._sprite={_default:[0,1e3*a._duration]}),a._loaded||(a._loaded=!0,a.on("load")),a._autoplay&&a.play(),g.removeEventListener("canplaythrough",i,!1)};g.addEventListener("canplaythrough",i,!1),g.load()}return a},urls:function(a){var b=this;return a?(b.stop(),b._urls="string"==typeof a?[a]:a,b._loaded=!1,b.load(),b):b._urls},play:function(a,c){var d=this;return"function"==typeof a&&(c=a),a&&"function"!=typeof a||(a="_default"),d._loaded?d._sprite[a]?(d._inactiveNode(function(e){e._sprite=a;var f=e._pos>0?e._pos:d._sprite[a][0]/1e3,g=0;d._webAudio?(g=d._sprite[a][1]/1e3-e._pos,e._pos>0&&(f=d._sprite[a][0]/1e3+f)):g=d._sprite[a][1]/1e3-(f-d._sprite[a][0]/1e3);var h,i=!(!d._loop&&!d._sprite[a][2]),j="string"==typeof c?c:Math.round(Date.now()*Math.random())+"";if(function(){var b={id:j,sprite:a,loop:i};h=setTimeout(function(){!d._webAudio&&i&&d.stop(b.id).play(a,b.id),d._webAudio&&!i&&(d._nodeById(b.id).paused=!0,d._nodeById(b.id)._pos=0,d._clearEndTimer(b.id)),d._webAudio||i||d.stop(b.id),d.on("end",j)},1e3*g),d._onendTimer.push({timer:h,id:b.id})}(),d._webAudio){var l=d._sprite[a][0]/1e3,m=d._sprite[a][1]/1e3;e.id=j,e.paused=!1,p(d,[i,l,m],j),d._playStart=b.currentTime,e.gain.value=d._volume,"undefined"==typeof e.bufferSource.start?e.bufferSource.noteGrainOn(0,f,g):e.bufferSource.start(0,f,g)}else{if(4!==e.readyState&&(e.readyState||!navigator.isCocoonJS))return d._clearEndTimer(j),function(){var b=d,f=a,g=c,h=e,i=function(){b.play(f,g),h.removeEventListener("canplaythrough",i,!1)};h.addEventListener("canplaythrough",i,!1)}(),d;e.readyState=4,e.id=j,e.currentTime=f,e.muted=k._muted||e.muted,e.volume=d._volume*k.volume(),setTimeout(function(){e.play()},0)}return d.on("play"),"function"==typeof c&&c(j),d}),d):("function"==typeof c&&c(),d):(d.on("load",function(){d.play(a,c)}),d)},pause:function(a){var b=this;if(!b._loaded)return b.on("play",function(){b.pause(a)}),b;b._clearEndTimer(a);var c=a?b._nodeById(a):b._activeNode();if(c)if(c._pos=b.pos(null,a),b._webAudio){if(!c.bufferSource||c.paused)return b;c.paused=!0,"undefined"==typeof c.bufferSource.stop?c.bufferSource.noteOff(0):c.bufferSource.stop(0)}else c.pause();return b.on("pause"),b},stop:function(a){var b=this;if(!b._loaded)return b.on("play",function(){b.stop(a)}),b;b._clearEndTimer(a);var c=a?b._nodeById(a):b._activeNode();if(c)if(c._pos=0,b._webAudio){if(!c.bufferSource||c.paused)return b;c.paused=!0,"undefined"==typeof c.bufferSource.stop?c.bufferSource.noteOff(0):c.bufferSource.stop(0)}else isNaN(c.duration)||(c.pause(),c.currentTime=0);return b},mute:function(a){var b=this;if(!b._loaded)return b.on("play",function(){b.mute(a)}),b;var c=a?b._nodeById(a):b._activeNode();return c&&(b._webAudio?c.gain.value=0:c.muted=!0),b},unmute:function(a){var b=this;if(!b._loaded)return b.on("play",function(){b.unmute(a)}),b;var c=a?b._nodeById(a):b._activeNode();return c&&(b._webAudio?c.gain.value=b._volume:c.muted=!1),b},volume:function(a,b){var c=this;if(a=parseFloat(a),a>=0&&1>=a){if(c._volume=a,!c._loaded)return c.on("play",function(){c.volume(a,b)}),c;var d=b?c._nodeById(b):c._activeNode();return d&&(c._webAudio?d.gain.value=a:d.volume=a*k.volume()),c}return c._volume},loop:function(a){var b=this;return"boolean"==typeof a?(b._loop=a,b):b._loop},sprite:function(a){var b=this;return"object"==typeof a?(b._sprite=a,b):b._sprite},pos:function(a,c){var d=this;if(!d._loaded)return d.on("load",function(){d.pos(a)}),"number"==typeof a?d:d._pos||0;a=parseFloat(a);var e=c?d._nodeById(c):d._activeNode();if(e)return a>=0?(d.pause(c),e._pos=a,d.play(e._sprite,c),d):d._webAudio?e._pos+(b.currentTime-d._playStart):e.currentTime;if(a>=0)return d;for(var f=0;f<d._audioNode.length;f++)if(d._audioNode[f].paused&&4===d._audioNode[f].readyState)return d._webAudio?d._audioNode[f]._pos:d._audioNode[f].currentTime},pos3d:function(a,b,c,d){var e=this;if(b="undefined"!=typeof b&&b?b:0,c="undefined"!=typeof c&&c?c:-.5,!e._loaded)return e.on("play",function(){e.pos3d(a,b,c,d)}),e;if(!(a>=0||0>a))return e._pos3d;if(e._webAudio){var f=d?e._nodeById(d):e._activeNode();f&&(e._pos3d=[a,b,c],f.panner.setPosition(a,b,c),f.panner.panningModel=e._model||"HRTF")}return e},fade:function(a,b,c,d,e){var f=this,g=Math.abs(a-b),h=a>b?"down":"up",i=g/.01,j=c/i;if(!f._loaded)return f.on("load",function(){f.fade(a,b,c,d,e)}),f;f.volume(a,e);for(var k=1;i>=k;k++)!function(){var a=f._volume+("up"===h?.01:-.01)*k,c=Math.round(1e3*a)/1e3,g=b;setTimeout(function(){f.volume(c,e),c===g&&d&&d()},j*k)}()},fadeIn:function(a,b,c){return this.volume(0).play().fade(0,a,b,c)},fadeOut:function(a,b,c,d){var e=this;return e.fade(e._volume,a,b,function(){c&&c(),e.pause(d),e.on("end")},d)},_nodeById:function(a){for(var b=this,c=b._audioNode[0],d=0;d<b._audioNode.length;d++)if(b._audioNode[d].id===a){c=b._audioNode[d];break}return c},_activeNode:function(){for(var a=this,b=null,c=0;c<a._audioNode.length;c++)if(!a._audioNode[c].paused){b=a._audioNode[c];break}return a._drainPool(),b},_inactiveNode:function(a){for(var b=this,c=null,d=0;d<b._audioNode.length;d++)if(b._audioNode[d].paused&&4===b._audioNode[d].readyState){a(b._audioNode[d]),c=!0;break}if(b._drainPool(),!c){var e;if(b._webAudio)e=b._setupAudioNode(),a(e);else{b.load(),e=b._audioNode[b._audioNode.length-1];var f=navigator.isCocoonJS?"canplaythrough":"loadedmetadata",g=function(){e.removeEventListener(f,g,!1),a(e)};e.addEventListener(f,g,!1)}}},_drainPool:function(){var a,b=this,c=0;for(a=0;a<b._audioNode.length;a++)b._audioNode[a].paused&&c++;for(a=b._audioNode.length-1;a>=0&&!(5>=c);a--)b._audioNode[a].paused&&(b._webAudio&&b._audioNode[a].disconnect(0),c--,b._audioNode.splice(a,1))},_clearEndTimer:function(a){for(var b=this,c=0,d=0;d<b._onendTimer.length;d++)if(b._onendTimer[d].id===a){c=d;break}var e=b._onendTimer[c];e&&(clearTimeout(e.timer),b._onendTimer.splice(c,1))},_setupAudioNode:function(){var a=this,c=a._audioNode,d=a._audioNode.length;return c[d]="undefined"==typeof b.createGain?b.createGainNode():b.createGain(),c[d].gain.value=a._volume,c[d].paused=!0,c[d]._pos=0,c[d].readyState=4,c[d].connect(g),c[d].panner=b.createPanner(),c[d].panner.panningModel=a._model||"equalpower",c[d].panner.setPosition(a._pos3d[0],a._pos3d[1],a._pos3d[2]),c[d].panner.connect(c[d]),c[d]},on:function(a,b){var c=this,d=c["_on"+a];if("function"==typeof b)d.push(b);else for(var e=0;e<d.length;e++)b?d[e].call(c,b):d[e].call(c);return c},off:function(a,b){var c=this,d=c["_on"+a],e=b?b.toString():null;if(e){for(var f=0;f<d.length;f++)if(e===d[f].toString()){d.splice(f,1);break}}else c["_on"+a]=[];return c},unload:function(){for(var b=this,c=b._audioNode,d=0;d<b._audioNode.length;d++)c[d].paused||(b.stop(c[d].id),b.on("end",c[d].id)),b._webAudio?c[d].disconnect(0):c[d].src="";for(d=0;d<b._onendTimer.length;d++)clearTimeout(b._onendTimer[d].timer);var e=k._howls.indexOf(b);null!==e&&e>=0&&k._howls.splice(e,1),delete a[b._src],b=null}},d)var m=function(b,c){if(c in a)return b._duration=a[c].duration,void o(b);if(/^data:[^;]+;base64,/.test(c)){for(var d=atob(c.split(",")[1]),e=new Uint8Array(d.length),f=0;f<d.length;++f)e[f]=d.charCodeAt(f);n(e.buffer,b,c)}else{var g=new XMLHttpRequest;g.open("GET",c,!0),g.responseType="arraybuffer",g.onload=function(){n(g.response,b,c)},g.onerror=function(){b._webAudio&&(b._buffer=!0,b._webAudio=!1,b._audioNode=[],delete b._gainNode,delete a[c],b.load())};try{g.send()}catch(h){g.onerror()}}},n=function(c,d,e){b.decodeAudioData(c,function(b){b&&(a[e]=b,o(d,b))},function(){d.on("loaderror")})},o=function(a,b){a._duration=b?b.duration:a._duration,0===Object.getOwnPropertyNames(a._sprite).length&&(a._sprite={_default:[0,1e3*a._duration]}),a._loaded||(a._loaded=!0,a.on("load")),a._autoplay&&a.play()},p=function(c,d,e){var f=c._nodeById(e);f.bufferSource=b.createBufferSource(),f.bufferSource.buffer=a[c._src],f.bufferSource.connect(f.panner),f.bufferSource.loop=d[0],d[0]&&(f.bufferSource.loopStart=d[1],f.bufferSource.loopEnd=d[1]+d[2]),f.bufferSource.playbackRate.value=c._rate};"function"==typeof define&&define.amd&&define(function(){return{Howler:k,Howl:l}}),"undefined"!=typeof c&&(c.Howler=k,c.Howl=l),"undefined"!=typeof window&&(window.Howler=k,window.Howl=l)}()},{}],59:[function(a,b){function c(a){return a||"undefined"==typeof navigator||(a=navigator.userAgent),a&&a.headers&&"string"==typeof a.headers["user-agent"]&&(a=a.headers["user-agent"]),"string"!=typeof a?!1:/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))}b.exports=c},{}],60:[function(a,b){/*! iScroll v5.1.3 ~ (c) 2008-2015 Matteo Spinelli ~ http://cubiq.org/license */
!function(a,c,d){function e(a,b){this.wrapper="string"==typeof a?c.querySelector(a):a,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={resizeScrollbars:!0,mouseWheelSpeed:20,snapThreshold:.334,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0};for(var d in b)this.options[d]=b[d];this.translateZ=this.options.HWCompositing&&i.hasPerspective?" translateZ(0)":"",this.options.useTransition=i.hasTransition&&this.options.useTransition,this.options.useTransform=i.hasTransform&&this.options.useTransform,this.options.eventPassthrough=this.options.eventPassthrough===!0?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY="vertical"==this.options.eventPassthrough?!1:this.options.scrollY,this.options.scrollX="horizontal"==this.options.eventPassthrough?!1:this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?i.ease[this.options.bounceEasing]||i.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,this.options.tap===!0&&(this.options.tap="tap"),"scale"==this.options.shrinkScrollbars&&(this.options.useTransition=!1),this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1,this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}function f(a,b,d){var e=c.createElement("div"),f=c.createElement("div");return d===!0&&(e.style.cssText="position:absolute;z-index:9999",f.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"),f.className="iScrollIndicator","h"==a?(d===!0&&(e.style.cssText+=";height:7px;left:2px;right:2px;bottom:0",f.style.height="100%"),e.className="iScrollHorizontalScrollbar"):(d===!0&&(e.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px",f.style.width="100%"),e.className="iScrollVerticalScrollbar"),e.style.cssText+=";overflow:hidden",b||(e.style.pointerEvents="none"),e.appendChild(f),e}function g(b,d){this.wrapper="string"==typeof d.el?c.querySelector(d.el):d.el,this.wrapperStyle=this.wrapper.style,this.indicator=this.wrapper.children[0],this.indicatorStyle=this.indicator.style,this.scroller=b,this.options={listenX:!0,listenY:!0,interactive:!1,resize:!0,defaultScrollbars:!1,shrink:!1,fade:!1,speedRatioX:0,speedRatioY:0};for(var e in d)this.options[e]=d[e];this.sizeRatioX=1,this.sizeRatioY=1,this.maxPosX=0,this.maxPosY=0,this.options.interactive&&(this.options.disableTouch||(i.addEvent(this.indicator,"touchstart",this),i.addEvent(a,"touchend",this)),this.options.disablePointer||(i.addEvent(this.indicator,i.prefixPointerEvent("pointerdown"),this),i.addEvent(a,i.prefixPointerEvent("pointerup"),this)),this.options.disableMouse||(i.addEvent(this.indicator,"mousedown",this),i.addEvent(a,"mouseup",this))),this.options.fade&&(this.wrapperStyle[i.style.transform]=this.scroller.translateZ,this.wrapperStyle[i.style.transitionDuration]=i.isBadAndroid?"0.001s":"0ms",this.wrapperStyle.opacity="0")}var h=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(b){a.setTimeout(b,1e3/60)},i=function(){function b(a){return g===!1?!1:""===g?a:g+a.charAt(0).toUpperCase()+a.substr(1)}var e={},f=c.createElement("div").style,g=function(){for(var a,b=["t","webkitT","MozT","msT","OT"],c=0,d=b.length;d>c;c++)if(a=b[c]+"ransform",a in f)return b[c].substr(0,b[c].length-1);return!1}();e.getTime=Date.now||function(){return(new Date).getTime()},e.extend=function(a,b){for(var c in b)a[c]=b[c]},e.addEvent=function(a,b,c,d){a.addEventListener(b,c,!!d)},e.removeEvent=function(a,b,c,d){a.removeEventListener(b,c,!!d)},e.prefixPointerEvent=function(b){return a.MSPointerEvent?"MSPointer"+b.charAt(9).toUpperCase()+b.substr(10):b},e.momentum=function(a,b,c,e,f,g){var h,i,j=a-b,k=d.abs(j)/c;return g=void 0===g?6e-4:g,h=a+k*k/(2*g)*(0>j?-1:1),i=k/g,e>h?(h=f?e-f/2.5*(k/8):e,j=d.abs(h-a),i=j/k):h>0&&(h=f?f/2.5*(k/8):0,j=d.abs(a)+h,i=j/k),{destination:d.round(h),duration:i}};var h=b("transform");return e.extend(e,{hasTransform:h!==!1,hasPerspective:b("perspective")in f,hasTouch:"ontouchstart"in a,hasPointer:a.PointerEvent||a.MSPointerEvent,hasTransition:b("transition")in f}),e.isBadAndroid=/Android /.test(a.navigator.appVersion)&&!/Chrome\/\d/.test(a.navigator.appVersion),e.extend(e.style={},{transform:h,transitionTimingFunction:b("transitionTimingFunction"),transitionDuration:b("transitionDuration"),transitionDelay:b("transitionDelay"),transformOrigin:b("transformOrigin")}),e.hasClass=function(a,b){var c=new RegExp("(^|\\s)"+b+"(\\s|$)");return c.test(a.className)},e.addClass=function(a,b){if(!e.hasClass(a,b)){var c=a.className.split(" ");c.push(b),a.className=c.join(" ")}},e.removeClass=function(a,b){if(e.hasClass(a,b)){var c=new RegExp("(^|\\s)"+b+"(\\s|$)","g");a.className=a.className.replace(c," ")}},e.offset=function(a){for(var b=-a.offsetLeft,c=-a.offsetTop;a=a.offsetParent;)b-=a.offsetLeft,c-=a.offsetTop;return{left:b,top:c}},e.preventDefaultException=function(a,b){for(var c in b)if(b[c].test(a[c]))return!0;return!1},e.extend(e.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),e.extend(e.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(a){return a*(2-a)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(a){return d.sqrt(1- --a*a)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(a){var b=4;return(a-=1)*a*((b+1)*a+b)+1}},bounce:{style:"",fn:function(a){return(a/=1)<1/2.75?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}},elastic:{style:"",fn:function(a){var b=.22,c=.4;return 0===a?0:1==a?1:c*d.pow(2,-10*a)*d.sin(2*(a-b/4)*d.PI/b)+1}}}),e.tap=function(a,b){var d=c.createEvent("Event");d.initEvent(b,!0,!0),d.pageX=a.pageX,d.pageY=a.pageY,a.target.dispatchEvent(d)},e.click=function(a){var b,d=a.target;/(SELECT|INPUT|TEXTAREA)/i.test(d.tagName)||(b=c.createEvent("MouseEvents"),b.initMouseEvent("click",!0,!0,a.view,1,d.screenX,d.screenY,d.clientX,d.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,null),b._constructed=!0,d.dispatchEvent(b))},e}();e.prototype={version:"5.1.3",_init:function(){this._initEvents(),(this.options.scrollbars||this.options.indicators)&&this._initIndicators(),this.options.mouseWheel&&this._initWheel(),this.options.snap&&this._initSnap(),this.options.keyBindings&&this._initKeys()},destroy:function(){this._initEvents(!0),this._execEvent("destroy")},_transitionEnd:function(a){a.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},_start:function(a){if(!(1!=i.eventType[a.type]&&0!==a.button||!this.enabled||this.initiated&&i.eventType[a.type]!==this.initiated)){!this.options.preventDefault||i.isBadAndroid||i.preventDefaultException(a.target,this.options.preventDefaultException)||a.preventDefault();var b,c=a.touches?a.touches[0]:a;this.initiated=i.eventType[a.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this._transitionTime(),this.startTime=i.getTime(),this.options.useTransition&&this.isInTransition?(this.isInTransition=!1,b=this.getComputedPosition(),this._translate(d.round(b.x),d.round(b.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=c.pageX,this.pointY=c.pageY,this._execEvent("beforeScrollStart")}},_move:function(a){if(this.enabled&&i.eventType[a.type]===this.initiated){this.options.preventDefault&&a.preventDefault();var b,c,e,f,g=a.touches?a.touches[0]:a,h=g.pageX-this.pointX,j=g.pageY-this.pointY,k=i.getTime();if(this.pointX=g.pageX,this.pointY=g.pageY,this.distX+=h,this.distY+=j,e=d.abs(this.distX),f=d.abs(this.distY),!(k-this.endTime>300&&10>e&&10>f)){if(this.directionLocked||this.options.freeScroll||(this.directionLocked=e>f+this.options.directionLockThreshold?"h":f>=e+this.options.directionLockThreshold?"v":"n"),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)a.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);j=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)a.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);h=0}h=this.hasHorizontalScroll?h:0,j=this.hasVerticalScroll?j:0,b=this.x+h,c=this.y+j,(b>0||b<this.maxScrollX)&&(b=this.options.bounce?this.x+h/3:b>0?0:this.maxScrollX),(c>0||c<this.maxScrollY)&&(c=this.options.bounce?this.y+j/3:c>0?0:this.maxScrollY),this.directionX=h>0?-1:0>h?1:0,this.directionY=j>0?-1:0>j?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(b,c),k-this.startTime>300&&(this.startTime=k,this.startX=this.x,this.startY=this.y)}}},_end:function(a){if(this.enabled&&i.eventType[a.type]===this.initiated){this.options.preventDefault&&!i.preventDefaultException(a.target,this.options.preventDefaultException)&&a.preventDefault();var b,c,e=(a.changedTouches?a.changedTouches[0]:a,i.getTime()-this.startTime),f=d.round(this.x),g=d.round(this.y),h=d.abs(f-this.startX),j=d.abs(g-this.startY),k=0,l="";if(this.isInTransition=0,this.initiated=0,this.endTime=i.getTime(),!this.resetPosition(this.options.bounceTime)){if(this.scrollTo(f,g),!this.moved)return this.options.tap&&i.tap(a,this.options.tap),this.options.click&&i.click(a),void this._execEvent("scrollCancel");if(this._events.flick&&200>e&&100>h&&100>j)return void this._execEvent("flick");if(this.options.momentum&&300>e&&(b=this.hasHorizontalScroll?i.momentum(this.x,this.startX,e,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:f,duration:0},c=this.hasVerticalScroll?i.momentum(this.y,this.startY,e,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:g,duration:0},f=b.destination,g=c.destination,k=d.max(b.duration,c.duration),this.isInTransition=1),this.options.snap){var m=this._nearestSnap(f,g);this.currentPage=m,k=this.options.snapSpeed||d.max(d.max(d.min(d.abs(f-m.x),1e3),d.min(d.abs(g-m.y),1e3)),300),f=m.x,g=m.y,this.directionX=0,this.directionY=0,l=this.options.bounceEasing}return f!=this.x||g!=this.y?((f>0||f<this.maxScrollX||g>0||g<this.maxScrollY)&&(l=i.ease.quadratic),void this.scrollTo(f,g,k,l)):void this._execEvent("scrollEnd")}}},_resize:function(){var a=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){a.refresh()},this.options.resizePolling)},resetPosition:function(a){var b=this.x,c=this.y;return a=a||0,!this.hasHorizontalScroll||this.x>0?b=0:this.x<this.maxScrollX&&(b=this.maxScrollX),!this.hasVerticalScroll||this.y>0?c=0:this.y<this.maxScrollY&&(c=this.maxScrollY),b==this.x&&c==this.y?!1:(this.scrollTo(b,c,a,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=this.scroller.offsetWidth,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=i.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(a,b){this._events[a]||(this._events[a]=[]),this._events[a].push(b)},off:function(a,b){if(this._events[a]){var c=this._events[a].indexOf(b);c>-1&&this._events[a].splice(c,1)}},_execEvent:function(a){if(this._events[a]){var b=0,c=this._events[a].length;if(c)for(;c>b;b++)this._events[a][b].apply(this,[].slice.call(arguments,1))}},scrollBy:function(a,b,c,d){a=this.x+a,b=this.y+b,c=c||0,this.scrollTo(a,b,c,d)},scrollTo:function(a,b,c,d){d=d||i.ease.circular,this.isInTransition=this.options.useTransition&&c>0,!c||this.options.useTransition&&d.style?(this._transitionTimingFunction(d.style),this._transitionTime(c),this._translate(a,b)):this._animate(a,b,c,d.fn)},scrollToElement:function(a,b,c,e,f){if(a=a.nodeType?a:this.scroller.querySelector(a)){var g=i.offset(a);g.left-=this.wrapperOffset.left,g.top-=this.wrapperOffset.top,c===!0&&(c=d.round(a.offsetWidth/2-this.wrapper.offsetWidth/2)),e===!0&&(e=d.round(a.offsetHeight/2-this.wrapper.offsetHeight/2)),g.left-=c||0,g.top-=e||0,g.left=g.left>0?0:g.left<this.maxScrollX?this.maxScrollX:g.left,g.top=g.top>0?0:g.top<this.maxScrollY?this.maxScrollY:g.top,b=void 0===b||null===b||"auto"===b?d.max(d.abs(this.x-g.left),d.abs(this.y-g.top)):b,this.scrollTo(g.left,g.top,b,f)}},_transitionTime:function(a){if(a=a||0,this.scrollerStyle[i.style.transitionDuration]=a+"ms",!a&&i.isBadAndroid&&(this.scrollerStyle[i.style.transitionDuration]="0.001s"),this.indicators)for(var b=this.indicators.length;b--;)this.indicators[b].transitionTime(a)},_transitionTimingFunction:function(a){if(this.scrollerStyle[i.style.transitionTimingFunction]=a,this.indicators)for(var b=this.indicators.length;b--;)this.indicators[b].transitionTimingFunction(a)},_translate:function(a,b){if(this.options.useTransform?this.scrollerStyle[i.style.transform]="translate("+a+"px,"+b+"px)"+this.translateZ:(a=d.round(a),b=d.round(b),this.scrollerStyle.left=a+"px",this.scrollerStyle.top=b+"px"),this.x=a,this.y=b,this.indicators)for(var c=this.indicators.length;c--;)this.indicators[c].updatePosition()},_initEvents:function(b){var c=b?i.removeEvent:i.addEvent,d=this.options.bindToWrapper?this.wrapper:a;c(a,"orientationchange",this),c(a,"resize",this),this.options.click&&c(this.wrapper,"click",this,!0),this.options.disableMouse||(c(this.wrapper,"mousedown",this),c(d,"mousemove",this),c(d,"mousecancel",this),c(d,"mouseup",this)),i.hasPointer&&!this.options.disablePointer&&(c(this.wrapper,i.prefixPointerEvent("pointerdown"),this),c(d,i.prefixPointerEvent("pointermove"),this),c(d,i.prefixPointerEvent("pointercancel"),this),c(d,i.prefixPointerEvent("pointerup"),this)),i.hasTouch&&!this.options.disableTouch&&(c(this.wrapper,"touchstart",this),c(d,"touchmove",this),c(d,"touchcancel",this),c(d,"touchend",this)),c(this.scroller,"transitionend",this),c(this.scroller,"webkitTransitionEnd",this),c(this.scroller,"oTransitionEnd",this),c(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var b,c,d=a.getComputedStyle(this.scroller,null);return this.options.useTransform?(d=d[i.style.transform].split(")")[0].split(", "),b=+(d[12]||d[4]),c=+(d[13]||d[5])):(b=+d.left.replace(/[^-\d.]/g,""),c=+d.top.replace(/[^-\d.]/g,"")),{x:b,y:c}},_initIndicators:function(){function a(a){for(var b=h.indicators.length;b--;)a.call(h.indicators[b])}var b,c=this.options.interactiveScrollbars,d="string"!=typeof this.options.scrollbars,e=[],h=this;this.indicators=[],this.options.scrollbars&&(this.options.scrollY&&(b={el:f("v",c,this.options.scrollbars),interactive:c,defaultScrollbars:!0,customStyle:d,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:!1},this.wrapper.appendChild(b.el),e.push(b)),this.options.scrollX&&(b={el:f("h",c,this.options.scrollbars),interactive:c,defaultScrollbars:!0,customStyle:d,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:!1},this.wrapper.appendChild(b.el),e.push(b))),this.options.indicators&&(e=e.concat(this.options.indicators));for(var i=e.length;i--;)this.indicators.push(new g(this,e[i]));this.options.fadeScrollbars&&(this.on("scrollEnd",function(){a(function(){this.fade()})}),this.on("scrollCancel",function(){a(function(){this.fade()})}),this.on("scrollStart",function(){a(function(){this.fade(1)})}),this.on("beforeScrollStart",function(){a(function(){this.fade(1,!0)})})),this.on("refresh",function(){a(function(){this.refresh()})}),this.on("destroy",function(){a(function(){this.destroy()}),delete this.indicators})},_initWheel:function(){i.addEvent(this.wrapper,"wheel",this),i.addEvent(this.wrapper,"mousewheel",this),i.addEvent(this.wrapper,"DOMMouseScroll",this),this.on("destroy",function(){i.removeEvent(this.wrapper,"wheel",this),i.removeEvent(this.wrapper,"mousewheel",this),i.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(a){if(this.enabled){a.preventDefault(),a.stopPropagation();var b,c,e,f,g=this;if(void 0===this.wheelTimeout&&g._execEvent("scrollStart"),clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){g._execEvent("scrollEnd"),g.wheelTimeout=void 0},400),"deltaX"in a)1===a.deltaMode?(b=-a.deltaX*this.options.mouseWheelSpeed,c=-a.deltaY*this.options.mouseWheelSpeed):(b=-a.deltaX,c=-a.deltaY);else if("wheelDeltaX"in a)b=a.wheelDeltaX/120*this.options.mouseWheelSpeed,c=a.wheelDeltaY/120*this.options.mouseWheelSpeed;else if("wheelDelta"in a)b=c=a.wheelDelta/120*this.options.mouseWheelSpeed;else{if(!("detail"in a))return;b=c=-a.detail/3*this.options.mouseWheelSpeed}if(b*=this.options.invertWheelDirection,c*=this.options.invertWheelDirection,this.hasVerticalScroll||(b=c,c=0),this.options.snap)return e=this.currentPage.pageX,f=this.currentPage.pageY,b>0?e--:0>b&&e++,c>0?f--:0>c&&f++,void this.goToPage(e,f);e=this.x+d.round(this.hasHorizontalScroll?b:0),f=this.y+d.round(this.hasVerticalScroll?c:0),e>0?e=0:e<this.maxScrollX&&(e=this.maxScrollX),f>0?f=0:f<this.maxScrollY&&(f=this.maxScrollY),this.scrollTo(e,f,this.options.mouseWheelDuration||0,this.options.mouseWheelEase)}},_initSnap:function(){this.currentPage={},"string"==typeof this.options.snap&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap)),this.on("refresh",function(){var a,b,c,e,f,g,h=0,i=0,j=0,k=this.options.snapStepX||this.wrapperWidth,l=this.options.snapStepY||this.wrapperHeight;if(this.pages=[],this.wrapperWidth&&this.wrapperHeight&&this.scrollerWidth&&this.scrollerHeight){if(this.options.snap===!0)for(c=d.round(k/2),e=d.round(l/2);j>-this.scrollerWidth;){for(this.pages[h]=[],a=0,f=0;f>-this.scrollerHeight;)this.pages[h][a]={x:d.max(j,this.maxScrollX),y:d.max(f,this.maxScrollY),width:k,height:l,cx:j-c,cy:f-e},f-=l,a++;j-=k,h++}else for(g=this.options.snap,a=g.length,b=-1;a>h;h++)(0===h||g[h].offsetLeft<=g[h-1].offsetLeft)&&(i=0,b++),this.pages[i]||(this.pages[i]=[]),j=d.max(-g[h].offsetLeft,this.maxScrollX),f=d.max(-g[h].offsetTop,this.maxScrollY),c=j-d.round(g[h].offsetWidth/2),e=f-d.round(g[h].offsetHeight/2),this.pages[i][b]={x:j,y:f,width:g[h].offsetWidth,height:g[h].offsetHeight,cx:c,cy:e},j>this.maxScrollX&&i++;this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0),this.options.snapThreshold%1===0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=d.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=d.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}}),this.on("flick",function(){var a=this.options.snapSpeed||d.max(d.max(d.min(d.abs(this.x-this.startX),1e3),d.min(d.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,a)})},_nearestSnap:function(a,b){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};var c=0,e=this.pages.length,f=0;if(d.abs(a-this.absStartX)<this.snapThresholdX&&d.abs(b-this.absStartY)<this.snapThresholdY)return this.currentPage;for(a>0?a=0:a<this.maxScrollX&&(a=this.maxScrollX),b>0?b=0:b<this.maxScrollY&&(b=this.maxScrollY);e>c;c++)if(a>=this.pages[c][0].cx){a=this.pages[c][0].x;break}for(e=this.pages[c].length;e>f;f++)if(b>=this.pages[0][f].cy){b=this.pages[0][f].y;break}return c==this.currentPage.pageX&&(c+=this.directionX,0>c?c=0:c>=this.pages.length&&(c=this.pages.length-1),a=this.pages[c][0].x),f==this.currentPage.pageY&&(f+=this.directionY,0>f?f=0:f>=this.pages[0].length&&(f=this.pages[0].length-1),b=this.pages[0][f].y),{x:a,y:b,pageX:c,pageY:f}},goToPage:function(a,b,c,e){e=e||this.options.bounceEasing,a>=this.pages.length?a=this.pages.length-1:0>a&&(a=0),b>=this.pages[a].length?b=this.pages[a].length-1:0>b&&(b=0);var f=this.pages[a][b].x,g=this.pages[a][b].y;c=void 0===c?this.options.snapSpeed||d.max(d.max(d.min(d.abs(f-this.x),1e3),d.min(d.abs(g-this.y),1e3)),300):c,this.currentPage={x:f,y:g,pageX:a,pageY:b},this.scrollTo(f,g,c,e)},next:function(a,b){var c=this.currentPage.pageX,d=this.currentPage.pageY;c++,c>=this.pages.length&&this.hasVerticalScroll&&(c=0,d++),this.goToPage(c,d,a,b)},prev:function(a,b){var c=this.currentPage.pageX,d=this.currentPage.pageY;c--,0>c&&this.hasVerticalScroll&&(c=0,d--),this.goToPage(c,d,a,b)},_initKeys:function(){var b,c={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};if("object"==typeof this.options.keyBindings)for(b in this.options.keyBindings)"string"==typeof this.options.keyBindings[b]&&(this.options.keyBindings[b]=this.options.keyBindings[b].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(b in c)this.options.keyBindings[b]=this.options.keyBindings[b]||c[b];i.addEvent(a,"keydown",this),this.on("destroy",function(){i.removeEvent(a,"keydown",this)})},_key:function(a){if(this.enabled){var b,c=this.options.snap,e=c?this.currentPage.pageX:this.x,f=c?this.currentPage.pageY:this.y,g=i.getTime(),h=this.keyTime||0,j=.25;switch(this.options.useTransition&&this.isInTransition&&(b=this.getComputedPosition(),this._translate(d.round(b.x),d.round(b.y)),this.isInTransition=!1),this.keyAcceleration=200>g-h?d.min(this.keyAcceleration+j,50):0,a.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?e+=c?1:this.wrapperWidth:f+=c?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?e-=c?1:this.wrapperWidth:f-=c?1:this.wrapperHeight;break;case this.options.keyBindings.end:e=c?this.pages.length-1:this.maxScrollX,f=c?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:e=0,f=0;break;case this.options.keyBindings.left:e+=c?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:f+=c?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:e-=c?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:f-=c?1:5+this.keyAcceleration>>0;break;default:return}if(c)return void this.goToPage(e,f);e>0?(e=0,this.keyAcceleration=0):e<this.maxScrollX&&(e=this.maxScrollX,this.keyAcceleration=0),f>0?(f=0,this.keyAcceleration=0):f<this.maxScrollY&&(f=this.maxScrollY,this.keyAcceleration=0),this.scrollTo(e,f,0),this.keyTime=g}},_animate:function(a,b,c,d){function e(){var m,n,o,p=i.getTime();return p>=l?(f.isAnimating=!1,f._translate(a,b),void(f.resetPosition(f.options.bounceTime)||f._execEvent("scrollEnd"))):(p=(p-k)/c,o=d(p),m=(a-g)*o+g,n=(b-j)*o+j,f._translate(m,n),void(f.isAnimating&&h(e)))}var f=this,g=this.x,j=this.y,k=i.getTime(),l=k+c;this.isAnimating=!0,e()},handleEvent:function(a){switch(a.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(a);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(a);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(a);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(a);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(a);break;case"keydown":this._key(a);break;case"click":a._constructed||(a.preventDefault(),a.stopPropagation())}}},g.prototype={handleEvent:function(a){switch(a.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(a);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(a);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(a)}},destroy:function(){this.options.interactive&&(i.removeEvent(this.indicator,"touchstart",this),i.removeEvent(this.indicator,i.prefixPointerEvent("pointerdown"),this),i.removeEvent(this.indicator,"mousedown",this),i.removeEvent(a,"touchmove",this),i.removeEvent(a,i.prefixPointerEvent("pointermove"),this),i.removeEvent(a,"mousemove",this),i.removeEvent(a,"touchend",this),i.removeEvent(a,i.prefixPointerEvent("pointerup"),this),i.removeEvent(a,"mouseup",this)),this.options.defaultScrollbars&&this.wrapper.parentNode.removeChild(this.wrapper)},_start:function(b){var c=b.touches?b.touches[0]:b;b.preventDefault(),b.stopPropagation(),this.transitionTime(),this.initiated=!0,this.moved=!1,this.lastPointX=c.pageX,this.lastPointY=c.pageY,this.startTime=i.getTime(),this.options.disableTouch||i.addEvent(a,"touchmove",this),this.options.disablePointer||i.addEvent(a,i.prefixPointerEvent("pointermove"),this),this.options.disableMouse||i.addEvent(a,"mousemove",this),this.scroller._execEvent("beforeScrollStart")},_move:function(a){{var b,c,d,e,f=a.touches?a.touches[0]:a;i.getTime()}this.moved||this.scroller._execEvent("scrollStart"),this.moved=!0,b=f.pageX-this.lastPointX,this.lastPointX=f.pageX,c=f.pageY-this.lastPointY,this.lastPointY=f.pageY,d=this.x+b,e=this.y+c,this._pos(d,e),a.preventDefault(),a.stopPropagation()},_end:function(b){if(this.initiated){if(this.initiated=!1,b.preventDefault(),b.stopPropagation(),i.removeEvent(a,"touchmove",this),i.removeEvent(a,i.prefixPointerEvent("pointermove"),this),i.removeEvent(a,"mousemove",this),this.scroller.options.snap){var c=this.scroller._nearestSnap(this.scroller.x,this.scroller.y),e=this.options.snapSpeed||d.max(d.max(d.min(d.abs(this.scroller.x-c.x),1e3),d.min(d.abs(this.scroller.y-c.y),1e3)),300);(this.scroller.x!=c.x||this.scroller.y!=c.y)&&(this.scroller.directionX=0,this.scroller.directionY=0,this.scroller.currentPage=c,this.scroller.scrollTo(c.x,c.y,e,this.scroller.options.bounceEasing))}this.moved&&this.scroller._execEvent("scrollEnd")}},transitionTime:function(a){a=a||0,this.indicatorStyle[i.style.transitionDuration]=a+"ms",!a&&i.isBadAndroid&&(this.indicatorStyle[i.style.transitionDuration]="0.001s")},transitionTimingFunction:function(a){this.indicatorStyle[i.style.transitionTimingFunction]=a},refresh:function(){this.transitionTime(),this.indicatorStyle.display=this.options.listenX&&!this.options.listenY?this.scroller.hasHorizontalScroll?"block":"none":this.options.listenY&&!this.options.listenX?this.scroller.hasVerticalScroll?"block":"none":this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none",this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll?(i.addClass(this.wrapper,"iScrollBothScrollbars"),i.removeClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="8px":this.wrapper.style.bottom="8px")):(i.removeClass(this.wrapper,"iScrollBothScrollbars"),i.addClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="2px":this.wrapper.style.bottom="2px"));this.wrapper.offsetHeight;this.options.listenX&&(this.wrapperWidth=this.wrapper.clientWidth,this.options.resize?(this.indicatorWidth=d.max(d.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8),this.indicatorStyle.width=this.indicatorWidth+"px"):this.indicatorWidth=this.indicator.clientWidth,this.maxPosX=this.wrapperWidth-this.indicatorWidth,"clip"==this.options.shrink?(this.minBoundaryX=-this.indicatorWidth+8,this.maxBoundaryX=this.wrapperWidth-8):(this.minBoundaryX=0,this.maxBoundaryX=this.maxPosX),this.sizeRatioX=this.options.speedRatioX||this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX),this.options.listenY&&(this.wrapperHeight=this.wrapper.clientHeight,this.options.resize?(this.indicatorHeight=d.max(d.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8),this.indicatorStyle.height=this.indicatorHeight+"px"):this.indicatorHeight=this.indicator.clientHeight,this.maxPosY=this.wrapperHeight-this.indicatorHeight,"clip"==this.options.shrink?(this.minBoundaryY=-this.indicatorHeight+8,this.maxBoundaryY=this.wrapperHeight-8):(this.minBoundaryY=0,this.maxBoundaryY=this.maxPosY),this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.sizeRatioY=this.options.speedRatioY||this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY),this.updatePosition()},updatePosition:function(){var a=this.options.listenX&&d.round(this.sizeRatioX*this.scroller.x)||0,b=this.options.listenY&&d.round(this.sizeRatioY*this.scroller.y)||0;this.options.ignoreBoundaries||(a<this.minBoundaryX?("scale"==this.options.shrink&&(this.width=d.max(this.indicatorWidth+a,8),this.indicatorStyle.width=this.width+"px"),a=this.minBoundaryX):a>this.maxBoundaryX?"scale"==this.options.shrink?(this.width=d.max(this.indicatorWidth-(a-this.maxPosX),8),this.indicatorStyle.width=this.width+"px",a=this.maxPosX+this.indicatorWidth-this.width):a=this.maxBoundaryX:"scale"==this.options.shrink&&this.width!=this.indicatorWidth&&(this.width=this.indicatorWidth,this.indicatorStyle.width=this.width+"px"),b<this.minBoundaryY?("scale"==this.options.shrink&&(this.height=d.max(this.indicatorHeight+3*b,8),this.indicatorStyle.height=this.height+"px"),b=this.minBoundaryY):b>this.maxBoundaryY?"scale"==this.options.shrink?(this.height=d.max(this.indicatorHeight-3*(b-this.maxPosY),8),this.indicatorStyle.height=this.height+"px",b=this.maxPosY+this.indicatorHeight-this.height):b=this.maxBoundaryY:"scale"==this.options.shrink&&this.height!=this.indicatorHeight&&(this.height=this.indicatorHeight,this.indicatorStyle.height=this.height+"px")),this.x=a,this.y=b,this.scroller.options.useTransform?this.indicatorStyle[i.style.transform]="translate("+a+"px,"+b+"px)"+this.scroller.translateZ:(this.indicatorStyle.left=a+"px",this.indicatorStyle.top=b+"px")},_pos:function(a,b){0>a?a=0:a>this.maxPosX&&(a=this.maxPosX),0>b?b=0:b>this.maxPosY&&(b=this.maxPosY),a=this.options.listenX?d.round(a/this.sizeRatioX):this.scroller.x,b=this.options.listenY?d.round(b/this.sizeRatioY):this.scroller.y,this.scroller.scrollTo(a,b)},fade:function(a,b){if(!b||this.visible){clearTimeout(this.fadeTimeout),this.fadeTimeout=null;var c=a?250:500,d=a?0:300;a=a?"1":"0",this.wrapperStyle[i.style.transitionDuration]=c+"ms",this.fadeTimeout=setTimeout(function(a){this.wrapperStyle.opacity=a,this.visible=+a}.bind(this,a),d)}}},e.utils=i,"undefined"!=typeof b&&b.exports?b.exports=e:a.IScroll=e}(window,document,Math)},{}],61:[function(a,b){var c=a("./baseClass"),d=function(a){var b=void 0;
void 0===a&&(a={}),a.initialize?(b=a.initialize,delete a.initialize):b=function(){Array.prototype.splice.apply(arguments,[0,0,this]),d.parent.apply(void 0,arguments)},void 0!==a.Extends?(a.Extends.$$isConstructor=!0,b.prototype=Object.create(a.Extends.prototype),b.$$parentConstructor=a.Extends,delete a.Extends):(b.prototype=Object.create(c),b.$$parentConstructor=function(){}),b.prototype.$$getters={},b.prototype.$$setters={};for(var e in a)"function"==typeof a[e]?(a[e].$$name=e,a[e].$$owner=b.prototype,b.prototype[e]=a[e]):a[e]&&"object"==typeof a[e]&&(a[e].get||a[e].set)?(Object.defineProperty(b.prototype,e,a[e]),a[e].get&&(b.prototype.$$getters[e]=a[e].get,a[e].get.$$name=e,a[e].get.$$owner=b.prototype),a[e].set&&(b.prototype.$$setters[e]=a[e].set,a[e].set.$$name=e,a[e].set.$$owner=b.prototype)):b.prototype[e]=a[e];b.$$isConstructor=!0;for(var e=1;e<arguments.length;e++)arguments[e].compare(b);return b};d.parent=function(a){var b=d.parent.caller;if(arguments=Array.prototype.slice.apply(arguments,[1]),b.$$isConstructor)var c=b.$$parentConstructor;else{if(!b.$$name)throw"You cannot call parent here";var e=b.$$name,f=b.$$owner.$$getters[e],g=b.$$owner.$$setters[e];if(1==arguments.length&&g){var c=Object.getPrototypeOf(b.$$owner).$$setters[e];if(void 0===c)throw"No setter defined in parent"}else if(0==arguments.length&&f){var c=Object.getPrototypeOf(b.$$owner).$$getters[e];if(void 0===c)throw"No getter defined in parent"}else{if(g||f)throw"Incorrect amount of arguments sent to getter or setter";var c=Object.getPrototypeOf(b.$$owner)[e];if(void 0===c)throw"No parent function defined for "+e}}return c.apply(a,arguments)},b.exports=d},{"./baseClass":62}],62:[function(a,b){b.exports={parent:function(){if(this.parent.caller.$$isConstructor)var a=this.parent.caller.$$parentConstructor;else{if(!this.parent.caller.$$name)throw"You cannot call parent here";var b=this.parent.caller.$$name,c=this.parent.caller.$$owner.$$getters[b],d=this.parent.caller.$$owner.$$setters[b];if(1==arguments.length&&d){var a=Object.getPrototypeOf(this.parent.caller.$$owner).$$setters[b];if(void 0===a)throw"No setter defined in parent"}else if(0==arguments.length&&c){var a=Object.getPrototypeOf(this.parent.caller.$$owner).$$getters[b];if(void 0===a)throw"No getter defined in parent"}else{if(d||c)throw"Incorrect amount of arguments sent to getter or setter";var a=Object.getPrototypeOf(this.parent.caller.$$owner)[b];if(void 0===a)throw"No parent function defined for "+b}}return a.apply(this,arguments)}}},{}],63:[function(a,b,c){(function(a){(function(){function d(a,b){if(a!==b){var c=a===a,d=b===b;if(a>b||!c||"undefined"==typeof a&&d)return 1;if(b>a||!d||"undefined"==typeof b&&c)return-1}return 0}function e(a,b,c){if(b!==b)return q(a,c);for(var d=(c||0)-1,e=a.length;++d<e;)if(a[d]===b)return d;return-1}function f(a){return"function"==typeof a||!1}function g(a,b){var c=a.length;for(a.sort(b);c--;)a[c]=a[c].value;return a}function h(a){return"string"==typeof a?a:null==a?"":a+""}function i(a){return a.charCodeAt(0)}function j(a,b){for(var c=-1,d=a.length;++c<d&&b.indexOf(a.charAt(c))>-1;);return c}function k(a,b){for(var c=a.length;c--&&b.indexOf(a.charAt(c))>-1;);return c}function l(a,b){return d(a.criteria,b.criteria)||a.index-b.index}function m(a,b){for(var c=-1,e=a.criteria,f=b.criteria,g=e.length;++c<g;){var h=d(e[c],f[c]);if(h)return h}return a.index-b.index}function n(a){return Qb[a]}function o(a){return Rb[a]}function p(a){return"\\"+Ub[a]}function q(a,b,c){for(var d=a.length,e=c?b||d:(b||0)-1;c?e--:++e<d;){var f=a[e];if(f!==f)return e}return-1}function r(a){return a&&"object"==typeof a||!1}function s(a){return 160>=a&&a>=9&&13>=a||32==a||160==a||5760==a||6158==a||a>=8192&&(8202>=a||8232==a||8233==a||8239==a||8287==a||12288==a||65279==a)}function t(a,b){for(var c=-1,d=a.length,e=-1,f=[];++c<d;)a[c]===b&&(a[c]=S,f[++e]=c);return f}function u(a,b){for(var c,d=-1,e=a.length,f=-1,g=[];++d<e;){var h=a[d],i=b?b(h,d,a):h;d&&c===i||(c=i,g[++f]=h)}return g}function v(a){for(var b=-1,c=a.length;++b<c&&s(a.charCodeAt(b)););return b}function w(a){for(var b=a.length;b--&&s(a.charCodeAt(b)););return b}function x(a){return Sb[a]}function y(a){function b(a){if(r(a)&&!Zh(a)&&!(a instanceof Z)){if(a instanceof s)return a;if(bh.call(a,"__chain__")&&bh.call(a,"__wrapped__"))return Kd(a)}return new s(a)}function c(){}function s(a,b,c){this.__wrapped__=a,this.__actions__=c||[],this.__chain__=!!b}function Z(a){this.__wrapped__=a,this.__actions__=null,this.__dir__=1,this.__dropCount__=0,this.__filtered__=!1,this.__iteratees__=null,this.__takeCount__=Fh,this.__views__=null}function bb(){var a=this.__actions__,b=this.__iteratees__,c=this.__views__,d=new Z(this.__wrapped__);return d.__actions__=a?_b(a):null,d.__dir__=this.__dir__,d.__dropCount__=this.__dropCount__,d.__filtered__=this.__filtered__,d.__iteratees__=b?_b(b):null,d.__takeCount__=this.__takeCount__,d.__views__=c?_b(c):null,d}function db(){if(this.__filtered__){var a=new Z(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function Qb(){var a=this.__wrapped__.value();if(!Zh(a))return Yc(a,this.__actions__);var b=this.__dir__,c=0>b,d=td(0,a.length,this.__views__),e=d.start,f=d.end,g=f-e,h=this.__dropCount__,i=zh(g,this.__takeCount__),j=c?f:e-1,k=this.__iteratees__,l=k?k.length:0,m=0,n=[];a:for(;g--&&i>m;){j+=b;for(var o=-1,p=a[j];++o<l;){var q=k[o],r=q.iteratee,s=r(p,j,a),t=q.type;if(t==P)p=s;else if(!s){if(t==O)continue a;break a}}h?h--:n[m++]=p}return n}function Rb(){this.__data__={}}function Sb(a){return this.has(a)&&delete this.__data__[a]}function Tb(a){return"__proto__"==a?z:this.__data__[a]}function Ub(a){return"__proto__"!=a&&bh.call(this.__data__,a)}function Wb(a,b){return"__proto__"!=a&&(this.__data__[a]=b),this}function Xb(a){var b=a?a.length:0;for(this.data={hash:vh(null),set:new oh};b--;)this.push(a[b])}function Yb(a,b){var c=a.data,d="string"==typeof b||Cf(b)?c.set.has(b):c.hash[b];return d?0:-1}function Zb(a){var b=this.data;"string"==typeof a||Cf(a)?b.set.add(a):b.hash[a]=!0}function _b(a,b){var c=-1,d=a.length;for(b||(b=Og(d));++c<d;)b[c]=a[c];return b}function ac(a,b){for(var c=-1,d=a.length;++c<d&&b(a[c],c,a)!==!1;);return a}function bc(a,b){for(var c=a.length;c--&&b(a[c],c,a)!==!1;);return a}function cc(a,b){for(var c=-1,d=a.length;++c<d;)if(!b(a[c],c,a))return!1;return!0}function dc(a,b){for(var c=-1,d=a.length,e=-1,f=[];++c<d;){var g=a[c];b(g,c,a)&&(f[++e]=g)}return f}function ec(a,b){for(var c=-1,d=a.length,e=Og(d);++c<d;)e[c]=b(a[c],c,a);return e}function fc(a){for(var b=-1,c=a.length,d=Eh;++b<c;){var e=a[b];e>d&&(d=e)}return d}function gc(a){for(var b=-1,c=a.length,d=Fh;++b<c;){var e=a[b];d>e&&(d=e)}return d}function hc(a,b,c,d){var e=-1,f=a.length;for(d&&f&&(c=a[++e]);++e<f;)c=b(c,a[e],e,a);return c}function ic(a,b,c,d){var e=a.length;for(d&&e&&(c=a[--e]);e--;)c=b(c,a[e],e,a);return c}function jc(a,b){for(var c=-1,d=a.length;++c<d;)if(b(a[c],c,a))return!0;return!1}function kc(a,b){return"undefined"==typeof a?b:a}function lc(a,b,c,d){return"undefined"!=typeof a&&bh.call(d,c)?a:b}function mc(a,b,c){var d=ci(b);if(!c)return oc(b,a,d);for(var e=-1,f=d.length;++e<f;){var g=d[e],h=a[g],i=c(h,b[g],g,a,b);(i===i?i===h:h!==h)&&("undefined"!=typeof h||g in a)||(a[g]=i)}return a}function nc(a,b){for(var c=-1,d=a.length,e=Ad(d),f=b.length,g=Og(f);++c<f;){var h=b[c];e?(h=parseFloat(h),g[c]=yd(h,d)?a[h]:z):g[c]=a[h]}return g}function oc(a,b,c){c||(c=b,b={});for(var d=-1,e=c.length;++d<e;){var f=c[d];b[f]=a[f]}return b}function pc(a,b){for(var c=-1,d=b.length;++c<d;){var e=b[c];a[e]=md(a[e],B,a)}return a}function qc(a,b,c){var d=typeof a;return"function"==d?"undefined"!=typeof b&&xd(a)?_c(a,b,c):a:null==a?Dg:"object"==d?Mc(a):"undefined"==typeof b?Qc(a+""):Nc(a+"",b)}function rc(a,b,c,d,e,f,g){var h;if(c&&(h=e?c(a,d,e):c(a)),"undefined"!=typeof h)return h;if(!Cf(a))return a;var i=Zh(a);if(i){if(h=ud(a),!b)return _b(a,h)}else{var j=dh.call(a),k=j==Y;if(j!=_&&j!=T&&(!k||e))return Ob[j]?wd(a,j,b):e?a:{};if(h=vd(k?{}:a),!b)return oc(a,h,ci(a))}f||(f=[]),g||(g=[]);for(var l=f.length;l--;)if(f[l]==a)return g[l];return f.push(a),g.push(h),(i?ac:Ec)(a,function(d,e){h[e]=rc(d,b,c,e,a,f,g)}),h}function sc(a,b,c,d){if("function"!=typeof a)throw new Xg(R);return ph(function(){a.apply(z,Uc(c,d))},b)}function tc(a,b){var c=a?a.length:0,d=[];if(!c)return d;var f=-1,g=sd(),h=g==e,i=h&&b.length>=200?Ph(b):null,j=b.length;i&&(g=Yb,h=!1,b=i);a:for(;++f<c;){var k=a[f];if(h&&k===k){for(var l=j;l--;)if(b[l]===k)continue a;d.push(k)}else g(b,k)<0&&d.push(k)}return d}function uc(a,b){var c=a?a.length:0;if(!Ad(c))return Ec(a,b);for(var d=-1,e=Jd(a);++d<c&&b(e[d],d,e)!==!1;);return a}function vc(a,b){var c=a?a.length:0;if(!Ad(c))return Fc(a,b);for(var d=Jd(a);c--&&b(d[c],c,d)!==!1;);return a}function wc(a,b){var c=!0;return uc(a,function(a,d,e){return c=!!b(a,d,e)}),c}function xc(a,b,c,d){var e=a.length;for(c=null==c?0:+c||0,0>c&&(c=-c>e?0:e+c),d="undefined"==typeof d||d>e?e:+d||0,0>d&&(d+=e),e=c>d?0:d>>>0,c>>>=0;e>c;)a[c++]=b;return a}function yc(a,b){var c=[];return uc(a,function(a,d,e){b(a,d,e)&&c.push(a)}),c}function zc(a,b,c,d){var e;return c(a,function(a,c,f){return b(a,c,f)?(e=d?c:a,!1):void 0}),e}function Ac(a,b,c,d){for(var e=(d||0)-1,f=a.length,g=-1,h=[];++e<f;){var i=a[e];if(r(i)&&Ad(i.length)&&(Zh(i)||vf(i))){b&&(i=Ac(i,b,c));var j=-1,k=i.length;for(h.length+=k;++j<k;)h[++g]=i[j]}else c||(h[++g]=i)}return h}function Bc(a,b,c){for(var d=-1,e=Jd(a),f=c(a),g=f.length;++d<g;){var h=f[d];if(b(e[h],h,e)===!1)break}return a}function Cc(a,b,c){for(var d=Jd(a),e=c(a),f=e.length;f--;){var g=e[f];if(b(d[g],g,d)===!1)break}return a}function Dc(a,b){return Bc(a,b,Zf)}function Ec(a,b){return Bc(a,b,ci)}function Fc(a,b){return Cc(a,b,ci)}function Gc(a,b){for(var c=-1,d=b.length,e=-1,f=[];++c<d;){var g=b[c];_h(a[g])&&(f[++e]=g)}return f}function Hc(a,b,c){var d=-1,e="function"==typeof b,f=a?a.length:0,g=Ad(f)?Og(f):[];return uc(a,function(a){var f=e?b:null!=a&&a[b];g[++d]=f?f.apply(a,c):z}),g}function Ic(a,b,c,d,e,f){if(a===b)return 0!==a||1/a==1/b;var g=typeof a,h=typeof b;return"function"!=g&&"object"!=g&&"function"!=h&&"object"!=h||null==a||null==b?a!==a&&b!==b:Jc(a,b,Ic,c,d,e,f)}function Jc(a,b,c,d,e,f,g){var h=Zh(a),i=Zh(b),j=U,k=U;h||(j=dh.call(a),j==T?j=_:j!=_&&(h=Kf(a))),i||(k=dh.call(b),k==T?k=_:k!=_&&(i=Kf(b)));var l=j==_,m=k==_,n=j==k;if(n&&!h&&!l)return od(a,b,j);var o=l&&bh.call(a,"__wrapped__"),p=m&&bh.call(b,"__wrapped__");if(o||p)return c(o?a.value():a,p?b.value():b,d,e,f,g);if(!n)return!1;f||(f=[]),g||(g=[]);for(var q=f.length;q--;)if(f[q]==a)return g[q]==b;f.push(a),g.push(b);var r=(h?nd:pd)(a,b,c,d,e,f,g);return f.pop(),g.pop(),r}function Kc(a,b,c,d,e){var f=b.length;if(null==a)return!f;for(var g=-1,h=!e;++g<f;)if(h&&d[g]?c[g]!==a[b[g]]:!bh.call(a,b[g]))return!1;for(g=-1;++g<f;){var i=b[g];if(h&&d[g])var j=bh.call(a,i);else{var k=a[i],l=c[g];j=e?e(k,l,i):z,"undefined"==typeof j&&(j=Ic(l,k,e,!0))}if(!j)return!1}return!0}function Lc(a,b){var c=[];return uc(a,function(a,d,e){c.push(b(a,d,e))}),c}function Mc(a){var b=ci(a),c=b.length;if(1==c){var d=b[0],e=a[d];if(Bd(e))return function(a){return null!=a&&a[d]===e&&bh.call(a,d)}}for(var f=Og(c),g=Og(c);c--;)e=a[b[c]],f[c]=e,g[c]=Bd(e);return function(a){return Kc(a,b,f,g)}}function Nc(a,b){return Bd(b)?function(c){return null!=c&&c[a]===b}:function(c){return null!=c&&Ic(b,c[a],null,!0)}}function Oc(a,b,c,d,e){if(!Cf(a))return a;var f=Ad(b.length)&&(Zh(b)||Kf(b));return(f?ac:Ec)(b,function(b,g,h){if(r(b))return d||(d=[]),e||(e=[]),Pc(a,h,g,Oc,c,d,e);var i=a[g],j=c?c(i,b,g,a,h):z,k="undefined"==typeof j;k&&(j=b),!f&&"undefined"==typeof j||!k&&(j===j?j===i:i!==i)||(a[g]=j)}),a}function Pc(a,b,c,d,e,f,g){for(var h=f.length,i=b[c];h--;)if(f[h]==i)return void(a[c]=g[h]);var j=a[c],k=e?e(j,i,c,a,b):z,l="undefined"==typeof k;l&&(k=i,Ad(i.length)&&(Zh(i)||Kf(i))?k=Zh(j)?j:j?_b(j):[]:ai(i)||vf(i)?k=vf(j)?Nf(j):ai(j)?j:{}:l=!1),f.push(i),g.push(k),l?a[c]=d(k,i,e,f,g):(k===k?k!==j:j===j)&&(a[c]=k)}function Qc(a){return function(b){return null==b?z:b[a]}}function Rc(a,b){var c=b.length,e=nc(a,b);for(b.sort(d);c--;){var f=parseFloat(b[c]);if(f!=g&&yd(f)){var g=f;qh.call(a,f,1)}}return e}function Sc(a,b){return a+kh(Dh()*(b-a+1))}function Tc(a,b,c,d,e){return e(a,function(a,e,f){c=d?(d=!1,a):b(c,a,e,f)}),c}function Uc(a,b,c){var d=-1,e=a.length;b=null==b?0:+b||0,0>b&&(b=-b>e?0:e+b),c="undefined"==typeof c||c>e?e:+c||0,0>c&&(c+=e),e=b>c?0:c-b>>>0,b>>>=0;for(var f=Og(e);++d<e;)f[d]=a[d+b];return f}function Vc(a,b){var c;return uc(a,function(a,d,e){return c=b(a,d,e),!c}),!!c}function Wc(a,b){var c=-1,d=sd(),f=a.length,g=d==e,h=g&&f>=200,i=h?Ph():null,j=[];i?(d=Yb,g=!1):(h=!1,i=b?[]:j);a:for(;++c<f;){var k=a[c],l=b?b(k,c,a):k;if(g&&k===k){for(var m=i.length;m--;)if(i[m]===l)continue a;b&&i.push(l),j.push(k)}else d(i,l)<0&&((b||h)&&i.push(l),j.push(k))}return j}function Xc(a,b){for(var c=-1,d=b.length,e=Og(d);++c<d;)e[c]=a[b[c]];return e}function Yc(a,b){var c=a;c instanceof Z&&(c=c.value());for(var d=-1,e=b.length;++d<e;){var f=[c],g=b[d];mh.apply(f,g.args),c=g.func.apply(g.thisArg,f)}return c}function Zc(a,b,c){var d=0,e=a?a.length:d;if("number"==typeof b&&b===b&&Ih>=e){for(;e>d;){var f=d+e>>>1,g=a[f];(c?b>=g:b>g)?d=f+1:e=f}return e}return $c(a,b,Dg,c)}function $c(a,b,c,d){b=c(b);for(var e=0,f=a?a.length:0,g=b!==b,h="undefined"==typeof b;f>e;){var i=kh((e+f)/2),j=c(a[i]),k=j===j;if(g)var l=k||d;else l=h?k&&(d||"undefined"!=typeof j):d?b>=j:b>j;l?e=i+1:f=i}return zh(f,Hh)}function _c(a,b,c){if("function"!=typeof a)return Dg;if("undefined"==typeof b)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)};case 5:return function(c,d,e,f,g){return a.call(b,c,d,e,f,g)}}return function(){return a.apply(b,arguments)}}function ad(a){return hh.call(a,0)}function bd(a,b,c){for(var d=c.length,e=-1,f=yh(a.length-d,0),g=-1,h=b.length,i=Og(f+h);++g<h;)i[g]=b[g];for(;++e<d;)i[c[e]]=a[e];for(;f--;)i[g++]=a[e++];return i}function cd(a,b,c){for(var d=-1,e=c.length,f=-1,g=yh(a.length-e,0),h=-1,i=b.length,j=Og(g+i);++f<g;)j[f]=a[f];for(var k=f;++h<i;)j[k+h]=b[h];for(;++d<e;)j[k+c[d]]=a[f++];return j}function dd(a,b){return function(c,d,e){var f=b?b():{};if(d=rd(d,e,3),Zh(c))for(var g=-1,h=c.length;++g<h;){var i=c[g];a(f,i,d(i,g,c),c)}else uc(c,function(b,c,e){a(f,b,d(b,c,e),e)});return f}}function ed(a){return function(){var b=arguments.length,c=arguments[0];if(2>b||null==c)return c;if(b>3&&zd(arguments[1],arguments[2],arguments[3])&&(b=2),b>3&&"function"==typeof arguments[b-2])var d=_c(arguments[--b-1],arguments[b--],5);else b>2&&"function"==typeof arguments[b-1]&&(d=arguments[--b]);for(var e=0;++e<b;){var f=arguments[e];f&&a(c,f,d)}return c}}function fd(a,b){function c(){return(this instanceof c?d:a).apply(b,arguments)}var d=hd(a);return c}function gd(a){return function(b){for(var c=-1,d=zg(jg(b)),e=d.length,f="";++c<e;)f=a(f,d[c],c);return f}}function hd(a){return function(){var b=Nh(a.prototype),c=a.apply(b,arguments);return Cf(c)?c:b}}function id(a,b){return function(c,d,e){e&&zd(c,d,e)&&(d=null);var f=rd(),g=null==d;if(f===qc&&g||(g=!1,d=f(d,e,3)),g){var h=Zh(c);if(h||!Jf(c))return a(h?c:Id(c));d=i}return qd(c,d,b)}}function jd(a,b,c,d,e,f,g,h,i,j){function k(){for(var u=arguments.length,v=u,w=Og(u);v--;)w[v]=arguments[v];if(d&&(w=bd(w,d,e)),f&&(w=cd(w,f,g)),o||q){var x=k.placeholder,y=t(w,x);if(u-=y.length,j>u){var z=h?_b(h):null,A=yh(j-u,0),D=o?y:null,E=o?null:y,F=o?w:null,I=o?null:w;b|=o?G:H,b&=~(o?H:G),p||(b&=~(B|C));var J=jd(a,b,c,F,D,I,E,z,i,A);return J.placeholder=x,J}}var K=m?c:this;return n&&(a=K[s]),h&&(w=Fd(w,h)),l&&i<w.length&&(w.length=i),(this instanceof k?r||hd(a):a).apply(K,w)}var l=b&J,m=b&B,n=b&C,o=b&E,p=b&D,q=b&F,r=!n&&hd(a),s=a;return k}function kd(a,b,c){var d=a.length;if(b=+b,d>=b||!wh(b))return"";var e=b-d;return c=null==c?" ":c+"",rg(c,ih(e/c.length)).slice(0,e)}function ld(a,b,c,d){function e(){for(var b=-1,h=arguments.length,i=-1,j=d.length,k=Og(h+j);++i<j;)k[i]=d[i];for(;h--;)k[i++]=arguments[++b];return(this instanceof e?g:a).apply(f?c:this,k)}var f=b&B,g=hd(a);return e}function md(a,b,c,d,e,f,g,h){var i=b&C;if(!i&&"function"!=typeof a)throw new Xg(R);var j=d?d.length:0;if(j||(b&=~(G|H),d=e=null),j-=e?e.length:0,b&H){var k=d,l=e;d=e=null}var m=!i&&Qh(a),n=[a,b,c,d,e,k,l,f,g,h];if(m&&m!==!0&&(Cd(n,m),b=n[1],h=n[9]),n[9]=null==h?i?0:a.length:yh(h-j,0)||0,b==B)var o=fd(n[0],n[2]);else o=b!=G&&b!=(B|G)||n[4].length?jd.apply(z,n):ld.apply(z,n);var p=m?Oh:Rh;return p(o,n)}function nd(a,b,c,d,e,f,g){var h=-1,i=a.length,j=b.length,k=!0;if(i!=j&&!(e&&j>i))return!1;for(;k&&++h<i;){var l=a[h],m=b[h];if(k=z,d&&(k=e?d(m,l,h):d(l,m,h)),"undefined"==typeof k)if(e)for(var n=j;n--&&(m=b[n],!(k=l&&l===m||c(l,m,d,e,f,g))););else k=l&&l===m||c(l,m,d,e,f,g)}return!!k}function od(a,b,c){switch(c){case V:case W:return+a==+b;case X:return a.name==b.name&&a.message==b.message;case $:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case ab:case cb:return a==b+""}return!1}function pd(a,b,c,d,e,f,g){var h=ci(a),i=h.length,j=ci(b),k=j.length;if(i!=k&&!e)return!1;for(var l,m=-1;++m<i;){var n=h[m],o=bh.call(b,n);if(o){var p=a[n],q=b[n];o=z,d&&(o=e?d(q,p,n):d(p,q,n)),"undefined"==typeof o&&(o=p&&p===q||c(p,q,d,e,f,g))}if(!o)return!1;l||(l="constructor"==n)}if(!l){var r=a.constructor,s=b.constructor;if(r!=s&&"constructor"in a&&"constructor"in b&&!("function"==typeof r&&r instanceof r&&"function"==typeof s&&s instanceof s))return!1}return!0}function qd(a,b,c){var d=c?Fh:Eh,e=d,f=e;return uc(a,function(a,g,h){var i=b(a,g,h);((c?e>i:i>e)||i===d&&i===f)&&(e=i,f=a)}),f}function rd(a,c,d){var e=b.callback||Bg;return e=e===Bg?qc:e,d?e(a,c,d):e}function sd(a,c,d){var f=b.indexOf||Yd;return f=f===Yd?e:f,a?f(a,c,d):f}function td(a,b,c){for(var d=-1,e=c?c.length:0;++d<e;){var f=c[d],g=f.size;switch(f.type){case"drop":a+=g;break;case"dropRight":b-=g;break;case"take":b=zh(b,a+g);break;case"takeRight":a=yh(a,b-g)}}return{start:a,end:b}}function ud(a){var b=a.length,c=new a.constructor(b);return b&&"string"==typeof a[0]&&bh.call(a,"index")&&(c.index=a.index,c.input=a.input),c}function vd(a){var b=a.constructor;return"function"==typeof b&&b instanceof b||(b=Ug),new b}function wd(a,b,c){var d=a.constructor;switch(b){case eb:return ad(a);case V:case W:return new d(+a);case fb:case gb:case hb:case ib:case jb:case kb:case lb:case mb:case nb:var e=a.buffer;return new d(c?ad(e):e,a.byteOffset,a.length);case $:case cb:return new d(a);case ab:var f=new d(a.source,zb.exec(a));f.lastIndex=a.lastIndex}return f}function xd(a){var c=b.support,d=!(c.funcNames?a.name:c.funcDecomp);if(!d){var e=_g.call(a);c.funcNames||(d=!Ab.test(e)),d||(d=Hb.test(e)||Ff(a),Oh(a,d))}return d}function yd(a,b){return a=+a,b=null==b?Kh:b,a>-1&&a%1==0&&b>a}function zd(a,b,c){if(!Cf(c))return!1;var d=typeof b;if("number"==d)var e=c.length,f=Ad(e)&&yd(b,e);else f="string"==d&&b in c;if(f){var g=c[b];return a===a?a===g:g!==g}return!1}function Ad(a){return"number"==typeof a&&a>-1&&a%1==0&&Kh>=a}function Bd(a){return a===a&&(0===a?1/a>0:!Cf(a))}function Cd(a,b){var c=a[1],d=b[1],e=c|d,f=J|I,g=B|C,h=f|g|D|F,i=c&J&&!(d&J),j=c&I&&!(d&I),k=(j?a:b)[7],l=(i?a:b)[8],m=!(c>=I&&d>g||c>g&&d>=I),n=e>=f&&h>=e&&(I>c||(j||i)&&k.length<=l);if(!m&&!n)return a;d&B&&(a[2]=b[2],e|=c&B?0:D);var o=b[3];if(o){var p=a[3];a[3]=p?bd(p,o,b[4]):_b(o),a[4]=p?t(a[3],S):_b(b[4])}return o=b[5],o&&(p=a[5],a[5]=p?cd(p,o,b[6]):_b(o),a[6]=p?t(a[5],S):_b(b[6])),o=b[7],o&&(a[7]=_b(o)),d&J&&(a[8]=null==a[8]?b[8]:zh(a[8],b[8])),null==a[9]&&(a[9]=b[9]),a[0]=b[0],a[1]=e,a}function Dd(a,b){a=Jd(a);for(var c=-1,d=b.length,e={};++c<d;){var f=b[c];f in a&&(e[f]=a[f])}return e}function Ed(a,b){var c={};return Dc(a,function(a,d,e){b(a,d,e)&&(c[d]=a)}),c}function Fd(a,b){for(var c=a.length,d=zh(b.length,c),e=_b(a);d--;){var f=b[d];a[d]=yd(f,c)?e[f]:z}return a}function Gd(a){{var c;b.support}if(!r(a)||dh.call(a)!=_||!bh.call(a,"constructor")&&(c=a.constructor,"function"==typeof c&&!(c instanceof c)))return!1;var d;return Dc(a,function(a,b){d=b}),"undefined"==typeof d||bh.call(a,d)}function Hd(a){for(var c=Zf(a),d=c.length,e=d&&a.length,f=b.support,g=e&&Ad(e)&&(Zh(a)||f.nonEnumArgs&&vf(a)),h=-1,i=[];++h<d;){var j=c[h];(g&&yd(j,e)||bh.call(a,j))&&i.push(j)}return i}function Id(a){return null==a?[]:Ad(a.length)?Cf(a)?a:Ug(a):eg(a)}function Jd(a){return Cf(a)?a:Ug(a)}function Kd(a){return a instanceof Z?a.clone():new s(a.__wrapped__,a.__chain__,_b(a.__actions__))}function Ld(a,b,c){b=(c?zd(a,b,c):null==b)?1:yh(+b||1,1);for(var d=0,e=a?a.length:0,f=-1,g=Og(ih(e/b));e>d;)g[++f]=Uc(a,d,d+=b);return g}function Md(a){for(var b=-1,c=a?a.length:0,d=-1,e=[];++b<c;){var f=a[b];f&&(e[++d]=f)}return e}function Nd(){for(var a=-1,b=arguments.length;++a<b;){var c=arguments[a];if(Zh(c)||vf(c))break}return tc(c,Ac(arguments,!1,!0,++a))}function Od(a,b,c){var d=a?a.length:0;return d?((c?zd(a,b,c):null==b)&&(b=1),Uc(a,0>b?0:b)):[]}function Pd(a,b,c){var d=a?a.length:0;return d?((c?zd(a,b,c):null==b)&&(b=1),b=d-(+b||0),Uc(a,0,0>b?0:b)):[]}function Qd(a,b,c){var d=a?a.length:0;if(!d)return[];for(b=rd(b,c,3);d--&&b(a[d],d,a););return Uc(a,0,d+1)}function Rd(a,b,c){var d=a?a.length:0;if(!d)return[];var e=-1;for(b=rd(b,c,3);++e<d&&b(a[e],e,a););return Uc(a,e)}function Sd(a,b,c,d){var e=a?a.length:0;return e?(c&&"number"!=typeof c&&zd(a,b,c)&&(c=0,d=e),xc(a,b,c,d)):[]}function Td(a,b,c){var d=-1,e=a?a.length:0;for(b=rd(b,c,3);++d<e;)if(b(a[d],d,a))return d;return-1}function Ud(a,b,c){var d=a?a.length:0;for(b=rd(b,c,3);d--;)if(b(a[d],d,a))return d;return-1}function Vd(a){return a?a[0]:z}function Wd(a,b,c){var d=a?a.length:0;return c&&zd(a,b,c)&&(b=!1),d?Ac(a,b):[]}function Xd(a){var b=a?a.length:0;return b?Ac(a,!0):[]}function Yd(a,b,c){var d=a?a.length:0;if(!d)return-1;if("number"==typeof c)c=0>c?yh(d+c,0):c||0;else if(c){var f=Zc(a,b),g=a[f];return(b===b?b===g:g!==g)?f:-1}return e(a,b,c)}function Zd(a){return Pd(a,1)}function $d(){for(var a=[],b=-1,c=arguments.length,d=[],f=sd(),g=f==e;++b<c;){var h=arguments[b];(Zh(h)||vf(h))&&(a.push(h),d.push(g&&h.length>=120?Ph(b&&h):null))}c=a.length;var i=a[0],j=-1,k=i?i.length:0,l=[],m=d[0];a:for(;++j<k;)if(h=i[j],(m?Yb(m,h):f(l,h))<0){for(b=c;--b;){var n=d[b];if((n?Yb(n,h):f(a[b],h))<0)continue a}m&&m.push(h),l.push(h)}return l}function _d(a){var b=a?a.length:0;return b?a[b-1]:z}function ae(a,b,c){var d=a?a.length:0;if(!d)return-1;var e=d;if("number"==typeof c)e=(0>c?yh(d+c,0):zh(c||0,d-1))+1;else if(c){e=Zc(a,b,!0)-1;var f=a[e];return(b===b?b===f:f!==f)?e:-1}if(b!==b)return q(a,e,!0);for(;e--;)if(a[e]===b)return e;return-1}function be(){var a=arguments[0];if(!a||!a.length)return a;for(var b=0,c=sd(),d=arguments.length;++b<d;)for(var e=0,f=arguments[b];(e=c(a,f,e))>-1;)qh.call(a,e,1);return a}function ce(a){return Rc(a||[],Ac(arguments,!1,!1,1))}function de(a,b,c){var d=-1,e=a?a.length:0,f=[];for(b=rd(b,c,3);++d<e;){var g=a[d];b(g,d,a)&&(f.push(g),qh.call(a,d--,1),e--)}return f}function ee(a){return Od(a,1)}function fe(a,b,c){var d=a?a.length:0;return d?(c&&"number"!=typeof c&&zd(a,b,c)&&(b=0,c=d),Uc(a,b,c)):[]}function ge(a,b,c,d){var e=rd(c);return e===qc&&null==c?Zc(a,b):$c(a,b,e(c,d,1))}function he(a,b,c,d){var e=rd(c);return e===qc&&null==c?Zc(a,b,!0):$c(a,b,e(c,d,1),!0)}function ie(a,b,c){var d=a?a.length:0;return d?((c?zd(a,b,c):null==b)&&(b=1),Uc(a,0,0>b?0:b)):[]}function je(a,b,c){var d=a?a.length:0;return d?((c?zd(a,b,c):null==b)&&(b=1),b=d-(+b||0),Uc(a,0>b?0:b)):[]}function ke(a,b,c){var d=a?a.length:0;if(!d)return[];for(b=rd(b,c,3);d--&&b(a[d],d,a););return Uc(a,d+1)}function le(a,b,c){var d=a?a.length:0;if(!d)return[];var e=-1;for(b=rd(b,c,3);++e<d&&b(a[e],e,a););return Uc(a,0,e)}function me(){return Wc(Ac(arguments,!1,!0))}function ne(a,b,c,d){var f=a?a.length:0;if(!f)return[];null!=b&&"boolean"!=typeof b&&(d=c,c=zd(a,b,d)?null:b,b=!1);var g=rd();return(g!==qc||null!=c)&&(c=g(c,d,3)),b&&sd()==e?u(a,c):Wc(a,c)}function oe(a){for(var b=-1,c=(a&&a.length&&fc(ec(a,ah)))>>>0,d=Og(c);++b<c;)d[b]=ec(a,Qc(b));return d}function pe(a){return tc(a,Uc(arguments,1))}function qe(){for(var a=-1,b=arguments.length;++a<b;){var c=arguments[a];if(Zh(c)||vf(c))var d=d?tc(d,c).concat(tc(c,d)):c}return d?Wc(d):[]}function re(){for(var a=arguments.length,b=Og(a);a--;)b[a]=arguments[a];return oe(b)}function se(a,b){var c=-1,d=a?a.length:0,e={};for(!d||b||Zh(a[0])||(b=[]);++c<d;){var f=a[c];b?e[f]=b[c]:f&&(e[f[0]]=f[1])}return e}function te(a){var c=b(a);return c.__chain__=!0,c}function ue(a,b,c){return b.call(c,a),a}function ve(a,b,c){return b.call(c,a)}function we(){return te(this)}function xe(){return new s(this.value(),this.__chain__)}function ye(a){for(var b,d=this;d instanceof c;){var e=Kd(d);b?f.__wrapped__=e:b=e;var f=e;d=d.__wrapped__}return f.__wrapped__=a,b}function ze(){var a=this.__wrapped__;return a instanceof Z?(this.__actions__.length&&(a=new Z(this)),new s(a.reverse(),this.__chain__)):this.thru(function(a){return a.reverse()})}function Ae(){return this.value()+""}function Be(){return Yc(this.__wrapped__,this.__actions__)}function Ce(a){var b=a?a.length:0;return Ad(b)&&(a=Id(a)),nc(a,Ac(arguments,!1,!1,1))}function De(a,b,c){var d=Zh(a)?cc:wc;return("function"!=typeof b||"undefined"!=typeof c)&&(b=rd(b,c,3)),d(a,b)}function Ee(a,b,c){var d=Zh(a)?dc:yc;return b=rd(b,c,3),d(a,b)}function Fe(a,b,c){if(Zh(a)){var d=Td(a,b,c);return d>-1?a[d]:z}return b=rd(b,c,3),zc(a,b,uc)}function Ge(a,b,c){return b=rd(b,c,3),zc(a,b,vc)}function He(a,b){return Fe(a,Mc(b))}function Ie(a,b,c){return"function"==typeof b&&"undefined"==typeof c&&Zh(a)?ac(a,b):uc(a,_c(b,c,3))}function Je(a,b,c){return"function"==typeof b&&"undefined"==typeof c&&Zh(a)?bc(a,b):vc(a,_c(b,c,3))}function Ke(a,b,c){var d=a?a.length:0;return Ad(d)||(a=eg(a),d=a.length),d?(c="number"==typeof c?0>c?yh(d+c,0):c||0:0,"string"==typeof a||!Zh(a)&&Jf(a)?d>c&&a.indexOf(b,c)>-1:sd(a,b,c)>-1):!1}function Le(a,b){return Hc(a,b,Uc(arguments,2))}function Me(a,b,c){var d=Zh(a)?ec:Lc;return b=rd(b,c,3),d(a,b)}function Ne(a,b){return Me(a,Qc(b))}function Oe(a,b,c,d){var e=Zh(a)?hc:Tc;return e(a,rd(b,d,4),c,arguments.length<3,uc)}function Pe(a,b,c,d){var e=Zh(a)?ic:Tc;return e(a,rd(b,d,4),c,arguments.length<3,vc)}function Qe(a,b,c){var d=Zh(a)?dc:yc;return b=rd(b,c,3),d(a,function(a,c,d){return!b(a,c,d)})}function Re(a,b,c){if(c?zd(a,b,c):null==b){a=Id(a);var d=a.length;return d>0?a[Sc(0,d-1)]:z}var e=Se(a);return e.length=zh(0>b?0:+b||0,e.length),e}function Se(a){a=Id(a);for(var b=-1,c=a.length,d=Og(c);++b<c;){var e=Sc(0,b);b!=e&&(d[b]=d[e]),d[e]=a[b]}return d}function Te(a){var b=a?a.length:0;return Ad(b)?b:ci(a).length}function Ue(a,b,c){var d=Zh(a)?jc:Vc;return("function"!=typeof b||"undefined"!=typeof c)&&(b=rd(b,c,3)),d(a,b)}function Ve(a,b,c){var d=-1,e=a?a.length:0,f=Ad(e)?Og(e):[];return c&&zd(a,b,c)&&(b=null),b=rd(b,c,3),uc(a,function(a,c,e){f[++d]={criteria:b(a,c,e),index:d,value:a}}),g(f,l)}function We(a){var b=arguments;b.length>3&&zd(b[1],b[2],b[3])&&(b=[a,b[1]]);var c=-1,d=a?a.length:0,e=Ac(b,!1,!1,1),f=Ad(d)?Og(d):[];return uc(a,function(a){for(var b=e.length,d=Og(b);b--;)d[b]=null==a?z:a[e[b]];f[++c]={criteria:d,index:c,value:a}}),g(f,m)}function Xe(a,b){return Ee(a,Mc(b))}function Ye(a,b){if("function"!=typeof b){if("function"!=typeof a)throw new Xg(R);var c=a;a=b,b=c}return a=wh(a=+a)?a:0,function(){return--a<1?b.apply(this,arguments):void 0}}function Ze(a,b,c){return c&&zd(a,b,c)&&(b=null),b=a&&null==b?a.length:yh(+b||0,0),md(a,J,null,null,null,null,b)}function $e(a,b){var c;if("function"!=typeof b){if("function"!=typeof a)throw new Xg(R);var d=a;a=b,b=d}return function(){return--a>0?c=b.apply(this,arguments):b=null,c}}function _e(a,b){var c=B;if(arguments.length>2){var d=Uc(arguments,2),e=t(d,_e.placeholder);c|=G}return md(a,c,b,d,e)}function af(a){return pc(a,arguments.length>1?Ac(arguments,!1,!1,1):Wf(a))}function bf(a,b){var c=B|C;if(arguments.length>2){var d=Uc(arguments,2),e=t(d,bf.placeholder);c|=G}return md(b,c,a,d,e)}function cf(a,b,c){c&&zd(a,b,c)&&(b=null);var d=md(a,E,null,null,null,null,null,b);return d.placeholder=cf.placeholder,d}function df(a,b,c){c&&zd(a,b,c)&&(b=null);var d=md(a,F,null,null,null,null,null,b);return d.placeholder=df.placeholder,d}function ef(a,b,c){function d(){m&&jh(m),i&&jh(i),i=m=n=z}function e(){var c=b-(Yh()-k);if(0>=c||c>b){i&&jh(i);var d=n;i=m=n=z,d&&(o=Yh(),j=a.apply(l,h),m||i||(h=l=null))}else m=ph(e,c)}function f(){m&&jh(m),i=m=n=z,(q||p!==b)&&(o=Yh(),j=a.apply(l,h),m||i||(h=l=null))}function g(){if(h=arguments,k=Yh(),l=this,n=q&&(m||!r),p===!1)var c=r&&!m;else{i||r||(o=k);var d=p-(k-o),g=0>=d||d>p;g?(i&&(i=jh(i)),o=k,j=a.apply(l,h)):i||(i=ph(f,d))}return g&&m?m=jh(m):m||b===p||(m=ph(e,b)),c&&(g=!0,j=a.apply(l,h)),!g||m||i||(h=l=null),j}var h,i,j,k,l,m,n,o=0,p=!1,q=!0;if("function"!=typeof a)throw new Xg(R);if(b=0>b?0:+b||0,c===!0){var r=!0;q=!1}else Cf(c)&&(r=c.leading,p="maxWait"in c&&yh(+c.maxWait||0,b),q="trailing"in c?c.trailing:q);return g.cancel=d,g}function ff(a){return sc(a,1,arguments,1)}function gf(a,b){return sc(a,b,arguments,2)}function hf(){var a=arguments,b=a.length;if(!b)return function(){return arguments[0]};if(!cc(a,f))throw new Xg(R);return function(){for(var c=0,d=a[c].apply(this,arguments);++c<b;)d=a[c].call(this,d);return d}}function jf(){var a=arguments,b=a.length-1;if(0>b)return function(){return arguments[0]};if(!cc(a,f))throw new Xg(R);return function(){for(var c=b,d=a[c].apply(this,arguments);c--;)d=a[c].call(this,d);return d}}function kf(a,b){if("function"!=typeof a||b&&"function"!=typeof b)throw new Xg(R);var c=function(){var d=c.cache,e=b?b.apply(this,arguments):arguments[0];if(d.has(e))return d.get(e);var f=a.apply(this,arguments);return d.set(e,f),f};return c.cache=new kf.Cache,c}function lf(a){if("function"!=typeof a)throw new Xg(R);return function(){return!a.apply(this,arguments)}}function mf(a){return $e(a,2)}function nf(a){var b=Uc(arguments,1),c=t(b,nf.placeholder);return md(a,G,null,b,c)}function of(a){var b=Uc(arguments,1),c=t(b,of.placeholder);return md(a,H,null,b,c)}function pf(a){var b=Ac(arguments,!1,!1,1);return md(a,I,null,null,null,b)}function qf(a){if("function"!=typeof a)throw new Xg(R);return function(b){return a.apply(this,b)}}function rf(a,b,c){var d=!0,e=!0;if("function"!=typeof a)throw new Xg(R);return c===!1?d=!1:Cf(c)&&(d="leading"in c?!!c.leading:d,e="trailing"in c?!!c.trailing:e),Pb.leading=d,Pb.maxWait=+b,Pb.trailing=e,ef(a,b,Pb)}function sf(a,b){return b=null==b?Dg:b,md(b,G,null,[a],[])}function tf(a,b,c,d){return b&&"boolean"!=typeof b&&zd(a,b,c)?b=!1:"function"==typeof b&&(d=c,c=b,b=!1),c="function"==typeof c&&_c(c,d,1),rc(a,b,c)}function uf(a,b,c){return b="function"==typeof b&&_c(b,c,1),rc(a,!0,b)}function vf(a){var b=r(a)?a.length:z;return Ad(b)&&dh.call(a)==T||!1}function wf(a){return a===!0||a===!1||r(a)&&dh.call(a)==V||!1}function xf(a){return r(a)&&dh.call(a)==W||!1}function yf(a){return a&&1===a.nodeType&&r(a)&&dh.call(a).indexOf("Element")>-1||!1}function zf(a){if(null==a)return!0;var b=a.length;return Ad(b)&&(Zh(a)||Jf(a)||vf(a)||r(a)&&_h(a.splice))?!b:!ci(a).length}function Af(a,b,c,d){if(c="function"==typeof c&&_c(c,d,3),!c&&Bd(a)&&Bd(b))return a===b;var e=c?c(a,b):z;return"undefined"==typeof e?Ic(a,b,c):!!e}function Bf(a){return r(a)&&"string"==typeof a.message&&dh.call(a)==X||!1}function Cf(a){var b=typeof a;return"function"==b||a&&"object"==b||!1}function Df(a,b,c,d){var e=ci(b),f=e.length;if(c="function"==typeof c&&_c(c,d,3),!c&&1==f){var g=e[0],h=b[g];if(Bd(h))return null!=a&&h===a[g]&&bh.call(a,g)}for(var i=Og(f),j=Og(f);f--;)h=i[f]=b[e[f]],j[f]=Bd(h);return Kc(a,e,i,j,c)}function Ef(a){return Hf(a)&&a!=+a}function Ff(a){return null==a?!1:dh.call(a)==Y?fh.test(_g.call(a)):r(a)&&Cb.test(a)||!1}function Gf(a){return null===a}function Hf(a){return"number"==typeof a||r(a)&&dh.call(a)==$||!1}function If(a){return r(a)&&dh.call(a)==ab||!1}function Jf(a){return"string"==typeof a||r(a)&&dh.call(a)==cb||!1}function Kf(a){return r(a)&&Ad(a.length)&&Nb[dh.call(a)]||!1
}function Lf(a){return"undefined"==typeof a}function Mf(a){var b=a?a.length:0;return Ad(b)?b?_b(a):[]:eg(a)}function Nf(a){return oc(a,Zf(a))}function Of(a,b,c){var d=Nh(a);return c&&zd(a,b,c)&&(b=null),b?oc(b,d,ci(b)):d}function Pf(a){if(null==a)return a;var b=_b(arguments);return b.push(kc),bi.apply(z,b)}function Qf(a,b,c){return b=rd(b,c,3),zc(a,b,Ec,!0)}function Rf(a,b,c){return b=rd(b,c,3),zc(a,b,Fc,!0)}function Sf(a,b,c){return("function"!=typeof b||"undefined"!=typeof c)&&(b=_c(b,c,3)),Bc(a,b,Zf)}function Tf(a,b,c){return b=_c(b,c,3),Cc(a,b,Zf)}function Uf(a,b,c){return("function"!=typeof b||"undefined"!=typeof c)&&(b=_c(b,c,3)),Ec(a,b)}function Vf(a,b,c){return b=_c(b,c,3),Cc(a,b,ci)}function Wf(a){return Gc(a,Zf(a))}function Xf(a,b){return a?bh.call(a,b):!1}function Yf(a,b,c){c&&zd(a,b,c)&&(b=null);for(var d=-1,e=ci(a),f=e.length,g={};++d<f;){var h=e[d],i=a[h];b?bh.call(g,i)?g[i].push(h):g[i]=[h]:g[i]=h}return g}function Zf(a){if(null==a)return[];Cf(a)||(a=Ug(a));var b=a.length;b=b&&Ad(b)&&(Zh(a)||Mh.nonEnumArgs&&vf(a))&&b||0;for(var c=a.constructor,d=-1,e="function"==typeof c&&c.prototype===a,f=Og(b),g=b>0;++d<b;)f[d]=d+"";for(var h in a)g&&yd(h,b)||"constructor"==h&&(e||!bh.call(a,h))||f.push(h);return f}function $f(a,b,c){var d={};return b=rd(b,c,3),Ec(a,function(a,c,e){d[c]=b(a,c,e)}),d}function _f(a,b,c){if(null==a)return{};if("function"!=typeof b){var d=ec(Ac(arguments,!1,!1,1),Wg);return Dd(a,tc(Zf(a),d))}return b=_c(b,c,3),Ed(a,function(a,c,d){return!b(a,c,d)})}function ag(a){for(var b=-1,c=ci(a),d=c.length,e=Og(d);++b<d;){var f=c[b];e[b]=[f,a[f]]}return e}function bg(a,b,c){return null==a?{}:"function"==typeof b?Ed(a,_c(b,c,3)):Dd(a,Ac(arguments,!1,!1,1))}function cg(a,b,c){var d=null==a?z:a[b];return"undefined"==typeof d&&(d=c),_h(d)?d.call(a):d}function dg(a,b,c,d){var e=Zh(a)||Kf(a);if(b=rd(b,d,4),null==c)if(e||Cf(a)){var f=a.constructor;c=e?Zh(a)?new f:[]:Nh(_h(f)&&f.prototype)}else c={};return(e?ac:Ec)(a,function(a,d,e){return b(c,a,d,e)}),c}function eg(a){return Xc(a,ci(a))}function fg(a){return Xc(a,Zf(a))}function gg(a,b,c){return b=+b||0,"undefined"==typeof c?(c=b,b=0):c=+c||0,a>=b&&c>a}function hg(a,b,c){c&&zd(a,b,c)&&(b=c=null);var d=null==a,e=null==b;if(null==c&&(e&&"boolean"==typeof a?(c=a,a=1):"boolean"==typeof b&&(c=b,e=!0)),d&&e&&(b=1,e=!1),a=+a||0,e?(b=a,a=0):b=+b||0,c||a%1||b%1){var f=Dh();return zh(a+f*(b-a+parseFloat("1e-"+((f+"").length-1))),b)}return Sc(a,b)}function ig(a){return a=h(a),a&&a.charAt(0).toUpperCase()+a.slice(1)}function jg(a){return a=h(a),a&&a.replace(Db,n)}function kg(a,b,c){a=h(a),b+="";var d=a.length;return c=("undefined"==typeof c?d:zh(0>c?0:+c||0,d))-b.length,c>=0&&a.indexOf(b,c)==c}function lg(a){return a=h(a),a&&ub.test(a)?a.replace(sb,o):a}function mg(a){return a=h(a),a&&Gb.test(a)?a.replace(Fb,"\\$&"):a}function ng(a,b,c){a=h(a),b=+b;var d=a.length;if(d>=b||!wh(b))return a;var e=(b-d)/2,f=kh(e),g=ih(e);return c=kd("",g,c),c.slice(0,f)+a+c}function og(a,b,c){return a=h(a),a&&kd(a,b,c)+a}function pg(a,b,c){return a=h(a),a&&a+kd(a,b,c)}function qg(a,b,c){return c&&zd(a,b,c)&&(b=0),Ch(a,b)}function rg(a,b){var c="";if(a=h(a),b=+b,1>b||!a||!wh(b))return c;do b%2&&(c+=a),b=kh(b/2),a+=a;while(b);return c}function sg(a,b,c){return a=h(a),c=null==c?0:zh(0>c?0:+c||0,a.length),a.lastIndexOf(b,c)==c}function tg(a,c,d){var e=b.templateSettings;d&&zd(a,c,d)&&(c=d=null),a=h(a),c=mc(mc({},d||c),e,lc);var f,g,i=mc(mc({},c.imports),e.imports,lc),j=ci(i),k=Xc(i,j),l=0,m=c.interpolate||Eb,n="__p += '",o=Vg((c.escape||Eb).source+"|"+m.source+"|"+(m===xb?yb:Eb).source+"|"+(c.evaluate||Eb).source+"|$","g"),q="//# sourceURL="+("sourceURL"in c?c.sourceURL:"lodash.templateSources["+ ++Mb+"]")+"\n";a.replace(o,function(b,c,d,e,h,i){return d||(d=e),n+=a.slice(l,i).replace(Ib,p),c&&(f=!0,n+="' +\n__e("+c+") +\n'"),h&&(g=!0,n+="';\n"+h+";\n__p += '"),d&&(n+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'"),l=i+b.length,b}),n+="';\n";var r=c.variable;r||(n="with (obj) {\n"+n+"\n}\n"),n=(g?n.replace(ob,""):n).replace(pb,"$1").replace(qb,"$1;"),n="function("+(r||"obj")+") {\n"+(r?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(f?", __e = _.escape":"")+(g?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+n+"return __p\n}";var s=Ag(function(){return Rg(j,q+"return "+n).apply(z,k)});if(s.source=n,Bf(s))throw s;return s}function ug(a,b,c){var d=a;return(a=h(a))?(c?zd(d,b,c):null==b)?a.slice(v(a),w(a)+1):(b+="",a.slice(j(a,b),k(a,b)+1)):a}function vg(a,b,c){var d=a;return a=h(a),a?a.slice((c?zd(d,b,c):null==b)?v(a):j(a,b+"")):a}function wg(a,b,c){var d=a;return a=h(a),a?(c?zd(d,b,c):null==b)?a.slice(0,w(a)+1):a.slice(0,k(a,b+"")+1):a}function xg(a,b,c){c&&zd(a,b,c)&&(b=null);var d=K,e=L;if(null!=b)if(Cf(b)){var f="separator"in b?b.separator:f;d="length"in b?+b.length||0:d,e="omission"in b?h(b.omission):e}else d=+b||0;if(a=h(a),d>=a.length)return a;var g=d-e.length;if(1>g)return e;var i=a.slice(0,g);if(null==f)return i+e;if(If(f)){if(a.slice(g).search(f)){var j,k,l=a.slice(0,g);for(f.global||(f=Vg(f.source,(zb.exec(f)||"")+"g")),f.lastIndex=0;j=f.exec(l);)k=j.index;i=i.slice(0,null==k?g:k)}}else if(a.indexOf(f,g)!=g){var m=i.lastIndexOf(f);m>-1&&(i=i.slice(0,m))}return i+e}function yg(a){return a=h(a),a&&tb.test(a)?a.replace(rb,x):a}function zg(a,b,c){return c&&zd(a,b,c)&&(b=null),a=h(a),a.match(b||Jb)||[]}function Ag(){var a=arguments.length,b=arguments[0];try{for(var c=Og(a?a-1:0);--a>0;)c[a-1]=arguments[a];return b.apply(z,c)}catch(d){return Bf(d)?d:new Qg(d)}}function Bg(a,b,c){return c&&zd(a,b,c)&&(b=null),r(a)?Eg(a):qc(a,b)}function Cg(a){return function(){return a}}function Dg(a){return a}function Eg(a){return Mc(rc(a,!0))}function Fg(a,b){return Nc(a+"",rc(b,!0))}function Gg(a,b,c){if(null==c){var d=Cf(b),e=d&&ci(b),f=e&&e.length&&Gc(b,e);(f?f.length:d)||(f=!1,c=b,b=a,a=this)}f||(f=Gc(b,ci(b)));var g=!0,h=-1,i=_h(a),j=f.length;c===!1?g=!1:Cf(c)&&"chain"in c&&(g=c.chain);for(;++h<j;){var k=f[h],l=b[k];a[k]=l,i&&(a.prototype[k]=function(b){return function(){var c=this.__chain__;if(g||c){var d=a(this.__wrapped__);return(d.__actions__=_b(this.__actions__)).push({func:b,args:arguments,thisArg:a}),d.__chain__=c,d}var e=[this.value()];return mh.apply(e,arguments),b.apply(a,e)}}(l))}return a}function Hg(){return a._=eh,this}function Ig(){}function Jg(a){return Qc(a+"")}function Kg(a){return function(b){return null==a?z:a[b]}}function Lg(a,b,c){c&&zd(a,b,c)&&(b=c=null),a=+a||0,c=null==c?1:+c||0,null==b?(b=a,a=0):b=+b||0;for(var d=-1,e=yh(ih((b-a)/(c||1)),0),f=Og(e);++d<e;)f[d]=a,a+=c;return f}function Mg(a,b,c){if(a=+a,1>a||!wh(a))return[];var d=-1,e=Og(zh(a,Gh));for(b=_c(b,c,1);++d<a;)Gh>d?e[d]=b(d):b(d);return e}function Ng(a){var b=++ch;return h(a)+b}a=a?$b.defaults(Vb.Object(),a,$b.pick(Vb,Lb)):Vb;var Og=a.Array,Pg=a.Date,Qg=a.Error,Rg=a.Function,Sg=a.Math,Tg=a.Number,Ug=a.Object,Vg=a.RegExp,Wg=a.String,Xg=a.TypeError,Yg=Og.prototype,Zg=Ug.prototype,$g=($g=a.window)&&$g.document,_g=Rg.prototype.toString,ah=Qc("length"),bh=Zg.hasOwnProperty,ch=0,dh=Zg.toString,eh=a._,fh=Vg("^"+mg(dh).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),gh=Ff(gh=a.ArrayBuffer)&&gh,hh=Ff(hh=gh&&new gh(0).slice)&&hh,ih=Sg.ceil,jh=a.clearTimeout,kh=Sg.floor,lh=Ff(lh=Ug.getPrototypeOf)&&lh,mh=Yg.push,nh=Zg.propertyIsEnumerable,oh=Ff(oh=a.Set)&&oh,ph=a.setTimeout,qh=Yg.splice,rh=Ff(rh=a.Uint8Array)&&rh,sh=Ff(sh=a.WeakMap)&&sh,th=function(){try{var b=Ff(b=a.Float64Array)&&b,c=new b(new gh(10),0,1)&&b}catch(d){}return c}(),uh=Ff(uh=Og.isArray)&&uh,vh=Ff(vh=Ug.create)&&vh,wh=a.isFinite,xh=Ff(xh=Ug.keys)&&xh,yh=Sg.max,zh=Sg.min,Ah=Ff(Ah=Pg.now)&&Ah,Bh=Ff(Bh=Tg.isFinite)&&Bh,Ch=a.parseInt,Dh=Sg.random,Eh=Tg.NEGATIVE_INFINITY,Fh=Tg.POSITIVE_INFINITY,Gh=Sg.pow(2,32)-1,Hh=Gh-1,Ih=Gh>>>1,Jh=th?th.BYTES_PER_ELEMENT:0,Kh=Sg.pow(2,53)-1,Lh=sh&&new sh,Mh=b.support={};!function(){Mh.funcDecomp=!Ff(a.WinRTError)&&Hb.test(y),Mh.funcNames="string"==typeof Rg.name;try{Mh.dom=11===$g.createDocumentFragment().nodeType}catch(b){Mh.dom=!1}try{Mh.nonEnumArgs=!nh.call(arguments,1)}catch(b){Mh.nonEnumArgs=!0}}(0,0),b.templateSettings={escape:vb,evaluate:wb,interpolate:xb,variable:"",imports:{_:b}};var Nh=function(){function b(){}return function(c){if(Cf(c)){b.prototype=c;var d=new b;b.prototype=null}return d||a.Object()}}(),Oh=Lh?function(a,b){return Lh.set(a,b),a}:Dg;hh||(ad=gh&&rh?function(a){var b=a.byteLength,c=th?kh(b/Jh):0,d=c*Jh,e=new gh(b);if(c){var f=new th(e,0,c);f.set(new th(a,0,c))}return b!=d&&(f=new rh(e,d),f.set(new rh(a,d))),e}:Cg(null));var Ph=vh&&oh?function(a){return new Xb(a)}:Cg(null),Qh=Lh?function(a){return Lh.get(a)}:Ig,Rh=function(){var a=0,b=0;return function(c,d){var e=Yh(),f=N-(e-b);if(b=e,f>0){if(++a>=M)return c}else a=0;return Oh(c,d)}}(),Sh=dd(function(a,b,c){bh.call(a,c)?++a[c]:a[c]=1}),Th=dd(function(a,b,c){bh.call(a,c)?a[c].push(b):a[c]=[b]}),Uh=dd(function(a,b,c){a[c]=b}),Vh=id(fc),Wh=id(gc,!0),Xh=dd(function(a,b,c){a[c?0:1].push(b)},function(){return[[],[]]}),Yh=Ah||function(){return(new Pg).getTime()},Zh=uh||function(a){return r(a)&&Ad(a.length)&&dh.call(a)==U||!1};Mh.dom||(yf=function(a){return a&&1===a.nodeType&&r(a)&&!ai(a)||!1});var $h=Bh||function(a){return"number"==typeof a&&wh(a)},_h=f(/x/)||rh&&!f(rh)?function(a){return dh.call(a)==Y}:f,ai=lh?function(a){if(!a||dh.call(a)!=_)return!1;var b=a.valueOf,c=Ff(b)&&(c=lh(b))&&lh(c);return c?a==c||lh(a)==c:Gd(a)}:Gd,bi=ed(mc),ci=xh?function(a){if(a)var b=a.constructor,c=a.length;return"function"==typeof b&&b.prototype===a||"function"!=typeof a&&c&&Ad(c)?Hd(a):Cf(a)?xh(a):[]}:Hd,di=ed(Oc),ei=gd(function(a,b,c){return b=b.toLowerCase(),a+(c?b.charAt(0).toUpperCase()+b.slice(1):b)}),fi=gd(function(a,b,c){return a+(c?"-":"")+b.toLowerCase()});8!=Ch(Kb+"08")&&(qg=function(a,b,c){return(c?zd(a,b,c):null==b)?b=0:b&&(b=+b),a=ug(a),Ch(a,b||(Bb.test(a)?16:10))});var gi=gd(function(a,b,c){return a+(c?"_":"")+b.toLowerCase()}),hi=gd(function(a,b,c){return a+(c?" ":"")+(b.charAt(0).toUpperCase()+b.slice(1))});return b.prototype=c.prototype,s.prototype=Nh(c.prototype),s.prototype.constructor=s,Z.prototype=Nh(c.prototype),Z.prototype.constructor=Z,Rb.prototype["delete"]=Sb,Rb.prototype.get=Tb,Rb.prototype.has=Ub,Rb.prototype.set=Wb,Xb.prototype.push=Zb,kf.Cache=Rb,b.after=Ye,b.ary=Ze,b.assign=bi,b.at=Ce,b.before=$e,b.bind=_e,b.bindAll=af,b.bindKey=bf,b.callback=Bg,b.chain=te,b.chunk=Ld,b.compact=Md,b.constant=Cg,b.countBy=Sh,b.create=Of,b.curry=cf,b.curryRight=df,b.debounce=ef,b.defaults=Pf,b.defer=ff,b.delay=gf,b.difference=Nd,b.drop=Od,b.dropRight=Pd,b.dropRightWhile=Qd,b.dropWhile=Rd,b.fill=Sd,b.filter=Ee,b.flatten=Wd,b.flattenDeep=Xd,b.flow=hf,b.flowRight=jf,b.forEach=Ie,b.forEachRight=Je,b.forIn=Sf,b.forInRight=Tf,b.forOwn=Uf,b.forOwnRight=Vf,b.functions=Wf,b.groupBy=Th,b.indexBy=Uh,b.initial=Zd,b.intersection=$d,b.invert=Yf,b.invoke=Le,b.keys=ci,b.keysIn=Zf,b.map=Me,b.mapValues=$f,b.matches=Eg,b.matchesProperty=Fg,b.memoize=kf,b.merge=di,b.mixin=Gg,b.negate=lf,b.omit=_f,b.once=mf,b.pairs=ag,b.partial=nf,b.partialRight=of,b.partition=Xh,b.pick=bg,b.pluck=Ne,b.property=Jg,b.propertyOf=Kg,b.pull=be,b.pullAt=ce,b.range=Lg,b.rearg=pf,b.reject=Qe,b.remove=de,b.rest=ee,b.shuffle=Se,b.slice=fe,b.sortBy=Ve,b.sortByAll=We,b.spread=qf,b.take=ie,b.takeRight=je,b.takeRightWhile=ke,b.takeWhile=le,b.tap=ue,b.throttle=rf,b.thru=ve,b.times=Mg,b.toArray=Mf,b.toPlainObject=Nf,b.transform=dg,b.union=me,b.uniq=ne,b.unzip=oe,b.values=eg,b.valuesIn=fg,b.where=Xe,b.without=pe,b.wrap=sf,b.xor=qe,b.zip=re,b.zipObject=se,b.backflow=jf,b.collect=Me,b.compose=jf,b.each=Ie,b.eachRight=Je,b.extend=bi,b.iteratee=Bg,b.methods=Wf,b.object=se,b.select=Ee,b.tail=ee,b.unique=ne,Gg(b,b),b.attempt=Ag,b.camelCase=ei,b.capitalize=ig,b.clone=tf,b.cloneDeep=uf,b.deburr=jg,b.endsWith=kg,b.escape=lg,b.escapeRegExp=mg,b.every=De,b.find=Fe,b.findIndex=Td,b.findKey=Qf,b.findLast=Ge,b.findLastIndex=Ud,b.findLastKey=Rf,b.findWhere=He,b.first=Vd,b.has=Xf,b.identity=Dg,b.includes=Ke,b.indexOf=Yd,b.inRange=gg,b.isArguments=vf,b.isArray=Zh,b.isBoolean=wf,b.isDate=xf,b.isElement=yf,b.isEmpty=zf,b.isEqual=Af,b.isError=Bf,b.isFinite=$h,b.isFunction=_h,b.isMatch=Df,b.isNaN=Ef,b.isNative=Ff,b.isNull=Gf,b.isNumber=Hf,b.isObject=Cf,b.isPlainObject=ai,b.isRegExp=If,b.isString=Jf,b.isTypedArray=Kf,b.isUndefined=Lf,b.kebabCase=fi,b.last=_d,b.lastIndexOf=ae,b.max=Vh,b.min=Wh,b.noConflict=Hg,b.noop=Ig,b.now=Yh,b.pad=ng,b.padLeft=og,b.padRight=pg,b.parseInt=qg,b.random=hg,b.reduce=Oe,b.reduceRight=Pe,b.repeat=rg,b.result=cg,b.runInContext=y,b.size=Te,b.snakeCase=gi,b.some=Ue,b.sortedIndex=ge,b.sortedLastIndex=he,b.startCase=hi,b.startsWith=sg,b.template=tg,b.trim=ug,b.trimLeft=vg,b.trimRight=wg,b.trunc=xg,b.unescape=yg,b.uniqueId=Ng,b.words=zg,b.all=De,b.any=Ue,b.contains=Ke,b.detect=Fe,b.foldl=Oe,b.foldr=Pe,b.head=Vd,b.include=Ke,b.inject=Oe,Gg(b,function(){var a={};return Ec(b,function(c,d){b.prototype[d]||(a[d]=c)}),a}(),!1),b.sample=Re,b.prototype.sample=function(a){return this.__chain__||null!=a?this.thru(function(b){return Re(b,a)}):Re(this.value())},b.VERSION=A,ac(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){b[a].placeholder=b}),ac(["filter","map","takeWhile"],function(a,b){var c=b==O||b==Q;Z.prototype[a]=function(a,d){var e=this.clone(),f=e.__iteratees__||(e.__iteratees__=[]);return e.__filtered__=e.__filtered__||c,f.push({iteratee:rd(a,d,3),type:b}),e}}),ac(["drop","take"],function(a,b){var c="__"+a+"Count__",d=a+"While";Z.prototype[a]=function(d){d=null==d?1:yh(kh(d)||0,0);var e=this.clone();if(e.__filtered__){var f=e[c];e[c]=b?zh(f,d):f+d}else{var g=e.__views__||(e.__views__=[]);g.push({size:d,type:a+(e.__dir__<0?"Right":"")})}return e},Z.prototype[a+"Right"]=function(b){return this.reverse()[a](b).reverse()},Z.prototype[a+"RightWhile"]=function(a,b){return this.reverse()[d](a,b).reverse()}}),ac(["first","last"],function(a,b){var c="take"+(b?"Right":"");Z.prototype[a]=function(){return this[c](1).value()[0]}}),ac(["initial","rest"],function(a,b){var c="drop"+(b?"":"Right");Z.prototype[a]=function(){return this[c](1)}}),ac(["pluck","where"],function(a,b){var c=b?"filter":"map",d=b?Mc:Qc;Z.prototype[a]=function(a){return this[c](d(a))}}),Z.prototype.compact=function(){return this.filter(Dg)},Z.prototype.dropWhile=function(a,b){var c,d,e=this.__dir__<0;return a=rd(a,b,3),this.filter(function(b,f,g){return c=c&&(e?d>f:f>d),d=f,c||(c=!a(b,f,g))})},Z.prototype.reject=function(a,b){return a=rd(a,b,3),this.filter(function(b,c,d){return!a(b,c,d)})},Z.prototype.slice=function(a,b){a=null==a?0:+a||0;var c=0>a?this.takeRight(-a):this.drop(a);return"undefined"!=typeof b&&(b=+b||0,c=0>b?c.dropRight(-b):c.take(b-a)),c},Z.prototype.toArray=function(){return this.drop(0)},Ec(Z.prototype,function(a,c){var d=b[c],e=/^(?:first|last)$/.test(c);b.prototype[c]=function(){var c=this.__wrapped__,f=arguments,g=this.__chain__,h=!!this.__actions__.length,i=c instanceof Z,j=i&&!h;if(e&&!g)return j?a.call(c):d.call(b,this.value());var k=function(a){var c=[a];return mh.apply(c,f),d.apply(b,c)};if(i||Zh(c)){var l=j?c:new Z(this),m=a.apply(l,f);if(!e&&(h||m.__actions__)){var n=m.__actions__||(m.__actions__=[]);n.push({func:ve,args:[k],thisArg:b})}return new s(m,g)}return this.thru(k)}}),ac(["concat","join","pop","push","shift","sort","splice","unshift"],function(a){var c=Yg[a],d=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",e=/^(?:join|pop|shift)$/.test(a);b.prototype[a]=function(){var a=arguments;return e&&!this.__chain__?c.apply(this.value(),a):this[d](function(b){return c.apply(b,a)})}}),Z.prototype.clone=bb,Z.prototype.reverse=db,Z.prototype.value=Qb,b.prototype.chain=we,b.prototype.commit=xe,b.prototype.plant=ye,b.prototype.reverse=ze,b.prototype.toString=Ae,b.prototype.run=b.prototype.toJSON=b.prototype.valueOf=b.prototype.value=Be,b.prototype.collect=b.prototype.map,b.prototype.head=b.prototype.first,b.prototype.select=b.prototype.filter,b.prototype.tail=b.prototype.rest,b}var z,A="3.3.1",B=1,C=2,D=4,E=8,F=16,G=32,H=64,I=128,J=256,K=30,L="...",M=150,N=16,O=0,P=1,Q=2,R="Expected a function",S="__lodash_placeholder__",T="[object Arguments]",U="[object Array]",V="[object Boolean]",W="[object Date]",X="[object Error]",Y="[object Function]",Z="[object Map]",$="[object Number]",_="[object Object]",ab="[object RegExp]",bb="[object Set]",cb="[object String]",db="[object WeakMap]",eb="[object ArrayBuffer]",fb="[object Float32Array]",gb="[object Float64Array]",hb="[object Int8Array]",ib="[object Int16Array]",jb="[object Int32Array]",kb="[object Uint8Array]",lb="[object Uint8ClampedArray]",mb="[object Uint16Array]",nb="[object Uint32Array]",ob=/\b__p \+= '';/g,pb=/\b(__p \+=) '' \+/g,qb=/(__e\(.*?\)|\b__t\)) \+\n'';/g,rb=/&(?:amp|lt|gt|quot|#39|#96);/g,sb=/[&<>"'`]/g,tb=RegExp(rb.source),ub=RegExp(sb.source),vb=/<%-([\s\S]+?)%>/g,wb=/<%([\s\S]+?)%>/g,xb=/<%=([\s\S]+?)%>/g,yb=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,zb=/\w*$/,Ab=/^\s*function[ \n\r\t]+\w/,Bb=/^0[xX]/,Cb=/^\[object .+?Constructor\]$/,Db=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Eb=/($^)/,Fb=/[.*+?^${}()|[\]\/\\]/g,Gb=RegExp(Fb.source),Hb=/\bthis\b/,Ib=/['\n\r\u2028\u2029\\]/g,Jb=function(){var a="[A-Z\\xc0-\\xd6\\xd8-\\xde]",b="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(a+"{2,}(?="+a+b+")|"+a+"?"+b+"|"+a+"+|[0-9]+","g")}(),Kb=" 	\f\n\r\u2028\u2029",Lb=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","document","isFinite","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","window","WinRTError"],Mb=-1,Nb={};Nb[fb]=Nb[gb]=Nb[hb]=Nb[ib]=Nb[jb]=Nb[kb]=Nb[lb]=Nb[mb]=Nb[nb]=!0,Nb[T]=Nb[U]=Nb[eb]=Nb[V]=Nb[W]=Nb[X]=Nb[Y]=Nb[Z]=Nb[$]=Nb[_]=Nb[ab]=Nb[bb]=Nb[cb]=Nb[db]=!1;var Ob={};Ob[T]=Ob[U]=Ob[eb]=Ob[V]=Ob[W]=Ob[fb]=Ob[gb]=Ob[hb]=Ob[ib]=Ob[jb]=Ob[$]=Ob[_]=Ob[ab]=Ob[cb]=Ob[kb]=Ob[lb]=Ob[mb]=Ob[nb]=!0,Ob[X]=Ob[Y]=Ob[Z]=Ob[bb]=Ob[db]=!1;var Pb={leading:!1,maxWait:0,trailing:!1},Qb={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},Rb={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Sb={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Tb={"function":!0,object:!0},Ub={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Vb=Tb[typeof window]&&window!==(this&&this.window)?window:this,Wb=Tb[typeof c]&&c&&!c.nodeType&&c,Xb=Tb[typeof b]&&b&&!b.nodeType&&b,Yb=Wb&&Xb&&"object"==typeof a&&a;!Yb||Yb.global!==Yb&&Yb.window!==Yb&&Yb.self!==Yb||(Vb=Yb);var Zb=Xb&&Xb.exports===Wb&&Wb,$b=y();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Vb._=$b,define(function(){return $b})):Wb&&Xb?Zb?(Xb.exports=$b)._=$b:Wb._=$b:Vb._=$b}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],64:[function(a,b){var c=a("./lib/serial"),d=a("./lib/parallel");b.exports=c,b.exports.parallel=d},{"./lib/parallel":65,"./lib/serial":66}],65:[function(a,b){function c(a,b,c,d,e){return function(f,g){if(!b.ret&&!~b.indexOf(a)){if(f)return b.ret=!0,void e(f,d);d[a]=g,b.push(a),b.length==c.length&&e(void 0,d)}}}function d(a,b,d){for(var e=[],f=[],g=b.length;g--;)a(b[g],c(g,f,b,e,d))}b.exports=d},{}],66:[function(a,b){function c(a,b,c){var d=[];!function e(f){return f>=b.length?c(void 0,d):void a(b[f],function(a,b){return a?c(a):(d.push(b),void e(f+1))})}(0)}b.exports=c},{}],67:[function(a,b){!function(a,b){a(function(){"use strict";function a(a){for(var b in a)o.call(a,b)&&(a[b]=new RegExp(a[b],"i"))}function c(a,b){for(var c in a)if(o.call(a,c)&&a[c].test(b))return c;return null}function d(a,b){var c,d,e,f,g=m.props;if(o.call(g,a))for(c=g[a],e=c.length,d=0;e>d;++d)if(f=c[d].exec(b),null!==f)return f[1];return null}function e(a,b){var c=d(a,b);return c?f(c):0/0}function f(a){var b;return b=a.split(/[a-z._ \/\-]/i),1===b.length&&(a=b[0]),b.length>1&&(a=b[0]+".",b.shift(),a+=b.join("")),Number(a)}function g(a,b){return null!=a&&null!=b&&a.toLowerCase()===b.toLowerCase()}function h(a){return n.fullPattern.test(a)||n.shortPattern.test(a.substr(0,4))}function i(a,d,e){if(a.mobile===b){var f,g,i;return(g=c(m.tablets,d))?(a.mobile=a.tablet=g,void(a.phone=null)):(f=c(m.phones,d))?(a.mobile=a.phone=f,void(a.tablet=null)):void(h(d)?(i=k.isPhoneSized(e),i===b?a.mobile=a.tablet=a.phone=r:i?(a.mobile=a.phone=p,a.tablet=null):(a.mobile=a.tablet=q,a.phone=null)):a.mobile=a.tablet=a.phone=null)}}function j(a){var b=null!==a.mobile();return a.os("iOS")&&a.version("iPad")>=4.3||a.os("iOS")&&a.version("iPhone")>=3.1||a.os("iOS")&&a.version("iPod")>=3.1||a.version("Android")>2.1&&a.is("Webkit")||a.version("Windows Phone OS")>=7||a.is("BlackBerry")&&a.version("BlackBerry")>=6||a.match("Playbook.*Tablet")||a.version("webOS")>=1.4&&a.match("Palm|Pre|Pixi")||a.match("hp.*TouchPad")||a.is("Firefox")&&a.version("Firefox")>=12||a.is("Chrome")&&a.is("AndroidOS")&&a.version("Android")>=4||a.is("Skyfire")&&a.version("Skyfire")>=4.1&&a.is("AndroidOS")&&a.version("Android")>=2.3||a.is("Opera")&&a.version("Opera Mobi")>11&&a.is("AndroidOS")||a.is("MeeGoOS")||a.is("Tizen")||a.is("Dolfin")&&a.version("Bada")>=2||(a.is("UC Browser")||a.is("Dolfin"))&&a.version("Android")>=2.3||a.match("Kindle Fire")||a.is("Kindle")&&a.version("Kindle")>=3||a.is("AndroidOS")&&a.is("NookTablet")||a.version("Chrome")>=11&&!b||a.version("Safari")>=5&&!b||a.version("Firefox")>=4&&!b||a.version("MSIE")>=7&&!b||a.version("Opera")>=10&&!b?"A":a.os("iOS")&&a.version("iPad")<4.3||a.os("iOS")&&a.version("iPhone")<3.1||a.os("iOS")&&a.version("iPod")<3.1||a.is("Blackberry")&&a.version("BlackBerry")>=5&&a.version("BlackBerry")<6||a.version("Opera Mini")>=5&&a.version("Opera Mini")<=6.5&&(a.version("Android")>=2.3||a.is("iOS"))||a.match("NokiaN8|NokiaC7|N97.*Series60|Symbian/3")||a.version("Opera Mobi")>=11&&a.is("SymbianOS")?"B":(a.version("BlackBerry")<5||a.match("MSIEMobile|Windows CE.*Mobile")||a.version("Windows Mobile")<=5.2,"C")}function k(a,b){this.ua=a||"",this._cache={},this.maxPhoneWidth=b||650}var l,m={phones:{iPhone:"\\biPhone\\b|\\biPod\\b",BlackBerry:"BlackBerry|\\bBB10\\b|rim[0-9]+",HTC:"HTC|HTC.*(Sensation|Evo|Vision|Explorer|6800|8100|8900|A7272|S510e|C110e|Legend|Desire|T8282)|APX515CKT|Qtek9090|APA9292KT|HD_mini|Sensation.*Z710e|PG86100|Z715e|Desire.*(A8181|HD)|ADR6200|ADR6400L|ADR6425|001HT|Inspire 4G|Android.*\\bEVO\\b|T-Mobile G1|Z520m",Nexus:"Nexus One|Nexus S|Galaxy.*Nexus|Android.*Nexus.*Mobile|Nexus 4|Nexus 5|Nexus 6",Dell:"Dell.*Streak|Dell.*Aero|Dell.*Venue|DELL.*Venue Pro|Dell Flash|Dell Smoke|Dell Mini 3iX|XCD28|XCD35|\\b001DL\\b|\\b101DL\\b|\\bGS01\\b",Motorola:"Motorola|DROIDX|DROID BIONIC|\\bDroid\\b.*Build|Android.*Xoom|HRI39|MOT-|A1260|A1680|A555|A853|A855|A953|A955|A956|Motorola.*ELECTRIFY|Motorola.*i1|i867|i940|MB200|MB300|MB501|MB502|MB508|MB511|MB520|MB525|MB526|MB611|MB612|MB632|MB810|MB855|MB860|MB861|MB865|MB870|ME501|ME502|ME511|ME525|ME600|ME632|ME722|ME811|ME860|ME863|ME865|MT620|MT710|MT716|MT720|MT810|MT870|MT917|Motorola.*TITANIUM|WX435|WX445|XT300|XT301|XT311|XT316|XT317|XT319|XT320|XT390|XT502|XT530|XT531|XT532|XT535|XT603|XT610|XT611|XT615|XT681|XT701|XT702|XT711|XT720|XT800|XT806|XT860|XT862|XT875|XT882|XT883|XT894|XT901|XT907|XT909|XT910|XT912|XT928|XT926|XT915|XT919|XT925",Samsung:"Samsung|SGH-I337|BGT-S5230|GT-B2100|GT-B2700|GT-B2710|GT-B3210|GT-B3310|GT-B3410|GT-B3730|GT-B3740|GT-B5510|GT-B5512|GT-B5722|GT-B6520|GT-B7300|GT-B7320|GT-B7330|GT-B7350|GT-B7510|GT-B7722|GT-B7800|GT-C3010|GT-C3011|GT-C3060|GT-C3200|GT-C3212|GT-C3212I|GT-C3262|GT-C3222|GT-C3300|GT-C3300K|GT-C3303|GT-C3303K|GT-C3310|GT-C3322|GT-C3330|GT-C3350|GT-C3500|GT-C3510|GT-C3530|GT-C3630|GT-C3780|GT-C5010|GT-C5212|GT-C6620|GT-C6625|GT-C6712|GT-E1050|GT-E1070|GT-E1075|GT-E1080|GT-E1081|GT-E1085|GT-E1087|GT-E1100|GT-E1107|GT-E1110|GT-E1120|GT-E1125|GT-E1130|GT-E1160|GT-E1170|GT-E1175|GT-E1180|GT-E1182|GT-E1200|GT-E1210|GT-E1225|GT-E1230|GT-E1390|GT-E2100|GT-E2120|GT-E2121|GT-E2152|GT-E2220|GT-E2222|GT-E2230|GT-E2232|GT-E2250|GT-E2370|GT-E2550|GT-E2652|GT-E3210|GT-E3213|GT-I5500|GT-I5503|GT-I5700|GT-I5800|GT-I5801|GT-I6410|GT-I6420|GT-I7110|GT-I7410|GT-I7500|GT-I8000|GT-I8150|GT-I8160|GT-I8190|GT-I8320|GT-I8330|GT-I8350|GT-I8530|GT-I8700|GT-I8703|GT-I8910|GT-I9000|GT-I9001|GT-I9003|GT-I9010|GT-I9020|GT-I9023|GT-I9070|GT-I9082|GT-I9100|GT-I9103|GT-I9220|GT-I9250|GT-I9300|GT-I9305|GT-I9500|GT-I9505|GT-M3510|GT-M5650|GT-M7500|GT-M7600|GT-M7603|GT-M8800|GT-M8910|GT-N7000|GT-S3110|GT-S3310|GT-S3350|GT-S3353|GT-S3370|GT-S3650|GT-S3653|GT-S3770|GT-S3850|GT-S5210|GT-S5220|GT-S5229|GT-S5230|GT-S5233|GT-S5250|GT-S5253|GT-S5260|GT-S5263|GT-S5270|GT-S5300|GT-S5330|GT-S5350|GT-S5360|GT-S5363|GT-S5369|GT-S5380|GT-S5380D|GT-S5560|GT-S5570|GT-S5600|GT-S5603|GT-S5610|GT-S5620|GT-S5660|GT-S5670|GT-S5690|GT-S5750|GT-S5780|GT-S5830|GT-S5839|GT-S6102|GT-S6500|GT-S7070|GT-S7200|GT-S7220|GT-S7230|GT-S7233|GT-S7250|GT-S7500|GT-S7530|GT-S7550|GT-S7562|GT-S7710|GT-S8000|GT-S8003|GT-S8500|GT-S8530|GT-S8600|SCH-A310|SCH-A530|SCH-A570|SCH-A610|SCH-A630|SCH-A650|SCH-A790|SCH-A795|SCH-A850|SCH-A870|SCH-A890|SCH-A930|SCH-A950|SCH-A970|SCH-A990|SCH-I100|SCH-I110|SCH-I400|SCH-I405|SCH-I500|SCH-I510|SCH-I515|SCH-I600|SCH-I730|SCH-I760|SCH-I770|SCH-I830|SCH-I910|SCH-I920|SCH-I959|SCH-LC11|SCH-N150|SCH-N300|SCH-R100|SCH-R300|SCH-R351|SCH-R400|SCH-R410|SCH-T300|SCH-U310|SCH-U320|SCH-U350|SCH-U360|SCH-U365|SCH-U370|SCH-U380|SCH-U410|SCH-U430|SCH-U450|SCH-U460|SCH-U470|SCH-U490|SCH-U540|SCH-U550|SCH-U620|SCH-U640|SCH-U650|SCH-U660|SCH-U700|SCH-U740|SCH-U750|SCH-U810|SCH-U820|SCH-U900|SCH-U940|SCH-U960|SCS-26UC|SGH-A107|SGH-A117|SGH-A127|SGH-A137|SGH-A157|SGH-A167|SGH-A177|SGH-A187|SGH-A197|SGH-A227|SGH-A237|SGH-A257|SGH-A437|SGH-A517|SGH-A597|SGH-A637|SGH-A657|SGH-A667|SGH-A687|SGH-A697|SGH-A707|SGH-A717|SGH-A727|SGH-A737|SGH-A747|SGH-A767|SGH-A777|SGH-A797|SGH-A817|SGH-A827|SGH-A837|SGH-A847|SGH-A867|SGH-A877|SGH-A887|SGH-A897|SGH-A927|SGH-B100|SGH-B130|SGH-B200|SGH-B220|SGH-C100|SGH-C110|SGH-C120|SGH-C130|SGH-C140|SGH-C160|SGH-C170|SGH-C180|SGH-C200|SGH-C207|SGH-C210|SGH-C225|SGH-C230|SGH-C417|SGH-C450|SGH-D307|SGH-D347|SGH-D357|SGH-D407|SGH-D415|SGH-D780|SGH-D807|SGH-D980|SGH-E105|SGH-E200|SGH-E315|SGH-E316|SGH-E317|SGH-E335|SGH-E590|SGH-E635|SGH-E715|SGH-E890|SGH-F300|SGH-F480|SGH-I200|SGH-I300|SGH-I320|SGH-I550|SGH-I577|SGH-I600|SGH-I607|SGH-I617|SGH-I627|SGH-I637|SGH-I677|SGH-I700|SGH-I717|SGH-I727|SGH-i747M|SGH-I777|SGH-I780|SGH-I827|SGH-I847|SGH-I857|SGH-I896|SGH-I897|SGH-I900|SGH-I907|SGH-I917|SGH-I927|SGH-I937|SGH-I997|SGH-J150|SGH-J200|SGH-L170|SGH-L700|SGH-M110|SGH-M150|SGH-M200|SGH-N105|SGH-N500|SGH-N600|SGH-N620|SGH-N625|SGH-N700|SGH-N710|SGH-P107|SGH-P207|SGH-P300|SGH-P310|SGH-P520|SGH-P735|SGH-P777|SGH-Q105|SGH-R210|SGH-R220|SGH-R225|SGH-S105|SGH-S307|SGH-T109|SGH-T119|SGH-T139|SGH-T209|SGH-T219|SGH-T229|SGH-T239|SGH-T249|SGH-T259|SGH-T309|SGH-T319|SGH-T329|SGH-T339|SGH-T349|SGH-T359|SGH-T369|SGH-T379|SGH-T409|SGH-T429|SGH-T439|SGH-T459|SGH-T469|SGH-T479|SGH-T499|SGH-T509|SGH-T519|SGH-T539|SGH-T559|SGH-T589|SGH-T609|SGH-T619|SGH-T629|SGH-T639|SGH-T659|SGH-T669|SGH-T679|SGH-T709|SGH-T719|SGH-T729|SGH-T739|SGH-T746|SGH-T749|SGH-T759|SGH-T769|SGH-T809|SGH-T819|SGH-T839|SGH-T919|SGH-T929|SGH-T939|SGH-T959|SGH-T989|SGH-U100|SGH-U200|SGH-U800|SGH-V205|SGH-V206|SGH-X100|SGH-X105|SGH-X120|SGH-X140|SGH-X426|SGH-X427|SGH-X475|SGH-X495|SGH-X497|SGH-X507|SGH-X600|SGH-X610|SGH-X620|SGH-X630|SGH-X700|SGH-X820|SGH-X890|SGH-Z130|SGH-Z150|SGH-Z170|SGH-ZX10|SGH-ZX20|SHW-M110|SPH-A120|SPH-A400|SPH-A420|SPH-A460|SPH-A500|SPH-A560|SPH-A600|SPH-A620|SPH-A660|SPH-A700|SPH-A740|SPH-A760|SPH-A790|SPH-A800|SPH-A820|SPH-A840|SPH-A880|SPH-A900|SPH-A940|SPH-A960|SPH-D600|SPH-D700|SPH-D710|SPH-D720|SPH-I300|SPH-I325|SPH-I330|SPH-I350|SPH-I500|SPH-I600|SPH-I700|SPH-L700|SPH-M100|SPH-M220|SPH-M240|SPH-M300|SPH-M305|SPH-M320|SPH-M330|SPH-M350|SPH-M360|SPH-M370|SPH-M380|SPH-M510|SPH-M540|SPH-M550|SPH-M560|SPH-M570|SPH-M580|SPH-M610|SPH-M620|SPH-M630|SPH-M800|SPH-M810|SPH-M850|SPH-M900|SPH-M910|SPH-M920|SPH-M930|SPH-N100|SPH-N200|SPH-N240|SPH-N300|SPH-N400|SPH-Z400|SWC-E100|SCH-i909|GT-N7100|GT-N7105|SCH-I535|SM-N900A|SGH-I317|SGH-T999L|GT-S5360B|GT-I8262|GT-S6802|GT-S6312|GT-S6310|GT-S5312|GT-S5310|GT-I9105|GT-I8510|GT-S6790N|SM-G7105|SM-N9005|GT-S5301|GT-I9295|GT-I9195|SM-C101|GT-S7392|GT-S7560|GT-B7610|GT-I5510|GT-S7582|GT-S7530E|GT-I8750",LG:"\\bLG\\b;|LG[- ]?(C800|C900|E400|E610|E900|E-900|F160|F180K|F180L|F180S|730|855|L160|LS740|LS840|LS970|LU6200|MS690|MS695|MS770|MS840|MS870|MS910|P500|P700|P705|VM696|AS680|AS695|AX840|C729|E970|GS505|272|C395|E739BK|E960|L55C|L75C|LS696|LS860|P769BK|P350|P500|P509|P870|UN272|US730|VS840|VS950|LN272|LN510|LS670|LS855|LW690|MN270|MN510|P509|P769|P930|UN200|UN270|UN510|UN610|US670|US740|US760|UX265|UX840|VN271|VN530|VS660|VS700|VS740|VS750|VS910|VS920|VS930|VX9200|VX11000|AX840A|LW770|P506|P925|P999|E612|D955|D802)",Sony:"SonyST|SonyLT|SonyEricsson|SonyEricssonLT15iv|LT18i|E10i|LT28h|LT26w|SonyEricssonMT27i|C5303|C6902|C6903|C6906|C6943|D2533",Asus:"Asus.*Galaxy|PadFone.*Mobile",Micromax:"Micromax.*\\b(A210|A92|A88|A72|A111|A110Q|A115|A116|A110|A90S|A26|A51|A35|A54|A25|A27|A89|A68|A65|A57|A90)\\b",Palm:"PalmSource|Palm",Vertu:"Vertu|Vertu.*Ltd|Vertu.*Ascent|Vertu.*Ayxta|Vertu.*Constellation(F|Quest)?|Vertu.*Monika|Vertu.*Signature",Pantech:"PANTECH|IM-A850S|IM-A840S|IM-A830L|IM-A830K|IM-A830S|IM-A820L|IM-A810K|IM-A810S|IM-A800S|IM-T100K|IM-A725L|IM-A780L|IM-A775C|IM-A770K|IM-A760S|IM-A750K|IM-A740S|IM-A730S|IM-A720L|IM-A710K|IM-A690L|IM-A690S|IM-A650S|IM-A630K|IM-A600S|VEGA PTL21|PT003|P8010|ADR910L|P6030|P6020|P9070|P4100|P9060|P5000|CDM8992|TXT8045|ADR8995|IS11PT|P2030|P6010|P8000|PT002|IS06|CDM8999|P9050|PT001|TXT8040|P2020|P9020|P2000|P7040|P7000|C790",Fly:"IQ230|IQ444|IQ450|IQ440|IQ442|IQ441|IQ245|IQ256|IQ236|IQ255|IQ235|IQ245|IQ275|IQ240|IQ285|IQ280|IQ270|IQ260|IQ250",iMobile:"i-mobile (IQ|i-STYLE|idea|ZAA|Hitz)",SimValley:"\\b(SP-80|XT-930|SX-340|XT-930|SX-310|SP-360|SP60|SPT-800|SP-120|SPT-800|SP-140|SPX-5|SPX-8|SP-100|SPX-8|SPX-12)\\b",Wolfgang:"AT-B24D|AT-AS50HD|AT-AS40W|AT-AS55HD|AT-AS45q2|AT-B26D|AT-AS50Q",Alcatel:"Alcatel",Nintendo:"Nintendo 3DS",Amoi:"Amoi",INQ:"INQ",GenericPhone:"Tapatalk|PDA;|SAGEM|\\bmmp\\b|pocket|\\bpsp\\b|symbian|Smartphone|smartfon|treo|up.browser|up.link|vodafone|\\bwap\\b|nokia|Series40|Series60|S60|SonyEricsson|N900|MAUI.*WAP.*Browser"},tablets:{iPad:"iPad|iPad.*Mobile",NexusTablet:"Android.*Nexus[\\s]+(7|9|10)|^.*Android.*Nexus(?:(?!Mobile).)*$",SamsungTablet:"SAMSUNG.*Tablet|Galaxy.*Tab|SC-01C|GT-P1000|GT-P1003|GT-P1010|GT-P3105|GT-P6210|GT-P6800|GT-P6810|GT-P7100|GT-P7300|GT-P7310|GT-P7500|GT-P7510|SCH-I800|SCH-I815|SCH-I905|SGH-I957|SGH-I987|SGH-T849|SGH-T859|SGH-T869|SPH-P100|GT-P3100|GT-P3108|GT-P3110|GT-P5100|GT-P5110|GT-P6200|GT-P7320|GT-P7511|GT-N8000|GT-P8510|SGH-I497|SPH-P500|SGH-T779|SCH-I705|SCH-I915|GT-N8013|GT-P3113|GT-P5113|GT-P8110|GT-N8010|GT-N8005|GT-N8020|GT-P1013|GT-P6201|GT-P7501|GT-N5100|GT-N5105|GT-N5110|SHV-E140K|SHV-E140L|SHV-E140S|SHV-E150S|SHV-E230K|SHV-E230L|SHV-E230S|SHW-M180K|SHW-M180L|SHW-M180S|SHW-M180W|SHW-M300W|SHW-M305W|SHW-M380K|SHW-M380S|SHW-M380W|SHW-M430W|SHW-M480K|SHW-M480S|SHW-M480W|SHW-M485W|SHW-M486W|SHW-M500W|GT-I9228|SCH-P739|SCH-I925|GT-I9200|GT-I9205|GT-P5200|GT-P5210|GT-P5210X|SM-T311|SM-T310|SM-T310X|SM-T210|SM-T210R|SM-T211|SM-P600|SM-P601|SM-P605|SM-P900|SM-P901|SM-T217|SM-T217A|SM-T217S|SM-P6000|SM-T3100|SGH-I467|XE500|SM-T110|GT-P5220|GT-I9200X|GT-N5110X|GT-N5120|SM-P905|SM-T111|SM-T2105|SM-T315|SM-T320|SM-T320X|SM-T321|SM-T520|SM-T525|SM-T530NU|SM-T230NU|SM-T330NU|SM-T900|XE500T1C|SM-P605V|SM-P905V|SM-P600X|SM-P900X|SM-T210X|SM-T230|SM-T230X|SM-T325|GT-P7503|SM-T531|SM-T330|SM-T530|SM-T705C|SM-T535|SM-T331|SM-T800|SM-T700|SM-T537|SM-T807|SM-P907A|SM-T337A|SM-T707A|SM-T807A|SM-T237P|SM-T807P|SM-P607T|SM-T217T|SM-T337T",Kindle:"Kindle|Silk.*Accelerated|Android.*\\b(KFOT|KFTT|KFJWI|KFJWA|KFOTE|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|WFJWAE|KFSAWA|KFSAWI|KFASWI)\\b",SurfaceTablet:"Windows NT [0-9.]+; ARM;.*(Tablet|ARMBJS)",HPTablet:"HP Slate (7|8|10)|HP ElitePad 900|hp-tablet|EliteBook.*Touch|HP 8|Slate 21|HP SlateBook 10",AsusTablet:"^.*PadFone((?!Mobile).)*$|Transformer|TF101|TF101G|TF300T|TF300TG|TF300TL|TF700T|TF700KL|TF701T|TF810C|ME171|ME301T|ME302C|ME371MG|ME370T|ME372MG|ME172V|ME173X|ME400C|Slider SL101|\\bK00F\\b|\\bK00C\\b|\\bK00E\\b|\\bK00L\\b|TX201LA|ME176C|ME102A|\\bM80TA\\b|ME372CL|ME560CG|ME372CG",BlackBerryTablet:"PlayBook|RIM Tablet",HTCtablet:"HTC_Flyer_P512|HTC Flyer|HTC Jetstream|HTC-P715a|HTC EVO View 4G|PG41200|PG09410",MotorolaTablet:"xoom|sholest|MZ615|MZ605|MZ505|MZ601|MZ602|MZ603|MZ604|MZ606|MZ607|MZ608|MZ609|MZ615|MZ616|MZ617",NookTablet:"Android.*Nook|NookColor|nook browser|BNRV200|BNRV200A|BNTV250|BNTV250A|BNTV400|BNTV600|LogicPD Zoom2",AcerTablet:"Android.*; \\b(A100|A101|A110|A200|A210|A211|A500|A501|A510|A511|A700|A701|W500|W500P|W501|W501P|W510|W511|W700|G100|G100W|B1-A71|B1-710|B1-711|A1-810|A1-811|A1-830)\\b|W3-810|\\bA3-A10\\b",ToshibaTablet:"Android.*(AT100|AT105|AT200|AT205|AT270|AT275|AT300|AT305|AT1S5|AT500|AT570|AT700|AT830)|TOSHIBA.*FOLIO",LGTablet:"\\bL-06C|LG-V909|LG-V900|LG-V700|LG-V510|LG-V500|LG-V410|LG-V400|LG-VK810\\b",FujitsuTablet:"Android.*\\b(F-01D|F-02F|F-05E|F-10D|M532|Q572)\\b",PrestigioTablet:"PMP3170B|PMP3270B|PMP3470B|PMP7170B|PMP3370B|PMP3570C|PMP5870C|PMP3670B|PMP5570C|PMP5770D|PMP3970B|PMP3870C|PMP5580C|PMP5880D|PMP5780D|PMP5588C|PMP7280C|PMP7280C3G|PMP7280|PMP7880D|PMP5597D|PMP5597|PMP7100D|PER3464|PER3274|PER3574|PER3884|PER5274|PER5474|PMP5097CPRO|PMP5097|PMP7380D|PMP5297C|PMP5297C_QUAD",LenovoTablet:"Idea(Tab|Pad)( A1|A10| K1|)|ThinkPad([ ]+)?Tablet|Lenovo.*(S2109|S2110|S5000|S6000|K3011|A3000|A3500|A1000|A2107|A2109|A1107|A5500|A7600|B6000|B8000|B8080)(-|)(FL|F|HV|H|)",DellTablet:"Venue 11|Venue 8|Venue 7|Dell Streak 10|Dell Streak 7",YarvikTablet:"Android.*\\b(TAB210|TAB211|TAB224|TAB250|TAB260|TAB264|TAB310|TAB360|TAB364|TAB410|TAB411|TAB420|TAB424|TAB450|TAB460|TAB461|TAB464|TAB465|TAB467|TAB468|TAB07-100|TAB07-101|TAB07-150|TAB07-151|TAB07-152|TAB07-200|TAB07-201-3G|TAB07-210|TAB07-211|TAB07-212|TAB07-214|TAB07-220|TAB07-400|TAB07-485|TAB08-150|TAB08-200|TAB08-201-3G|TAB08-201-30|TAB09-100|TAB09-211|TAB09-410|TAB10-150|TAB10-201|TAB10-211|TAB10-400|TAB10-410|TAB13-201|TAB274EUK|TAB275EUK|TAB374EUK|TAB462EUK|TAB474EUK|TAB9-200)\\b",MedionTablet:"Android.*\\bOYO\\b|LIFE.*(P9212|P9514|P9516|S9512)|LIFETAB",ArnovaTablet:"AN10G2|AN7bG3|AN7fG3|AN8G3|AN8cG3|AN7G3|AN9G3|AN7dG3|AN7dG3ST|AN7dG3ChildPad|AN10bG3|AN10bG3DT|AN9G2",IntensoTablet:"INM8002KP|INM1010FP|INM805ND|Intenso Tab|TAB1004",IRUTablet:"M702pro",MegafonTablet:"MegaFon V9|\\bZTE V9\\b|Android.*\\bMT7A\\b",EbodaTablet:"E-Boda (Supreme|Impresspeed|Izzycomm|Essential)",AllViewTablet:"Allview.*(Viva|Alldro|City|Speed|All TV|Frenzy|Quasar|Shine|TX1|AX1|AX2)",ArchosTablet:"\\b(101G9|80G9|A101IT)\\b|Qilive 97R|Archos5|\\bARCHOS (70|79|80|90|97|101|FAMILYPAD|)(b|)(G10| Cobalt| TITANIUM(HD|)| Xenon| Neon|XSK| 2| XS 2| PLATINUM| CARBON|GAMEPAD)\\b",AinolTablet:"NOVO7|NOVO8|NOVO10|Novo7Aurora|Novo7Basic|NOVO7PALADIN|novo9-Spark",SonyTablet:"Sony.*Tablet|Xperia Tablet|Sony Tablet S|SO-03E|SGPT12|SGPT13|SGPT114|SGPT121|SGPT122|SGPT123|SGPT111|SGPT112|SGPT113|SGPT131|SGPT132|SGPT133|SGPT211|SGPT212|SGPT213|SGP311|SGP312|SGP321|EBRD1101|EBRD1102|EBRD1201|SGP351|SGP341|SGP511|SGP512|SGP521|SGP541|SGP551",PhilipsTablet:"\\b(PI2010|PI3000|PI3100|PI3105|PI3110|PI3205|PI3210|PI3900|PI4010|PI7000|PI7100)\\b",CubeTablet:"Android.*(K8GT|U9GT|U10GT|U16GT|U17GT|U18GT|U19GT|U20GT|U23GT|U30GT)|CUBE U8GT",CobyTablet:"MID1042|MID1045|MID1125|MID1126|MID7012|MID7014|MID7015|MID7034|MID7035|MID7036|MID7042|MID7048|MID7127|MID8042|MID8048|MID8127|MID9042|MID9740|MID9742|MID7022|MID7010",MIDTablet:"M9701|M9000|M9100|M806|M1052|M806|T703|MID701|MID713|MID710|MID727|MID760|MID830|MID728|MID933|MID125|MID810|MID732|MID120|MID930|MID800|MID731|MID900|MID100|MID820|MID735|MID980|MID130|MID833|MID737|MID960|MID135|MID860|MID736|MID140|MID930|MID835|MID733",MSITablet:"MSI \\b(Primo 73K|Primo 73L|Primo 81L|Primo 77|Primo 93|Primo 75|Primo 76|Primo 73|Primo 81|Primo 91|Primo 90|Enjoy 71|Enjoy 7|Enjoy 10)\\b",SMiTTablet:"Android.*(\\bMID\\b|MID-560|MTV-T1200|MTV-PND531|MTV-P1101|MTV-PND530)",RockChipTablet:"Android.*(RK2818|RK2808A|RK2918|RK3066)|RK2738|RK2808A",FlyTablet:"IQ310|Fly Vision",bqTablet:"bq.*(Elcano|Curie|Edison|Maxwell|Kepler|Pascal|Tesla|Hypatia|Platon|Newton|Livingstone|Cervantes|Avant)|Maxwell.*Lite|Maxwell.*Plus",HuaweiTablet:"MediaPad|MediaPad 7 Youth|IDEOS S7|S7-201c|S7-202u|S7-101|S7-103|S7-104|S7-105|S7-106|S7-201|S7-Slim",NecTablet:"\\bN-06D|\\bN-08D",PantechTablet:"Pantech.*P4100",BronchoTablet:"Broncho.*(N701|N708|N802|a710)",VersusTablet:"TOUCHPAD.*[78910]|\\bTOUCHTAB\\b",ZyncTablet:"z1000|Z99 2G|z99|z930|z999|z990|z909|Z919|z900",PositivoTablet:"TB07STA|TB10STA|TB07FTA|TB10FTA",NabiTablet:"Android.*\\bNabi",KoboTablet:"Kobo Touch|\\bK080\\b|\\bVox\\b Build|\\bArc\\b Build",DanewTablet:"DSlide.*\\b(700|701R|702|703R|704|802|970|971|972|973|974|1010|1012)\\b",TexetTablet:"NaviPad|TB-772A|TM-7045|TM-7055|TM-9750|TM-7016|TM-7024|TM-7026|TM-7041|TM-7043|TM-7047|TM-8041|TM-9741|TM-9747|TM-9748|TM-9751|TM-7022|TM-7021|TM-7020|TM-7011|TM-7010|TM-7023|TM-7025|TM-7037W|TM-7038W|TM-7027W|TM-9720|TM-9725|TM-9737W|TM-1020|TM-9738W|TM-9740|TM-9743W|TB-807A|TB-771A|TB-727A|TB-725A|TB-719A|TB-823A|TB-805A|TB-723A|TB-715A|TB-707A|TB-705A|TB-709A|TB-711A|TB-890HD|TB-880HD|TB-790HD|TB-780HD|TB-770HD|TB-721HD|TB-710HD|TB-434HD|TB-860HD|TB-840HD|TB-760HD|TB-750HD|TB-740HD|TB-730HD|TB-722HD|TB-720HD|TB-700HD|TB-500HD|TB-470HD|TB-431HD|TB-430HD|TB-506|TB-504|TB-446|TB-436|TB-416|TB-146SE|TB-126SE",PlaystationTablet:"Playstation.*(Portable|Vita)",TrekstorTablet:"ST10416-1|VT10416-1|ST70408-1|ST702xx-1|ST702xx-2|ST80208|ST97216|ST70104-2|VT10416-2|ST10216-2A|SurfTab",PyleAudioTablet:"\\b(PTBL10CEU|PTBL10C|PTBL72BC|PTBL72BCEU|PTBL7CEU|PTBL7C|PTBL92BC|PTBL92BCEU|PTBL9CEU|PTBL9CUK|PTBL9C)\\b",AdvanTablet:"Android.* \\b(E3A|T3X|T5C|T5B|T3E|T3C|T3B|T1J|T1F|T2A|T1H|T1i|E1C|T1-E|T5-A|T4|E1-B|T2Ci|T1-B|T1-D|O1-A|E1-A|T1-A|T3A|T4i)\\b ",DanyTechTablet:"Genius Tab G3|Genius Tab S2|Genius Tab Q3|Genius Tab G4|Genius Tab Q4|Genius Tab G-II|Genius TAB GII|Genius TAB GIII|Genius Tab S1",GalapadTablet:"Android.*\\bG1\\b",MicromaxTablet:"Funbook|Micromax.*\\b(P250|P560|P360|P362|P600|P300|P350|P500|P275)\\b",KarbonnTablet:"Android.*\\b(A39|A37|A34|ST8|ST10|ST7|Smart Tab3|Smart Tab2)\\b",AllFineTablet:"Fine7 Genius|Fine7 Shine|Fine7 Air|Fine8 Style|Fine9 More|Fine10 Joy|Fine11 Wide",PROSCANTablet:"\\b(PEM63|PLT1023G|PLT1041|PLT1044|PLT1044G|PLT1091|PLT4311|PLT4311PL|PLT4315|PLT7030|PLT7033|PLT7033D|PLT7035|PLT7035D|PLT7044K|PLT7045K|PLT7045KB|PLT7071KG|PLT7072|PLT7223G|PLT7225G|PLT7777G|PLT7810K|PLT7849G|PLT7851G|PLT7852G|PLT8015|PLT8031|PLT8034|PLT8036|PLT8080K|PLT8082|PLT8088|PLT8223G|PLT8234G|PLT8235G|PLT8816K|PLT9011|PLT9045K|PLT9233G|PLT9735|PLT9760G|PLT9770G)\\b",YONESTablet:"BQ1078|BC1003|BC1077|RK9702|BC9730|BC9001|IT9001|BC7008|BC7010|BC708|BC728|BC7012|BC7030|BC7027|BC7026",ChangJiaTablet:"TPC7102|TPC7103|TPC7105|TPC7106|TPC7107|TPC7201|TPC7203|TPC7205|TPC7210|TPC7708|TPC7709|TPC7712|TPC7110|TPC8101|TPC8103|TPC8105|TPC8106|TPC8203|TPC8205|TPC8503|TPC9106|TPC9701|TPC97101|TPC97103|TPC97105|TPC97106|TPC97111|TPC97113|TPC97203|TPC97603|TPC97809|TPC97205|TPC10101|TPC10103|TPC10106|TPC10111|TPC10203|TPC10205|TPC10503",GUTablet:"TX-A1301|TX-M9002|Q702|kf026",PointOfViewTablet:"TAB-P506|TAB-navi-7-3G-M|TAB-P517|TAB-P-527|TAB-P701|TAB-P703|TAB-P721|TAB-P731N|TAB-P741|TAB-P825|TAB-P905|TAB-P925|TAB-PR945|TAB-PL1015|TAB-P1025|TAB-PI1045|TAB-P1325|TAB-PROTAB[0-9]+|TAB-PROTAB25|TAB-PROTAB26|TAB-PROTAB27|TAB-PROTAB26XL|TAB-PROTAB2-IPS9|TAB-PROTAB30-IPS9|TAB-PROTAB25XXL|TAB-PROTAB26-IPS10|TAB-PROTAB30-IPS10",OvermaxTablet:"OV-(SteelCore|NewBase|Basecore|Baseone|Exellen|Quattor|EduTab|Solution|ACTION|BasicTab|TeddyTab|MagicTab|Stream|TB-08|TB-09)",HCLTablet:"HCL.*Tablet|Connect-3G-2.0|Connect-2G-2.0|ME Tablet U1|ME Tablet U2|ME Tablet G1|ME Tablet X1|ME Tablet Y2|ME Tablet Sync",DPSTablet:"DPS Dream 9|DPS Dual 7",VistureTablet:"V97 HD|i75 3G|Visture V4( HD)?|Visture V5( HD)?|Visture V10",CrestaTablet:"CTP(-)?810|CTP(-)?818|CTP(-)?828|CTP(-)?838|CTP(-)?888|CTP(-)?978|CTP(-)?980|CTP(-)?987|CTP(-)?988|CTP(-)?989",MediatekTablet:"\\bMT8125|MT8389|MT8135|MT8377\\b",ConcordeTablet:"Concorde([ ]+)?Tab|ConCorde ReadMan",GoCleverTablet:"GOCLEVER TAB|A7GOCLEVER|M1042|M7841|M742|R1042BK|R1041|TAB A975|TAB A7842|TAB A741|TAB A741L|TAB M723G|TAB M721|TAB A1021|TAB I921|TAB R721|TAB I720|TAB T76|TAB R70|TAB R76.2|TAB R106|TAB R83.2|TAB M813G|TAB I721|GCTA722|TAB I70|TAB I71|TAB S73|TAB R73|TAB R74|TAB R93|TAB R75|TAB R76.1|TAB A73|TAB A93|TAB A93.2|TAB T72|TAB R83|TAB R974|TAB R973|TAB A101|TAB A103|TAB A104|TAB A104.2|R105BK|M713G|A972BK|TAB A971|TAB R974.2|TAB R104|TAB R83.3|TAB A1042",ModecomTablet:"FreeTAB 9000|FreeTAB 7.4|FreeTAB 7004|FreeTAB 7800|FreeTAB 2096|FreeTAB 7.5|FreeTAB 1014|FreeTAB 1001 |FreeTAB 8001|FreeTAB 9706|FreeTAB 9702|FreeTAB 7003|FreeTAB 7002|FreeTAB 1002|FreeTAB 7801|FreeTAB 1331|FreeTAB 1004|FreeTAB 8002|FreeTAB 8014|FreeTAB 9704|FreeTAB 1003",VoninoTablet:"\\b(Argus[ _]?S|Diamond[ _]?79HD|Emerald[ _]?78E|Luna[ _]?70C|Onyx[ _]?S|Onyx[ _]?Z|Orin[ _]?HD|Orin[ _]?S|Otis[ _]?S|SpeedStar[ _]?S|Magnet[ _]?M9|Primus[ _]?94[ _]?3G|Primus[ _]?94HD|Primus[ _]?QS|Android.*\\bQ8\\b|Sirius[ _]?EVO[ _]?QS|Sirius[ _]?QS|Spirit[ _]?S)\\b",ECSTablet:"V07OT2|TM105A|S10OT1|TR10CS1",StorexTablet:"eZee[_']?(Tab|Go)[0-9]+|TabLC7|Looney Tunes Tab",VodafoneTablet:"SmartTab([ ]+)?[0-9]+|SmartTabII10|SmartTabII7",EssentielBTablet:"Smart[ ']?TAB[ ]+?[0-9]+|Family[ ']?TAB2",RossMoorTablet:"RM-790|RM-997|RMD-878G|RMD-974R|RMT-705A|RMT-701|RME-601|RMT-501|RMT-711",iMobileTablet:"i-mobile i-note",TolinoTablet:"tolino tab [0-9.]+|tolino shine",AudioSonicTablet:"\\bC-22Q|T7-QC|T-17B|T-17P\\b",AMPETablet:"Android.* A78 ",SkkTablet:"Android.* (SKYPAD|PHOENIX|CYCLOPS)",TecnoTablet:"TECNO P9",JXDTablet:"Android.*\\b(F3000|A3300|JXD5000|JXD3000|JXD2000|JXD300B|JXD300|S5800|S7800|S602b|S5110b|S7300|S5300|S602|S603|S5100|S5110|S601|S7100a|P3000F|P3000s|P101|P200s|P1000m|P200m|P9100|P1000s|S6600b|S908|P1000|P300|S18|S6600|S9100)\\b",iJoyTablet:"Tablet (Spirit 7|Essentia|Galatea|Fusion|Onix 7|Landa|Titan|Scooby|Deox|Stella|Themis|Argon|Unique 7|Sygnus|Hexen|Finity 7|Cream|Cream X2|Jade|Neon 7|Neron 7|Kandy|Scape|Saphyr 7|Rebel|Biox|Rebel|Rebel 8GB|Myst|Draco 7|Myst|Tab7-004|Myst|Tadeo Jones|Tablet Boing|Arrow|Draco Dual Cam|Aurix|Mint|Amity|Revolution|Finity 9|Neon 9|T9w|Amity 4GB Dual Cam|Stone 4GB|Stone 8GB|Andromeda|Silken|X2|Andromeda II|Halley|Flame|Saphyr 9,7|Touch 8|Planet|Triton|Unique 10|Hexen 10|Memphis 4GB|Memphis 8GB|Onix 10)",FX2Tablet:"FX2 PAD7|FX2 PAD10",XoroTablet:"KidsPAD 701|PAD[ ]?712|PAD[ ]?714|PAD[ ]?716|PAD[ ]?717|PAD[ ]?718|PAD[ ]?720|PAD[ ]?721|PAD[ ]?722|PAD[ ]?790|PAD[ ]?792|PAD[ ]?900|PAD[ ]?9715D|PAD[ ]?9716DR|PAD[ ]?9718DR|PAD[ ]?9719QR|PAD[ ]?9720QR|TelePAD1030|Telepad1032|TelePAD730|TelePAD731|TelePAD732|TelePAD735Q|TelePAD830|TelePAD9730|TelePAD795|MegaPAD 1331|MegaPAD 1851|MegaPAD 2151",ViewsonicTablet:"ViewPad 10pi|ViewPad 10e|ViewPad 10s|ViewPad E72|ViewPad7|ViewPad E100|ViewPad 7e|ViewSonic VB733|VB100a",OdysTablet:"LOOX|XENO10|ODYS[ -](Space|EVO|Xpress|NOON)|\\bXELIO\\b|Xelio10Pro|XELIO7PHONETAB|XELIO10EXTREME|XELIOPT2|NEO_QUAD10",CaptivaTablet:"CAPTIVA PAD",IconbitTablet:"NetTAB|NT-3702|NT-3702S|NT-3702S|NT-3603P|NT-3603P|NT-0704S|NT-0704S|NT-3805C|NT-3805C|NT-0806C|NT-0806C|NT-0909T|NT-0909T|NT-0907S|NT-0907S|NT-0902S|NT-0902S",TeclastTablet:"T98 4G|\\bP80\\b|\\bX90HD\\b|X98 Air|X98 Air 3G|\\bX89\\b|P80 3G|\\bX80h\\b|P98 Air|\\bX89HD\\b|P98 3G|\\bP90HD\\b|P89 3G|X98 3G|\\bP70h\\b|P79HD 3G|G18d 3G|\\bP79HD\\b|\\bP89s\\b|\\bA88\\b|\\bP10HD\\b|\\bP19HD\\b|G18 3G|\\bP78HD\\b|\\bA78\\b|\\bP75\\b|G17s 3G|G17h 3G|\\bP85t\\b|\\bP90\\b|\\bP11\\b|\\bP98t\\b|\\bP98HD\\b|\\bG18d\\b|\\bP85s\\b|\\bP11HD\\b|\\bP88s\\b|\\bA80HD\\b|\\bA80se\\b|\\bA10h\\b|\\bP89\\b|\\bP78s\\b|\\bG18\\b|\\bP85\\b|\\bA70h\\b|\\bA70\\b|\\bG17\\b|\\bP18\\b|\\bA80s\\b|\\bA11s\\b|\\bP88HD\\b|\\bA80h\\b|\\bP76s\\b|\\bP76h\\b|\\bP98\\b|\\bA10HD\\b|\\bP78\\b|\\bP88\\b|\\bA11\\b|\\bA10t\\b|\\bP76a\\b|\\bP76t\\b|\\bP76e\\b|\\bP85HD\\b|\\bP85a\\b|\\bP86\\b|\\bP75HD\\b|\\bP76v\\b|\\bA12\\b|\\bP75a\\b|\\bA15\\b|\\bP76Ti\\b|\\bP81HD\\b|\\bA10\\b|\\bT760VE\\b|\\bT720HD\\b|\\bP76\\b|\\bP73\\b|\\bP71\\b|\\bP72\\b|\\bT720SE\\b|\\bC520Ti\\b|\\bT760\\b|\\bT720VE\\b|T720-3GE|T720-WiFi",JaytechTablet:"TPC-PA762",BlaupunktTablet:"Endeavour 800NG|Endeavour 1010",DigmaTablet:"\\b(iDx10|iDx9|iDx8|iDx7|iDxD7|iDxD8|iDsQ8|iDsQ7|iDsQ8|iDsD10|iDnD7|3TS804H|iDsQ11|iDj7|iDs10)\\b",EvolioTablet:"ARIA_Mini_wifi|Aria[ _]Mini|Evolio X10|Evolio X7|Evolio X8|\\bEvotab\\b|\\bNeura\\b",LavaTablet:"QPAD E704|\\bIvoryS\\b|E-TAB IVORY",CelkonTablet:"CT695|CT888|CT[\\s]?910|CT7 Tab|CT9 Tab|CT3 Tab|CT2 Tab|CT1 Tab|C820|C720|\\bCT-1\\b",MiTablet:"\\bMI PAD\\b|\\bHM NOTE 1W\\b",NibiruTablet:"Nibiru M1|Nibiru Jupiter One",NexoTablet:"NEXO NOVA|NEXO 10|NEXO AVIO|NEXO FREE|NEXO GO|NEXO EVO|NEXO 3G|NEXO SMART|NEXO KIDDO|NEXO MOBI",UbislateTablet:"UbiSlate[\\s]?7C",PocketBookTablet:"Pocketbook",Hudl:"Hudl HT7S3",TelstraTablet:"T-Hub2",GenericTablet:"Android.*\\b97D\\b|Tablet(?!.*PC)|BNTV250A|MID-WCDMA|LogicPD Zoom2|\\bA7EB\\b|CatNova8|A1_07|CT704|CT1002|\\bM721\\b|rk30sdk|\\bEVOTAB\\b|M758A|ET904|ALUMIUM10|Smartfren Tab|Endeavour 1010|Tablet-PC-4|Tagi Tab|\\bM6pro\\b|CT1020W|arc 10HD|\\bJolla\\b"},oss:{AndroidOS:"Android",BlackBerryOS:"blackberry|\\bBB10\\b|rim tablet os",PalmOS:"PalmOS|avantgo|blazer|elaine|hiptop|palm|plucker|xiino",SymbianOS:"Symbian|SymbOS|Series60|Series40|SYB-[0-9]+|\\bS60\\b",WindowsMobileOS:"Windows CE.*(PPC|Smartphone|Mobile|[0-9]{3}x[0-9]{3})|Window Mobile|Windows Phone [0-9.]+|WCE;",WindowsPhoneOS:"Windows Phone 8.0|Windows Phone OS|XBLWP7|ZuneWP7|Windows NT 6.[23]; ARM;",iOS:"\\biPhone.*Mobile|\\biPod|\\biPad",MeeGoOS:"MeeGo",MaemoOS:"Maemo",JavaOS:"J2ME/|\\bMIDP\\b|\\bCLDC\\b",webOS:"webOS|hpwOS",badaOS:"\\bBada\\b",BREWOS:"BREW"},uas:{Chrome:"\\bCrMo\\b|CriOS|Android.*Chrome/[.0-9]* (Mobile)?",Dolfin:"\\bDolfin\\b",Opera:"Opera.*Mini|Opera.*Mobi|Android.*Opera|Mobile.*OPR/[0-9.]+|Coast/[0-9.]+",Skyfire:"Skyfire",IE:"IEMobile|MSIEMobile",Firefox:"fennec|firefox.*maemo|(Mobile|Tablet).*Firefox|Firefox.*Mobile",Bolt:"bolt",TeaShark:"teashark",Blazer:"Blazer",Safari:"Version.*Mobile.*Safari|Safari.*Mobile|MobileSafari",Tizen:"Tizen",UCBrowser:"UC.*Browser|UCWEB",baiduboxapp:"baiduboxapp",baidubrowser:"baidubrowser",DiigoBrowser:"DiigoBrowser",Puffin:"Puffin",Mercury:"\\bMercury\\b",ObigoBrowser:"Obigo",NetFront:"NF-Browser",GenericBrowser:"NokiaBrowser|OviBrowser|OneBrowser|TwonkyBeamBrowser|SEMC.*Browser|FlyFlow|Minimo|NetFront|Novarra-Vision|MQQBrowser|MicroMessenger"},props:{Mobile:"Mobile/[VER]",Build:"Build/[VER]",Version:"Version/[VER]",VendorID:"VendorID/[VER]",iPad:"iPad.*CPU[a-z ]+[VER]",iPhone:"iPhone.*CPU[a-z ]+[VER]",iPod:"iPod.*CPU[a-z ]+[VER]",Kindle:"Kindle/[VER]",Chrome:["Chrome/[VER]","CriOS/[VER]","CrMo/[VER]"],Coast:["Coast/[VER]"],Dolfin:"Dolfin/[VER]",Firefox:"Firefox/[VER]",Fennec:"Fennec/[VER]",IE:["IEMobile/[VER];","IEMobile [VER]","MSIE [VER];"],NetFront:"NetFront/[VER]",NokiaBrowser:"NokiaBrowser/[VER]",Opera:[" OPR/[VER]","Opera Mini/[VER]","Version/[VER]"],"Opera Mini":"Opera Mini/[VER]","Opera Mobi":"Version/[VER]","UC Browser":"UC Browser[VER]",MQQBrowser:"MQQBrowser/[VER]",MicroMessenger:"MicroMessenger/[VER]",baiduboxapp:"baiduboxapp/[VER]",baidubrowser:"baidubrowser/[VER]",Iron:"Iron/[VER]",Safari:["Version/[VER]","Safari/[VER]"],Skyfire:"Skyfire/[VER]",Tizen:"Tizen/[VER]",Webkit:"webkit[ /][VER]",Gecko:"Gecko/[VER]",Trident:"Trident/[VER]",Presto:"Presto/[VER]",iOS:" \\bOS\\b [VER] ",Android:"Android [VER]",BlackBerry:["BlackBerry[\\w]+/[VER]","BlackBerry.*Version/[VER]","Version/[VER]"],BREW:"BREW [VER]",Java:"Java/[VER]","Windows Phone OS":["Windows Phone OS [VER]","Windows Phone [VER]"],"Windows Phone":"Windows Phone [VER]","Windows CE":"Windows CE/[VER]","Windows NT":"Windows NT [VER]",Symbian:["SymbianOS/[VER]","Symbian/[VER]"],webOS:["webOS/[VER]","hpwOS/[VER];"]},utils:{DesktopMode:"WPDesktop",TV:"SonyDTV|HbbTV",WebKit:"(webkit)[ /]([\\w.]+)",Bot:"Googlebot|YandexBot|bingbot|ia_archiver|AhrefsBot|Ezooms|GSLFbot|WBSearchBot|Twitterbot|TweetmemeBot|Twikle|PaperLiBot|Wotbox|UnwindFetchor|facebookexternalhit",MobileBot:"Googlebot-Mobile|YahooSeeker/M1A1-R2D2",Console:"\\b(Nintendo|Nintendo WiiU|Nintendo 3DS|PLAYSTATION|Xbox)\\b",Watch:"SM-V700"}},n={fullPattern:/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,shortPattern:/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i},o=Object.prototype.hasOwnProperty,p="UnknownPhone",q="UnknownTablet",r="UnknownMobile";
return l="isArray"in Array?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},function(){var b,c,d,e,f,g;for(b in m.props)if(o.call(m.props,b)){for(c=m.props[b],l(c)||(c=[c]),f=c.length,e=0;f>e;++e)d=c[e],g=d.indexOf("[VER]"),g>=0&&(d=d.substring(0,g)+"([\\w._\\+]+)"+d.substring(g+5)),c[e]=new RegExp(d,"i");m.props[b]=c}a(m.oss),a(m.phones),a(m.tablets),a(m.uas),a(m.utils),m.oss0={WindowsPhoneOS:m.oss.WindowsPhoneOS,WindowsMobileOS:m.oss.WindowsMobileOS}}(),k.prototype={constructor:k,mobile:function(){return i(this._cache,this.ua,this.maxPhoneWidth),this._cache.mobile},phone:function(){return i(this._cache,this.ua,this.maxPhoneWidth),this._cache.phone},tablet:function(){return i(this._cache,this.ua,this.maxPhoneWidth),this._cache.tablet},userAgent:function(){return this._cache.userAgent===b&&(this._cache.userAgent=c(m.uas,this.ua)),this._cache.userAgent},os:function(){return this._cache.os===b&&(this._cache.os=c(m.oss0,this.ua)||c(m.oss,this.ua)),this._cache.os},version:function(a){return e(a,this.ua)},versionStr:function(a){return d(a,this.ua)},is:function(a){return g(a,this.userAgent())||g(a,this.os())||g(a,this.phone())||g(a,this.tablet())||g(a,c(m.utils,this.ua))},match:function(a){return a instanceof RegExp||(a=new RegExp(a,"i")),a.test(this.ua)},isPhoneSized:function(a){return k.isPhoneSized(a||this.maxPhoneWidth)},mobileGrade:function(){return this._cache.grade===b&&(this._cache.grade=j(this)),this._cache.grade}},k.isPhoneSized="undefined"!=typeof window&&window.screen&&window.screen.width?function(a){if(0>a)return b;var c=window.screen.width,d=window.devicePixelRatio||1,e=c/d;return a>=e}:function(){},k})}(function(){if("function"==typeof define&&define.amd)return define;if("undefined"!=typeof b&&b.exports)return function(a){b.exports=a()};if("undefined"!=typeof window)return function(a){window.MobileDetect=a()};throw new Error("unknown environment")}())},{}],68:[function(a,b,c){/**
 * @license
 * pixi.js - v2.2.5
 * Copyright (c) 2012-2014, Mat Groves
 * http://goodboydigital.com/
 *
 * Compiled: 2015-01-27
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license.php
 */
(function(){var a=this,d=d||{};d.WEBGL_RENDERER=0,d.CANVAS_RENDERER=1,d.VERSION="v2.2.5",d.blendModes={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},d.scaleModes={DEFAULT:0,LINEAR:0,NEAREST:1},d._UID=0,"undefined"!=typeof Float32Array?(d.Float32Array=Float32Array,d.Uint16Array=Uint16Array,d.Uint32Array=Uint32Array,d.ArrayBuffer=ArrayBuffer):(d.Float32Array=Array,d.Uint16Array=Array),d.INTERACTION_FREQUENCY=30,d.AUTO_PREVENT_DEFAULT=!0,d.PI_2=2*Math.PI,d.RAD_TO_DEG=180/Math.PI,d.DEG_TO_RAD=Math.PI/180,d.RETINA_PREFIX="@2x",d.dontSayHello=!1,d.defaultRenderOptions={view:null,transparent:!1,antialias:!1,preserveDrawingBuffer:!1,resolution:1,clearBeforeRender:!0,autoResize:!1},d.sayHello=function(a){if(!d.dontSayHello){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var b=["%c %c %c Pixi.js "+d.VERSION+" - "+a+"  %c  %c  http://www.pixijs.com/  %c %c %c%c ","background: #ff66a5","background: #ff66a5","color: #ff66a5; background: #030307;","background: #ff66a5","background: #ffc3dc","background: #ff66a5","color: #ff2424; background: #fff","color: #ff2424; background: #fff","color: #ff2424; background: #fff"];console.log.apply(console,b)}else window.console&&console.log("Pixi.js "+d.VERSION+" - http://www.pixijs.com/");d.dontSayHello=!0}},d.Point=function(a,b){this.x=a||0,this.y=b||0},d.Point.prototype.clone=function(){return new d.Point(this.x,this.y)},d.Point.prototype.set=function(a,b){this.x=a||0,this.y=b||(0!==b?this.x:0)},d.Point.prototype.constructor=d.Point,d.Rectangle=function(a,b,c,d){this.x=a||0,this.y=b||0,this.width=c||0,this.height=d||0},d.Rectangle.prototype.clone=function(){return new d.Rectangle(this.x,this.y,this.width,this.height)},d.Rectangle.prototype.contains=function(a,b){if(this.width<=0||this.height<=0)return!1;var c=this.x;if(a>=c&&a<=c+this.width){var d=this.y;if(b>=d&&b<=d+this.height)return!0}return!1},d.Rectangle.prototype.constructor=d.Rectangle,d.EmptyRectangle=new d.Rectangle(0,0,0,0),d.Polygon=function(a){if(a instanceof Array||(a=Array.prototype.slice.call(arguments)),a[0]instanceof d.Point){for(var b=[],c=0,e=a.length;e>c;c++)b.push(a[c].x,a[c].y);a=b}this.closed=!0,this.points=a},d.Polygon.prototype.clone=function(){var a=this.points.slice();return new d.Polygon(a)},d.Polygon.prototype.contains=function(a,b){for(var c=!1,d=this.points.length/2,e=0,f=d-1;d>e;f=e++){var g=this.points[2*e],h=this.points[2*e+1],i=this.points[2*f],j=this.points[2*f+1],k=h>b!=j>b&&(i-g)*(b-h)/(j-h)+g>a;k&&(c=!c)}return c},d.Polygon.prototype.constructor=d.Polygon,d.Circle=function(a,b,c){this.x=a||0,this.y=b||0,this.radius=c||0},d.Circle.prototype.clone=function(){return new d.Circle(this.x,this.y,this.radius)},d.Circle.prototype.contains=function(a,b){if(this.radius<=0)return!1;var c=this.x-a,d=this.y-b,e=this.radius*this.radius;return c*=c,d*=d,e>=c+d},d.Circle.prototype.getBounds=function(){return new d.Rectangle(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},d.Circle.prototype.constructor=d.Circle,d.Ellipse=function(a,b,c,d){this.x=a||0,this.y=b||0,this.width=c||0,this.height=d||0},d.Ellipse.prototype.clone=function(){return new d.Ellipse(this.x,this.y,this.width,this.height)},d.Ellipse.prototype.contains=function(a,b){if(this.width<=0||this.height<=0)return!1;var c=(a-this.x)/this.width,d=(b-this.y)/this.height;return c*=c,d*=d,1>=c+d},d.Ellipse.prototype.getBounds=function(){return new d.Rectangle(this.x-this.width,this.y-this.height,this.width,this.height)},d.Ellipse.prototype.constructor=d.Ellipse,d.RoundedRectangle=function(a,b,c,d,e){this.x=a||0,this.y=b||0,this.width=c||0,this.height=d||0,this.radius=e||20},d.RoundedRectangle.prototype.clone=function(){return new d.RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)},d.RoundedRectangle.prototype.contains=function(a,b){if(this.width<=0||this.height<=0)return!1;var c=this.x;if(a>=c&&a<=c+this.width){var d=this.y;if(b>=d&&b<=d+this.height)return!0}return!1},d.RoundedRectangle.prototype.constructor=d.RoundedRectangle,d.Matrix=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0},d.Matrix.prototype.fromArray=function(a){this.a=a[0],this.b=a[1],this.c=a[3],this.d=a[4],this.tx=a[2],this.ty=a[5]},d.Matrix.prototype.toArray=function(a){this.array||(this.array=new d.Float32Array(9));var b=this.array;return a?(b[0]=this.a,b[1]=this.b,b[2]=0,b[3]=this.c,b[4]=this.d,b[5]=0,b[6]=this.tx,b[7]=this.ty,b[8]=1):(b[0]=this.a,b[1]=this.c,b[2]=this.tx,b[3]=this.b,b[4]=this.d,b[5]=this.ty,b[6]=0,b[7]=0,b[8]=1),b},d.Matrix.prototype.apply=function(a,b){return b=b||new d.Point,b.x=this.a*a.x+this.c*a.y+this.tx,b.y=this.b*a.x+this.d*a.y+this.ty,b},d.Matrix.prototype.applyInverse=function(a,b){b=b||new d.Point;var c=1/(this.a*this.d+this.c*-this.b);return b.x=this.d*c*a.x+-this.c*c*a.y+(this.ty*this.c-this.tx*this.d)*c,b.y=this.a*c*a.y+-this.b*c*a.x+(-this.ty*this.a+this.tx*this.b)*c,b},d.Matrix.prototype.translate=function(a,b){return this.tx+=a,this.ty+=b,this},d.Matrix.prototype.scale=function(a,b){return this.a*=a,this.d*=b,this.c*=a,this.b*=b,this.tx*=a,this.ty*=b,this},d.Matrix.prototype.rotate=function(a){var b=Math.cos(a),c=Math.sin(a),d=this.a,e=this.c,f=this.tx;return this.a=d*b-this.b*c,this.b=d*c+this.b*b,this.c=e*b-this.d*c,this.d=e*c+this.d*b,this.tx=f*b-this.ty*c,this.ty=f*c+this.ty*b,this},d.Matrix.prototype.append=function(a){var b=this.a,c=this.b,d=this.c,e=this.d;return this.a=a.a*b+a.b*d,this.b=a.a*c+a.b*e,this.c=a.c*b+a.d*d,this.d=a.c*c+a.d*e,this.tx=a.tx*b+a.ty*d+this.tx,this.ty=a.tx*c+a.ty*e+this.ty,this},d.Matrix.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},d.identityMatrix=new d.Matrix,d.DisplayObject=function(){this.position=new d.Point,this.scale=new d.Point(1,1),this.pivot=new d.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.hitArea=null,this.buttonMode=!1,this.renderable=!1,this.parent=null,this.stage=null,this.worldAlpha=1,this._interactive=!1,this.defaultCursor="pointer",this.worldTransform=new d.Matrix,this._sr=0,this._cr=1,this.filterArea=null,this._bounds=new d.Rectangle(0,0,1,1),this._currentBounds=null,this._mask=null,this._cacheAsBitmap=!1,this._cacheIsDirty=!1},d.DisplayObject.prototype.constructor=d.DisplayObject,Object.defineProperty(d.DisplayObject.prototype,"interactive",{get:function(){return this._interactive},set:function(a){this._interactive=a,this.stage&&(this.stage.dirty=!0)}}),Object.defineProperty(d.DisplayObject.prototype,"worldVisible",{get:function(){var a=this;do{if(!a.visible)return!1;a=a.parent}while(a);return!0}}),Object.defineProperty(d.DisplayObject.prototype,"mask",{get:function(){return this._mask},set:function(a){this._mask&&(this._mask.isMask=!1),this._mask=a,this._mask&&(this._mask.isMask=!0)}}),Object.defineProperty(d.DisplayObject.prototype,"filters",{get:function(){return this._filters},set:function(a){if(a){for(var b=[],c=0;c<a.length;c++)for(var d=a[c].passes,e=0;e<d.length;e++)b.push(d[e]);this._filterBlock={target:this,filterPasses:b}}this._filters=a}}),Object.defineProperty(d.DisplayObject.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(a){this._cacheAsBitmap!==a&&(a?this._generateCachedSprite():this._destroyCachedSprite(),this._cacheAsBitmap=a)}}),d.DisplayObject.prototype.updateTransform=function(){var a,b,c,e,f,g,h=this.parent.worldTransform,i=this.worldTransform;this.rotation%d.PI_2?(this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation)),a=this._cr*this.scale.x,b=this._sr*this.scale.x,c=-this._sr*this.scale.y,e=this._cr*this.scale.y,f=this.position.x,g=this.position.y,(this.pivot.x||this.pivot.y)&&(f-=this.pivot.x*a+this.pivot.y*c,g-=this.pivot.x*b+this.pivot.y*e),i.a=a*h.a+b*h.c,i.b=a*h.b+b*h.d,i.c=c*h.a+e*h.c,i.d=c*h.b+e*h.d,i.tx=f*h.a+g*h.c+h.tx,i.ty=f*h.b+g*h.d+h.ty):(a=this.scale.x,e=this.scale.y,f=this.position.x-this.pivot.x*a,g=this.position.y-this.pivot.y*e,i.a=a*h.a,i.b=a*h.b,i.c=e*h.c,i.d=e*h.d,i.tx=f*h.a+g*h.c+h.tx,i.ty=f*h.b+g*h.d+h.ty),this.worldAlpha=this.alpha*this.parent.worldAlpha},d.DisplayObject.prototype.displayObjectUpdateTransform=d.DisplayObject.prototype.updateTransform,d.DisplayObject.prototype.getBounds=function(a){return a=a,d.EmptyRectangle},d.DisplayObject.prototype.getLocalBounds=function(){return this.getBounds(d.identityMatrix)},d.DisplayObject.prototype.setStageReference=function(a){this.stage=a,this._interactive&&(this.stage.dirty=!0)},d.DisplayObject.prototype.generateTexture=function(a,b,c){var e=this.getLocalBounds(),f=new d.RenderTexture(0|e.width,0|e.height,c,b,a);return d.DisplayObject._tempMatrix.tx=-e.x,d.DisplayObject._tempMatrix.ty=-e.y,f.render(this,d.DisplayObject._tempMatrix),f},d.DisplayObject.prototype.updateCache=function(){this._generateCachedSprite()},d.DisplayObject.prototype.toGlobal=function(a){return this.displayObjectUpdateTransform(),this.worldTransform.apply(a)},d.DisplayObject.prototype.toLocal=function(a,b){return b&&(a=b.toGlobal(a)),this.displayObjectUpdateTransform(),this.worldTransform.applyInverse(a)},d.DisplayObject.prototype._renderCachedSprite=function(a){this._cachedSprite.worldAlpha=this.worldAlpha,a.gl?d.Sprite.prototype._renderWebGL.call(this._cachedSprite,a):d.Sprite.prototype._renderCanvas.call(this._cachedSprite,a)},d.DisplayObject.prototype._generateCachedSprite=function(){this._cacheAsBitmap=!1;var a=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.texture.resize(0|a.width,0|a.height);else{var b=new d.RenderTexture(0|a.width,0|a.height);this._cachedSprite=new d.Sprite(b),this._cachedSprite.worldTransform=this.worldTransform}var c=this._filters;this._filters=null,this._cachedSprite.filters=c,d.DisplayObject._tempMatrix.tx=-a.x,d.DisplayObject._tempMatrix.ty=-a.y,this._cachedSprite.texture.render(this,d.DisplayObject._tempMatrix,!0),this._cachedSprite.anchor.x=-(a.x/a.width),this._cachedSprite.anchor.y=-(a.y/a.height),this._filters=c,this._cacheAsBitmap=!0},d.DisplayObject.prototype._destroyCachedSprite=function(){this._cachedSprite&&(this._cachedSprite.texture.destroy(!0),this._cachedSprite=null)},d.DisplayObject.prototype._renderWebGL=function(a){a=a},d.DisplayObject.prototype._renderCanvas=function(a){a=a},d.DisplayObject._tempMatrix=new d.Matrix,Object.defineProperty(d.DisplayObject.prototype,"x",{get:function(){return this.position.x},set:function(a){this.position.x=a}}),Object.defineProperty(d.DisplayObject.prototype,"y",{get:function(){return this.position.y},set:function(a){this.position.y=a}}),d.DisplayObjectContainer=function(){d.DisplayObject.call(this),this.children=[]},d.DisplayObjectContainer.prototype=Object.create(d.DisplayObject.prototype),d.DisplayObjectContainer.prototype.constructor=d.DisplayObjectContainer,Object.defineProperty(d.DisplayObjectContainer.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(a){var b=this.getLocalBounds().width;this.scale.x=0!==b?a/b:1,this._width=a}}),Object.defineProperty(d.DisplayObjectContainer.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(a){var b=this.getLocalBounds().height;this.scale.y=0!==b?a/b:1,this._height=a}}),d.DisplayObjectContainer.prototype.addChild=function(a){return this.addChildAt(a,this.children.length)},d.DisplayObjectContainer.prototype.addChildAt=function(a,b){if(b>=0&&b<=this.children.length)return a.parent&&a.parent.removeChild(a),a.parent=this,this.children.splice(b,0,a),this.stage&&a.setStageReference(this.stage),a;throw new Error(a+"addChildAt: The index "+b+" supplied is out of bounds "+this.children.length)},d.DisplayObjectContainer.prototype.swapChildren=function(a,b){if(a!==b){var c=this.getChildIndex(a),d=this.getChildIndex(b);if(0>c||0>d)throw new Error("swapChildren: Both the supplied DisplayObjects must be a child of the caller.");this.children[c]=b,this.children[d]=a}},d.DisplayObjectContainer.prototype.getChildIndex=function(a){var b=this.children.indexOf(a);if(-1===b)throw new Error("The supplied DisplayObject must be a child of the caller");return b},d.DisplayObjectContainer.prototype.setChildIndex=function(a,b){if(0>b||b>=this.children.length)throw new Error("The supplied index is out of bounds");var c=this.getChildIndex(a);this.children.splice(c,1),this.children.splice(b,0,a)},d.DisplayObjectContainer.prototype.getChildAt=function(a){if(0>a||a>=this.children.length)throw new Error("getChildAt: Supplied index "+a+" does not exist in the child list, or the supplied DisplayObject must be a child of the caller");return this.children[a]},d.DisplayObjectContainer.prototype.removeChild=function(a){var b=this.children.indexOf(a);return-1!==b?this.removeChildAt(b):void 0},d.DisplayObjectContainer.prototype.removeChildAt=function(a){var b=this.getChildAt(a);return this.stage&&b.removeStageReference(),b.parent=void 0,this.children.splice(a,1),b},d.DisplayObjectContainer.prototype.removeChildren=function(a,b){var c=a||0,d="number"==typeof b?b:this.children.length,e=d-c;if(e>0&&d>=e){for(var f=this.children.splice(c,e),g=0;g<f.length;g++){var h=f[g];this.stage&&h.removeStageReference(),h.parent=void 0}return f}if(0===e&&0===this.children.length)return[];throw new Error("removeChildren: Range Error, numeric values are outside the acceptable range")},d.DisplayObjectContainer.prototype.updateTransform=function(){if(this.visible&&(this.displayObjectUpdateTransform(),!this._cacheAsBitmap))for(var a=0,b=this.children.length;b>a;a++)this.children[a].updateTransform()},d.DisplayObjectContainer.prototype.displayObjectContainerUpdateTransform=d.DisplayObjectContainer.prototype.updateTransform,d.DisplayObjectContainer.prototype.getBounds=function(){if(0===this.children.length)return d.EmptyRectangle;for(var a,b,c,e=1/0,f=1/0,g=-1/0,h=-1/0,i=!1,j=0,k=this.children.length;k>j;j++){var l=this.children[j];l.visible&&(i=!0,a=this.children[j].getBounds(),e=e<a.x?e:a.x,f=f<a.y?f:a.y,b=a.width+a.x,c=a.height+a.y,g=g>b?g:b,h=h>c?h:c)}if(!i)return d.EmptyRectangle;var m=this._bounds;return m.x=e,m.y=f,m.width=g-e,m.height=h-f,m},d.DisplayObjectContainer.prototype.getLocalBounds=function(){var a=this.worldTransform;this.worldTransform=d.identityMatrix;for(var b=0,c=this.children.length;c>b;b++)this.children[b].updateTransform();var e=this.getBounds();return this.worldTransform=a,e},d.DisplayObjectContainer.prototype.setStageReference=function(a){this.stage=a,this._interactive&&(this.stage.dirty=!0);for(var b=0,c=this.children.length;c>b;b++){var d=this.children[b];d.setStageReference(a)}},d.DisplayObjectContainer.prototype.removeStageReference=function(){for(var a=0,b=this.children.length;b>a;a++){var c=this.children[a];c.removeStageReference()}this._interactive&&(this.stage.dirty=!0),this.stage=null},d.DisplayObjectContainer.prototype._renderWebGL=function(a){if(this.visible&&!(this.alpha<=0)){if(this._cacheAsBitmap)return void this._renderCachedSprite(a);var b,c;if(this._mask||this._filters){for(this._filters&&(a.spriteBatch.flush(),a.filterManager.pushFilter(this._filterBlock)),this._mask&&(a.spriteBatch.stop(),a.maskManager.pushMask(this.mask,a),a.spriteBatch.start()),b=0,c=this.children.length;c>b;b++)this.children[b]._renderWebGL(a);a.spriteBatch.stop(),this._mask&&a.maskManager.popMask(this._mask,a),this._filters&&a.filterManager.popFilter(),a.spriteBatch.start()}else for(b=0,c=this.children.length;c>b;b++)this.children[b]._renderWebGL(a)}},d.DisplayObjectContainer.prototype._renderCanvas=function(a){if(this.visible!==!1&&0!==this.alpha){if(this._cacheAsBitmap)return void this._renderCachedSprite(a);this._mask&&a.maskManager.pushMask(this._mask,a);for(var b=0,c=this.children.length;c>b;b++){var d=this.children[b];d._renderCanvas(a)}this._mask&&a.maskManager.popMask(a)}},d.Sprite=function(a){d.DisplayObjectContainer.call(this),this.anchor=new d.Point,this.texture=a||d.Texture.emptyTexture,this._width=0,this._height=0,this.tint=16777215,this.blendMode=d.blendModes.NORMAL,this.shader=null,this.texture.baseTexture.hasLoaded?this.onTextureUpdate():this.texture.on("update",this.onTextureUpdate.bind(this)),this.renderable=!0},d.Sprite.prototype=Object.create(d.DisplayObjectContainer.prototype),d.Sprite.prototype.constructor=d.Sprite,Object.defineProperty(d.Sprite.prototype,"width",{get:function(){return this.scale.x*this.texture.frame.width},set:function(a){this.scale.x=a/this.texture.frame.width,this._width=a}}),Object.defineProperty(d.Sprite.prototype,"height",{get:function(){return this.scale.y*this.texture.frame.height},set:function(a){this.scale.y=a/this.texture.frame.height,this._height=a}}),d.Sprite.prototype.setTexture=function(a){this.texture=a,this.cachedTint=16777215},d.Sprite.prototype.onTextureUpdate=function(){this._width&&(this.scale.x=this._width/this.texture.frame.width),this._height&&(this.scale.y=this._height/this.texture.frame.height)},d.Sprite.prototype.getBounds=function(a){var b=this.texture.frame.width,c=this.texture.frame.height,d=b*(1-this.anchor.x),e=b*-this.anchor.x,f=c*(1-this.anchor.y),g=c*-this.anchor.y,h=a||this.worldTransform,i=h.a,j=h.b,k=h.c,l=h.d,m=h.tx,n=h.ty,o=-1/0,p=-1/0,q=1/0,r=1/0;if(0===j&&0===k)0>i&&(i*=-1),0>l&&(l*=-1),q=i*e+m,o=i*d+m,r=l*g+n,p=l*f+n;else{var s=i*e+k*g+m,t=l*g+j*e+n,u=i*d+k*g+m,v=l*g+j*d+n,w=i*d+k*f+m,x=l*f+j*d+n,y=i*e+k*f+m,z=l*f+j*e+n;q=q>s?s:q,q=q>u?u:q,q=q>w?w:q,q=q>y?y:q,r=r>t?t:r,r=r>v?v:r,r=r>x?x:r,r=r>z?z:r,o=s>o?s:o,o=u>o?u:o,o=w>o?w:o,o=y>o?y:o,p=t>p?t:p,p=v>p?v:p,p=x>p?x:p,p=z>p?z:p}var A=this._bounds;return A.x=q,A.width=o-q,A.y=r,A.height=p-r,this._currentBounds=A,A},d.Sprite.prototype._renderWebGL=function(a){if(this.visible&&!(this.alpha<=0)){var b,c;if(this._mask||this._filters){var d=a.spriteBatch;for(this._filters&&(d.flush(),a.filterManager.pushFilter(this._filterBlock)),this._mask&&(d.stop(),a.maskManager.pushMask(this.mask,a),d.start()),d.render(this),b=0,c=this.children.length;c>b;b++)this.children[b]._renderWebGL(a);d.stop(),this._mask&&a.maskManager.popMask(this._mask,a),this._filters&&a.filterManager.popFilter(),d.start()}else for(a.spriteBatch.render(this),b=0,c=this.children.length;c>b;b++)this.children[b]._renderWebGL(a)}},d.Sprite.prototype._renderCanvas=function(a){if(!(this.visible===!1||0===this.alpha||this.texture.crop.width<=0||this.texture.crop.height<=0)){if(this.blendMode!==a.currentBlendMode&&(a.currentBlendMode=this.blendMode,a.context.globalCompositeOperation=d.blendModesCanvas[a.currentBlendMode]),this._mask&&a.maskManager.pushMask(this._mask,a),this.texture.valid){var b=this.texture.baseTexture.resolution/a.resolution;a.context.globalAlpha=this.worldAlpha,a.smoothProperty&&a.scaleMode!==this.texture.baseTexture.scaleMode&&(a.scaleMode=this.texture.baseTexture.scaleMode,a.context[a.smoothProperty]=a.scaleMode===d.scaleModes.LINEAR);var c=this.texture.trim?this.texture.trim.x-this.anchor.x*this.texture.trim.width:this.anchor.x*-this.texture.frame.width,e=this.texture.trim?this.texture.trim.y-this.anchor.y*this.texture.trim.height:this.anchor.y*-this.texture.frame.height;a.roundPixels?(a.context.setTransform(this.worldTransform.a,this.worldTransform.b,this.worldTransform.c,this.worldTransform.d,this.worldTransform.tx*a.resolution|0,this.worldTransform.ty*a.resolution|0),c=0|c,e=0|e):a.context.setTransform(this.worldTransform.a,this.worldTransform.b,this.worldTransform.c,this.worldTransform.d,this.worldTransform.tx*a.resolution,this.worldTransform.ty*a.resolution),16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=d.CanvasTinter.getTintedTexture(this,this.tint)),a.context.drawImage(this.tintedTexture,0,0,this.texture.crop.width,this.texture.crop.height,c/b,e/b,this.texture.crop.width/b,this.texture.crop.height/b)):a.context.drawImage(this.texture.baseTexture.source,this.texture.crop.x,this.texture.crop.y,this.texture.crop.width,this.texture.crop.height,c/b,e/b,this.texture.crop.width/b,this.texture.crop.height/b)}for(var f=0,g=this.children.length;g>f;f++)this.children[f]._renderCanvas(a);this._mask&&a.maskManager.popMask(a)}},d.Sprite.fromFrame=function(a){var b=d.TextureCache[a];if(!b)throw new Error('The frameId "'+a+'" does not exist in the texture cache'+this);return new d.Sprite(b)},d.Sprite.fromImage=function(a,b,c){var e=d.Texture.fromImage(a,b,c);return new d.Sprite(e)},d.SpriteBatch=function(a){d.DisplayObjectContainer.call(this),this.textureThing=a,this.ready=!1},d.SpriteBatch.prototype=Object.create(d.DisplayObjectContainer.prototype),d.SpriteBatch.prototype.constructor=d.SpriteBatch,d.SpriteBatch.prototype.initWebGL=function(a){this.fastSpriteBatch=new d.WebGLFastSpriteBatch(a),this.ready=!0},d.SpriteBatch.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},d.SpriteBatch.prototype._renderWebGL=function(a){!this.visible||this.alpha<=0||!this.children.length||(this.ready||this.initWebGL(a.gl),a.spriteBatch.stop(),a.shaderManager.setShader(a.shaderManager.fastShader),this.fastSpriteBatch.begin(this,a),this.fastSpriteBatch.render(this),a.spriteBatch.start())},d.SpriteBatch.prototype._renderCanvas=function(a){if(this.visible&&!(this.alpha<=0)&&this.children.length){var b=a.context;b.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var c=this.worldTransform,d=!0,e=0;e<this.children.length;e++){var f=this.children[e];if(f.visible){var g=f.texture,h=g.frame;if(b.globalAlpha=this.worldAlpha*f.alpha,f.rotation%(2*Math.PI)===0)d&&(b.setTransform(c.a,c.b,c.c,c.d,c.tx,c.ty),d=!1),b.drawImage(g.baseTexture.source,h.x,h.y,h.width,h.height,f.anchor.x*-h.width*f.scale.x+f.position.x+.5|0,f.anchor.y*-h.height*f.scale.y+f.position.y+.5|0,h.width*f.scale.x,h.height*f.scale.y);else{d||(d=!0),f.displayObjectUpdateTransform();var i=f.worldTransform;a.roundPixels?b.setTransform(i.a,i.b,i.c,i.d,0|i.tx,0|i.ty):b.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty),b.drawImage(g.baseTexture.source,h.x,h.y,h.width,h.height,f.anchor.x*-h.width+.5|0,f.anchor.y*-h.height+.5|0,h.width,h.height)}}}}},d.MovieClip=function(a){d.Sprite.call(this,a[0]),this.textures=a,this.animationSpeed=1,this.loop=!0,this.onComplete=null,this.currentFrame=0,this.playing=!1},d.MovieClip.prototype=Object.create(d.Sprite.prototype),d.MovieClip.prototype.constructor=d.MovieClip,Object.defineProperty(d.MovieClip.prototype,"totalFrames",{get:function(){return this.textures.length}}),d.MovieClip.prototype.stop=function(){this.playing=!1},d.MovieClip.prototype.play=function(){this.playing=!0},d.MovieClip.prototype.gotoAndStop=function(a){this.playing=!1,this.currentFrame=a;var b=this.currentFrame+.5|0;this.setTexture(this.textures[b%this.textures.length])},d.MovieClip.prototype.gotoAndPlay=function(a){this.currentFrame=a,this.playing=!0},d.MovieClip.prototype.updateTransform=function(){if(this.displayObjectContainerUpdateTransform(),this.playing){this.currentFrame+=this.animationSpeed;var a=this.currentFrame+.5|0;this.currentFrame=this.currentFrame%this.textures.length,this.loop||a<this.textures.length?this.setTexture(this.textures[a%this.textures.length]):a>=this.textures.length&&(this.gotoAndStop(this.textures.length-1),this.onComplete&&this.onComplete())}},d.MovieClip.fromFrames=function(a){for(var b=[],c=0;c<a.length;c++)b.push(new d.Texture.fromFrame(a[c]));return new d.MovieClip(b)},d.MovieClip.fromImages=function(a){for(var b=[],c=0;c<a.length;c++)b.push(new d.Texture.fromImage(a[c]));return new d.MovieClip(b)},d.FilterBlock=function(){this.visible=!0,this.renderable=!0},d.FilterBlock.prototype.constructor=d.FilterBlock,d.Text=function(a,b){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=1,d.Sprite.call(this,d.Texture.fromCanvas(this.canvas)),this.setText(a),this.setStyle(b)},d.Text.prototype=Object.create(d.Sprite.prototype),d.Text.prototype.constructor=d.Text,Object.defineProperty(d.Text.prototype,"width",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.x*this.texture.frame.width},set:function(a){this.scale.x=a/this.texture.frame.width,this._width=a}}),Object.defineProperty(d.Text.prototype,"height",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.y*this.texture.frame.height},set:function(a){this.scale.y=a/this.texture.frame.height,this._height=a}}),d.Text.prototype.setStyle=function(a){a=a||{},a.font=a.font||"bold 20pt Arial",a.fill=a.fill||"black",a.align=a.align||"left",a.stroke=a.stroke||"black",a.strokeThickness=a.strokeThickness||0,a.wordWrap=a.wordWrap||!1,a.wordWrapWidth=a.wordWrapWidth||100,a.dropShadow=a.dropShadow||!1,a.dropShadowAngle=a.dropShadowAngle||Math.PI/6,a.dropShadowDistance=a.dropShadowDistance||4,a.dropShadowColor=a.dropShadowColor||"black",this.style=a,this.dirty=!0},d.Text.prototype.setText=function(a){this.text=a.toString()||" ",this.dirty=!0},d.Text.prototype.updateText=function(){this.texture.baseTexture.resolution=this.resolution,this.context.font=this.style.font;var a=this.text;this.style.wordWrap&&(a=this.wordWrap(this.text));for(var b=a.split(/(?:\r\n|\r|\n)/),c=[],d=0,e=this.determineFontProperties(this.style.font),f=0;f<b.length;f++){var g=this.context.measureText(b[f]).width;c[f]=g,d=Math.max(d,g)}var h=d+this.style.strokeThickness;this.style.dropShadow&&(h+=this.style.dropShadowDistance),this.canvas.width=(h+this.context.lineWidth)*this.resolution;var i=e.fontSize+this.style.strokeThickness,j=i*b.length;this.style.dropShadow&&(j+=this.style.dropShadowDistance),this.canvas.height=j*this.resolution,this.context.scale(this.resolution,this.resolution),navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=this.style.font,this.context.strokeStyle=this.style.stroke,this.context.lineWidth=this.style.strokeThickness,this.context.textBaseline="alphabetic";var k,l;if(this.style.dropShadow){this.context.fillStyle=this.style.dropShadowColor;var m=Math.sin(this.style.dropShadowAngle)*this.style.dropShadowDistance,n=Math.cos(this.style.dropShadowAngle)*this.style.dropShadowDistance;for(f=0;f<b.length;f++)k=this.style.strokeThickness/2,l=this.style.strokeThickness/2+f*i+e.ascent,"right"===this.style.align?k+=d-c[f]:"center"===this.style.align&&(k+=(d-c[f])/2),this.style.fill&&this.context.fillText(b[f],k+m,l+n)}for(this.context.fillStyle=this.style.fill,f=0;f<b.length;f++)k=this.style.strokeThickness/2,l=this.style.strokeThickness/2+f*i+e.ascent,"right"===this.style.align?k+=d-c[f]:"center"===this.style.align&&(k+=(d-c[f])/2),this.style.stroke&&this.style.strokeThickness&&this.context.strokeText(b[f],k,l),this.style.fill&&this.context.fillText(b[f],k,l);this.updateTexture()},d.Text.prototype.updateTexture=function(){this.texture.baseTexture.width=this.canvas.width,this.texture.baseTexture.height=this.canvas.height,this.texture.crop.width=this.texture.frame.width=this.canvas.width,this.texture.crop.height=this.texture.frame.height=this.canvas.height,this._width=this.canvas.width,this._height=this.canvas.height,this.texture.baseTexture.dirty()},d.Text.prototype._renderWebGL=function(a){this.dirty&&(this.resolution=a.resolution,this.updateText(),this.dirty=!1),d.Sprite.prototype._renderWebGL.call(this,a)},d.Text.prototype._renderCanvas=function(a){this.dirty&&(this.resolution=a.resolution,this.updateText(),this.dirty=!1),d.Sprite.prototype._renderCanvas.call(this,a)},d.Text.prototype.determineFontProperties=function(a){var b=d.Text.fontPropertiesCache[a];if(!b){b={};var c=d.Text.fontPropertiesCanvas,e=d.Text.fontPropertiesContext;e.font=a;var f=Math.ceil(e.measureText("|Mq").width),g=Math.ceil(e.measureText("M").width),h=2*g;g=1.4*g|0,c.width=f,c.height=h,e.fillStyle="#f00",e.fillRect(0,0,f,h),e.font=a,e.textBaseline="alphabetic",e.fillStyle="#000",e.fillText("|Mq",0,g);var i,j,k=e.getImageData(0,0,f,h).data,l=k.length,m=4*f,n=0,o=!1;for(i=0;g>i;i++){for(j=0;m>j;j+=4)if(255!==k[n+j]){o=!0;break}if(o)break;n+=m}for(b.ascent=g-i,n=l-m,o=!1,i=h;i>g;i--){for(j=0;m>j;j+=4)if(255!==k[n+j]){o=!0;break}if(o)break;n-=m}b.descent=i-g,b.descent+=6,b.fontSize=b.ascent+b.descent,d.Text.fontPropertiesCache[a]=b}return b},d.Text.prototype.wordWrap=function(a){for(var b="",c=a.split("\n"),d=0;d<c.length;d++){for(var e=this.style.wordWrapWidth,f=c[d].split(" "),g=0;g<f.length;g++){var h=this.context.measureText(f[g]).width,i=h+this.context.measureText(" ").width;0===g||i>e?(g>0&&(b+="\n"),b+=f[g],e=this.style.wordWrapWidth-h):(e-=i,b+=" "+f[g])}d<c.length-1&&(b+="\n")}return b},d.Text.prototype.getBounds=function(a){return this.dirty&&(this.updateText(),this.dirty=!1),d.Sprite.prototype.getBounds.call(this,a)},d.Text.prototype.destroy=function(a){this.context=null,this.canvas=null,this.texture.destroy(void 0===a?!0:a)},d.Text.fontPropertiesCache={},d.Text.fontPropertiesCanvas=document.createElement("canvas"),d.Text.fontPropertiesContext=d.Text.fontPropertiesCanvas.getContext("2d"),d.BitmapText=function(a,b){d.DisplayObjectContainer.call(this),this.textWidth=0,this.textHeight=0,this._pool=[],this.setText(a),this.setStyle(b),this.updateText(),this.dirty=!1},d.BitmapText.prototype=Object.create(d.DisplayObjectContainer.prototype),d.BitmapText.prototype.constructor=d.BitmapText,d.BitmapText.prototype.setText=function(a){this.text=a||" ",this.dirty=!0},d.BitmapText.prototype.setStyle=function(a){a=a||{},a.align=a.align||"left",this.style=a;var b=a.font.split(" ");this.fontName=b[b.length-1],this.fontSize=b.length>=2?parseInt(b[b.length-2],10):d.BitmapText.fonts[this.fontName].size,this.dirty=!0,this.tint=a.tint},d.BitmapText.prototype.updateText=function(){for(var a=d.BitmapText.fonts[this.fontName],b=new d.Point,c=null,e=[],f=0,g=[],h=0,i=this.fontSize/a.size,j=0;j<this.text.length;j++){var k=this.text.charCodeAt(j);if(/(?:\r\n|\r|\n)/.test(this.text.charAt(j)))g.push(b.x),f=Math.max(f,b.x),h++,b.x=0,b.y+=a.lineHeight,c=null;else{var l=a.chars[k];l&&(c&&l.kerning[c]&&(b.x+=l.kerning[c]),e.push({texture:l.texture,line:h,charCode:k,position:new d.Point(b.x+l.xOffset,b.y+l.yOffset)}),b.x+=l.xAdvance,c=k)}}g.push(b.x),f=Math.max(f,b.x);var m=[];for(j=0;h>=j;j++){var n=0;"right"===this.style.align?n=f-g[j]:"center"===this.style.align&&(n=(f-g[j])/2),m.push(n)}var o=this.children.length,p=e.length,q=this.tint||16777215;for(j=0;p>j;j++){var r=o>j?this.children[j]:this._pool.pop();r?r.setTexture(e[j].texture):r=new d.Sprite(e[j].texture),r.position.x=(e[j].position.x+m[e[j].line])*i,r.position.y=e[j].position.y*i,r.scale.x=r.scale.y=i,r.tint=q,r.parent||this.addChild(r)}for(;this.children.length>p;){var s=this.getChildAt(this.children.length-1);this._pool.push(s),this.removeChild(s)}this.textWidth=f*i,this.textHeight=(b.y+a.lineHeight)*i},d.BitmapText.prototype.updateTransform=function(){this.dirty&&(this.updateText(),this.dirty=!1),d.DisplayObjectContainer.prototype.updateTransform.call(this)},d.BitmapText.fonts={},d.InteractionData=function(){this.global=new d.Point,this.target=null,this.originalEvent=null},d.InteractionData.prototype.getLocalPosition=function(a,b){var c=a.worldTransform,e=this.global,f=c.a,g=c.c,h=c.tx,i=c.b,j=c.d,k=c.ty,l=1/(f*j+g*-i);return b=b||new d.Point,b.x=j*l*e.x+-g*l*e.y+(k*g-h*j)*l,b.y=f*l*e.y+-i*l*e.x+(-k*f+h*i)*l,b},d.InteractionData.prototype.constructor=d.InteractionData,d.InteractionManager=function(a){this.stage=a,this.mouse=new d.InteractionData,this.touches={},this.tempPoint=new d.Point,this.mouseoverEnabled=!0,this.pool=[],this.interactiveItems=[],this.interactionDOMElement=null,this.onMouseMove=this.onMouseMove.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.last=0,this.currentCursorStyle="inherit",this.mouseOut=!1,this.resolution=1,this._tempPoint=new d.Point},d.InteractionManager.prototype.constructor=d.InteractionManager,d.InteractionManager.prototype.collectInteractiveSprite=function(a,b){for(var c=a.children,d=c.length,e=d-1;e>=0;e--){var f=c[e];
f._interactive?(b.interactiveChildren=!0,this.interactiveItems.push(f),f.children.length>0&&this.collectInteractiveSprite(f,f)):(f.__iParent=null,f.children.length>0&&this.collectInteractiveSprite(f,b))}},d.InteractionManager.prototype.setTarget=function(a){this.target=a,this.resolution=a.resolution,null===this.interactionDOMElement&&this.setTargetDomElement(a.view)},d.InteractionManager.prototype.setTargetDomElement=function(a){this.removeEvents(),window.navigator.msPointerEnabled&&(a.style["-ms-content-zooming"]="none",a.style["-ms-touch-action"]="none"),this.interactionDOMElement=a,a.addEventListener("mousemove",this.onMouseMove,!0),a.addEventListener("mousedown",this.onMouseDown,!0),a.addEventListener("mouseout",this.onMouseOut,!0),a.addEventListener("touchstart",this.onTouchStart,!0),a.addEventListener("touchend",this.onTouchEnd,!0),a.addEventListener("touchmove",this.onTouchMove,!0),window.addEventListener("mouseup",this.onMouseUp,!0)},d.InteractionManager.prototype.removeEvents=function(){this.interactionDOMElement&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]="",this.interactionDOMElement.removeEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0),this.interactionDOMElement=null,window.removeEventListener("mouseup",this.onMouseUp,!0))},d.InteractionManager.prototype.update=function(){if(this.target){var a=Date.now(),b=a-this.last;if(b=b*d.INTERACTION_FREQUENCY/1e3,!(1>b)){this.last=a;var c=0;this.dirty&&this.rebuildInteractiveGraph();var e=this.interactiveItems.length,f="inherit",g=!1;for(c=0;e>c;c++){var h=this.interactiveItems[c];h.__hit=this.hitTest(h,this.mouse),this.mouse.target=h,h.__hit&&!g?(h.buttonMode&&(f=h.defaultCursor),h.interactiveChildren||(g=!0),h.__isOver||(h.mouseover&&h.mouseover(this.mouse),h.__isOver=!0)):h.__isOver&&(h.mouseout&&h.mouseout(this.mouse),h.__isOver=!1)}this.currentCursorStyle!==f&&(this.currentCursorStyle=f,this.interactionDOMElement.style.cursor=f)}}},d.InteractionManager.prototype.rebuildInteractiveGraph=function(){this.dirty=!1;for(var a=this.interactiveItems.length,b=0;a>b;b++)this.interactiveItems[b].interactiveChildren=!1;this.interactiveItems=[],this.stage.interactive&&this.interactiveItems.push(this.stage),this.collectInteractiveSprite(this.stage,this.stage)},d.InteractionManager.prototype.onMouseMove=function(a){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=a;var b=this.interactionDOMElement.getBoundingClientRect();this.mouse.global.x=(a.clientX-b.left)*(this.target.width/b.width)/this.resolution,this.mouse.global.y=(a.clientY-b.top)*(this.target.height/b.height)/this.resolution;for(var c=this.interactiveItems.length,d=0;c>d;d++){var e=this.interactiveItems[d];e.mousemove&&e.mousemove(this.mouse)}},d.InteractionManager.prototype.onMouseDown=function(a){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=a,d.AUTO_PREVENT_DEFAULT&&this.mouse.originalEvent.preventDefault();for(var b=this.interactiveItems.length,c=this.mouse.originalEvent,e=2===c.button||3===c.which,f=e?"rightdown":"mousedown",g=e?"rightclick":"click",h=e?"__rightIsDown":"__mouseIsDown",i=e?"__isRightDown":"__isDown",j=0;b>j;j++){var k=this.interactiveItems[j];if((k[f]||k[g])&&(k[h]=!0,k.__hit=this.hitTest(k,this.mouse),k.__hit&&(k[f]&&k[f](this.mouse),k[i]=!0,!k.interactiveChildren)))break}},d.InteractionManager.prototype.onMouseOut=function(a){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=a;var b=this.interactiveItems.length;this.interactionDOMElement.style.cursor="inherit";for(var c=0;b>c;c++){var d=this.interactiveItems[c];d.__isOver&&(this.mouse.target=d,d.mouseout&&d.mouseout(this.mouse),d.__isOver=!1)}this.mouseOut=!0,this.mouse.global.x=-1e4,this.mouse.global.y=-1e4},d.InteractionManager.prototype.onMouseUp=function(a){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=a;for(var b=this.interactiveItems.length,c=!1,d=this.mouse.originalEvent,e=2===d.button||3===d.which,f=e?"rightup":"mouseup",g=e?"rightclick":"click",h=e?"rightupoutside":"mouseupoutside",i=e?"__isRightDown":"__isDown",j=0;b>j;j++){var k=this.interactiveItems[j];(k[g]||k[f]||k[h])&&(k.__hit=this.hitTest(k,this.mouse),k.__hit&&!c?(k[f]&&k[f](this.mouse),k[i]&&k[g]&&k[g](this.mouse),k.interactiveChildren||(c=!0)):k[i]&&k[h]&&k[h](this.mouse),k[i]=!1)}},d.InteractionManager.prototype.hitTest=function(a,b){var c=b.global;if(!a.worldVisible)return!1;a.worldTransform.applyInverse(c,this._tempPoint);var e,f=this._tempPoint.x,g=this._tempPoint.y;if(b.target=a,a.hitArea&&a.hitArea.contains)return a.hitArea.contains(f,g);if(a instanceof d.Sprite){var h,i=a.texture.frame.width,j=a.texture.frame.height,k=-i*a.anchor.x;if(f>k&&k+i>f&&(h=-j*a.anchor.y,g>h&&h+j>g))return!0}else if(a instanceof d.Graphics){var l=a.graphicsData;for(e=0;e<l.length;e++){var m=l[e];if(m.fill&&m.shape&&m.shape.contains(f,g))return!0}}var n=a.children.length;for(e=0;n>e;e++){var o=a.children[e],p=this.hitTest(o,b);if(p)return b.target=a,!0}return!1},d.InteractionManager.prototype.onTouchMove=function(a){this.dirty&&this.rebuildInteractiveGraph();var b,c=this.interactionDOMElement.getBoundingClientRect(),d=a.changedTouches,e=0;for(e=0;e<d.length;e++){var f=d[e];b=this.touches[f.identifier],b.originalEvent=a,b.global.x=(f.clientX-c.left)*(this.target.width/c.width)/this.resolution,b.global.y=(f.clientY-c.top)*(this.target.height/c.height)/this.resolution,!navigator.isCocoonJS||c.left||c.top||a.target.style.width||a.target.style.height||(b.global.x=f.clientX,b.global.y=f.clientY);for(var g=0;g<this.interactiveItems.length;g++){var h=this.interactiveItems[g];h.touchmove&&h.__touchData&&h.__touchData[f.identifier]&&h.touchmove(b)}}},d.InteractionManager.prototype.onTouchStart=function(a){this.dirty&&this.rebuildInteractiveGraph();var b=this.interactionDOMElement.getBoundingClientRect();d.AUTO_PREVENT_DEFAULT&&a.preventDefault();for(var c=a.changedTouches,e=0;e<c.length;e++){var f=c[e],g=this.pool.pop();g||(g=new d.InteractionData),g.originalEvent=a,this.touches[f.identifier]=g,g.global.x=(f.clientX-b.left)*(this.target.width/b.width)/this.resolution,g.global.y=(f.clientY-b.top)*(this.target.height/b.height)/this.resolution,!navigator.isCocoonJS||b.left||b.top||a.target.style.width||a.target.style.height||(g.global.x=f.clientX,g.global.y=f.clientY);for(var h=this.interactiveItems.length,i=0;h>i;i++){var j=this.interactiveItems[i];if((j.touchstart||j.tap)&&(j.__hit=this.hitTest(j,g),j.__hit&&(j.touchstart&&j.touchstart(g),j.__isDown=!0,j.__touchData=j.__touchData||{},j.__touchData[f.identifier]=g,!j.interactiveChildren)))break}}},d.InteractionManager.prototype.onTouchEnd=function(a){this.dirty&&this.rebuildInteractiveGraph();for(var b=this.interactionDOMElement.getBoundingClientRect(),c=a.changedTouches,d=0;d<c.length;d++){var e=c[d],f=this.touches[e.identifier],g=!1;f.global.x=(e.clientX-b.left)*(this.target.width/b.width)/this.resolution,f.global.y=(e.clientY-b.top)*(this.target.height/b.height)/this.resolution,!navigator.isCocoonJS||b.left||b.top||a.target.style.width||a.target.style.height||(f.global.x=e.clientX,f.global.y=e.clientY);for(var h=this.interactiveItems.length,i=0;h>i;i++){var j=this.interactiveItems[i];j.__touchData&&j.__touchData[e.identifier]&&(j.__hit=this.hitTest(j,j.__touchData[e.identifier]),f.originalEvent=a,(j.touchend||j.tap)&&(j.__hit&&!g?(j.touchend&&j.touchend(f),j.__isDown&&j.tap&&j.tap(f),j.interactiveChildren||(g=!0)):j.__isDown&&j.touchendoutside&&j.touchendoutside(f),j.__isDown=!1),j.__touchData[e.identifier]=null)}this.pool.push(f),this.touches[e.identifier]=null}},d.Stage=function(a){d.DisplayObjectContainer.call(this),this.worldTransform=new d.Matrix,this.interactive=!0,this.interactionManager=new d.InteractionManager(this),this.dirty=!0,this.stage=this,this.stage.hitArea=new d.Rectangle(0,0,1e5,1e5),this.setBackgroundColor(a)},d.Stage.prototype=Object.create(d.DisplayObjectContainer.prototype),d.Stage.prototype.constructor=d.Stage,d.Stage.prototype.setInteractionDelegate=function(a){this.interactionManager.setTargetDomElement(a)},d.Stage.prototype.updateTransform=function(){this.worldAlpha=1;for(var a=0,b=this.children.length;b>a;a++)this.children[a].updateTransform();this.dirty&&(this.dirty=!1,this.interactionManager.dirty=!0),this.interactive&&this.interactionManager.update()},d.Stage.prototype.setBackgroundColor=function(a){this.backgroundColor=a||0,this.backgroundColorSplit=d.hex2rgb(this.backgroundColor);var b=this.backgroundColor.toString(16);b="000000".substr(0,6-b.length)+b,this.backgroundColorString="#"+b},d.Stage.prototype.getMousePosition=function(){return this.interactionManager.mouse.global},function(a){for(var b=0,c=["ms","moz","webkit","o"],d=0;d<c.length&&!a.requestAnimationFrame;++d)a.requestAnimationFrame=a[c[d]+"RequestAnimationFrame"],a.cancelAnimationFrame=a[c[d]+"CancelAnimationFrame"]||a[c[d]+"CancelRequestAnimationFrame"];a.requestAnimationFrame||(a.requestAnimationFrame=function(c){var d=(new Date).getTime(),e=Math.max(0,16-(d-b)),f=a.setTimeout(function(){c(d+e)},e);return b=d+e,f}),a.cancelAnimationFrame||(a.cancelAnimationFrame=function(a){clearTimeout(a)}),a.requestAnimFrame=a.requestAnimationFrame}(this),d.hex2rgb=function(a){return[(a>>16&255)/255,(a>>8&255)/255,(255&a)/255]},d.rgb2hex=function(a){return(255*a[0]<<16)+(255*a[1]<<8)+255*a[2]},"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(){return function(a){function b(){for(var d=arguments.length,f=new Array(d);d--;)f[d]=arguments[d];return f=e.concat(f),c.apply(this instanceof b?this:a,f)}var c=this,d=arguments.length-1,e=[];if(d>0)for(e.length=d;d--;)e[d]=arguments[d+1];if("function"!=typeof c)throw new TypeError;return b.prototype=function f(a){return a&&(f.prototype=a),this instanceof f?void 0:new f}(c.prototype),b}}()),d.AjaxRequest=function(){var a=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"];if(!window.ActiveXObject)return window.XMLHttpRequest?new window.XMLHttpRequest:!1;for(var b=0;b<a.length;b++)try{return new window.ActiveXObject(a[b])}catch(c){}},d.canUseNewCanvasBlendModes=function(){if("undefined"==typeof document)return!1;var a=document.createElement("canvas");a.width=1,a.height=1;var b=a.getContext("2d");return b.fillStyle="#000",b.fillRect(0,0,1,1),b.globalCompositeOperation="multiply",b.fillStyle="#fff",b.fillRect(0,0,1,1),0===b.getImageData(0,0,1,1).data[0]},d.getNextPowerOfTwo=function(a){if(a>0&&0===(a&a-1))return a;for(var b=1;a>b;)b<<=1;return b},d.isPowerOfTwo=function(a,b){return a>0&&0===(a&a-1)&&b>0&&0===(b&b-1)},d.EventTarget={call:function(a){a&&(a=a.prototype||a,d.EventTarget.mixin(a))},mixin:function(a){a.listeners=function(a){return this._listeners=this._listeners||{},this._listeners[a]?this._listeners[a].slice():[]},a.emit=a.dispatchEvent=function(a,b){if(this._listeners=this._listeners||{},"object"==typeof a&&(b=a,a=a.type),b&&b.__isEventObject===!0||(b=new d.Event(this,a,b)),this._listeners&&this._listeners[a]){var c,e=this._listeners[a].slice(0),f=e.length,g=e[0];for(c=0;f>c;g=e[++c])if(g.call(this,b),b.stoppedImmediate)return this;if(b.stopped)return this}return this.parent&&this.parent.emit&&this.parent.emit.call(this.parent,a,b),this},a.on=a.addEventListener=function(a,b){return this._listeners=this._listeners||{},(this._listeners[a]=this._listeners[a]||[]).push(b),this},a.once=function(a,b){function c(){b.apply(d.off(a,c),arguments)}this._listeners=this._listeners||{};var d=this;return c._originalHandler=b,this.on(a,c)},a.off=a.removeEventListener=function(a,b){if(this._listeners=this._listeners||{},!this._listeners[a])return this;for(var c=this._listeners[a],d=b?c.length:0;d-->0;)(c[d]===b||c[d]._originalHandler===b)&&c.splice(d,1);return 0===c.length&&delete this._listeners[a],this},a.removeAllListeners=function(a){return this._listeners=this._listeners||{},this._listeners[a]?(delete this._listeners[a],this):this}}},d.Event=function(a,b,c){this.__isEventObject=!0,this.stopped=!1,this.stoppedImmediate=!1,this.target=a,this.type=b,this.data=c,this.content=c,this.timeStamp=Date.now()},d.Event.prototype.stopPropagation=function(){this.stopped=!0},d.Event.prototype.stopImmediatePropagation=function(){this.stoppedImmediate=!0},d.autoDetectRenderer=function(a,b,c){a||(a=800),b||(b=600);var e=function(){try{var a=document.createElement("canvas");return!!window.WebGLRenderingContext&&(a.getContext("webgl")||a.getContext("experimental-webgl"))}catch(b){return!1}}();return e?new d.WebGLRenderer(a,b,c):new d.CanvasRenderer(a,b,c)},d.autoDetectRecommendedRenderer=function(a,b,c){a||(a=800),b||(b=600);var e=function(){try{var a=document.createElement("canvas");return!!window.WebGLRenderingContext&&(a.getContext("webgl")||a.getContext("experimental-webgl"))}catch(b){return!1}}(),f=/Android/i.test(navigator.userAgent);return e&&!f?new d.WebGLRenderer(a,b,c):new d.CanvasRenderer(a,b,c)},d.PolyK={},d.PolyK.Triangulate=function(a){var b=!0,c=a.length>>1;if(3>c)return[];for(var e=[],f=[],g=0;c>g;g++)f.push(g);g=0;for(var h=c;h>3;){var i=f[(g+0)%h],j=f[(g+1)%h],k=f[(g+2)%h],l=a[2*i],m=a[2*i+1],n=a[2*j],o=a[2*j+1],p=a[2*k],q=a[2*k+1],r=!1;if(d.PolyK._convex(l,m,n,o,p,q,b)){r=!0;for(var s=0;h>s;s++){var t=f[s];if(t!==i&&t!==j&&t!==k&&d.PolyK._PointInTriangle(a[2*t],a[2*t+1],l,m,n,o,p,q)){r=!1;break}}}if(r)e.push(i,j,k),f.splice((g+1)%h,1),h--,g=0;else if(g++>3*h){if(!b)return null;for(e=[],f=[],g=0;c>g;g++)f.push(g);g=0,h=c,b=!1}}return e.push(f[0],f[1],f[2]),e},d.PolyK._PointInTriangle=function(a,b,c,d,e,f,g,h){var i=g-c,j=h-d,k=e-c,l=f-d,m=a-c,n=b-d,o=i*i+j*j,p=i*k+j*l,q=i*m+j*n,r=k*k+l*l,s=k*m+l*n,t=1/(o*r-p*p),u=(r*q-p*s)*t,v=(o*s-p*q)*t;return u>=0&&v>=0&&1>u+v},d.PolyK._convex=function(a,b,c,d,e,f,g){return(b-d)*(e-c)+(c-a)*(f-d)>=0===g},d.initDefaultShaders=function(){},d.CompileVertexShader=function(a,b){return d._CompileShader(a,b,a.VERTEX_SHADER)},d.CompileFragmentShader=function(a,b){return d._CompileShader(a,b,a.FRAGMENT_SHADER)},d._CompileShader=function(a,b,c){var d=b.join("\n"),e=a.createShader(c);return a.shaderSource(e,d),a.compileShader(e),a.getShaderParameter(e,a.COMPILE_STATUS)?e:(window.console.log(a.getShaderInfoLog(e)),null)},d.compileProgram=function(a,b,c){var e=d.CompileFragmentShader(a,c),f=d.CompileVertexShader(a,b),g=a.createProgram();return a.attachShader(g,f),a.attachShader(g,e),a.linkProgram(g),a.getProgramParameter(g,a.LINK_STATUS)||window.console.log("Could not initialise shaders"),g},d.PixiShader=function(a){this._UID=d._UID++,this.gl=a,this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"],this.textureCount=0,this.firstRun=!0,this.dirty=!0,this.attributes=[],this.init()},d.PixiShader.prototype.constructor=d.PixiShader,d.PixiShader.prototype.init=function(){var a=this.gl,b=d.compileProgram(a,this.vertexSrc||d.PixiShader.defaultVertexSrc,this.fragmentSrc);a.useProgram(b),this.uSampler=a.getUniformLocation(b,"uSampler"),this.projectionVector=a.getUniformLocation(b,"projectionVector"),this.offsetVector=a.getUniformLocation(b,"offsetVector"),this.dimensions=a.getUniformLocation(b,"dimensions"),this.aVertexPosition=a.getAttribLocation(b,"aVertexPosition"),this.aTextureCoord=a.getAttribLocation(b,"aTextureCoord"),this.colorAttribute=a.getAttribLocation(b,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aTextureCoord,this.colorAttribute];for(var c in this.uniforms)this.uniforms[c].uniformLocation=a.getUniformLocation(b,c);this.initUniforms(),this.program=b},d.PixiShader.prototype.initUniforms=function(){this.textureCount=1;var a,b=this.gl;for(var c in this.uniforms){a=this.uniforms[c];var d=a.type;"sampler2D"===d?(a._init=!1,null!==a.value&&this.initSampler2D(a)):"mat2"===d||"mat3"===d||"mat4"===d?(a.glMatrix=!0,a.glValueLength=1,"mat2"===d?a.glFunc=b.uniformMatrix2fv:"mat3"===d?a.glFunc=b.uniformMatrix3fv:"mat4"===d&&(a.glFunc=b.uniformMatrix4fv)):(a.glFunc=b["uniform"+d],a.glValueLength="2f"===d||"2i"===d?2:"3f"===d||"3i"===d?3:"4f"===d||"4i"===d?4:1)}},d.PixiShader.prototype.initSampler2D=function(a){if(a.value&&a.value.baseTexture&&a.value.baseTexture.hasLoaded){var b=this.gl;if(b.activeTexture(b["TEXTURE"+this.textureCount]),b.bindTexture(b.TEXTURE_2D,a.value.baseTexture._glTextures[b.id]),a.textureData){var c=a.textureData,d=c.magFilter?c.magFilter:b.LINEAR,e=c.minFilter?c.minFilter:b.LINEAR,f=c.wrapS?c.wrapS:b.CLAMP_TO_EDGE,g=c.wrapT?c.wrapT:b.CLAMP_TO_EDGE,h=c.luminance?b.LUMINANCE:b.RGBA;if(c.repeat&&(f=b.REPEAT,g=b.REPEAT),b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!!c.flipY),c.width){var i=c.width?c.width:512,j=c.height?c.height:2,k=c.border?c.border:0;b.texImage2D(b.TEXTURE_2D,0,h,i,j,k,h,b.UNSIGNED_BYTE,null)}else b.texImage2D(b.TEXTURE_2D,0,h,b.RGBA,b.UNSIGNED_BYTE,a.value.baseTexture.source);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,d),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,e),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,f),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,g)}b.uniform1i(a.uniformLocation,this.textureCount),a._init=!0,this.textureCount++}},d.PixiShader.prototype.syncUniforms=function(){this.textureCount=1;var a,b=this.gl;for(var c in this.uniforms)a=this.uniforms[c],1===a.glValueLength?a.glMatrix===!0?a.glFunc.call(b,a.uniformLocation,a.transpose,a.value):a.glFunc.call(b,a.uniformLocation,a.value):2===a.glValueLength?a.glFunc.call(b,a.uniformLocation,a.value.x,a.value.y):3===a.glValueLength?a.glFunc.call(b,a.uniformLocation,a.value.x,a.value.y,a.value.z):4===a.glValueLength?a.glFunc.call(b,a.uniformLocation,a.value.x,a.value.y,a.value.z,a.value.w):"sampler2D"===a.type&&(a._init?(b.activeTexture(b["TEXTURE"+this.textureCount]),a.value.baseTexture._dirty[b.id]?d.instances[b.id].updateTexture(a.value.baseTexture):b.bindTexture(b.TEXTURE_2D,a.value.baseTexture._glTextures[b.id]),b.uniform1i(a.uniformLocation,this.textureCount),this.textureCount++):this.initSampler2D(a))},d.PixiShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},d.PixiShader.defaultVertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","varying vec4 vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"],d.PixiFastShader=function(a){this._UID=d._UID++,this.gl=a,this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","attribute vec2 aTextureCoord;","attribute float aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform mat3 uMatrix;","varying vec2 vTextureCoord;","varying float vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   vec2 v;","   vec2 sv = aVertexPosition * aScale;","   v.x = (sv.x) * cos(aRotation) - (sv.y) * sin(aRotation);","   v.y = (sv.x) * sin(aRotation) + (sv.y) * cos(aRotation);","   v = ( uMatrix * vec3(v + aPositionCoord , 1.0) ).xy ;","   gl_Position = vec4( ( v / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"],this.textureCount=0,this.init()},d.PixiFastShader.prototype.constructor=d.PixiFastShader,d.PixiFastShader.prototype.init=function(){var a=this.gl,b=d.compileProgram(a,this.vertexSrc,this.fragmentSrc);a.useProgram(b),this.uSampler=a.getUniformLocation(b,"uSampler"),this.projectionVector=a.getUniformLocation(b,"projectionVector"),this.offsetVector=a.getUniformLocation(b,"offsetVector"),this.dimensions=a.getUniformLocation(b,"dimensions"),this.uMatrix=a.getUniformLocation(b,"uMatrix"),this.aVertexPosition=a.getAttribLocation(b,"aVertexPosition"),this.aPositionCoord=a.getAttribLocation(b,"aPositionCoord"),this.aScale=a.getAttribLocation(b,"aScale"),this.aRotation=a.getAttribLocation(b,"aRotation"),this.aTextureCoord=a.getAttribLocation(b,"aTextureCoord"),this.colorAttribute=a.getAttribLocation(b,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aPositionCoord,this.aScale,this.aRotation,this.aTextureCoord,this.colorAttribute],this.program=b},d.PixiFastShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},d.StripShader=function(a){this._UID=d._UID++,this.gl=a,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","uniform float alpha;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * alpha;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"],this.init()},d.StripShader.prototype.constructor=d.StripShader,d.StripShader.prototype.init=function(){var a=this.gl,b=d.compileProgram(a,this.vertexSrc,this.fragmentSrc);a.useProgram(b),this.uSampler=a.getUniformLocation(b,"uSampler"),this.projectionVector=a.getUniformLocation(b,"projectionVector"),this.offsetVector=a.getUniformLocation(b,"offsetVector"),this.colorAttribute=a.getAttribLocation(b,"aColor"),this.aVertexPosition=a.getAttribLocation(b,"aVertexPosition"),this.aTextureCoord=a.getAttribLocation(b,"aTextureCoord"),this.attributes=[this.aVertexPosition,this.aTextureCoord],this.translationMatrix=a.getUniformLocation(b,"translationMatrix"),this.alpha=a.getUniformLocation(b,"alpha"),this.program=b},d.StripShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attribute=null},d.PrimitiveShader=function(a){this._UID=d._UID++,this.gl=a,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform float alpha;","uniform float flipY;","uniform vec3 tint;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, (v.y / projectionVector.y * -flipY) + flipY , 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"],this.init()},d.PrimitiveShader.prototype.constructor=d.PrimitiveShader,d.PrimitiveShader.prototype.init=function(){var a=this.gl,b=d.compileProgram(a,this.vertexSrc,this.fragmentSrc);a.useProgram(b),this.projectionVector=a.getUniformLocation(b,"projectionVector"),this.offsetVector=a.getUniformLocation(b,"offsetVector"),this.tintColor=a.getUniformLocation(b,"tint"),this.flipY=a.getUniformLocation(b,"flipY"),this.aVertexPosition=a.getAttribLocation(b,"aVertexPosition"),this.colorAttribute=a.getAttribLocation(b,"aColor"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=a.getUniformLocation(b,"translationMatrix"),this.alpha=a.getUniformLocation(b,"alpha"),this.program=b},d.PrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},d.ComplexPrimitiveShader=function(a){this._UID=d._UID++,this.gl=a,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform vec3 tint;","uniform float alpha;","uniform vec3 color;","uniform float flipY;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, (v.y / projectionVector.y * -flipY) + flipY , 0.0, 1.0);","   vColor = vec4(color * alpha * tint, alpha);","}"],this.init()},d.ComplexPrimitiveShader.prototype.constructor=d.ComplexPrimitiveShader,d.ComplexPrimitiveShader.prototype.init=function(){var a=this.gl,b=d.compileProgram(a,this.vertexSrc,this.fragmentSrc);a.useProgram(b),this.projectionVector=a.getUniformLocation(b,"projectionVector"),this.offsetVector=a.getUniformLocation(b,"offsetVector"),this.tintColor=a.getUniformLocation(b,"tint"),this.color=a.getUniformLocation(b,"color"),this.flipY=a.getUniformLocation(b,"flipY"),this.aVertexPosition=a.getAttribLocation(b,"aVertexPosition"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=a.getUniformLocation(b,"translationMatrix"),this.alpha=a.getUniformLocation(b,"alpha"),this.program=b},d.ComplexPrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attribute=null},d.WebGLGraphics=function(){},d.WebGLGraphics.renderGraphics=function(a,b){var c,e=b.gl,f=b.projection,g=b.offset,h=b.shaderManager.primitiveShader;a.dirty&&d.WebGLGraphics.updateGraphics(a,e);for(var i=a._webGL[e.id],j=0;j<i.data.length;j++)1===i.data[j].mode?(c=i.data[j],b.stencilManager.pushStencil(a,c,b),e.drawElements(e.TRIANGLE_FAN,4,e.UNSIGNED_SHORT,2*(c.indices.length-4)),b.stencilManager.popStencil(a,c,b)):(c=i.data[j],b.shaderManager.setShader(h),h=b.shaderManager.primitiveShader,e.uniformMatrix3fv(h.translationMatrix,!1,a.worldTransform.toArray(!0)),e.uniform1f(h.flipY,1),e.uniform2f(h.projectionVector,f.x,-f.y),e.uniform2f(h.offsetVector,-g.x,-g.y),e.uniform3fv(h.tintColor,d.hex2rgb(a.tint)),e.uniform1f(h.alpha,a.worldAlpha),e.bindBuffer(e.ARRAY_BUFFER,c.buffer),e.vertexAttribPointer(h.aVertexPosition,2,e.FLOAT,!1,24,0),e.vertexAttribPointer(h.colorAttribute,4,e.FLOAT,!1,24,8),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,c.indexBuffer),e.drawElements(e.TRIANGLE_STRIP,c.indices.length,e.UNSIGNED_SHORT,0))},d.WebGLGraphics.updateGraphics=function(a,b){var c=a._webGL[b.id];c||(c=a._webGL[b.id]={lastIndex:0,data:[],gl:b}),a.dirty=!1;var e;if(a.clearDirty){for(a.clearDirty=!1,e=0;e<c.data.length;e++){var f=c.data[e];f.reset(),d.WebGLGraphics.graphicsDataPool.push(f)}c.data=[],c.lastIndex=0}var g;for(e=c.lastIndex;e<a.graphicsData.length;e++){var h=a.graphicsData[e];if(h.type===d.Graphics.POLY){if(h.points=h.shape.points.slice(),h.shape.closed&&(h.points[0]!==h.points[h.points.length-2]||h.points[1]!==h.points[h.points.length-1])&&h.points.push(h.points[0],h.points[1]),h.fill&&h.points.length>=6)if(h.points.length<12){g=d.WebGLGraphics.switchMode(c,0);var i=d.WebGLGraphics.buildPoly(h,g);i||(g=d.WebGLGraphics.switchMode(c,1),d.WebGLGraphics.buildComplexPoly(h,g))}else g=d.WebGLGraphics.switchMode(c,1),d.WebGLGraphics.buildComplexPoly(h,g);h.lineWidth>0&&(g=d.WebGLGraphics.switchMode(c,0),d.WebGLGraphics.buildLine(h,g))}else g=d.WebGLGraphics.switchMode(c,0),h.type===d.Graphics.RECT?d.WebGLGraphics.buildRectangle(h,g):h.type===d.Graphics.CIRC||h.type===d.Graphics.ELIP?d.WebGLGraphics.buildCircle(h,g):h.type===d.Graphics.RREC&&d.WebGLGraphics.buildRoundedRectangle(h,g);c.lastIndex++}for(e=0;e<c.data.length;e++)g=c.data[e],g.dirty&&g.upload()},d.WebGLGraphics.switchMode=function(a,b){var c;return a.data.length?(c=a.data[a.data.length-1],(c.mode!==b||1===b)&&(c=d.WebGLGraphics.graphicsDataPool.pop()||new d.WebGLGraphicsData(a.gl),c.mode=b,a.data.push(c))):(c=d.WebGLGraphics.graphicsDataPool.pop()||new d.WebGLGraphicsData(a.gl),c.mode=b,a.data.push(c)),c.dirty=!0,c},d.WebGLGraphics.buildRectangle=function(a,b){var c=a.shape,e=c.x,f=c.y,g=c.width,h=c.height;if(a.fill){var i=d.hex2rgb(a.fillColor),j=a.fillAlpha,k=i[0]*j,l=i[1]*j,m=i[2]*j,n=b.points,o=b.indices,p=n.length/6;n.push(e,f),n.push(k,l,m,j),n.push(e+g,f),n.push(k,l,m,j),n.push(e,f+h),n.push(k,l,m,j),n.push(e+g,f+h),n.push(k,l,m,j),o.push(p,p,p+1,p+2,p+3,p+3)}if(a.lineWidth){var q=a.points;a.points=[e,f,e+g,f,e+g,f+h,e,f+h,e,f],d.WebGLGraphics.buildLine(a,b),a.points=q}},d.WebGLGraphics.buildRoundedRectangle=function(a,b){var c=a.shape,e=c.x,f=c.y,g=c.width,h=c.height,i=c.radius,j=[];if(j.push(e,f+i),j=j.concat(d.WebGLGraphics.quadraticBezierCurve(e,f+h-i,e,f+h,e+i,f+h)),j=j.concat(d.WebGLGraphics.quadraticBezierCurve(e+g-i,f+h,e+g,f+h,e+g,f+h-i)),j=j.concat(d.WebGLGraphics.quadraticBezierCurve(e+g,f+i,e+g,f,e+g-i,f)),j=j.concat(d.WebGLGraphics.quadraticBezierCurve(e+i,f,e,f,e,f+i)),a.fill){var k=d.hex2rgb(a.fillColor),l=a.fillAlpha,m=k[0]*l,n=k[1]*l,o=k[2]*l,p=b.points,q=b.indices,r=p.length/6,s=d.PolyK.Triangulate(j),t=0;for(t=0;t<s.length;t+=3)q.push(s[t]+r),q.push(s[t]+r),q.push(s[t+1]+r),q.push(s[t+2]+r),q.push(s[t+2]+r);for(t=0;t<j.length;t++)p.push(j[t],j[++t],m,n,o,l)}if(a.lineWidth){var u=a.points;a.points=j,d.WebGLGraphics.buildLine(a,b),a.points=u}},d.WebGLGraphics.quadraticBezierCurve=function(a,b,c,d,e,f){function g(a,b,c){var d=b-a;return a+d*c}for(var h,i,j,k,l,m,n=20,o=[],p=0,q=0;n>=q;q++)p=q/n,h=g(a,c,p),i=g(b,d,p),j=g(c,e,p),k=g(d,f,p),l=g(h,j,p),m=g(i,k,p),o.push(l,m);return o},d.WebGLGraphics.buildCircle=function(a,b){var c,e,f=a.shape,g=f.x,h=f.y;a.type===d.Graphics.CIRC?(c=f.radius,e=f.radius):(c=f.width,e=f.height);var i=40,j=2*Math.PI/i,k=0;if(a.fill){var l=d.hex2rgb(a.fillColor),m=a.fillAlpha,n=l[0]*m,o=l[1]*m,p=l[2]*m,q=b.points,r=b.indices,s=q.length/6;for(r.push(s),k=0;i+1>k;k++)q.push(g,h,n,o,p,m),q.push(g+Math.sin(j*k)*c,h+Math.cos(j*k)*e,n,o,p,m),r.push(s++,s++);r.push(s-1)}if(a.lineWidth){var t=a.points;for(a.points=[],k=0;i+1>k;k++)a.points.push(g+Math.sin(j*k)*c,h+Math.cos(j*k)*e);d.WebGLGraphics.buildLine(a,b),a.points=t}},d.WebGLGraphics.buildLine=function(a,b){var c=0,e=a.points;if(0!==e.length){if(a.lineWidth%2)for(c=0;c<e.length;c++)e[c]+=.5;var f=new d.Point(e[0],e[1]),g=new d.Point(e[e.length-2],e[e.length-1]);if(f.x===g.x&&f.y===g.y){e=e.slice(),e.pop(),e.pop(),g=new d.Point(e[e.length-2],e[e.length-1]);var h=g.x+.5*(f.x-g.x),i=g.y+.5*(f.y-g.y);e.unshift(h,i),e.push(h,i)}var j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G=b.points,H=b.indices,I=e.length/2,J=e.length,K=G.length/6,L=a.lineWidth/2,M=d.hex2rgb(a.lineColor),N=a.lineAlpha,O=M[0]*N,P=M[1]*N,Q=M[2]*N;for(l=e[0],m=e[1],n=e[2],o=e[3],r=-(m-o),s=l-n,F=Math.sqrt(r*r+s*s),r/=F,s/=F,r*=L,s*=L,G.push(l-r,m-s,O,P,Q,N),G.push(l+r,m+s,O,P,Q,N),c=1;I-1>c;c++)l=e[2*(c-1)],m=e[2*(c-1)+1],n=e[2*c],o=e[2*c+1],p=e[2*(c+1)],q=e[2*(c+1)+1],r=-(m-o),s=l-n,F=Math.sqrt(r*r+s*s),r/=F,s/=F,r*=L,s*=L,t=-(o-q),u=n-p,F=Math.sqrt(t*t+u*u),t/=F,u/=F,t*=L,u*=L,x=-s+m-(-s+o),y=-r+n-(-r+l),z=(-r+l)*(-s+o)-(-r+n)*(-s+m),A=-u+q-(-u+o),B=-t+n-(-t+p),C=(-t+p)*(-u+o)-(-t+n)*(-u+q),D=x*B-A*y,Math.abs(D)<.1?(D+=10.1,G.push(n-r,o-s,O,P,Q,N),G.push(n+r,o+s,O,P,Q,N)):(j=(y*C-B*z)/D,k=(A*z-x*C)/D,E=(j-n)*(j-n)+(k-o)+(k-o),E>19600?(v=r-t,w=s-u,F=Math.sqrt(v*v+w*w),v/=F,w/=F,v*=L,w*=L,G.push(n-v,o-w),G.push(O,P,Q,N),G.push(n+v,o+w),G.push(O,P,Q,N),G.push(n-v,o-w),G.push(O,P,Q,N),J++):(G.push(j,k),G.push(O,P,Q,N),G.push(n-(j-n),o-(k-o)),G.push(O,P,Q,N)));
for(l=e[2*(I-2)],m=e[2*(I-2)+1],n=e[2*(I-1)],o=e[2*(I-1)+1],r=-(m-o),s=l-n,F=Math.sqrt(r*r+s*s),r/=F,s/=F,r*=L,s*=L,G.push(n-r,o-s),G.push(O,P,Q,N),G.push(n+r,o+s),G.push(O,P,Q,N),H.push(K),c=0;J>c;c++)H.push(K++);H.push(K-1)}},d.WebGLGraphics.buildComplexPoly=function(a,b){var c=a.points.slice();if(!(c.length<6)){var e=b.indices;b.points=c,b.alpha=a.fillAlpha,b.color=d.hex2rgb(a.fillColor);for(var f,g,h=1/0,i=-1/0,j=1/0,k=-1/0,l=0;l<c.length;l+=2)f=c[l],g=c[l+1],h=h>f?f:h,i=f>i?f:i,j=j>g?g:j,k=g>k?g:k;c.push(h,j,i,j,i,k,h,k);var m=c.length/2;for(l=0;m>l;l++)e.push(l)}},d.WebGLGraphics.buildPoly=function(a,b){var c=a.points;if(!(c.length<6)){var e=b.points,f=b.indices,g=c.length/2,h=d.hex2rgb(a.fillColor),i=a.fillAlpha,j=h[0]*i,k=h[1]*i,l=h[2]*i,m=d.PolyK.Triangulate(c);if(!m)return!1;var n=e.length/6,o=0;for(o=0;o<m.length;o+=3)f.push(m[o]+n),f.push(m[o]+n),f.push(m[o+1]+n),f.push(m[o+2]+n),f.push(m[o+2]+n);for(o=0;g>o;o++)e.push(c[2*o],c[2*o+1],j,k,l,i);return!0}},d.WebGLGraphics.graphicsDataPool=[],d.WebGLGraphicsData=function(a){this.gl=a,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=a.createBuffer(),this.indexBuffer=a.createBuffer(),this.mode=1,this.alpha=1,this.dirty=!0},d.WebGLGraphicsData.prototype.reset=function(){this.points=[],this.indices=[]},d.WebGLGraphicsData.prototype.upload=function(){var a=this.gl;this.glPoints=new d.Float32Array(this.points),a.bindBuffer(a.ARRAY_BUFFER,this.buffer),a.bufferData(a.ARRAY_BUFFER,this.glPoints,a.STATIC_DRAW),this.glIndicies=new d.Uint16Array(this.indices),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer),a.bufferData(a.ELEMENT_ARRAY_BUFFER,this.glIndicies,a.STATIC_DRAW),this.dirty=!1},d.glContexts=[],d.instances=[],d.WebGLRenderer=function(a,b,c){if(c)for(var e in d.defaultRenderOptions)"undefined"==typeof c[e]&&(c[e]=d.defaultRenderOptions[e]);else c=d.defaultRenderOptions;d.defaultRenderer||(d.sayHello("webGL"),d.defaultRenderer=this),this.type=d.WEBGL_RENDERER,this.resolution=c.resolution,this.transparent=c.transparent,this.autoResize=c.autoResize||!1,this.preserveDrawingBuffer=c.preserveDrawingBuffer,this.clearBeforeRender=c.clearBeforeRender,this.width=a||800,this.height=b||600,this.view=c.view||document.createElement("canvas"),this.contextLostBound=this.handleContextLost.bind(this),this.contextRestoredBound=this.handleContextRestored.bind(this),this.view.addEventListener("webglcontextlost",this.contextLostBound,!1),this.view.addEventListener("webglcontextrestored",this.contextRestoredBound,!1),this._contextOptions={alpha:this.transparent,antialias:c.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:c.preserveDrawingBuffer},this.projection=new d.Point,this.offset=new d.Point(0,0),this.shaderManager=new d.WebGLShaderManager,this.spriteBatch=new d.WebGLSpriteBatch,this.maskManager=new d.WebGLMaskManager,this.filterManager=new d.WebGLFilterManager,this.stencilManager=new d.WebGLStencilManager,this.blendModeManager=new d.WebGLBlendModeManager,this.renderSession={},this.renderSession.gl=this.gl,this.renderSession.drawCount=0,this.renderSession.shaderManager=this.shaderManager,this.renderSession.maskManager=this.maskManager,this.renderSession.filterManager=this.filterManager,this.renderSession.blendModeManager=this.blendModeManager,this.renderSession.spriteBatch=this.spriteBatch,this.renderSession.stencilManager=this.stencilManager,this.renderSession.renderer=this,this.renderSession.resolution=this.resolution,this.initContext(),this.mapBlendModes()},d.WebGLRenderer.prototype.constructor=d.WebGLRenderer,d.WebGLRenderer.prototype.initContext=function(){var a=this.view.getContext("webgl",this._contextOptions)||this.view.getContext("experimental-webgl",this._contextOptions);if(this.gl=a,!a)throw new Error("This browser does not support webGL. Try using the canvas renderer");this.glContextId=a.id=d.WebGLRenderer.glContextId++,d.glContexts[this.glContextId]=a,d.instances[this.glContextId]=this,a.disable(a.DEPTH_TEST),a.disable(a.CULL_FACE),a.enable(a.BLEND),this.shaderManager.setContext(a),this.spriteBatch.setContext(a),this.maskManager.setContext(a),this.filterManager.setContext(a),this.blendModeManager.setContext(a),this.stencilManager.setContext(a),this.renderSession.gl=this.gl,this.resize(this.width,this.height)},d.WebGLRenderer.prototype.render=function(a){if(!this.contextLost){this.__stage!==a&&(a.interactive&&a.interactionManager.removeEvents(),this.__stage=a),a.updateTransform();var b=this.gl;a._interactive?a._interactiveEventsAdded||(a._interactiveEventsAdded=!0,a.interactionManager.setTarget(this)):a._interactiveEventsAdded&&(a._interactiveEventsAdded=!1,a.interactionManager.setTarget(this)),b.viewport(0,0,this.width,this.height),b.bindFramebuffer(b.FRAMEBUFFER,null),this.clearBeforeRender&&(this.transparent?b.clearColor(0,0,0,0):b.clearColor(a.backgroundColorSplit[0],a.backgroundColorSplit[1],a.backgroundColorSplit[2],1),b.clear(b.COLOR_BUFFER_BIT)),this.renderDisplayObject(a,this.projection)}},d.WebGLRenderer.prototype.renderDisplayObject=function(a,b,c){this.renderSession.blendModeManager.setBlendMode(d.blendModes.NORMAL),this.renderSession.drawCount=0,this.renderSession.flipY=c?-1:1,this.renderSession.projection=b,this.renderSession.offset=this.offset,this.spriteBatch.begin(this.renderSession),this.filterManager.begin(this.renderSession,c),a._renderWebGL(this.renderSession),this.spriteBatch.end()},d.WebGLRenderer.prototype.resize=function(a,b){this.width=a*this.resolution,this.height=b*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px"),this.gl.viewport(0,0,this.width,this.height),this.projection.x=this.width/2/this.resolution,this.projection.y=-this.height/2/this.resolution},d.WebGLRenderer.prototype.updateTexture=function(a){if(a.hasLoaded){var b=this.gl;return a._glTextures[b.id]||(a._glTextures[b.id]=b.createTexture()),b.bindTexture(b.TEXTURE_2D,a._glTextures[b.id]),b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultipliedAlpha),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,a.source),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,a.scaleMode===d.scaleModes.LINEAR?b.LINEAR:b.NEAREST),a.mipmap&&d.isPowerOfTwo(a.width,a.height)?(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,a.scaleMode===d.scaleModes.LINEAR?b.LINEAR_MIPMAP_LINEAR:b.NEAREST_MIPMAP_NEAREST),b.generateMipmap(b.TEXTURE_2D)):b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,a.scaleMode===d.scaleModes.LINEAR?b.LINEAR:b.NEAREST),a._powerOf2?(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.REPEAT),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.REPEAT)):(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE)),a._dirty[b.id]=!1,a._glTextures[b.id]}},d.WebGLRenderer.prototype.handleContextLost=function(a){a.preventDefault(),this.contextLost=!0},d.WebGLRenderer.prototype.handleContextRestored=function(){this.initContext();for(var a in d.TextureCache){var b=d.TextureCache[a].baseTexture;b._glTextures=[]}this.contextLost=!1},d.WebGLRenderer.prototype.destroy=function(){this.view.removeEventListener("webglcontextlost",this.contextLostBound),this.view.removeEventListener("webglcontextrestored",this.contextRestoredBound),d.glContexts[this.glContextId]=null,this.projection=null,this.offset=null,this.shaderManager.destroy(),this.spriteBatch.destroy(),this.maskManager.destroy(),this.filterManager.destroy(),this.shaderManager=null,this.spriteBatch=null,this.maskManager=null,this.filterManager=null,this.gl=null,this.renderSession=null},d.WebGLRenderer.prototype.mapBlendModes=function(){var a=this.gl;d.blendModesWebGL||(d.blendModesWebGL=[],d.blendModesWebGL[d.blendModes.NORMAL]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],d.blendModesWebGL[d.blendModes.ADD]=[a.SRC_ALPHA,a.DST_ALPHA],d.blendModesWebGL[d.blendModes.MULTIPLY]=[a.DST_COLOR,a.ONE_MINUS_SRC_ALPHA],d.blendModesWebGL[d.blendModes.SCREEN]=[a.SRC_ALPHA,a.ONE],d.blendModesWebGL[d.blendModes.OVERLAY]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],d.blendModesWebGL[d.blendModes.DARKEN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],d.blendModesWebGL[d.blendModes.LIGHTEN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],d.blendModesWebGL[d.blendModes.COLOR_DODGE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],d.blendModesWebGL[d.blendModes.COLOR_BURN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],d.blendModesWebGL[d.blendModes.HARD_LIGHT]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],d.blendModesWebGL[d.blendModes.SOFT_LIGHT]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],d.blendModesWebGL[d.blendModes.DIFFERENCE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],d.blendModesWebGL[d.blendModes.EXCLUSION]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],d.blendModesWebGL[d.blendModes.HUE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],d.blendModesWebGL[d.blendModes.SATURATION]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],d.blendModesWebGL[d.blendModes.COLOR]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],d.blendModesWebGL[d.blendModes.LUMINOSITY]=[a.ONE,a.ONE_MINUS_SRC_ALPHA])},d.WebGLRenderer.glContextId=0,d.WebGLBlendModeManager=function(){this.currentBlendMode=99999},d.WebGLBlendModeManager.prototype.constructor=d.WebGLBlendModeManager,d.WebGLBlendModeManager.prototype.setContext=function(a){this.gl=a},d.WebGLBlendModeManager.prototype.setBlendMode=function(a){if(this.currentBlendMode===a)return!1;this.currentBlendMode=a;var b=d.blendModesWebGL[this.currentBlendMode];return this.gl.blendFunc(b[0],b[1]),!0},d.WebGLBlendModeManager.prototype.destroy=function(){this.gl=null},d.WebGLMaskManager=function(){},d.WebGLMaskManager.prototype.constructor=d.WebGLMaskManager,d.WebGLMaskManager.prototype.setContext=function(a){this.gl=a},d.WebGLMaskManager.prototype.pushMask=function(a,b){var c=b.gl;a.dirty&&d.WebGLGraphics.updateGraphics(a,c),a._webGL[c.id].data.length&&b.stencilManager.pushStencil(a,a._webGL[c.id].data[0],b)},d.WebGLMaskManager.prototype.popMask=function(a,b){var c=this.gl;b.stencilManager.popStencil(a,a._webGL[c.id].data[0],b)},d.WebGLMaskManager.prototype.destroy=function(){this.gl=null},d.WebGLStencilManager=function(){this.stencilStack=[],this.reverse=!0,this.count=0},d.WebGLStencilManager.prototype.setContext=function(a){this.gl=a},d.WebGLStencilManager.prototype.pushStencil=function(a,b,c){var d=this.gl;this.bindGraphics(a,b,c),0===this.stencilStack.length&&(d.enable(d.STENCIL_TEST),d.clear(d.STENCIL_BUFFER_BIT),this.reverse=!0,this.count=0),this.stencilStack.push(b);var e=this.count;d.colorMask(!1,!1,!1,!1),d.stencilFunc(d.ALWAYS,0,255),d.stencilOp(d.KEEP,d.KEEP,d.INVERT),1===b.mode?(d.drawElements(d.TRIANGLE_FAN,b.indices.length-4,d.UNSIGNED_SHORT,0),this.reverse?(d.stencilFunc(d.EQUAL,255-e,255),d.stencilOp(d.KEEP,d.KEEP,d.DECR)):(d.stencilFunc(d.EQUAL,e,255),d.stencilOp(d.KEEP,d.KEEP,d.INCR)),d.drawElements(d.TRIANGLE_FAN,4,d.UNSIGNED_SHORT,2*(b.indices.length-4)),this.reverse?d.stencilFunc(d.EQUAL,255-(e+1),255):d.stencilFunc(d.EQUAL,e+1,255),this.reverse=!this.reverse):(this.reverse?(d.stencilFunc(d.EQUAL,e,255),d.stencilOp(d.KEEP,d.KEEP,d.INCR)):(d.stencilFunc(d.EQUAL,255-e,255),d.stencilOp(d.KEEP,d.KEEP,d.DECR)),d.drawElements(d.TRIANGLE_STRIP,b.indices.length,d.UNSIGNED_SHORT,0),this.reverse?d.stencilFunc(d.EQUAL,e+1,255):d.stencilFunc(d.EQUAL,255-(e+1),255)),d.colorMask(!0,!0,!0,!0),d.stencilOp(d.KEEP,d.KEEP,d.KEEP),this.count++},d.WebGLStencilManager.prototype.bindGraphics=function(a,b,c){this._currentGraphics=a;var e,f=this.gl,g=c.projection,h=c.offset;1===b.mode?(e=c.shaderManager.complexPrimitiveShader,c.shaderManager.setShader(e),f.uniform1f(e.flipY,c.flipY),f.uniformMatrix3fv(e.translationMatrix,!1,a.worldTransform.toArray(!0)),f.uniform2f(e.projectionVector,g.x,-g.y),f.uniform2f(e.offsetVector,-h.x,-h.y),f.uniform3fv(e.tintColor,d.hex2rgb(a.tint)),f.uniform3fv(e.color,b.color),f.uniform1f(e.alpha,a.worldAlpha*b.alpha),f.bindBuffer(f.ARRAY_BUFFER,b.buffer),f.vertexAttribPointer(e.aVertexPosition,2,f.FLOAT,!1,8,0),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,b.indexBuffer)):(e=c.shaderManager.primitiveShader,c.shaderManager.setShader(e),f.uniformMatrix3fv(e.translationMatrix,!1,a.worldTransform.toArray(!0)),f.uniform1f(e.flipY,c.flipY),f.uniform2f(e.projectionVector,g.x,-g.y),f.uniform2f(e.offsetVector,-h.x,-h.y),f.uniform3fv(e.tintColor,d.hex2rgb(a.tint)),f.uniform1f(e.alpha,a.worldAlpha),f.bindBuffer(f.ARRAY_BUFFER,b.buffer),f.vertexAttribPointer(e.aVertexPosition,2,f.FLOAT,!1,24,0),f.vertexAttribPointer(e.colorAttribute,4,f.FLOAT,!1,24,8),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,b.indexBuffer))},d.WebGLStencilManager.prototype.popStencil=function(a,b,c){var d=this.gl;if(this.stencilStack.pop(),this.count--,0===this.stencilStack.length)d.disable(d.STENCIL_TEST);else{var e=this.count;this.bindGraphics(a,b,c),d.colorMask(!1,!1,!1,!1),1===b.mode?(this.reverse=!this.reverse,this.reverse?(d.stencilFunc(d.EQUAL,255-(e+1),255),d.stencilOp(d.KEEP,d.KEEP,d.INCR)):(d.stencilFunc(d.EQUAL,e+1,255),d.stencilOp(d.KEEP,d.KEEP,d.DECR)),d.drawElements(d.TRIANGLE_FAN,4,d.UNSIGNED_SHORT,2*(b.indices.length-4)),d.stencilFunc(d.ALWAYS,0,255),d.stencilOp(d.KEEP,d.KEEP,d.INVERT),d.drawElements(d.TRIANGLE_FAN,b.indices.length-4,d.UNSIGNED_SHORT,0),this.reverse?d.stencilFunc(d.EQUAL,e,255):d.stencilFunc(d.EQUAL,255-e,255)):(this.reverse?(d.stencilFunc(d.EQUAL,e+1,255),d.stencilOp(d.KEEP,d.KEEP,d.DECR)):(d.stencilFunc(d.EQUAL,255-(e+1),255),d.stencilOp(d.KEEP,d.KEEP,d.INCR)),d.drawElements(d.TRIANGLE_STRIP,b.indices.length,d.UNSIGNED_SHORT,0),this.reverse?d.stencilFunc(d.EQUAL,e,255):d.stencilFunc(d.EQUAL,255-e,255)),d.colorMask(!0,!0,!0,!0),d.stencilOp(d.KEEP,d.KEEP,d.KEEP)}},d.WebGLStencilManager.prototype.destroy=function(){this.stencilStack=null,this.gl=null},d.WebGLShaderManager=function(){this.maxAttibs=10,this.attribState=[],this.tempAttribState=[];for(var a=0;a<this.maxAttibs;a++)this.attribState[a]=!1;this.stack=[]},d.WebGLShaderManager.prototype.constructor=d.WebGLShaderManager,d.WebGLShaderManager.prototype.setContext=function(a){this.gl=a,this.primitiveShader=new d.PrimitiveShader(a),this.complexPrimitiveShader=new d.ComplexPrimitiveShader(a),this.defaultShader=new d.PixiShader(a),this.fastShader=new d.PixiFastShader(a),this.stripShader=new d.StripShader(a),this.setShader(this.defaultShader)},d.WebGLShaderManager.prototype.setAttribs=function(a){var b;for(b=0;b<this.tempAttribState.length;b++)this.tempAttribState[b]=!1;for(b=0;b<a.length;b++){var c=a[b];this.tempAttribState[c]=!0}var d=this.gl;for(b=0;b<this.attribState.length;b++)this.attribState[b]!==this.tempAttribState[b]&&(this.attribState[b]=this.tempAttribState[b],this.tempAttribState[b]?d.enableVertexAttribArray(b):d.disableVertexAttribArray(b))},d.WebGLShaderManager.prototype.setShader=function(a){return this._currentId===a._UID?!1:(this._currentId=a._UID,this.currentShader=a,this.gl.useProgram(a.program),this.setAttribs(a.attributes),!0)},d.WebGLShaderManager.prototype.destroy=function(){this.attribState=null,this.tempAttribState=null,this.primitiveShader.destroy(),this.complexPrimitiveShader.destroy(),this.defaultShader.destroy(),this.fastShader.destroy(),this.stripShader.destroy(),this.gl=null},d.WebGLSpriteBatch=function(){this.vertSize=5,this.size=2e3;var a=4*this.size*4*this.vertSize,b=6*this.size;this.vertices=new d.ArrayBuffer(a),this.positions=new d.Float32Array(this.vertices),this.colors=new d.Uint32Array(this.vertices),this.indices=new d.Uint16Array(b),this.lastIndexCount=0;for(var c=0,e=0;b>c;c+=6,e+=4)this.indices[c+0]=e+0,this.indices[c+1]=e+1,this.indices[c+2]=e+2,this.indices[c+3]=e+0,this.indices[c+4]=e+2,this.indices[c+5]=e+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.dirty=!0,this.textures=[],this.blendModes=[],this.shaders=[],this.sprites=[],this.defaultShader=new d.AbstractFilter(["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"])},d.WebGLSpriteBatch.prototype.setContext=function(a){this.gl=a,this.vertexBuffer=a.createBuffer(),this.indexBuffer=a.createBuffer(),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer),a.bufferData(a.ELEMENT_ARRAY_BUFFER,this.indices,a.STATIC_DRAW),a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer),a.bufferData(a.ARRAY_BUFFER,this.vertices,a.DYNAMIC_DRAW),this.currentBlendMode=99999;var b=new d.PixiShader(a);b.fragmentSrc=this.defaultShader.fragmentSrc,b.uniforms={},b.init(),this.defaultShader.shaders[a.id]=b},d.WebGLSpriteBatch.prototype.begin=function(a){this.renderSession=a,this.shader=this.renderSession.shaderManager.defaultShader,this.start()},d.WebGLSpriteBatch.prototype.end=function(){this.flush()},d.WebGLSpriteBatch.prototype.render=function(a){var b=a.texture;this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=b.baseTexture);var c=b._uvs;if(c){var d,e,f,g,h=a.anchor.x,i=a.anchor.y;if(b.trim){var j=b.trim;e=j.x-h*j.width,d=e+b.crop.width,g=j.y-i*j.height,f=g+b.crop.height}else d=b.frame.width*(1-h),e=b.frame.width*-h,f=b.frame.height*(1-i),g=b.frame.height*-i;var k=4*this.currentBatchSize*this.vertSize,l=b.baseTexture.resolution,m=a.worldTransform,n=m.a/l,o=m.b/l,p=m.c/l,q=m.d/l,r=m.tx,s=m.ty,t=this.colors,u=this.positions;this.renderSession.roundPixels?(u[k]=n*e+p*g+r|0,u[k+1]=q*g+o*e+s|0,u[k+5]=n*d+p*g+r|0,u[k+6]=q*g+o*d+s|0,u[k+10]=n*d+p*f+r|0,u[k+11]=q*f+o*d+s|0,u[k+15]=n*e+p*f+r|0,u[k+16]=q*f+o*e+s|0):(u[k]=n*e+p*g+r,u[k+1]=q*g+o*e+s,u[k+5]=n*d+p*g+r,u[k+6]=q*g+o*d+s,u[k+10]=n*d+p*f+r,u[k+11]=q*f+o*d+s,u[k+15]=n*e+p*f+r,u[k+16]=q*f+o*e+s),u[k+2]=c.x0,u[k+3]=c.y0,u[k+7]=c.x1,u[k+8]=c.y1,u[k+12]=c.x2,u[k+13]=c.y2,u[k+17]=c.x3,u[k+18]=c.y3;var v=a.tint;t[k+4]=t[k+9]=t[k+14]=t[k+19]=(v>>16)+(65280&v)+((255&v)<<16)+(255*a.worldAlpha<<24),this.sprites[this.currentBatchSize++]=a}},d.WebGLSpriteBatch.prototype.renderTilingSprite=function(a){var b=a.tilingTexture;this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=b.baseTexture),a._uvs||(a._uvs=new d.TextureUvs);var c=a._uvs;a.tilePosition.x%=b.baseTexture.width*a.tileScaleOffset.x,a.tilePosition.y%=b.baseTexture.height*a.tileScaleOffset.y;var e=a.tilePosition.x/(b.baseTexture.width*a.tileScaleOffset.x),f=a.tilePosition.y/(b.baseTexture.height*a.tileScaleOffset.y),g=a.width/b.baseTexture.width/(a.tileScale.x*a.tileScaleOffset.x),h=a.height/b.baseTexture.height/(a.tileScale.y*a.tileScaleOffset.y);c.x0=0-e,c.y0=0-f,c.x1=1*g-e,c.y1=0-f,c.x2=1*g-e,c.y2=1*h-f,c.x3=0-e,c.y3=1*h-f;var i=a.tint,j=(i>>16)+(65280&i)+((255&i)<<16)+(255*a.alpha<<24),k=this.positions,l=this.colors,m=a.width,n=a.height,o=a.anchor.x,p=a.anchor.y,q=m*(1-o),r=m*-o,s=n*(1-p),t=n*-p,u=4*this.currentBatchSize*this.vertSize,v=b.baseTexture.resolution,w=a.worldTransform,x=w.a/v,y=w.b/v,z=w.c/v,A=w.d/v,B=w.tx,C=w.ty;k[u++]=x*r+z*t+B,k[u++]=A*t+y*r+C,k[u++]=c.x0,k[u++]=c.y0,l[u++]=j,k[u++]=x*q+z*t+B,k[u++]=A*t+y*q+C,k[u++]=c.x1,k[u++]=c.y1,l[u++]=j,k[u++]=x*q+z*s+B,k[u++]=A*s+y*q+C,k[u++]=c.x2,k[u++]=c.y2,l[u++]=j,k[u++]=x*r+z*s+B,k[u++]=A*s+y*r+C,k[u++]=c.x3,k[u++]=c.y3,l[u++]=j,this.sprites[this.currentBatchSize++]=a},d.WebGLSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var a,b=this.gl;if(this.dirty){this.dirty=!1,b.activeTexture(b.TEXTURE0),b.bindBuffer(b.ARRAY_BUFFER,this.vertexBuffer),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.indexBuffer),a=this.defaultShader.shaders[b.id];var c=4*this.vertSize;b.vertexAttribPointer(a.aVertexPosition,2,b.FLOAT,!1,c,0),b.vertexAttribPointer(a.aTextureCoord,2,b.FLOAT,!1,c,8),b.vertexAttribPointer(a.colorAttribute,4,b.UNSIGNED_BYTE,!0,c,16)}if(this.currentBatchSize>.5*this.size)b.bufferSubData(b.ARRAY_BUFFER,0,this.vertices);else{var e=this.positions.subarray(0,4*this.currentBatchSize*this.vertSize);b.bufferSubData(b.ARRAY_BUFFER,0,e)}for(var f,g,h,i,j=0,k=0,l=null,m=this.renderSession.blendModeManager.currentBlendMode,n=null,o=!1,p=!1,q=0,r=this.currentBatchSize;r>q;q++){if(i=this.sprites[q],f=i.texture.baseTexture,g=i.blendMode,h=i.shader||this.defaultShader,o=m!==g,p=n!==h,(l!==f||o||p)&&(this.renderBatch(l,j,k),k=q,j=0,l=f,o&&(m=g,this.renderSession.blendModeManager.setBlendMode(m)),p)){n=h,a=n.shaders[b.id],a||(a=new d.PixiShader(b),a.fragmentSrc=n.fragmentSrc,a.uniforms=n.uniforms,a.init(),n.shaders[b.id]=a),this.renderSession.shaderManager.setShader(a),a.dirty&&a.syncUniforms();var s=this.renderSession.projection;b.uniform2f(a.projectionVector,s.x,s.y);var t=this.renderSession.offset;b.uniform2f(a.offsetVector,t.x,t.y)}j++}this.renderBatch(l,j,k),this.currentBatchSize=0}},d.WebGLSpriteBatch.prototype.renderBatch=function(a,b,c){if(0!==b){var d=this.gl;a._dirty[d.id]?this.renderSession.renderer.updateTexture(a):d.bindTexture(d.TEXTURE_2D,a._glTextures[d.id]),d.drawElements(d.TRIANGLES,6*b,d.UNSIGNED_SHORT,6*c*2),this.renderSession.drawCount++}},d.WebGLSpriteBatch.prototype.stop=function(){this.flush(),this.dirty=!0},d.WebGLSpriteBatch.prototype.start=function(){this.dirty=!0},d.WebGLSpriteBatch.prototype.destroy=function(){this.vertices=null,this.indices=null,this.gl.deleteBuffer(this.vertexBuffer),this.gl.deleteBuffer(this.indexBuffer),this.currentBaseTexture=null,this.gl=null},d.WebGLFastSpriteBatch=function(a){this.vertSize=10,this.maxSize=6e3,this.size=this.maxSize;var b=4*this.size*this.vertSize,c=6*this.maxSize;this.vertices=new d.Float32Array(b),this.indices=new d.Uint16Array(c),this.vertexBuffer=null,this.indexBuffer=null,this.lastIndexCount=0;for(var e=0,f=0;c>e;e+=6,f+=4)this.indices[e+0]=f+0,this.indices[e+1]=f+1,this.indices[e+2]=f+2,this.indices[e+3]=f+0,this.indices[e+4]=f+2,this.indices[e+5]=f+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.currentBlendMode=0,this.renderSession=null,this.shader=null,this.matrix=null,this.setContext(a)},d.WebGLFastSpriteBatch.prototype.constructor=d.WebGLFastSpriteBatch,d.WebGLFastSpriteBatch.prototype.setContext=function(a){this.gl=a,this.vertexBuffer=a.createBuffer(),this.indexBuffer=a.createBuffer(),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer),a.bufferData(a.ELEMENT_ARRAY_BUFFER,this.indices,a.STATIC_DRAW),a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer),a.bufferData(a.ARRAY_BUFFER,this.vertices,a.DYNAMIC_DRAW)},d.WebGLFastSpriteBatch.prototype.begin=function(a,b){this.renderSession=b,this.shader=this.renderSession.shaderManager.fastShader,this.matrix=a.worldTransform.toArray(!0),this.start()},d.WebGLFastSpriteBatch.prototype.end=function(){this.flush()},d.WebGLFastSpriteBatch.prototype.render=function(a){var b=a.children,c=b[0];if(c.texture._uvs){this.currentBaseTexture=c.texture.baseTexture,c.blendMode!==this.renderSession.blendModeManager.currentBlendMode&&(this.flush(),this.renderSession.blendModeManager.setBlendMode(c.blendMode));for(var d=0,e=b.length;e>d;d++)this.renderSprite(b[d]);this.flush()}},d.WebGLFastSpriteBatch.prototype.renderSprite=function(a){if(a.visible&&(a.texture.baseTexture===this.currentBaseTexture||(this.flush(),this.currentBaseTexture=a.texture.baseTexture,a.texture._uvs))){var b,c,d,e,f,g,h,i,j=this.vertices;if(b=a.texture._uvs,c=a.texture.frame.width,d=a.texture.frame.height,a.texture.trim){var k=a.texture.trim;f=k.x-a.anchor.x*k.width,e=f+a.texture.crop.width,h=k.y-a.anchor.y*k.height,g=h+a.texture.crop.height}else e=a.texture.frame.width*(1-a.anchor.x),f=a.texture.frame.width*-a.anchor.x,g=a.texture.frame.height*(1-a.anchor.y),h=a.texture.frame.height*-a.anchor.y;i=4*this.currentBatchSize*this.vertSize,j[i++]=f,j[i++]=h,j[i++]=a.position.x,j[i++]=a.position.y,j[i++]=a.scale.x,j[i++]=a.scale.y,j[i++]=a.rotation,j[i++]=b.x0,j[i++]=b.y1,j[i++]=a.alpha,j[i++]=e,j[i++]=h,j[i++]=a.position.x,j[i++]=a.position.y,j[i++]=a.scale.x,j[i++]=a.scale.y,j[i++]=a.rotation,j[i++]=b.x1,j[i++]=b.y1,j[i++]=a.alpha,j[i++]=e,j[i++]=g,j[i++]=a.position.x,j[i++]=a.position.y,j[i++]=a.scale.x,j[i++]=a.scale.y,j[i++]=a.rotation,j[i++]=b.x2,j[i++]=b.y2,j[i++]=a.alpha,j[i++]=f,j[i++]=g,j[i++]=a.position.x,j[i++]=a.position.y,j[i++]=a.scale.x,j[i++]=a.scale.y,j[i++]=a.rotation,j[i++]=b.x3,j[i++]=b.y3,j[i++]=a.alpha,this.currentBatchSize++,this.currentBatchSize>=this.size&&this.flush()}},d.WebGLFastSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var a=this.gl;if(this.currentBaseTexture._glTextures[a.id]||this.renderSession.renderer.updateTexture(this.currentBaseTexture,a),a.bindTexture(a.TEXTURE_2D,this.currentBaseTexture._glTextures[a.id]),this.currentBatchSize>.5*this.size)a.bufferSubData(a.ARRAY_BUFFER,0,this.vertices);else{var b=this.vertices.subarray(0,4*this.currentBatchSize*this.vertSize);a.bufferSubData(a.ARRAY_BUFFER,0,b)}a.drawElements(a.TRIANGLES,6*this.currentBatchSize,a.UNSIGNED_SHORT,0),this.currentBatchSize=0,this.renderSession.drawCount++}},d.WebGLFastSpriteBatch.prototype.stop=function(){this.flush()},d.WebGLFastSpriteBatch.prototype.start=function(){var a=this.gl;a.activeTexture(a.TEXTURE0),a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var b=this.renderSession.projection;a.uniform2f(this.shader.projectionVector,b.x,b.y),a.uniformMatrix3fv(this.shader.uMatrix,!1,this.matrix);var c=4*this.vertSize;a.vertexAttribPointer(this.shader.aVertexPosition,2,a.FLOAT,!1,c,0),a.vertexAttribPointer(this.shader.aPositionCoord,2,a.FLOAT,!1,c,8),a.vertexAttribPointer(this.shader.aScale,2,a.FLOAT,!1,c,16),a.vertexAttribPointer(this.shader.aRotation,1,a.FLOAT,!1,c,24),a.vertexAttribPointer(this.shader.aTextureCoord,2,a.FLOAT,!1,c,28),a.vertexAttribPointer(this.shader.colorAttribute,1,a.FLOAT,!1,c,36)},d.WebGLFilterManager=function(){this.filterStack=[],this.offsetX=0,this.offsetY=0},d.WebGLFilterManager.prototype.constructor=d.WebGLFilterManager,d.WebGLFilterManager.prototype.setContext=function(a){this.gl=a,this.texturePool=[],this.initShaderBuffers()},d.WebGLFilterManager.prototype.begin=function(a,b){this.renderSession=a,this.defaultShader=a.shaderManager.defaultShader;var c=this.renderSession.projection;this.width=2*c.x,this.height=2*-c.y,this.buffer=b},d.WebGLFilterManager.prototype.pushFilter=function(a){var b=this.gl,c=this.renderSession.projection,e=this.renderSession.offset;a._filterArea=a.target.filterArea||a.target.getBounds(),this.filterStack.push(a);var f=a.filterPasses[0];this.offsetX+=a._filterArea.x,this.offsetY+=a._filterArea.y;var g=this.texturePool.pop();g?g.resize(this.width,this.height):g=new d.FilterTexture(this.gl,this.width,this.height),b.bindTexture(b.TEXTURE_2D,g.texture);var h=a._filterArea,i=f.padding;h.x-=i,h.y-=i,h.width+=2*i,h.height+=2*i,h.x<0&&(h.x=0),h.width>this.width&&(h.width=this.width),h.y<0&&(h.y=0),h.height>this.height&&(h.height=this.height),b.bindFramebuffer(b.FRAMEBUFFER,g.frameBuffer),b.viewport(0,0,h.width,h.height),c.x=h.width/2,c.y=-h.height/2,e.x=-h.x,e.y=-h.y,b.colorMask(!0,!0,!0,!0),b.clearColor(0,0,0,0),b.clear(b.COLOR_BUFFER_BIT),a._glFilterTexture=g},d.WebGLFilterManager.prototype.popFilter=function(){var a=this.gl,b=this.filterStack.pop(),c=b._filterArea,e=b._glFilterTexture,f=this.renderSession.projection,g=this.renderSession.offset;if(b.filterPasses.length>1){a.viewport(0,0,c.width,c.height),a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=0,this.vertexArray[1]=c.height,this.vertexArray[2]=c.width,this.vertexArray[3]=c.height,this.vertexArray[4]=0,this.vertexArray[5]=0,this.vertexArray[6]=c.width,this.vertexArray[7]=0,a.bufferSubData(a.ARRAY_BUFFER,0,this.vertexArray),a.bindBuffer(a.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=c.width/this.width,this.uvArray[5]=c.height/this.height,this.uvArray[6]=c.width/this.width,this.uvArray[7]=c.height/this.height,a.bufferSubData(a.ARRAY_BUFFER,0,this.uvArray);var h=e,i=this.texturePool.pop();i||(i=new d.FilterTexture(this.gl,this.width,this.height)),i.resize(this.width,this.height),a.bindFramebuffer(a.FRAMEBUFFER,i.frameBuffer),a.clear(a.COLOR_BUFFER_BIT),a.disable(a.BLEND);for(var j=0;j<b.filterPasses.length-1;j++){var k=b.filterPasses[j];a.bindFramebuffer(a.FRAMEBUFFER,i.frameBuffer),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,h.texture),this.applyFilterPass(k,c,c.width,c.height);var l=h;h=i,i=l}a.enable(a.BLEND),e=h,this.texturePool.push(i)}var m=b.filterPasses[b.filterPasses.length-1];this.offsetX-=c.x,this.offsetY-=c.y;var n=this.width,o=this.height,p=0,q=0,r=this.buffer;if(0===this.filterStack.length)a.colorMask(!0,!0,!0,!0);else{var s=this.filterStack[this.filterStack.length-1];c=s._filterArea,n=c.width,o=c.height,p=c.x,q=c.y,r=s._glFilterTexture.frameBuffer}f.x=n/2,f.y=-o/2,g.x=p,g.y=q,c=b._filterArea;var t=c.x-p,u=c.y-q;a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=t,this.vertexArray[1]=u+c.height,this.vertexArray[2]=t+c.width,this.vertexArray[3]=u+c.height,this.vertexArray[4]=t,this.vertexArray[5]=u,this.vertexArray[6]=t+c.width,this.vertexArray[7]=u,a.bufferSubData(a.ARRAY_BUFFER,0,this.vertexArray),a.bindBuffer(a.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=c.width/this.width,this.uvArray[5]=c.height/this.height,this.uvArray[6]=c.width/this.width,this.uvArray[7]=c.height/this.height,a.bufferSubData(a.ARRAY_BUFFER,0,this.uvArray),a.viewport(0,0,n,o),a.bindFramebuffer(a.FRAMEBUFFER,r),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,e.texture),this.applyFilterPass(m,c,n,o),this.texturePool.push(e),b._glFilterTexture=null},d.WebGLFilterManager.prototype.applyFilterPass=function(a,b,c,e){var f=this.gl,g=a.shaders[f.id];g||(g=new d.PixiShader(f),g.fragmentSrc=a.fragmentSrc,g.uniforms=a.uniforms,g.init(),a.shaders[f.id]=g),this.renderSession.shaderManager.setShader(g),f.uniform2f(g.projectionVector,c/2,-e/2),f.uniform2f(g.offsetVector,0,0),a.uniforms.dimensions&&(a.uniforms.dimensions.value[0]=this.width,a.uniforms.dimensions.value[1]=this.height,a.uniforms.dimensions.value[2]=this.vertexArray[0],a.uniforms.dimensions.value[3]=this.vertexArray[5]),g.syncUniforms(),f.bindBuffer(f.ARRAY_BUFFER,this.vertexBuffer),f.vertexAttribPointer(g.aVertexPosition,2,f.FLOAT,!1,0,0),f.bindBuffer(f.ARRAY_BUFFER,this.uvBuffer),f.vertexAttribPointer(g.aTextureCoord,2,f.FLOAT,!1,0,0),f.bindBuffer(f.ARRAY_BUFFER,this.colorBuffer),f.vertexAttribPointer(g.colorAttribute,2,f.FLOAT,!1,0,0),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,this.indexBuffer),f.drawElements(f.TRIANGLES,6,f.UNSIGNED_SHORT,0),this.renderSession.drawCount++},d.WebGLFilterManager.prototype.initShaderBuffers=function(){var a=this.gl;this.vertexBuffer=a.createBuffer(),this.uvBuffer=a.createBuffer(),this.colorBuffer=a.createBuffer(),this.indexBuffer=a.createBuffer(),this.vertexArray=new d.Float32Array([0,0,1,0,0,1,1,1]),a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer),a.bufferData(a.ARRAY_BUFFER,this.vertexArray,a.STATIC_DRAW),this.uvArray=new d.Float32Array([0,0,1,0,0,1,1,1]),a.bindBuffer(a.ARRAY_BUFFER,this.uvBuffer),a.bufferData(a.ARRAY_BUFFER,this.uvArray,a.STATIC_DRAW),this.colorArray=new d.Float32Array([1,16777215,1,16777215,1,16777215,1,16777215]),a.bindBuffer(a.ARRAY_BUFFER,this.colorBuffer),a.bufferData(a.ARRAY_BUFFER,this.colorArray,a.STATIC_DRAW),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer),a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,1,3,2]),a.STATIC_DRAW)},d.WebGLFilterManager.prototype.destroy=function(){var a=this.gl;this.filterStack=null,this.offsetX=0,this.offsetY=0;for(var b=0;b<this.texturePool.length;b++)this.texturePool[b].destroy();this.texturePool=null,a.deleteBuffer(this.vertexBuffer),a.deleteBuffer(this.uvBuffer),a.deleteBuffer(this.colorBuffer),a.deleteBuffer(this.indexBuffer)},d.FilterTexture=function(a,b,c,e){this.gl=a,this.frameBuffer=a.createFramebuffer(),this.texture=a.createTexture(),e=e||d.scaleModes.DEFAULT,a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,e===d.scaleModes.LINEAR?a.LINEAR:a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,e===d.scaleModes.LINEAR?a.LINEAR:a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.bindFramebuffer(a.FRAMEBUFFER,this.frameBuffer),a.bindFramebuffer(a.FRAMEBUFFER,this.frameBuffer),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,this.texture,0),this.renderBuffer=a.createRenderbuffer(),a.bindRenderbuffer(a.RENDERBUFFER,this.renderBuffer),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,this.renderBuffer),this.resize(b,c)
},d.FilterTexture.prototype.constructor=d.FilterTexture,d.FilterTexture.prototype.clear=function(){var a=this.gl;a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT)},d.FilterTexture.prototype.resize=function(a,b){if(this.width!==a||this.height!==b){this.width=a,this.height=b;var c=this.gl;c.bindTexture(c.TEXTURE_2D,this.texture),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,a,b,0,c.RGBA,c.UNSIGNED_BYTE,null),c.bindRenderbuffer(c.RENDERBUFFER,this.renderBuffer),c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_STENCIL,a,b)}},d.FilterTexture.prototype.destroy=function(){var a=this.gl;a.deleteFramebuffer(this.frameBuffer),a.deleteTexture(this.texture),this.frameBuffer=null,this.texture=null},d.CanvasBuffer=function(a,b){this.width=a,this.height=b,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=a,this.canvas.height=b},d.CanvasBuffer.prototype.constructor=d.CanvasBuffer,d.CanvasBuffer.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.width,this.height)},d.CanvasBuffer.prototype.resize=function(a,b){this.width=this.canvas.width=a,this.height=this.canvas.height=b},d.CanvasMaskManager=function(){},d.CanvasMaskManager.prototype.constructor=d.CanvasMaskManager,d.CanvasMaskManager.prototype.pushMask=function(a,b){var c=b.context;c.save();var e=a.alpha,f=a.worldTransform,g=b.resolution;c.setTransform(f.a*g,f.b*g,f.c*g,f.d*g,f.tx*g,f.ty*g),d.CanvasGraphics.renderGraphicsMask(a,c),c.clip(),a.worldAlpha=e},d.CanvasMaskManager.prototype.popMask=function(a){a.context.restore()},d.CanvasTinter=function(){},d.CanvasTinter.getTintedTexture=function(a,b){var c=a.texture;b=d.CanvasTinter.roundColor(b);var e="#"+("00000"+(0|b).toString(16)).substr(-6);if(c.tintCache=c.tintCache||{},c.tintCache[e])return c.tintCache[e];var f=d.CanvasTinter.canvas||document.createElement("canvas");if(d.CanvasTinter.tintMethod(c,b,f),d.CanvasTinter.convertTintToImage){var g=new Image;g.src=f.toDataURL(),c.tintCache[e]=g}else c.tintCache[e]=f,d.CanvasTinter.canvas=null;return f},d.CanvasTinter.tintWithMultiply=function(a,b,c){var d=c.getContext("2d"),e=a.crop;c.width=e.width,c.height=e.height,d.fillStyle="#"+("00000"+(0|b).toString(16)).substr(-6),d.fillRect(0,0,e.width,e.height),d.globalCompositeOperation="multiply",d.drawImage(a.baseTexture.source,e.x,e.y,e.width,e.height,0,0,e.width,e.height),d.globalCompositeOperation="destination-atop",d.drawImage(a.baseTexture.source,e.x,e.y,e.width,e.height,0,0,e.width,e.height)},d.CanvasTinter.tintWithOverlay=function(a,b,c){var d=c.getContext("2d"),e=a.crop;c.width=e.width,c.height=e.height,d.globalCompositeOperation="copy",d.fillStyle="#"+("00000"+(0|b).toString(16)).substr(-6),d.fillRect(0,0,e.width,e.height),d.globalCompositeOperation="destination-atop",d.drawImage(a.baseTexture.source,e.x,e.y,e.width,e.height,0,0,e.width,e.height)},d.CanvasTinter.tintWithPerPixel=function(a,b,c){var e=c.getContext("2d"),f=a.crop;c.width=f.width,c.height=f.height,e.globalCompositeOperation="copy",e.drawImage(a.baseTexture.source,f.x,f.y,f.width,f.height,0,0,f.width,f.height);for(var g=d.hex2rgb(b),h=g[0],i=g[1],j=g[2],k=e.getImageData(0,0,f.width,f.height),l=k.data,m=0;m<l.length;m+=4)l[m+0]*=h,l[m+1]*=i,l[m+2]*=j;e.putImageData(k,0,0)},d.CanvasTinter.roundColor=function(a){var b=d.CanvasTinter.cacheStepsPerColorChannel,c=d.hex2rgb(a);return c[0]=Math.min(255,c[0]/b*b),c[1]=Math.min(255,c[1]/b*b),c[2]=Math.min(255,c[2]/b*b),d.rgb2hex(c)},d.CanvasTinter.cacheStepsPerColorChannel=8,d.CanvasTinter.convertTintToImage=!1,d.CanvasTinter.canUseMultiply=d.canUseNewCanvasBlendModes(),d.CanvasTinter.tintMethod=d.CanvasTinter.canUseMultiply?d.CanvasTinter.tintWithMultiply:d.CanvasTinter.tintWithPerPixel,d.CanvasRenderer=function(a,b,c){if(c)for(var e in d.defaultRenderOptions)"undefined"==typeof c[e]&&(c[e]=d.defaultRenderOptions[e]);else c=d.defaultRenderOptions;d.defaultRenderer||(d.sayHello("Canvas"),d.defaultRenderer=this),this.type=d.CANVAS_RENDERER,this.resolution=c.resolution,this.clearBeforeRender=c.clearBeforeRender,this.transparent=c.transparent,this.autoResize=c.autoResize||!1,this.width=a||800,this.height=b||600,this.width*=this.resolution,this.height*=this.resolution,this.view=c.view||document.createElement("canvas"),this.context=this.view.getContext("2d",{alpha:this.transparent}),this.refresh=!0,this.view.width=this.width*this.resolution,this.view.height=this.height*this.resolution,this.count=0,this.maskManager=new d.CanvasMaskManager,this.renderSession={context:this.context,maskManager:this.maskManager,scaleMode:null,smoothProperty:null,roundPixels:!1},this.mapBlendModes(),this.resize(a,b),"imageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="imageSmoothingEnabled":"webkitImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="webkitImageSmoothingEnabled":"mozImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="mozImageSmoothingEnabled":"oImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="oImageSmoothingEnabled":"msImageSmoothingEnabled"in this.context&&(this.renderSession.smoothProperty="msImageSmoothingEnabled")},d.CanvasRenderer.prototype.constructor=d.CanvasRenderer,d.CanvasRenderer.prototype.render=function(a){a.updateTransform(),this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1,this.renderSession.currentBlendMode=d.blendModes.NORMAL,this.context.globalCompositeOperation=d.blendModesCanvas[d.blendModes.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(this.context.fillStyle="black",this.context.clear()),this.clearBeforeRender&&(this.transparent?this.context.clearRect(0,0,this.width,this.height):(this.context.fillStyle=a.backgroundColorString,this.context.fillRect(0,0,this.width,this.height))),this.renderDisplayObject(a),a.interactive&&(a._interactiveEventsAdded||(a._interactiveEventsAdded=!0,a.interactionManager.setTarget(this)))},d.CanvasRenderer.prototype.destroy=function(a){"undefined"==typeof a&&(a=!0),a&&this.view.parent&&this.view.parent.removeChild(this.view),this.view=null,this.context=null,this.maskManager=null,this.renderSession=null},d.CanvasRenderer.prototype.resize=function(a,b){this.width=a*this.resolution,this.height=b*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px")},d.CanvasRenderer.prototype.renderDisplayObject=function(a,b){this.renderSession.context=b||this.context,this.renderSession.resolution=this.resolution,a._renderCanvas(this.renderSession)},d.CanvasRenderer.prototype.mapBlendModes=function(){d.blendModesCanvas||(d.blendModesCanvas=[],d.canUseNewCanvasBlendModes()?(d.blendModesCanvas[d.blendModes.NORMAL]="source-over",d.blendModesCanvas[d.blendModes.ADD]="lighter",d.blendModesCanvas[d.blendModes.MULTIPLY]="multiply",d.blendModesCanvas[d.blendModes.SCREEN]="screen",d.blendModesCanvas[d.blendModes.OVERLAY]="overlay",d.blendModesCanvas[d.blendModes.DARKEN]="darken",d.blendModesCanvas[d.blendModes.LIGHTEN]="lighten",d.blendModesCanvas[d.blendModes.COLOR_DODGE]="color-dodge",d.blendModesCanvas[d.blendModes.COLOR_BURN]="color-burn",d.blendModesCanvas[d.blendModes.HARD_LIGHT]="hard-light",d.blendModesCanvas[d.blendModes.SOFT_LIGHT]="soft-light",d.blendModesCanvas[d.blendModes.DIFFERENCE]="difference",d.blendModesCanvas[d.blendModes.EXCLUSION]="exclusion",d.blendModesCanvas[d.blendModes.HUE]="hue",d.blendModesCanvas[d.blendModes.SATURATION]="saturation",d.blendModesCanvas[d.blendModes.COLOR]="color",d.blendModesCanvas[d.blendModes.LUMINOSITY]="luminosity"):(d.blendModesCanvas[d.blendModes.NORMAL]="source-over",d.blendModesCanvas[d.blendModes.ADD]="lighter",d.blendModesCanvas[d.blendModes.MULTIPLY]="source-over",d.blendModesCanvas[d.blendModes.SCREEN]="source-over",d.blendModesCanvas[d.blendModes.OVERLAY]="source-over",d.blendModesCanvas[d.blendModes.DARKEN]="source-over",d.blendModesCanvas[d.blendModes.LIGHTEN]="source-over",d.blendModesCanvas[d.blendModes.COLOR_DODGE]="source-over",d.blendModesCanvas[d.blendModes.COLOR_BURN]="source-over",d.blendModesCanvas[d.blendModes.HARD_LIGHT]="source-over",d.blendModesCanvas[d.blendModes.SOFT_LIGHT]="source-over",d.blendModesCanvas[d.blendModes.DIFFERENCE]="source-over",d.blendModesCanvas[d.blendModes.EXCLUSION]="source-over",d.blendModesCanvas[d.blendModes.HUE]="source-over",d.blendModesCanvas[d.blendModes.SATURATION]="source-over",d.blendModesCanvas[d.blendModes.COLOR]="source-over",d.blendModesCanvas[d.blendModes.LUMINOSITY]="source-over"))},d.CanvasGraphics=function(){},d.CanvasGraphics.renderGraphics=function(a,b){var c=a.worldAlpha;a.dirty&&(this.updateGraphicsTint(a),a.dirty=!1);for(var e=0;e<a.graphicsData.length;e++){var f=a.graphicsData[e],g=f.shape,h=f._fillTint,i=f._lineTint;if(b.lineWidth=f.lineWidth,f.type===d.Graphics.POLY){b.beginPath();var j=g.points;b.moveTo(j[0],j[1]);for(var k=1;k<j.length/2;k++)b.lineTo(j[2*k],j[2*k+1]);g.closed&&b.lineTo(j[0],j[1]),j[0]===j[j.length-2]&&j[1]===j[j.length-1]&&b.closePath(),f.fill&&(b.globalAlpha=f.fillAlpha*c,b.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),b.fill()),f.lineWidth&&(b.globalAlpha=f.lineAlpha*c,b.strokeStyle="#"+("00000"+(0|i).toString(16)).substr(-6),b.stroke())}else if(f.type===d.Graphics.RECT)(f.fillColor||0===f.fillColor)&&(b.globalAlpha=f.fillAlpha*c,b.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),b.fillRect(g.x,g.y,g.width,g.height)),f.lineWidth&&(b.globalAlpha=f.lineAlpha*c,b.strokeStyle="#"+("00000"+(0|i).toString(16)).substr(-6),b.strokeRect(g.x,g.y,g.width,g.height));else if(f.type===d.Graphics.CIRC)b.beginPath(),b.arc(g.x,g.y,g.radius,0,2*Math.PI),b.closePath(),f.fill&&(b.globalAlpha=f.fillAlpha*c,b.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),b.fill()),f.lineWidth&&(b.globalAlpha=f.lineAlpha*c,b.strokeStyle="#"+("00000"+(0|i).toString(16)).substr(-6),b.stroke());else if(f.type===d.Graphics.ELIP){var l=2*g.width,m=2*g.height,n=g.x-l/2,o=g.y-m/2;b.beginPath();var p=.5522848,q=l/2*p,r=m/2*p,s=n+l,t=o+m,u=n+l/2,v=o+m/2;b.moveTo(n,v),b.bezierCurveTo(n,v-r,u-q,o,u,o),b.bezierCurveTo(u+q,o,s,v-r,s,v),b.bezierCurveTo(s,v+r,u+q,t,u,t),b.bezierCurveTo(u-q,t,n,v+r,n,v),b.closePath(),f.fill&&(b.globalAlpha=f.fillAlpha*c,b.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),b.fill()),f.lineWidth&&(b.globalAlpha=f.lineAlpha*c,b.strokeStyle="#"+("00000"+(0|i).toString(16)).substr(-6),b.stroke())}else if(f.type===d.Graphics.RREC){var w=g.x,x=g.y,y=g.width,z=g.height,A=g.radius,B=Math.min(y,z)/2|0;A=A>B?B:A,b.beginPath(),b.moveTo(w,x+A),b.lineTo(w,x+z-A),b.quadraticCurveTo(w,x+z,w+A,x+z),b.lineTo(w+y-A,x+z),b.quadraticCurveTo(w+y,x+z,w+y,x+z-A),b.lineTo(w+y,x+A),b.quadraticCurveTo(w+y,x,w+y-A,x),b.lineTo(w+A,x),b.quadraticCurveTo(w,x,w,x+A),b.closePath(),(f.fillColor||0===f.fillColor)&&(b.globalAlpha=f.fillAlpha*c,b.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),b.fill()),f.lineWidth&&(b.globalAlpha=f.lineAlpha*c,b.strokeStyle="#"+("00000"+(0|i).toString(16)).substr(-6),b.stroke())}}},d.CanvasGraphics.renderGraphicsMask=function(a,b){var c=a.graphicsData.length;if(0!==c){c>1&&(c=1,window.console.log("Pixi.js warning: masks in canvas can only mask using the first path in the graphics object"));for(var e=0;1>e;e++){var f=a.graphicsData[e],g=f.shape;if(f.type===d.Graphics.POLY){b.beginPath();var h=g.points;b.moveTo(h[0],h[1]);for(var i=1;i<h.length/2;i++)b.lineTo(h[2*i],h[2*i+1]);h[0]===h[h.length-2]&&h[1]===h[h.length-1]&&b.closePath()}else if(f.type===d.Graphics.RECT)b.beginPath(),b.rect(g.x,g.y,g.width,g.height),b.closePath();else if(f.type===d.Graphics.CIRC)b.beginPath(),b.arc(g.x,g.y,g.radius,0,2*Math.PI),b.closePath();else if(f.type===d.Graphics.ELIP){var j=2*g.width,k=2*g.height,l=g.x-j/2,m=g.y-k/2;b.beginPath();var n=.5522848,o=j/2*n,p=k/2*n,q=l+j,r=m+k,s=l+j/2,t=m+k/2;b.moveTo(l,t),b.bezierCurveTo(l,t-p,s-o,m,s,m),b.bezierCurveTo(s+o,m,q,t-p,q,t),b.bezierCurveTo(q,t+p,s+o,r,s,r),b.bezierCurveTo(s-o,r,l,t+p,l,t),b.closePath()}else if(f.type===d.Graphics.RREC){var u=g.points,v=u[0],w=u[1],x=u[2],y=u[3],z=u[4],A=Math.min(x,y)/2|0;z=z>A?A:z,b.beginPath(),b.moveTo(v,w+z),b.lineTo(v,w+y-z),b.quadraticCurveTo(v,w+y,v+z,w+y),b.lineTo(v+x-z,w+y),b.quadraticCurveTo(v+x,w+y,v+x,w+y-z),b.lineTo(v+x,w+z),b.quadraticCurveTo(v+x,w,v+x-z,w),b.lineTo(v+z,w),b.quadraticCurveTo(v,w,v,w+z),b.closePath()}}}},d.CanvasGraphics.updateGraphicsTint=function(a){if(16777215!==a.tint)for(var b=(a.tint>>16&255)/255,c=(a.tint>>8&255)/255,d=(255&a.tint)/255,e=0;e<a.graphicsData.length;e++){var f=a.graphicsData[e],g=0|f.fillColor,h=0|f.lineColor;f._fillTint=((g>>16&255)/255*b*255<<16)+((g>>8&255)/255*c*255<<8)+(255&g)/255*d*255,f._lineTint=((h>>16&255)/255*b*255<<16)+((h>>8&255)/255*c*255<<8)+(255&h)/255*d*255}},d.Graphics=function(){d.DisplayObjectContainer.call(this),this.renderable=!0,this.fillAlpha=1,this.lineWidth=0,this.lineColor=0,this.graphicsData=[],this.tint=16777215,this.blendMode=d.blendModes.NORMAL,this.currentPath=null,this._webGL=[],this.isMask=!1,this.boundsPadding=0,this._localBounds=new d.Rectangle(0,0,1,1),this.dirty=!0,this.webGLDirty=!1,this.cachedSpriteDirty=!1},d.Graphics.prototype=Object.create(d.DisplayObjectContainer.prototype),d.Graphics.prototype.constructor=d.Graphics,Object.defineProperty(d.Graphics.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(a){this._cacheAsBitmap=a,this._cacheAsBitmap?this._generateCachedSprite():(this.destroyCachedSprite(),this.dirty=!0)}}),d.Graphics.prototype.lineStyle=function(a,b,c){if(this.lineWidth=a||0,this.lineColor=b||0,this.lineAlpha=arguments.length<3?1:c,this.currentPath){if(this.currentPath.shape.points.length)return this.drawShape(new d.Polygon(this.currentPath.shape.points.slice(-2))),this;this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha}return this},d.Graphics.prototype.moveTo=function(a,b){return this.drawShape(new d.Polygon([a,b])),this},d.Graphics.prototype.lineTo=function(a,b){return this.currentPath.shape.points.push(a,b),this.dirty=!0,this},d.Graphics.prototype.quadraticCurveTo=function(a,b,c,d){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var e,f,g=20,h=this.currentPath.shape.points;0===h.length&&this.moveTo(0,0);for(var i=h[h.length-2],j=h[h.length-1],k=0,l=1;g>=l;l++)k=l/g,e=i+(a-i)*k,f=j+(b-j)*k,h.push(e+(a+(c-a)*k-e)*k,f+(b+(d-b)*k-f)*k);return this.dirty=!0,this},d.Graphics.prototype.bezierCurveTo=function(a,b,c,d,e,f){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);for(var g,h,i,j,k,l=20,m=this.currentPath.shape.points,n=m[m.length-2],o=m[m.length-1],p=0,q=1;l>=q;q++)p=q/l,g=1-p,h=g*g,i=h*g,j=p*p,k=j*p,m.push(i*n+3*h*p*a+3*g*j*c+k*e,i*o+3*h*p*b+3*g*j*d+k*f);return this.dirty=!0,this},d.Graphics.prototype.arcTo=function(a,b,c,d,e){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(a,b):this.moveTo(a,b);var f=this.currentPath.shape.points,g=f[f.length-2],h=f[f.length-1],i=h-b,j=g-a,k=d-b,l=c-a,m=Math.abs(i*l-j*k);if(1e-8>m||0===e)(f[f.length-2]!==a||f[f.length-1]!==b)&&f.push(a,b);else{var n=i*i+j*j,o=k*k+l*l,p=i*k+j*l,q=e*Math.sqrt(n)/m,r=e*Math.sqrt(o)/m,s=q*p/n,t=r*p/o,u=q*l+r*j,v=q*k+r*i,w=j*(r+s),x=i*(r+s),y=l*(q+t),z=k*(q+t),A=Math.atan2(x-v,w-u),B=Math.atan2(z-v,y-u);this.arc(u+a,v+b,e,A,B,j*k>l*i)}return this.dirty=!0,this},d.Graphics.prototype.arc=function(a,b,c,d,e,f){var g,h=a+Math.cos(d)*c,i=b+Math.sin(d)*c;if(this.currentPath?(g=this.currentPath.shape.points,0===g.length?g.push(h,i):(g[g.length-2]!==h||g[g.length-1]!==i)&&g.push(h,i)):(this.moveTo(h,i),g=this.currentPath.shape.points),d===e)return this;!f&&d>=e?e+=2*Math.PI:f&&e>=d&&(d+=2*Math.PI);var j=f?-1*(d-e):e-d,k=Math.abs(j)/(2*Math.PI)*40;if(0===j)return this;for(var l=j/(2*k),m=2*l,n=Math.cos(l),o=Math.sin(l),p=k-1,q=p%1/p,r=0;p>=r;r++){var s=r+q*r,t=l+d+m*s,u=Math.cos(t),v=-Math.sin(t);g.push((n*u+o*v)*c+a,(n*-v+o*u)*c+b)}return this.dirty=!0,this},d.Graphics.prototype.beginFill=function(a,b){return this.filling=!0,this.fillColor=a||0,this.fillAlpha=void 0===b?1:b,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},d.Graphics.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},d.Graphics.prototype.drawRect=function(a,b,c,e){return this.drawShape(new d.Rectangle(a,b,c,e)),this},d.Graphics.prototype.drawRoundedRect=function(a,b,c,e,f){return this.drawShape(new d.RoundedRectangle(a,b,c,e,f)),this},d.Graphics.prototype.drawCircle=function(a,b,c){return this.drawShape(new d.Circle(a,b,c)),this},d.Graphics.prototype.drawEllipse=function(a,b,c,e){return this.drawShape(new d.Ellipse(a,b,c,e)),this},d.Graphics.prototype.drawPolygon=function(a){return a instanceof Array||(a=Array.prototype.slice.call(arguments)),this.drawShape(new d.Polygon(a)),this},d.Graphics.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this.dirty=!0,this.clearDirty=!0,this.graphicsData=[],this},d.Graphics.prototype.generateTexture=function(a,b){a=a||1;var c=this.getBounds(),e=new d.CanvasBuffer(c.width*a,c.height*a),f=d.Texture.fromCanvas(e.canvas,b);return f.baseTexture.resolution=a,e.context.scale(a,a),e.context.translate(-c.x,-c.y),d.CanvasGraphics.renderGraphics(this,e.context),f},d.Graphics.prototype._renderWebGL=function(a){if(this.visible!==!1&&0!==this.alpha&&this.isMask!==!0){if(this._cacheAsBitmap)return(this.dirty||this.cachedSpriteDirty)&&(this._generateCachedSprite(),this.updateCachedSpriteTexture(),this.cachedSpriteDirty=!1,this.dirty=!1),this._cachedSprite.worldAlpha=this.worldAlpha,void d.Sprite.prototype._renderWebGL.call(this._cachedSprite,a);if(a.spriteBatch.stop(),a.blendModeManager.setBlendMode(this.blendMode),this._mask&&a.maskManager.pushMask(this._mask,a),this._filters&&a.filterManager.pushFilter(this._filterBlock),this.blendMode!==a.spriteBatch.currentBlendMode){a.spriteBatch.currentBlendMode=this.blendMode;var b=d.blendModesWebGL[a.spriteBatch.currentBlendMode];a.spriteBatch.gl.blendFunc(b[0],b[1])}if(this.webGLDirty&&(this.dirty=!0,this.webGLDirty=!1),d.WebGLGraphics.renderGraphics(this,a),this.children.length){a.spriteBatch.start();for(var c=0,e=this.children.length;e>c;c++)this.children[c]._renderWebGL(a);a.spriteBatch.stop()}this._filters&&a.filterManager.popFilter(),this._mask&&a.maskManager.popMask(this.mask,a),a.drawCount++,a.spriteBatch.start()}},d.Graphics.prototype._renderCanvas=function(a){if(this.visible!==!1&&0!==this.alpha&&this.isMask!==!0){if(this._cacheAsBitmap)return(this.dirty||this.cachedSpriteDirty)&&(this._generateCachedSprite(),this.updateCachedSpriteTexture(),this.cachedSpriteDirty=!1,this.dirty=!1),this._cachedSprite.alpha=this.alpha,void d.Sprite.prototype._renderCanvas.call(this._cachedSprite,a);var b=a.context,c=this.worldTransform;this.blendMode!==a.currentBlendMode&&(a.currentBlendMode=this.blendMode,b.globalCompositeOperation=d.blendModesCanvas[a.currentBlendMode]),this._mask&&a.maskManager.pushMask(this._mask,a);var e=a.resolution;b.setTransform(c.a*e,c.b*e,c.c*e,c.d*e,c.tx*e,c.ty*e),d.CanvasGraphics.renderGraphics(this,b);for(var f=0,g=this.children.length;g>f;f++)this.children[f]._renderCanvas(a);this._mask&&a.maskManager.popMask(a)}},d.Graphics.prototype.getBounds=function(a){if(this.isMask)return d.EmptyRectangle;this.dirty&&(this.updateLocalBounds(),this.webGLDirty=!0,this.cachedSpriteDirty=!0,this.dirty=!1);var b=this._localBounds,c=b.x,e=b.width+b.x,f=b.y,g=b.height+b.y,h=a||this.worldTransform,i=h.a,j=h.b,k=h.c,l=h.d,m=h.tx,n=h.ty,o=i*e+k*g+m,p=l*g+j*e+n,q=i*c+k*g+m,r=l*g+j*c+n,s=i*c+k*f+m,t=l*f+j*c+n,u=i*e+k*f+m,v=l*f+j*e+n,w=o,x=p,y=o,z=p;return y=y>q?q:y,y=y>s?s:y,y=y>u?u:y,z=z>r?r:z,z=z>t?t:z,z=z>v?v:z,w=q>w?q:w,w=s>w?s:w,w=u>w?u:w,x=r>x?r:x,x=t>x?t:x,x=v>x?v:x,this._bounds.x=y,this._bounds.width=w-y,this._bounds.y=z,this._bounds.height=x-z,this._bounds},d.Graphics.prototype.updateLocalBounds=function(){var a=1/0,b=-1/0,c=1/0,e=-1/0;if(this.graphicsData.length)for(var f,g,h,i,j,k,l=0;l<this.graphicsData.length;l++){var m=this.graphicsData[l],n=m.type,o=m.lineWidth;if(f=m.shape,n===d.Graphics.RECT||n===d.Graphics.RREC)h=f.x-o/2,i=f.y-o/2,j=f.width+o,k=f.height+o,a=a>h?h:a,b=h+j>b?h+j:b,c=c>i?i:c,e=i+k>e?i+k:e;else if(n===d.Graphics.CIRC)h=f.x,i=f.y,j=f.radius+o/2,k=f.radius+o/2,a=a>h-j?h-j:a,b=h+j>b?h+j:b,c=c>i-k?i-k:c,e=i+k>e?i+k:e;else if(n===d.Graphics.ELIP)h=f.x,i=f.y,j=f.width+o/2,k=f.height+o/2,a=a>h-j?h-j:a,b=h+j>b?h+j:b,c=c>i-k?i-k:c,e=i+k>e?i+k:e;else{g=f.points;for(var p=0;p<g.length;p+=2)h=g[p],i=g[p+1],a=a>h-o?h-o:a,b=h+o>b?h+o:b,c=c>i-o?i-o:c,e=i+o>e?i+o:e}}else a=0,b=0,c=0,e=0;var q=this.boundsPadding;this._localBounds.x=a-q,this._localBounds.width=b-a+2*q,this._localBounds.y=c-q,this._localBounds.height=e-c+2*q},d.Graphics.prototype._generateCachedSprite=function(){var a=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.buffer.resize(a.width,a.height);else{var b=new d.CanvasBuffer(a.width,a.height),c=d.Texture.fromCanvas(b.canvas);this._cachedSprite=new d.Sprite(c),this._cachedSprite.buffer=b,this._cachedSprite.worldTransform=this.worldTransform}this._cachedSprite.anchor.x=-(a.x/a.width),this._cachedSprite.anchor.y=-(a.y/a.height),this._cachedSprite.buffer.context.translate(-a.x,-a.y),this.worldAlpha=1,d.CanvasGraphics.renderGraphics(this,this._cachedSprite.buffer.context),this._cachedSprite.alpha=this.alpha},d.Graphics.prototype.updateCachedSpriteTexture=function(){var a=this._cachedSprite,b=a.texture,c=a.buffer.canvas;b.baseTexture.width=c.width,b.baseTexture.height=c.height,b.crop.width=b.frame.width=c.width,b.crop.height=b.frame.height=c.height,a._width=c.width,a._height=c.height,b.baseTexture.dirty()},d.Graphics.prototype.destroyCachedSprite=function(){this._cachedSprite.texture.destroy(!0),this._cachedSprite=null},d.Graphics.prototype.drawShape=function(a){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var b=new d.GraphicsData(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,a);return this.graphicsData.push(b),b.type===d.Graphics.POLY&&(b.shape.closed=this.filling,this.currentPath=b),this.dirty=!0,b},d.GraphicsData=function(a,b,c,d,e,f,g){this.lineWidth=a,this.lineColor=b,this.lineAlpha=c,this._lineTint=b,this.fillColor=d,this.fillAlpha=e,this._fillTint=d,this.fill=f,this.shape=g,this.type=g.type},d.Graphics.POLY=0,d.Graphics.RECT=1,d.Graphics.CIRC=2,d.Graphics.ELIP=3,d.Graphics.RREC=4,d.Polygon.prototype.type=d.Graphics.POLY,d.Rectangle.prototype.type=d.Graphics.RECT,d.Circle.prototype.type=d.Graphics.CIRC,d.Ellipse.prototype.type=d.Graphics.ELIP,d.RoundedRectangle.prototype.type=d.Graphics.RREC,d.Strip=function(a){d.DisplayObjectContainer.call(this),this.texture=a,this.uvs=new d.Float32Array([0,1,1,1,1,0,0,1]),this.vertices=new d.Float32Array([0,0,100,0,100,100,0,100]),this.colors=new d.Float32Array([1,1,1,1]),this.indices=new d.Uint16Array([0,1,2,3]),this.dirty=!0,this.blendMode=d.blendModes.NORMAL,this.canvasPadding=0,this.drawMode=d.Strip.DrawModes.TRIANGLE_STRIP},d.Strip.prototype=Object.create(d.DisplayObjectContainer.prototype),d.Strip.prototype.constructor=d.Strip,d.Strip.prototype._renderWebGL=function(a){!this.visible||this.alpha<=0||(a.spriteBatch.stop(),this._vertexBuffer||this._initWebGL(a),a.shaderManager.setShader(a.shaderManager.stripShader),this._renderStrip(a),a.spriteBatch.start())},d.Strip.prototype._initWebGL=function(a){var b=a.gl;this._vertexBuffer=b.createBuffer(),this._indexBuffer=b.createBuffer(),this._uvBuffer=b.createBuffer(),this._colorBuffer=b.createBuffer(),b.bindBuffer(b.ARRAY_BUFFER,this._vertexBuffer),b.bufferData(b.ARRAY_BUFFER,this.vertices,b.DYNAMIC_DRAW),b.bindBuffer(b.ARRAY_BUFFER,this._uvBuffer),b.bufferData(b.ARRAY_BUFFER,this.uvs,b.STATIC_DRAW),b.bindBuffer(b.ARRAY_BUFFER,this._colorBuffer),b.bufferData(b.ARRAY_BUFFER,this.colors,b.STATIC_DRAW),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this._indexBuffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,this.indices,b.STATIC_DRAW)},d.Strip.prototype._renderStrip=function(a){var b=a.gl,c=a.projection,e=a.offset,f=a.shaderManager.stripShader,g=this.drawMode===d.Strip.DrawModes.TRIANGLE_STRIP?b.TRIANGLE_STRIP:b.TRIANGLES;a.blendModeManager.setBlendMode(this.blendMode),b.uniformMatrix3fv(f.translationMatrix,!1,this.worldTransform.toArray(!0)),b.uniform2f(f.projectionVector,c.x,-c.y),b.uniform2f(f.offsetVector,-e.x,-e.y),b.uniform1f(f.alpha,this.worldAlpha),this.dirty?(this.dirty=!1,b.bindBuffer(b.ARRAY_BUFFER,this._vertexBuffer),b.bufferData(b.ARRAY_BUFFER,this.vertices,b.STATIC_DRAW),b.vertexAttribPointer(f.aVertexPosition,2,b.FLOAT,!1,0,0),b.bindBuffer(b.ARRAY_BUFFER,this._uvBuffer),b.bufferData(b.ARRAY_BUFFER,this.uvs,b.STATIC_DRAW),b.vertexAttribPointer(f.aTextureCoord,2,b.FLOAT,!1,0,0),b.activeTexture(b.TEXTURE0),this.texture.baseTexture._dirty[b.id]?a.renderer.updateTexture(this.texture.baseTexture):b.bindTexture(b.TEXTURE_2D,this.texture.baseTexture._glTextures[b.id]),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this._indexBuffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,this.indices,b.STATIC_DRAW)):(b.bindBuffer(b.ARRAY_BUFFER,this._vertexBuffer),b.bufferSubData(b.ARRAY_BUFFER,0,this.vertices),b.vertexAttribPointer(f.aVertexPosition,2,b.FLOAT,!1,0,0),b.bindBuffer(b.ARRAY_BUFFER,this._uvBuffer),b.vertexAttribPointer(f.aTextureCoord,2,b.FLOAT,!1,0,0),b.activeTexture(b.TEXTURE0),this.texture.baseTexture._dirty[b.id]?a.renderer.updateTexture(this.texture.baseTexture):b.bindTexture(b.TEXTURE_2D,this.texture.baseTexture._glTextures[b.id]),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this._indexBuffer)),b.drawElements(g,this.indices.length,b.UNSIGNED_SHORT,0)},d.Strip.prototype._renderCanvas=function(a){var b=a.context,c=this.worldTransform;a.roundPixels?b.setTransform(c.a,c.b,c.c,c.d,0|c.tx,0|c.ty):b.setTransform(c.a,c.b,c.c,c.d,c.tx,c.ty),this.drawMode===d.Strip.DrawModes.TRIANGLE_STRIP?this._renderCanvasTriangleStrip(b):this._renderCanvasTriangles(b)},d.Strip.prototype._renderCanvasTriangleStrip=function(a){var b=this.vertices,c=this.uvs,d=b.length/2;this.count++;for(var e=0;d-2>e;e++){var f=2*e;this._renderCanvasDrawTriangle(a,b,c,f,f+2,f+4)}},d.Strip.prototype._renderCanvasTriangles=function(a){var b=this.vertices,c=this.uvs,d=this.indices,e=d.length;this.count++;for(var f=0;e>f;f+=3){var g=2*d[f],h=2*d[f+1],i=2*d[f+2];this._renderCanvasDrawTriangle(a,b,c,g,h,i)}},d.Strip.prototype._renderCanvasDrawTriangle=function(a,b,c,d,e,f){var g=this.texture.baseTexture.source,h=this.texture.width,i=this.texture.height,j=b[d],k=b[e],l=b[f],m=b[d+1],n=b[e+1],o=b[f+1],p=c[d]*h,q=c[e]*h,r=c[f]*h,s=c[d+1]*i,t=c[e+1]*i,u=c[f+1]*i;if(this.canvasPadding>0){var v=this.canvasPadding/this.worldTransform.a,w=this.canvasPadding/this.worldTransform.d,x=(j+k+l)/3,y=(m+n+o)/3,z=j-x,A=m-y,B=Math.sqrt(z*z+A*A);j=x+z/B*(B+v),m=y+A/B*(B+w),z=k-x,A=n-y,B=Math.sqrt(z*z+A*A),k=x+z/B*(B+v),n=y+A/B*(B+w),z=l-x,A=o-y,B=Math.sqrt(z*z+A*A),l=x+z/B*(B+v),o=y+A/B*(B+w)}a.save(),a.beginPath(),a.moveTo(j,m),a.lineTo(k,n),a.lineTo(l,o),a.closePath(),a.clip();var C=p*t+s*r+q*u-t*r-s*q-p*u,D=j*t+s*l+k*u-t*l-s*k-j*u,E=p*k+j*r+q*l-k*r-j*q-p*l,F=p*t*l+s*k*r+j*q*u-j*t*r-s*q*l-p*k*u,G=m*t+s*o+n*u-t*o-s*n-m*u,H=p*n+m*r+q*o-n*r-m*q-p*o,I=p*t*o+s*n*r+m*q*u-m*t*r-s*q*o-p*n*u;a.transform(D/C,G/C,E/C,H/C,F/C,I/C),a.drawImage(g,0,0),a.restore()},d.Strip.prototype.renderStripFlat=function(a){var b=this.context,c=a.vertices,d=c.length/2;this.count++,b.beginPath();for(var e=1;d-2>e;e++){var f=2*e,g=c[f],h=c[f+2],i=c[f+4],j=c[f+1],k=c[f+3],l=c[f+5];b.moveTo(g,j),b.lineTo(h,k),b.lineTo(i,l)}b.fillStyle="#FF0000",b.fill(),b.closePath()},d.Strip.prototype.onTextureUpdate=function(){this.updateFrame=!0},d.Strip.prototype.getBounds=function(a){for(var b=a||this.worldTransform,c=b.a,e=b.b,f=b.c,g=b.d,h=b.tx,i=b.ty,j=-1/0,k=-1/0,l=1/0,m=1/0,n=this.vertices,o=0,p=n.length;p>o;o+=2){var q=n[o],r=n[o+1],s=c*q+f*r+h,t=g*r+e*q+i;l=l>s?s:l,m=m>t?t:m,j=s>j?s:j,k=t>k?t:k}if(l===-1/0||1/0===k)return d.EmptyRectangle;var u=this._bounds;return u.x=l,u.width=j-l,u.y=m,u.height=k-m,this._currentBounds=u,u},d.Strip.DrawModes={TRIANGLE_STRIP:0,TRIANGLES:1},d.Rope=function(a,b){d.Strip.call(this,a),this.points=b,this.vertices=new d.Float32Array(4*b.length),this.uvs=new d.Float32Array(4*b.length),this.colors=new d.Float32Array(2*b.length),this.indices=new d.Uint16Array(2*b.length),this.refresh()},d.Rope.prototype=Object.create(d.Strip.prototype),d.Rope.prototype.constructor=d.Rope,d.Rope.prototype.refresh=function(){var a=this.points;if(!(a.length<1)){var b=this.uvs,c=a[0],d=this.indices,e=this.colors;this.count-=.2,b[0]=0,b[1]=0,b[2]=0,b[3]=1,e[0]=1,e[1]=1,d[0]=0,d[1]=1;for(var f,g,h,i=a.length,j=1;i>j;j++)f=a[j],g=4*j,h=j/(i-1),j%2?(b[g]=h,b[g+1]=0,b[g+2]=h,b[g+3]=1):(b[g]=h,b[g+1]=0,b[g+2]=h,b[g+3]=1),g=2*j,e[g]=1,e[g+1]=1,g=2*j,d[g]=g,d[g+1]=g+1,c=f}},d.Rope.prototype.updateTransform=function(){var a=this.points;if(!(a.length<1)){var b,c=a[0],e={x:0,y:0};this.count-=.2;for(var f,g,h,i,j,k=this.vertices,l=a.length,m=0;l>m;m++)f=a[m],g=4*m,b=m<a.length-1?a[m+1]:f,e.y=-(b.x-c.x),e.x=b.y-c.y,h=10*(1-m/(l-1)),h>1&&(h=1),i=Math.sqrt(e.x*e.x+e.y*e.y),j=this.texture.height/2,e.x/=i,e.y/=i,e.x*=j,e.y*=j,k[g]=f.x+e.x,k[g+1]=f.y+e.y,k[g+2]=f.x-e.x,k[g+3]=f.y-e.y,c=f;d.DisplayObjectContainer.prototype.updateTransform.call(this)}},d.Rope.prototype.setTexture=function(a){this.texture=a},d.TilingSprite=function(a,b,c){d.Sprite.call(this,a),this._width=b||100,this._height=c||100,this.tileScale=new d.Point(1,1),this.tileScaleOffset=new d.Point(1,1),this.tilePosition=new d.Point(0,0),this.renderable=!0,this.tint=16777215,this.blendMode=d.blendModes.NORMAL},d.TilingSprite.prototype=Object.create(d.Sprite.prototype),d.TilingSprite.prototype.constructor=d.TilingSprite,Object.defineProperty(d.TilingSprite.prototype,"width",{get:function(){return this._width},set:function(a){this._width=a}}),Object.defineProperty(d.TilingSprite.prototype,"height",{get:function(){return this._height},set:function(a){this._height=a}}),d.TilingSprite.prototype.setTexture=function(a){this.texture!==a&&(this.texture=a,this.refreshTexture=!0,this.cachedTint=16777215)},d.TilingSprite.prototype._renderWebGL=function(a){if(this.visible!==!1&&0!==this.alpha){var b,c;for(this._mask&&(a.spriteBatch.stop(),a.maskManager.pushMask(this.mask,a),a.spriteBatch.start()),this._filters&&(a.spriteBatch.flush(),a.filterManager.pushFilter(this._filterBlock)),!this.tilingTexture||this.refreshTexture?(this.generateTilingTexture(!0),this.tilingTexture&&this.tilingTexture.needsUpdate&&(a.renderer.updateTexture(this.tilingTexture.baseTexture),this.tilingTexture.needsUpdate=!1)):a.spriteBatch.renderTilingSprite(this),b=0,c=this.children.length;c>b;b++)this.children[b]._renderWebGL(a);a.spriteBatch.stop(),this._filters&&a.filterManager.popFilter(),this._mask&&a.maskManager.popMask(this._mask,a),a.spriteBatch.start()}},d.TilingSprite.prototype._renderCanvas=function(a){if(this.visible!==!1&&0!==this.alpha){var b=a.context;this._mask&&a.maskManager.pushMask(this._mask,b),b.globalAlpha=this.worldAlpha;var c,e,f=this.worldTransform,g=a.resolution;if(b.setTransform(f.a*g,f.b*g,f.c*g,f.d*g,f.tx*g,f.ty*g),!this.__tilePattern||this.refreshTexture){if(this.generateTilingTexture(!1),!this.tilingTexture)return;this.__tilePattern=b.createPattern(this.tilingTexture.baseTexture.source,"repeat")}this.blendMode!==a.currentBlendMode&&(a.currentBlendMode=this.blendMode,b.globalCompositeOperation=d.blendModesCanvas[a.currentBlendMode]);var h=this.tilePosition,i=this.tileScale;for(h.x%=this.tilingTexture.baseTexture.width,h.y%=this.tilingTexture.baseTexture.height,b.scale(i.x,i.y),b.translate(h.x+this.anchor.x*-this._width,h.y+this.anchor.y*-this._height),b.fillStyle=this.__tilePattern,b.fillRect(-h.x,-h.y,this._width/i.x,this._height/i.y),b.scale(1/i.x,1/i.y),b.translate(-h.x+this.anchor.x*this._width,-h.y+this.anchor.y*this._height),this._mask&&a.maskManager.popMask(a.context),c=0,e=this.children.length;e>c;c++)this.children[c]._renderCanvas(a)
}},d.TilingSprite.prototype.getBounds=function(){var a=this._width,b=this._height,c=a*(1-this.anchor.x),d=a*-this.anchor.x,e=b*(1-this.anchor.y),f=b*-this.anchor.y,g=this.worldTransform,h=g.a,i=g.b,j=g.c,k=g.d,l=g.tx,m=g.ty,n=h*d+j*f+l,o=k*f+i*d+m,p=h*c+j*f+l,q=k*f+i*c+m,r=h*c+j*e+l,s=k*e+i*c+m,t=h*d+j*e+l,u=k*e+i*d+m,v=-1/0,w=-1/0,x=1/0,y=1/0;x=x>n?n:x,x=x>p?p:x,x=x>r?r:x,x=x>t?t:x,y=y>o?o:y,y=y>q?q:y,y=y>s?s:y,y=y>u?u:y,v=n>v?n:v,v=p>v?p:v,v=r>v?r:v,v=t>v?t:v,w=o>w?o:w,w=q>w?q:w,w=s>w?s:w,w=u>w?u:w;var z=this._bounds;return z.x=x,z.width=v-x,z.y=y,z.height=w-y,this._currentBounds=z,z},d.TilingSprite.prototype.onTextureUpdate=function(){},d.TilingSprite.prototype.generateTilingTexture=function(a){if(this.texture.baseTexture.hasLoaded){var b,c,e=this.originalTexture||this.texture,f=e.frame,g=f.width!==e.baseTexture.width||f.height!==e.baseTexture.height,h=!1;if(a?(b=d.getNextPowerOfTwo(f.width),c=d.getNextPowerOfTwo(f.height),(f.width!==b||f.height!==c||e.baseTexture.width!==b||e.baseTexture.height||c)&&(h=!0)):g&&(b=f.width,c=f.height,h=!0),h){var i;this.tilingTexture&&this.tilingTexture.isTiling?(i=this.tilingTexture.canvasBuffer,i.resize(b,c),this.tilingTexture.baseTexture.width=b,this.tilingTexture.baseTexture.height=c,this.tilingTexture.needsUpdate=!0):(i=new d.CanvasBuffer(b,c),this.tilingTexture=d.Texture.fromCanvas(i.canvas),this.tilingTexture.canvasBuffer=i,this.tilingTexture.isTiling=!0),i.context.drawImage(e.baseTexture.source,e.crop.x,e.crop.y,e.crop.width,e.crop.height,0,0,b,c),this.tileScaleOffset.x=f.width/b,this.tileScaleOffset.y=f.height/c}else this.tilingTexture&&this.tilingTexture.isTiling&&this.tilingTexture.destroy(!0),this.tileScaleOffset.x=1,this.tileScaleOffset.y=1,this.tilingTexture=e;this.refreshTexture=!1,this.originalTexture=this.texture,this.texture=this.tilingTexture,this.tilingTexture.baseTexture._powerOf2=!0}},d.TilingSprite.prototype.destroy=function(){d.Sprite.prototype.destroy.call(this),this.tileScale=null,this.tileScaleOffset=null,this.tilePosition=null,this.tilingTexture.destroy(!0),this.tilingTexture=null};var e={radDeg:180/Math.PI,degRad:Math.PI/180,temp:[],Float32Array:"undefined"==typeof Float32Array?Array:Float32Array,Uint16Array:"undefined"==typeof Uint16Array?Array:Uint16Array};e.BoneData=function(a,b){this.name=a,this.parent=b},e.BoneData.prototype={length:0,x:0,y:0,rotation:0,scaleX:1,scaleY:1,inheritScale:!0,inheritRotation:!0,flipX:!1,flipY:!1},e.SlotData=function(a,b){this.name=a,this.boneData=b},e.SlotData.prototype={r:1,g:1,b:1,a:1,attachmentName:null,additiveBlending:!1},e.IkConstraintData=function(a){this.name=a,this.bones=[]},e.IkConstraintData.prototype={target:null,bendDirection:1,mix:1},e.Bone=function(a,b,c){this.data=a,this.skeleton=b,this.parent=c,this.setToSetupPose()},e.Bone.yDown=!1,e.Bone.prototype={x:0,y:0,rotation:0,rotationIK:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,m00:0,m01:0,worldX:0,m10:0,m11:0,worldY:0,worldRotation:0,worldScaleX:1,worldScaleY:1,worldFlipX:!1,worldFlipY:!1,updateWorldTransform:function(){var a=this.parent;if(a)this.worldX=this.x*a.m00+this.y*a.m01+a.worldX,this.worldY=this.x*a.m10+this.y*a.m11+a.worldY,this.data.inheritScale?(this.worldScaleX=a.worldScaleX*this.scaleX,this.worldScaleY=a.worldScaleY*this.scaleY):(this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY),this.worldRotation=this.data.inheritRotation?a.worldRotation+this.rotationIK:this.rotationIK,this.worldFlipX=a.worldFlipX!=this.flipX,this.worldFlipY=a.worldFlipY!=this.flipY;else{var b=this.skeleton.flipX,c=this.skeleton.flipY;this.worldX=b?-this.x:this.x,this.worldY=c!=e.Bone.yDown?-this.y:this.y,this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY,this.worldRotation=this.rotationIK,this.worldFlipX=b!=this.flipX,this.worldFlipY=c!=this.flipY}var d=this.worldRotation*e.degRad,f=Math.cos(d),g=Math.sin(d);this.worldFlipX?(this.m00=-f*this.worldScaleX,this.m01=g*this.worldScaleY):(this.m00=f*this.worldScaleX,this.m01=-g*this.worldScaleY),this.worldFlipY!=e.Bone.yDown?(this.m10=-g*this.worldScaleX,this.m11=-f*this.worldScaleY):(this.m10=g*this.worldScaleX,this.m11=f*this.worldScaleY)},setToSetupPose:function(){var a=this.data;this.x=a.x,this.y=a.y,this.rotation=a.rotation,this.rotationIK=this.rotation,this.scaleX=a.scaleX,this.scaleY=a.scaleY,this.flipX=a.flipX,this.flipY=a.flipY},worldToLocal:function(a){var b=a[0]-this.worldX,c=a[1]-this.worldY,d=this.m00,f=this.m10,g=this.m01,h=this.m11;this.worldFlipX!=(this.worldFlipY!=e.Bone.yDown)&&(d=-d,h=-h);var i=1/(d*h-g*f);a[0]=b*d*i-c*g*i,a[1]=c*h*i-b*f*i},localToWorld:function(a){var b=a[0],c=a[1];a[0]=b*this.m00+c*this.m01+this.worldX,a[1]=b*this.m10+c*this.m11+this.worldY}},e.Slot=function(a,b){this.data=a,this.bone=b,this.setToSetupPose()},e.Slot.prototype={r:1,g:1,b:1,a:1,_attachmentTime:0,attachment:null,attachmentVertices:[],setAttachment:function(a){this.attachment=a,this._attachmentTime=this.bone.skeleton.time,this.attachmentVertices.length=0},setAttachmentTime:function(a){this._attachmentTime=this.bone.skeleton.time-a},getAttachmentTime:function(){return this.bone.skeleton.time-this._attachmentTime},setToSetupPose:function(){var a=this.data;this.r=a.r,this.g=a.g,this.b=a.b,this.a=a.a;for(var b=this.bone.skeleton.data.slots,c=0,d=b.length;d>c;c++)if(b[c]==a){this.setAttachment(a.attachmentName?this.bone.skeleton.getAttachmentBySlotIndex(c,a.attachmentName):null);break}}},e.IkConstraint=function(a,b){this.data=a,this.mix=a.mix,this.bendDirection=a.bendDirection,this.bones=[];for(var c=0,d=a.bones.length;d>c;c++)this.bones.push(b.findBone(a.bones[c].name));this.target=b.findBone(a.target.name)},e.IkConstraint.prototype={apply:function(){var a=this.target,b=this.bones;switch(b.length){case 1:e.IkConstraint.apply1(b[0],a.worldX,a.worldY,this.mix);break;case 2:e.IkConstraint.apply2(b[0],b[1],a.worldX,a.worldY,this.bendDirection,this.mix)}}},e.IkConstraint.apply1=function(a,b,c,d){var f=a.data.inheritRotation&&a.parent?a.parent.worldRotation:0,g=a.rotation,h=Math.atan2(c-a.worldY,b-a.worldX)*e.radDeg-f;a.rotationIK=g+(h-g)*d},e.IkConstraint.apply2=function(a,b,c,d,f,g){var h=b.rotation,i=a.rotation;if(!g)return b.rotationIK=h,void(a.rotationIK=i);var j,k,l=e.temp,m=a.parent;m?(l[0]=c,l[1]=d,m.worldToLocal(l),c=(l[0]-a.x)*m.worldScaleX,d=(l[1]-a.y)*m.worldScaleY):(c-=a.x,d-=a.y),b.parent==a?(j=b.x,k=b.y):(l[0]=b.x,l[1]=b.y,b.parent.localToWorld(l),a.worldToLocal(l),j=l[0],k=l[1]);var n=j*a.worldScaleX,o=k*a.worldScaleY,p=Math.atan2(o,n),q=Math.sqrt(n*n+o*o),r=b.data.length*b.worldScaleX,s=2*q*r;if(1e-4>s)return void(b.rotationIK=h+(Math.atan2(d,c)*e.radDeg-i-h)*g);var t=(c*c+d*d-q*q-r*r)/s;-1>t?t=-1:t>1&&(t=1);var u=Math.acos(t)*f,v=q+r*t,w=r*Math.sin(u),x=Math.atan2(d*v-c*w,c*v+d*w),y=(x-p)*e.radDeg-i;y>180?y-=360:-180>y&&(y+=360),a.rotationIK=i+y*g,y=(u+p)*e.radDeg-h,y>180?y-=360:-180>y&&(y+=360),b.rotationIK=h+(y+a.worldRotation-b.parent.worldRotation)*g},e.Skin=function(a){this.name=a,this.attachments={}},e.Skin.prototype={addAttachment:function(a,b,c){this.attachments[a+":"+b]=c},getAttachment:function(a,b){return this.attachments[a+":"+b]},_attachAll:function(a,b){for(var c in b.attachments){var d=c.indexOf(":"),e=parseInt(c.substring(0,d)),f=c.substring(d+1),g=a.slots[e];if(g.attachment&&g.attachment.name==f){var h=this.getAttachment(e,f);h&&g.setAttachment(h)}}}},e.Animation=function(a,b,c){this.name=a,this.timelines=b,this.duration=c},e.Animation.prototype={apply:function(a,b,c,d,e){d&&0!=this.duration&&(c%=this.duration,b%=this.duration);for(var f=this.timelines,g=0,h=f.length;h>g;g++)f[g].apply(a,b,c,e,1)},mix:function(a,b,c,d,e,f){d&&0!=this.duration&&(c%=this.duration,b%=this.duration);for(var g=this.timelines,h=0,i=g.length;i>h;h++)g[h].apply(a,b,c,e,f)}},e.Animation.binarySearch=function(a,b,c){var d=0,e=Math.floor(a.length/c)-2;if(!e)return c;for(var f=e>>>1;;){if(a[(f+1)*c]<=b?d=f+1:e=f,d==e)return(d+1)*c;f=d+e>>>1}},e.Animation.binarySearch1=function(a,b){var c=0,d=a.length-2;if(!d)return 1;for(var e=d>>>1;;){if(a[e+1]<=b?c=e+1:d=e,c==d)return c+1;e=c+d>>>1}},e.Animation.linearSearch=function(a,b,c){for(var d=0,e=a.length-c;e>=d;d+=c)if(a[d]>b)return d;return-1},e.Curves=function(){this.curves=[]},e.Curves.prototype={setLinear:function(a){this.curves[19*a]=0},setStepped:function(a){this.curves[19*a]=1},setCurve:function(a,b,c,d,e){var f=.1,g=f*f,h=g*f,i=3*f,j=3*g,k=6*g,l=6*h,m=2*-b+d,n=2*-c+e,o=3*(b-d)+1,p=3*(c-e)+1,q=b*i+m*j+o*h,r=c*i+n*j+p*h,s=m*k+o*l,t=n*k+p*l,u=o*l,v=p*l,w=19*a,x=this.curves;x[w++]=2;for(var y=q,z=r,A=w+19-1;A>w;w+=2)x[w]=y,x[w+1]=z,q+=s,r+=t,s+=u,t+=v,y+=q,z+=r},getCurvePercent:function(a,b){b=0>b?0:b>1?1:b;var c=this.curves,d=19*a,e=c[d];if(0===e)return b;if(1==e)return 0;d++;for(var f=0,g=d,h=d+19-1;h>d;d+=2)if(f=c[d],f>=b){var i,j;return d==g?(i=0,j=0):(i=c[d-2],j=c[d-1]),j+(c[d+1]-j)*(b-i)/(f-i)}var k=c[d-1];return k+(1-k)*(b-f)/(1-f)}},e.RotateTimeline=function(a){this.curves=new e.Curves(a),this.frames=[],this.frames.length=2*a},e.RotateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(a,b,c){a*=2,this.frames[a]=b,this.frames[a+1]=c},apply:function(a,b,c,d,f){var g=this.frames;if(!(c<g[0])){var h=a.bones[this.boneIndex];if(c>=g[g.length-2]){for(var i=h.data.rotation+g[g.length-1]-h.rotation;i>180;)i-=360;for(;-180>i;)i+=360;return void(h.rotation+=i*f)}var j=e.Animation.binarySearch(g,c,2),k=g[j-1],l=g[j],m=1-(c-l)/(g[j-2]-l);m=this.curves.getCurvePercent(j/2-1,m);for(var i=g[j+1]-k;i>180;)i-=360;for(;-180>i;)i+=360;for(i=h.data.rotation+(k+i*m)-h.rotation;i>180;)i-=360;for(;-180>i;)i+=360;h.rotation+=i*f}}},e.TranslateTimeline=function(a){this.curves=new e.Curves(a),this.frames=[],this.frames.length=3*a},e.TranslateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(a,b,c,d){a*=3,this.frames[a]=b,this.frames[a+1]=c,this.frames[a+2]=d},apply:function(a,b,c,d,f){var g=this.frames;if(!(c<g[0])){var h=a.bones[this.boneIndex];if(c>=g[g.length-3])return h.x+=(h.data.x+g[g.length-2]-h.x)*f,void(h.y+=(h.data.y+g[g.length-1]-h.y)*f);var i=e.Animation.binarySearch(g,c,3),j=g[i-2],k=g[i-1],l=g[i],m=1-(c-l)/(g[i+-3]-l);m=this.curves.getCurvePercent(i/3-1,m),h.x+=(h.data.x+j+(g[i+1]-j)*m-h.x)*f,h.y+=(h.data.y+k+(g[i+2]-k)*m-h.y)*f}}},e.ScaleTimeline=function(a){this.curves=new e.Curves(a),this.frames=[],this.frames.length=3*a},e.ScaleTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(a,b,c,d){a*=3,this.frames[a]=b,this.frames[a+1]=c,this.frames[a+2]=d},apply:function(a,b,c,d,f){var g=this.frames;if(!(c<g[0])){var h=a.bones[this.boneIndex];if(c>=g[g.length-3])return h.scaleX+=(h.data.scaleX*g[g.length-2]-h.scaleX)*f,void(h.scaleY+=(h.data.scaleY*g[g.length-1]-h.scaleY)*f);var i=e.Animation.binarySearch(g,c,3),j=g[i-2],k=g[i-1],l=g[i],m=1-(c-l)/(g[i+-3]-l);m=this.curves.getCurvePercent(i/3-1,m),h.scaleX+=(h.data.scaleX*(j+(g[i+1]-j)*m)-h.scaleX)*f,h.scaleY+=(h.data.scaleY*(k+(g[i+2]-k)*m)-h.scaleY)*f}}},e.ColorTimeline=function(a){this.curves=new e.Curves(a),this.frames=[],this.frames.length=5*a},e.ColorTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length/5},setFrame:function(a,b,c,d,e,f){a*=5,this.frames[a]=b,this.frames[a+1]=c,this.frames[a+2]=d,this.frames[a+3]=e,this.frames[a+4]=f},apply:function(a,b,c,d,f){var g=this.frames;if(!(c<g[0])){var h,i,j,k;if(c>=g[g.length-5]){var l=g.length-1;h=g[l-3],i=g[l-2],j=g[l-1],k=g[l]}else{var m=e.Animation.binarySearch(g,c,5),n=g[m-4],o=g[m-3],p=g[m-2],q=g[m-1],r=g[m],s=1-(c-r)/(g[m-5]-r);s=this.curves.getCurvePercent(m/5-1,s),h=n+(g[m+1]-n)*s,i=o+(g[m+2]-o)*s,j=p+(g[m+3]-p)*s,k=q+(g[m+4]-q)*s}var t=a.slots[this.slotIndex];1>f?(t.r+=(h-t.r)*f,t.g+=(i-t.g)*f,t.b+=(j-t.b)*f,t.a+=(k-t.a)*f):(t.r=h,t.g=i,t.b=j,t.a=k)}}},e.AttachmentTimeline=function(a){this.curves=new e.Curves(a),this.frames=[],this.frames.length=a,this.attachmentNames=[],this.attachmentNames.length=a},e.AttachmentTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length},setFrame:function(a,b,c){this.frames[a]=b,this.attachmentNames[a]=c},apply:function(a,b,c){var d=this.frames;if(c<d[0])return void(b>c&&this.apply(a,b,Number.MAX_VALUE,null,0));b>c&&(b=-1);var f=c>=d[d.length-1]?d.length-1:e.Animation.binarySearch1(d,c)-1;if(!(d[f]<b)){var g=this.attachmentNames[f];a.slots[this.slotIndex].setAttachment(g?a.getAttachmentBySlotIndex(this.slotIndex,g):null)}}},e.EventTimeline=function(a){this.frames=[],this.frames.length=a,this.events=[],this.events.length=a},e.EventTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(a,b,c){this.frames[a]=b,this.events[a]=c},apply:function(a,b,c,d,f){if(d){var g=this.frames,h=g.length;if(b>c)this.apply(a,b,Number.MAX_VALUE,d,f),b=-1;else if(b>=g[h-1])return;if(!(c<g[0])){var i;if(b<g[0])i=0;else{i=e.Animation.binarySearch1(g,b);for(var j=g[i];i>0&&g[i-1]==j;)i--}for(var k=this.events;h>i&&c>=g[i];i++)d.push(k[i])}}}},e.DrawOrderTimeline=function(a){this.frames=[],this.frames.length=a,this.drawOrders=[],this.drawOrders.length=a},e.DrawOrderTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(a,b,c){this.frames[a]=b,this.drawOrders[a]=c},apply:function(a,b,c){var d=this.frames;if(!(c<d[0])){var f;f=c>=d[d.length-1]?d.length-1:e.Animation.binarySearch1(d,c)-1;var g=a.drawOrder,h=a.slots,i=this.drawOrders[f];if(i)for(var j=0,k=i.length;k>j;j++)g[j]=a.slots[i[j]];else for(var j=0,k=h.length;k>j;j++)g[j]=h[j]}}},e.FfdTimeline=function(a){this.curves=new e.Curves(a),this.frames=[],this.frames.length=a,this.frameVertices=[],this.frameVertices.length=a},e.FfdTimeline.prototype={slotIndex:0,attachment:0,getFrameCount:function(){return this.frames.length},setFrame:function(a,b,c){this.frames[a]=b,this.frameVertices[a]=c},apply:function(a,b,c,d,f){var g=a.slots[this.slotIndex];if(g.attachment==this.attachment){var h=this.frames;if(!(c<h[0])){var i=this.frameVertices,j=i[0].length,k=g.attachmentVertices;if(k.length!=j&&(f=1),k.length=j,c>=h[h.length-1]){var l=i[h.length-1];if(1>f)for(var m=0;j>m;m++)k[m]+=(l[m]-k[m])*f;else for(var m=0;j>m;m++)k[m]=l[m]}else{var n=e.Animation.binarySearch1(h,c),o=h[n],p=1-(c-o)/(h[n-1]-o);p=this.curves.getCurvePercent(n-1,0>p?0:p>1?1:p);var q=i[n-1],r=i[n];if(1>f)for(var m=0;j>m;m++){var s=q[m];k[m]+=(s+(r[m]-s)*p-k[m])*f}else for(var m=0;j>m;m++){var s=q[m];k[m]=s+(r[m]-s)*p}}}}}},e.IkConstraintTimeline=function(a){this.curves=new e.Curves(a),this.frames=[],this.frames.length=3*a},e.IkConstraintTimeline.prototype={ikConstraintIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(a,b,c,d){a*=3,this.frames[a]=b,this.frames[a+1]=c,this.frames[a+2]=d},apply:function(a,b,c,d,f){var g=this.frames;if(!(c<g[0])){var h=a.ikConstraints[this.ikConstraintIndex];if(c>=g[g.length-3])return h.mix+=(g[g.length-2]-h.mix)*f,void(h.bendDirection=g[g.length-1]);var i=e.Animation.binarySearch(g,c,3),j=g[i+-2],k=g[i],l=1-(c-k)/(g[i+-3]-k);l=this.curves.getCurvePercent(i/3-1,l);var m=j+(g[i+1]-j)*l;h.mix+=(m-h.mix)*f,h.bendDirection=g[i+-1]}}},e.FlipXTimeline=function(a){this.curves=new e.Curves(a),this.frames=[],this.frames.length=2*a},e.FlipXTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(a,b,c){a*=2,this.frames[a]=b,this.frames[a+1]=c?1:0},apply:function(a,b,c){var d=this.frames;if(c<d[0])return void(b>c&&this.apply(a,b,Number.MAX_VALUE,null,0));b>c&&(b=-1);var f=(c>=d[d.length-2]?d.length:e.Animation.binarySearch(d,c,2))-2;d[f]<b||(a.bones[boneIndex].flipX=0!=d[f+1])}},e.FlipYTimeline=function(a){this.curves=new e.Curves(a),this.frames=[],this.frames.length=2*a},e.FlipYTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(a,b,c){a*=2,this.frames[a]=b,this.frames[a+1]=c?1:0},apply:function(a,b,c){var d=this.frames;if(c<d[0])return void(b>c&&this.apply(a,b,Number.MAX_VALUE,null,0));b>c&&(b=-1);var f=(c>=d[d.length-2]?d.length:e.Animation.binarySearch(d,c,2))-2;d[f]<b||(a.bones[boneIndex].flipY=0!=d[f+1])}},e.SkeletonData=function(){this.bones=[],this.slots=[],this.skins=[],this.events=[],this.animations=[],this.ikConstraints=[]},e.SkeletonData.prototype={name:null,defaultSkin:null,width:0,height:0,version:null,hash:null,findBone:function(a){for(var b=this.bones,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null},findBoneIndex:function(a){for(var b=this.bones,c=0,d=b.length;d>c;c++)if(b[c].name==a)return c;return-1},findSlot:function(a){for(var b=this.slots,c=0,d=b.length;d>c;c++)if(b[c].name==a)return slot[c];return null},findSlotIndex:function(a){for(var b=this.slots,c=0,d=b.length;d>c;c++)if(b[c].name==a)return c;return-1},findSkin:function(a){for(var b=this.skins,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null},findEvent:function(a){for(var b=this.events,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null},findAnimation:function(a){for(var b=this.animations,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null},findIkConstraint:function(a){for(var b=this.ikConstraints,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null}},e.Skeleton=function(a){this.data=a,this.bones=[];for(var b=0,c=a.bones.length;c>b;b++){var d=a.bones[b],f=d.parent?this.bones[a.bones.indexOf(d.parent)]:null;this.bones.push(new e.Bone(d,this,f))}this.slots=[],this.drawOrder=[];for(var b=0,c=a.slots.length;c>b;b++){var g=a.slots[b],h=this.bones[a.bones.indexOf(g.boneData)],i=new e.Slot(g,h);this.slots.push(i),this.drawOrder.push(i)}this.ikConstraints=[];for(var b=0,c=a.ikConstraints.length;c>b;b++)this.ikConstraints.push(new e.IkConstraint(a.ikConstraints[b],this));this.boneCache=[],this.updateCache()},e.Skeleton.prototype={x:0,y:0,skin:null,r:1,g:1,b:1,a:1,time:0,flipX:!1,flipY:!1,updateCache:function(){var a=this.ikConstraints,b=a.length,c=b+1,d=this.boneCache;d.length>c&&(d.length=c);for(var e=0,f=d.length;f>e;e++)d[e].length=0;for(;d.length<c;)d[d.length]=[];var g=d[0],h=this.bones;a:for(var e=0,f=h.length;f>e;e++){var i=h[e],j=i;do{for(var k=0;b>k;k++)for(var l=a[k],m=l.bones[0],n=l.bones[l.bones.length-1];;){if(j==n){d[k].push(i),d[k+1].push(i);continue a}if(n==m)break;n=n.parent}j=j.parent}while(j);g[g.length]=i}},updateWorldTransform:function(){for(var a=this.bones,b=0,c=a.length;c>b;b++){var d=a[b];d.rotationIK=d.rotation}for(var b=0,e=this.boneCache.length-1;;){for(var f=this.boneCache[b],g=0,h=f.length;h>g;g++)f[g].updateWorldTransform();if(b==e)break;this.ikConstraints[b].apply(),b++}},setToSetupPose:function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},setBonesToSetupPose:function(){for(var a=this.bones,b=0,c=a.length;c>b;b++)a[b].setToSetupPose();for(var d=this.ikConstraints,b=0,c=d.length;c>b;b++){var e=d[b];e.bendDirection=e.data.bendDirection,e.mix=e.data.mix}},setSlotsToSetupPose:function(){for(var a=this.slots,b=this.drawOrder,c=0,d=a.length;d>c;c++)b[c]=a[c],a[c].setToSetupPose(c)},getRootBone:function(){return this.bones.length?this.bones[0]:null},findBone:function(a){for(var b=this.bones,c=0,d=b.length;d>c;c++)if(b[c].data.name==a)return b[c];return null},findBoneIndex:function(a){for(var b=this.bones,c=0,d=b.length;d>c;c++)if(b[c].data.name==a)return c;return-1},findSlot:function(a){for(var b=this.slots,c=0,d=b.length;d>c;c++)if(b[c].data.name==a)return b[c];return null},findSlotIndex:function(a){for(var b=this.slots,c=0,d=b.length;d>c;c++)if(b[c].data.name==a)return c;return-1},setSkinByName:function(a){var b=this.data.findSkin(a);if(!b)throw"Skin not found: "+a;this.setSkin(b)},setSkin:function(a){if(a)if(this.skin)a._attachAll(this,this.skin);else for(var b=this.slots,c=0,d=b.length;d>c;c++){var e=b[c],f=e.data.attachmentName;if(f){var g=a.getAttachment(c,f);g&&e.setAttachment(g)}}this.skin=a},getAttachmentBySlotName:function(a,b){return this.getAttachmentBySlotIndex(this.data.findSlotIndex(a),b)},getAttachmentBySlotIndex:function(a,b){if(this.skin){var c=this.skin.getAttachment(a,b);if(c)return c}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(a,b):null},setAttachment:function(a,b){for(var c=this.slots,d=0,e=c.length;e>d;d++){var f=c[d];if(f.data.name==a){var g=null;if(b&&(g=this.getAttachmentBySlotIndex(d,b),!g))throw"Attachment not found: "+b+", for slot: "+a;return void f.setAttachment(g)}}throw"Slot not found: "+a},findIkConstraint:function(a){for(var b=this.ikConstraints,c=0,d=b.length;d>c;c++)if(b[c].data.name==a)return b[c];return null},update:function(a){this.time+=a}},e.EventData=function(a){this.name=a},e.EventData.prototype={intValue:0,floatValue:0,stringValue:null},e.Event=function(a){this.data=a},e.Event.prototype={intValue:0,floatValue:0,stringValue:null},e.AttachmentType={region:0,boundingbox:1,mesh:2,skinnedmesh:3},e.RegionAttachment=function(a){this.name=a,this.offset=[],this.offset.length=8,this.uvs=[],this.uvs.length=8},e.RegionAttachment.prototype={type:e.AttachmentType.region,x:0,y:0,rotation:0,scaleX:1,scaleY:1,width:0,height:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,setUVs:function(a,b,c,d,e){var f=this.uvs;e?(f[2]=a,f[3]=d,f[4]=a,f[5]=b,f[6]=c,f[7]=b,f[0]=c,f[1]=d):(f[0]=a,f[1]=d,f[2]=a,f[3]=b,f[4]=c,f[5]=b,f[6]=c,f[7]=d)},updateOffset:function(){var a=this.width/this.regionOriginalWidth*this.scaleX,b=this.height/this.regionOriginalHeight*this.scaleY,c=-this.width/2*this.scaleX+this.regionOffsetX*a,d=-this.height/2*this.scaleY+this.regionOffsetY*b,f=c+this.regionWidth*a,g=d+this.regionHeight*b,h=this.rotation*e.degRad,i=Math.cos(h),j=Math.sin(h),k=c*i+this.x,l=c*j,m=d*i+this.y,n=d*j,o=f*i+this.x,p=f*j,q=g*i+this.y,r=g*j,s=this.offset;s[0]=k-n,s[1]=m+l,s[2]=k-r,s[3]=q+l,s[4]=o-r,s[5]=q+p,s[6]=o-n,s[7]=m+p},computeVertices:function(a,b,c,d){a+=c.worldX,b+=c.worldY;var e=c.m00,f=c.m01,g=c.m10,h=c.m11,i=this.offset;d[0]=i[0]*e+i[1]*f+a,d[1]=i[0]*g+i[1]*h+b,d[2]=i[2]*e+i[3]*f+a,d[3]=i[2]*g+i[3]*h+b,d[4]=i[4]*e+i[5]*f+a,d[5]=i[4]*g+i[5]*h+b,d[6]=i[6]*e+i[7]*f+a,d[7]=i[6]*g+i[7]*h+b}},e.MeshAttachment=function(a){this.name=a},e.MeshAttachment.prototype={type:e.AttachmentType.mesh,vertices:null,uvs:null,regionUVs:null,triangles:null,hullLength:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionU:0,regionV:0,regionU2:0,regionV2:0,regionRotate:!1,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,edges:null,width:0,height:0,updateUVs:function(){var a=this.regionU2-this.regionU,b=this.regionV2-this.regionV,c=this.regionUVs.length;if(this.uvs&&this.uvs.length==c||(this.uvs=new e.Float32Array(c)),this.regionRotate)for(var d=0;c>d;d+=2)this.uvs[d]=this.regionU+this.regionUVs[d+1]*a,this.uvs[d+1]=this.regionV+b-this.regionUVs[d]*b;else for(var d=0;c>d;d+=2)this.uvs[d]=this.regionU+this.regionUVs[d]*a,this.uvs[d+1]=this.regionV+this.regionUVs[d+1]*b},computeWorldVertices:function(a,b,c,d){var e=c.bone;a+=e.worldX,b+=e.worldY;var f=e.m00,g=e.m01,h=e.m10,i=e.m11,j=this.vertices,k=j.length;c.attachmentVertices.length==k&&(j=c.attachmentVertices);for(var l=0;k>l;l+=2){var m=j[l],n=j[l+1];d[l]=m*f+n*g+a,d[l+1]=m*h+n*i+b}}},e.SkinnedMeshAttachment=function(a){this.name=a},e.SkinnedMeshAttachment.prototype={type:e.AttachmentType.skinnedmesh,bones:null,weights:null,uvs:null,regionUVs:null,triangles:null,hullLength:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionU:0,regionV:0,regionU2:0,regionV2:0,regionRotate:!1,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,edges:null,width:0,height:0,updateUVs:function(){var a=this.regionU2-this.regionU,b=this.regionV2-this.regionV,c=this.regionUVs.length;if(this.uvs&&this.uvs.length==c||(this.uvs=new e.Float32Array(c)),this.regionRotate)for(var d=0;c>d;d+=2)this.uvs[d]=this.regionU+this.regionUVs[d+1]*a,this.uvs[d+1]=this.regionV+b-this.regionUVs[d]*b;else for(var d=0;c>d;d+=2)this.uvs[d]=this.regionU+this.regionUVs[d]*a,this.uvs[d+1]=this.regionV+this.regionUVs[d+1]*b},computeWorldVertices:function(a,b,c,d){var e,f,g,h,i,j,k,l=c.bone.skeleton.bones,m=this.weights,n=this.bones,o=0,p=0,q=0,r=0,s=n.length;if(c.attachmentVertices.length)for(var t=c.attachmentVertices;s>p;o+=2){for(f=0,g=0,e=n[p++]+p;e>p;p++,q+=3,r+=2)h=l[n[p]],i=m[q]+t[r],j=m[q+1]+t[r+1],k=m[q+2],f+=(i*h.m00+j*h.m01+h.worldX)*k,g+=(i*h.m10+j*h.m11+h.worldY)*k;d[o]=f+a,d[o+1]=g+b}else for(;s>p;o+=2){for(f=0,g=0,e=n[p++]+p;e>p;p++,q+=3)h=l[n[p]],i=m[q],j=m[q+1],k=m[q+2],f+=(i*h.m00+j*h.m01+h.worldX)*k,g+=(i*h.m10+j*h.m11+h.worldY)*k;d[o]=f+a,d[o+1]=g+b}}},e.BoundingBoxAttachment=function(a){this.name=a,this.vertices=[]},e.BoundingBoxAttachment.prototype={type:e.AttachmentType.boundingbox,computeWorldVertices:function(a,b,c,d){a+=c.worldX,b+=c.worldY;for(var e=c.m00,f=c.m01,g=c.m10,h=c.m11,i=this.vertices,j=0,k=i.length;k>j;j+=2){var l=i[j],m=i[j+1];d[j]=l*e+m*f+a,d[j+1]=l*g+m*h+b}}},e.AnimationStateData=function(a){this.skeletonData=a,this.animationToMixTime={}},e.AnimationStateData.prototype={defaultMix:0,setMixByName:function(a,b,c){var d=this.skeletonData.findAnimation(a);if(!d)throw"Animation not found: "+a;var e=this.skeletonData.findAnimation(b);if(!e)throw"Animation not found: "+b;this.setMix(d,e,c)},setMix:function(a,b,c){this.animationToMixTime[a.name+":"+b.name]=c},getMix:function(a,b){var c=a.name+":"+b.name;return this.animationToMixTime.hasOwnProperty(c)?this.animationToMixTime[c]:this.defaultMix}},e.TrackEntry=function(){},e.TrackEntry.prototype={next:null,previous:null,animation:null,loop:!1,delay:0,time:0,lastTime:-1,endTime:0,timeScale:1,mixTime:0,mixDuration:0,mix:1,onStart:null,onEnd:null,onComplete:null,onEvent:null},e.AnimationState=function(a){this.data=a,this.tracks=[],this.events=[]},e.AnimationState.prototype={onStart:null,onEnd:null,onComplete:null,onEvent:null,timeScale:1,update:function(a){a*=this.timeScale;for(var b=0;b<this.tracks.length;b++){var c=this.tracks[b];if(c){if(c.time+=a*c.timeScale,c.previous){var d=a*c.previous.timeScale;c.previous.time+=d,c.mixTime+=d}var e=c.next;e?(e.time=c.lastTime-e.delay,e.time>=0&&this.setCurrent(b,e)):!c.loop&&c.lastTime>=c.endTime&&this.clearTrack(b)}}},apply:function(a){for(var b=0;b<this.tracks.length;b++){var c=this.tracks[b];if(c){this.events.length=0;var d=c.time,e=c.lastTime,f=c.endTime,g=c.loop;!g&&d>f&&(d=f);var h=c.previous;if(h){var i=h.time;!h.loop&&i>h.endTime&&(i=h.endTime),h.animation.apply(a,i,i,h.loop,null);var j=c.mixTime/c.mixDuration*c.mix;j>=1&&(j=1,c.previous=null),c.animation.mix(a,c.lastTime,d,g,this.events,j)}else 1==c.mix?c.animation.apply(a,c.lastTime,d,g,this.events):c.animation.mix(a,c.lastTime,d,g,this.events,c.mix);for(var k=0,l=this.events.length;l>k;k++){var m=this.events[k];c.onEvent&&c.onEvent(b,m),this.onEvent&&this.onEvent(b,m)}if(g?e%f>d%f:f>e&&d>=f){var n=Math.floor(d/f);c.onComplete&&c.onComplete(b,n),this.onComplete&&this.onComplete(b,n)}c.lastTime=c.time}}},clearTracks:function(){for(var a=0,b=this.tracks.length;b>a;a++)this.clearTrack(a);this.tracks.length=0},clearTrack:function(a){if(!(a>=this.tracks.length)){var b=this.tracks[a];b&&(b.onEnd&&b.onEnd(a),this.onEnd&&this.onEnd(a),this.tracks[a]=null)}},_expandToIndex:function(a){if(a<this.tracks.length)return this.tracks[a];for(;a>=this.tracks.length;)this.tracks.push(null);return null},setCurrent:function(a,b){var c=this._expandToIndex(a);if(c){var d=c.previous;c.previous=null,c.onEnd&&c.onEnd(a),this.onEnd&&this.onEnd(a),b.mixDuration=this.data.getMix(c.animation,b.animation),b.mixDuration>0&&(b.mixTime=0,b.previous=d&&c.mixTime/c.mixDuration<.5?d:c)}this.tracks[a]=b,b.onStart&&b.onStart(a),this.onStart&&this.onStart(a)},setAnimationByName:function(a,b,c){var d=this.data.skeletonData.findAnimation(b);if(!d)throw"Animation not found: "+b;return this.setAnimation(a,d,c)},setAnimation:function(a,b,c){var d=new e.TrackEntry;return d.animation=b,d.loop=c,d.endTime=b.duration,this.setCurrent(a,d),d},addAnimationByName:function(a,b,c,d){var e=this.data.skeletonData.findAnimation(b);if(!e)throw"Animation not found: "+b;return this.addAnimation(a,e,c,d)},addAnimation:function(a,b,c,d){var f=new e.TrackEntry;f.animation=b,f.loop=c,f.endTime=b.duration;var g=this._expandToIndex(a);if(g){for(;g.next;)g=g.next;g.next=f}else this.tracks[a]=f;return 0>=d&&(g?d+=g.endTime-this.data.getMix(g.animation,b):d=0),f.delay=d,f},getCurrent:function(a){return a>=this.tracks.length?null:this.tracks[a]}},e.SkeletonJson=function(a){this.attachmentLoader=a},e.SkeletonJson.prototype={scale:1,readSkeletonData:function(a,b){var c=new e.SkeletonData;c.name=b;var d=a.skeleton;d&&(c.hash=d.hash,c.version=d.spine,c.width=d.width||0,c.height=d.height||0);for(var f=a.bones,g=0,h=f.length;h>g;g++){var i=f[g],j=null;if(i.parent&&(j=c.findBone(i.parent),!j))throw"Parent bone not found: "+i.parent;var k=new e.BoneData(i.name,j);k.length=(i.length||0)*this.scale,k.x=(i.x||0)*this.scale,k.y=(i.y||0)*this.scale,k.rotation=i.rotation||0,k.scaleX=i.hasOwnProperty("scaleX")?i.scaleX:1,k.scaleY=i.hasOwnProperty("scaleY")?i.scaleY:1,k.inheritScale=i.hasOwnProperty("inheritScale")?i.inheritScale:!0,k.inheritRotation=i.hasOwnProperty("inheritRotation")?i.inheritRotation:!0,c.bones.push(k)}var l=a.ik;if(l)for(var g=0,h=l.length;h>g;g++){for(var m=l[g],n=new e.IkConstraintData(m.name),f=m.bones,o=0,p=f.length;p>o;o++){var q=c.findBone(f[o]);if(!q)throw"IK bone not found: "+f[o];n.bones.push(q)}if(n.target=c.findBone(m.target),!n.target)throw"Target bone not found: "+m.target;n.bendDirection=!m.hasOwnProperty("bendPositive")||m.bendPositive?1:-1,n.mix=m.hasOwnProperty("mix")?m.mix:1,c.ikConstraints.push(n)}for(var r=a.slots,g=0,h=r.length;h>g;g++){var s=r[g],k=c.findBone(s.bone);if(!k)throw"Slot bone not found: "+s.bone;var t=new e.SlotData(s.name,k),u=s.color;u&&(t.r=this.toColor(u,0),t.g=this.toColor(u,1),t.b=this.toColor(u,2),t.a=this.toColor(u,3)),t.attachmentName=s.attachment,t.additiveBlending=s.additive&&"true"==s.additive,c.slots.push(t)}var v=a.skins;for(var w in v)if(v.hasOwnProperty(w)){var x=v[w],y=new e.Skin(w);for(var z in x)if(x.hasOwnProperty(z)){var A=c.findSlotIndex(z),B=x[z];for(var C in B)if(B.hasOwnProperty(C)){var D=this.readAttachment(y,C,B[C]);D&&y.addAttachment(A,C,D)}}c.skins.push(y),"default"==y.name&&(c.defaultSkin=y)}var E=a.events;for(var F in E)if(E.hasOwnProperty(F)){var G=E[F],H=new e.EventData(F);H.intValue=G["int"]||0,H.floatValue=G["float"]||0,H.stringValue=G.string||null,c.events.push(H)}var I=a.animations;for(var J in I)I.hasOwnProperty(J)&&this.readAnimation(J,I[J],c);return c},readAttachment:function(a,b,c){b=c.name||b;var d=e.AttachmentType[c.type||"region"],f=c.path||b,g=this.scale;if(d==e.AttachmentType.region){var h=this.attachmentLoader.newRegionAttachment(a,b,f);if(!h)return null;h.path=f,h.x=(c.x||0)*g,h.y=(c.y||0)*g,h.scaleX=c.hasOwnProperty("scaleX")?c.scaleX:1,h.scaleY=c.hasOwnProperty("scaleY")?c.scaleY:1,h.rotation=c.rotation||0,h.width=(c.width||0)*g,h.height=(c.height||0)*g;var i=c.color;return i&&(h.r=this.toColor(i,0),h.g=this.toColor(i,1),h.b=this.toColor(i,2),h.a=this.toColor(i,3)),h.updateOffset(),h}if(d==e.AttachmentType.mesh){var j=this.attachmentLoader.newMeshAttachment(a,b,f);return j?(j.path=f,j.vertices=this.getFloatArray(c,"vertices",g),j.triangles=this.getIntArray(c,"triangles"),j.regionUVs=this.getFloatArray(c,"uvs",1),j.updateUVs(),i=c.color,i&&(j.r=this.toColor(i,0),j.g=this.toColor(i,1),j.b=this.toColor(i,2),j.a=this.toColor(i,3)),j.hullLength=2*(c.hull||0),c.edges&&(j.edges=this.getIntArray(c,"edges")),j.width=(c.width||0)*g,j.height=(c.height||0)*g,j):null}if(d==e.AttachmentType.skinnedmesh){var j=this.attachmentLoader.newSkinnedMeshAttachment(a,b,f);if(!j)return null;j.path=f;for(var k=this.getFloatArray(c,"uvs",1),l=this.getFloatArray(c,"vertices",1),m=[],n=[],o=0,p=l.length;p>o;){var q=0|l[o++];n[n.length]=q;for(var r=o+4*q;r>o;)n[n.length]=l[o],m[m.length]=l[o+1]*g,m[m.length]=l[o+2]*g,m[m.length]=l[o+3],o+=4
}return j.bones=n,j.weights=m,j.triangles=this.getIntArray(c,"triangles"),j.regionUVs=k,j.updateUVs(),i=c.color,i&&(j.r=this.toColor(i,0),j.g=this.toColor(i,1),j.b=this.toColor(i,2),j.a=this.toColor(i,3)),j.hullLength=2*(c.hull||0),c.edges&&(j.edges=this.getIntArray(c,"edges")),j.width=(c.width||0)*g,j.height=(c.height||0)*g,j}if(d==e.AttachmentType.boundingbox){for(var s=this.attachmentLoader.newBoundingBoxAttachment(a,b),l=c.vertices,o=0,p=l.length;p>o;o++)s.vertices.push(l[o]*g);return s}throw"Unknown attachment type: "+d},readAnimation:function(a,b,c){var d=[],f=0,g=b.slots;for(var h in g)if(g.hasOwnProperty(h)){var i=g[h],j=c.findSlotIndex(h);for(var k in i)if(i.hasOwnProperty(k)){var l=i[k];if("color"==k){var m=new e.ColorTimeline(l.length);m.slotIndex=j;for(var n=0,o=0,p=l.length;p>o;o++){var q=l[o],r=q.color,s=this.toColor(r,0),t=this.toColor(r,1),u=this.toColor(r,2),v=this.toColor(r,3);m.setFrame(n,q.time,s,t,u,v),this.readCurve(m,n,q),n++}d.push(m),f=Math.max(f,m.frames[5*m.getFrameCount()-5])}else{if("attachment"!=k)throw"Invalid timeline type for a slot: "+k+" ("+h+")";var m=new e.AttachmentTimeline(l.length);m.slotIndex=j;for(var n=0,o=0,p=l.length;p>o;o++){var q=l[o];m.setFrame(n++,q.time,q.name)}d.push(m),f=Math.max(f,m.frames[m.getFrameCount()-1])}}}var w=b.bones;for(var x in w)if(w.hasOwnProperty(x)){var y=c.findBoneIndex(x);if(-1==y)throw"Bone not found: "+x;var z=w[x];for(var k in z)if(z.hasOwnProperty(k)){var l=z[k];if("rotate"==k){var m=new e.RotateTimeline(l.length);m.boneIndex=y;for(var n=0,o=0,p=l.length;p>o;o++){var q=l[o];m.setFrame(n,q.time,q.angle),this.readCurve(m,n,q),n++}d.push(m),f=Math.max(f,m.frames[2*m.getFrameCount()-2])}else if("translate"==k||"scale"==k){var m,A=1;"scale"==k?m=new e.ScaleTimeline(l.length):(m=new e.TranslateTimeline(l.length),A=this.scale),m.boneIndex=y;for(var n=0,o=0,p=l.length;p>o;o++){var q=l[o],B=(q.x||0)*A,C=(q.y||0)*A;m.setFrame(n,q.time,B,C),this.readCurve(m,n,q),n++}d.push(m),f=Math.max(f,m.frames[3*m.getFrameCount()-3])}else{if("flipX"!=k&&"flipY"!=k)throw"Invalid timeline type for a bone: "+k+" ("+x+")";var B="flipX"==k,m=B?new e.FlipXTimeline(l.length):new e.FlipYTimeline(l.length);m.boneIndex=y;for(var D=B?"x":"y",n=0,o=0,p=l.length;p>o;o++){var q=l[o];m.setFrame(n,q.time,q[D]||!1),n++}d.push(m),f=Math.max(f,m.frames[2*m.getFrameCount()-2])}}}var E=b.ik;for(var F in E)if(E.hasOwnProperty(F)){var G=c.findIkConstraint(F),l=E[F],m=new e.IkConstraintTimeline(l.length);m.ikConstraintIndex=c.ikConstraints.indexOf(G);for(var n=0,o=0,p=l.length;p>o;o++){var q=l[o],H=q.hasOwnProperty("mix")?q.mix:1,I=!q.hasOwnProperty("bendPositive")||q.bendPositive?1:-1;m.setFrame(n,q.time,H,I),this.readCurve(m,n,q),n++}d.push(m),f=Math.max(f,m.frames[3*m.frameCount-3])}var J=b.ffd;for(var K in J){var L=c.findSkin(K),i=J[K];for(h in i){var j=c.findSlotIndex(h),M=i[h];for(var N in M){var l=M[N],m=new e.FfdTimeline(l.length),O=L.getAttachment(j,N);if(!O)throw"FFD attachment not found: "+N;m.slotIndex=j,m.attachment=O;var P,Q=O.type==e.AttachmentType.mesh;P=Q?O.vertices.length:O.weights.length/3*2;for(var n=0,o=0,p=l.length;p>o;o++){var R,q=l[o];if(q.vertices){var S=q.vertices,R=[];R.length=P;var T=q.offset||0,U=S.length;if(1==this.scale)for(var V=0;U>V;V++)R[V+T]=S[V];else for(var V=0;U>V;V++)R[V+T]=S[V]*this.scale;if(Q)for(var W=O.vertices,V=0,U=R.length;U>V;V++)R[V]+=W[V]}else Q?R=O.vertices:(R=[],R.length=P);m.setFrame(n,q.time,R),this.readCurve(m,n,q),n++}d[d.length]=m,f=Math.max(f,m.frames[m.frameCount-1])}}}var X=b.drawOrder;if(X||(X=b.draworder),X){for(var m=new e.DrawOrderTimeline(X.length),Y=c.slots.length,n=0,o=0,p=X.length;p>o;o++){var Z=X[o],$=null;if(Z.offsets){$=[],$.length=Y;for(var V=Y-1;V>=0;V--)$[V]=-1;var _=Z.offsets,ab=[];ab.length=Y-_.length;for(var bb=0,cb=0,V=0,U=_.length;U>V;V++){var db=_[V],j=c.findSlotIndex(db.slot);if(-1==j)throw"Slot not found: "+db.slot;for(;bb!=j;)ab[cb++]=bb++;$[bb+db.offset]=bb++}for(;Y>bb;)ab[cb++]=bb++;for(var V=Y-1;V>=0;V--)-1==$[V]&&($[V]=ab[--cb])}m.setFrame(n++,Z.time,$)}d.push(m),f=Math.max(f,m.frames[m.getFrameCount()-1])}var eb=b.events;if(eb){for(var m=new e.EventTimeline(eb.length),n=0,o=0,p=eb.length;p>o;o++){var fb=eb[o],gb=c.findEvent(fb.name);if(!gb)throw"Event not found: "+fb.name;var hb=new e.Event(gb);hb.intValue=fb.hasOwnProperty("int")?fb["int"]:gb.intValue,hb.floatValue=fb.hasOwnProperty("float")?fb["float"]:gb.floatValue,hb.stringValue=fb.hasOwnProperty("string")?fb.string:gb.stringValue,m.setFrame(n++,fb.time,hb)}d.push(m),f=Math.max(f,m.frames[m.getFrameCount()-1])}c.animations.push(new e.Animation(a,d,f))},readCurve:function(a,b,c){var d=c.curve;d?"stepped"==d?a.curves.setStepped(b):d instanceof Array&&a.curves.setCurve(b,d[0],d[1],d[2],d[3]):a.curves.setLinear(b)},toColor:function(a,b){if(8!=a.length)throw"Color hexidecimal length must be 8, recieved: "+a;return parseInt(a.substring(2*b,2*b+2),16)/255},getFloatArray:function(a,b,c){var d=a[b],f=new e.Float32Array(d.length),g=0,h=d.length;if(1==c)for(;h>g;g++)f[g]=d[g];else for(;h>g;g++)f[g]=d[g]*c;return f},getIntArray:function(a,b){for(var c=a[b],d=new e.Uint16Array(c.length),f=0,g=c.length;g>f;f++)d[f]=0|c[f];return d}},e.Atlas=function(a,b){this.textureLoader=b,this.pages=[],this.regions=[];var c=new e.AtlasReader(a),d=[];d.length=4;for(var f=null;;){var g=c.readLine();if(null===g)break;if(g=c.trim(g),g.length)if(f){var h=new e.AtlasRegion;h.name=g,h.page=f,h.rotate="true"==c.readValue(),c.readTuple(d);var i=parseInt(d[0]),j=parseInt(d[1]);c.readTuple(d);var k=parseInt(d[0]),l=parseInt(d[1]);h.u=i/f.width,h.v=j/f.height,h.rotate?(h.u2=(i+l)/f.width,h.v2=(j+k)/f.height):(h.u2=(i+k)/f.width,h.v2=(j+l)/f.height),h.x=i,h.y=j,h.width=Math.abs(k),h.height=Math.abs(l),4==c.readTuple(d)&&(h.splits=[parseInt(d[0]),parseInt(d[1]),parseInt(d[2]),parseInt(d[3])],4==c.readTuple(d)&&(h.pads=[parseInt(d[0]),parseInt(d[1]),parseInt(d[2]),parseInt(d[3])],c.readTuple(d))),h.originalWidth=parseInt(d[0]),h.originalHeight=parseInt(d[1]),c.readTuple(d),h.offsetX=parseInt(d[0]),h.offsetY=parseInt(d[1]),h.index=parseInt(c.readValue()),this.regions.push(h)}else{f=new e.AtlasPage,f.name=g,2==c.readTuple(d)&&(f.width=parseInt(d[0]),f.height=parseInt(d[1]),c.readTuple(d)),f.format=e.Atlas.Format[d[0]],c.readTuple(d),f.minFilter=e.Atlas.TextureFilter[d[0]],f.magFilter=e.Atlas.TextureFilter[d[1]];var m=c.readValue();f.uWrap=e.Atlas.TextureWrap.clampToEdge,f.vWrap=e.Atlas.TextureWrap.clampToEdge,"x"==m?f.uWrap=e.Atlas.TextureWrap.repeat:"y"==m?f.vWrap=e.Atlas.TextureWrap.repeat:"xy"==m&&(f.uWrap=f.vWrap=e.Atlas.TextureWrap.repeat),b.load(f,g,this),this.pages.push(f)}else f=null}},e.Atlas.prototype={findRegion:function(a){for(var b=this.regions,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null},dispose:function(){for(var a=this.pages,b=0,c=a.length;c>b;b++)this.textureLoader.unload(a[b].rendererObject)},updateUVs:function(a){for(var b=this.regions,c=0,d=b.length;d>c;c++){var e=b[c];e.page==a&&(e.u=e.x/a.width,e.v=e.y/a.height,e.rotate?(e.u2=(e.x+e.height)/a.width,e.v2=(e.y+e.width)/a.height):(e.u2=(e.x+e.width)/a.width,e.v2=(e.y+e.height)/a.height))}}},e.Atlas.Format={alpha:0,intensity:1,luminanceAlpha:2,rgb565:3,rgba4444:4,rgb888:5,rgba8888:6},e.Atlas.TextureFilter={nearest:0,linear:1,mipMap:2,mipMapNearestNearest:3,mipMapLinearNearest:4,mipMapNearestLinear:5,mipMapLinearLinear:6},e.Atlas.TextureWrap={mirroredRepeat:0,clampToEdge:1,repeat:2},e.AtlasPage=function(){},e.AtlasPage.prototype={name:null,format:null,minFilter:null,magFilter:null,uWrap:null,vWrap:null,rendererObject:null,width:0,height:0},e.AtlasRegion=function(){},e.AtlasRegion.prototype={page:null,name:null,x:0,y:0,width:0,height:0,u:0,v:0,u2:0,v2:0,offsetX:0,offsetY:0,originalWidth:0,originalHeight:0,index:0,rotate:!1,splits:null,pads:null},e.AtlasReader=function(a){this.lines=a.split(/\r\n|\r|\n/)},e.AtlasReader.prototype={index:0,trim:function(a){return a.replace(/^\s+|\s+$/g,"")},readLine:function(){return this.index>=this.lines.length?null:this.lines[this.index++]},readValue:function(){var a=this.readLine(),b=a.indexOf(":");if(-1==b)throw"Invalid line: "+a;return this.trim(a.substring(b+1))},readTuple:function(a){var b=this.readLine(),c=b.indexOf(":");if(-1==c)throw"Invalid line: "+b;for(var d=0,e=c+1;3>d;d++){var f=b.indexOf(",",e);if(-1==f)break;a[d]=this.trim(b.substr(e,f-e)),e=f+1}return a[d]=this.trim(b.substring(e)),d+1}},e.AtlasAttachmentLoader=function(a){this.atlas=a},e.AtlasAttachmentLoader.prototype={newRegionAttachment:function(a,b,c){var d=this.atlas.findRegion(c);if(!d)throw"Region not found in atlas: "+c+" (region attachment: "+b+")";var f=new e.RegionAttachment(b);return f.rendererObject=d,f.setUVs(d.u,d.v,d.u2,d.v2,d.rotate),f.regionOffsetX=d.offsetX,f.regionOffsetY=d.offsetY,f.regionWidth=d.width,f.regionHeight=d.height,f.regionOriginalWidth=d.originalWidth,f.regionOriginalHeight=d.originalHeight,f},newMeshAttachment:function(a,b,c){var d=this.atlas.findRegion(c);if(!d)throw"Region not found in atlas: "+c+" (mesh attachment: "+b+")";var f=new e.MeshAttachment(b);return f.rendererObject=d,f.regionU=d.u,f.regionV=d.v,f.regionU2=d.u2,f.regionV2=d.v2,f.regionRotate=d.rotate,f.regionOffsetX=d.offsetX,f.regionOffsetY=d.offsetY,f.regionWidth=d.width,f.regionHeight=d.height,f.regionOriginalWidth=d.originalWidth,f.regionOriginalHeight=d.originalHeight,f},newSkinnedMeshAttachment:function(a,b,c){var d=this.atlas.findRegion(c);if(!d)throw"Region not found in atlas: "+c+" (skinned mesh attachment: "+b+")";var f=new e.SkinnedMeshAttachment(b);return f.rendererObject=d,f.regionU=d.u,f.regionV=d.v,f.regionU2=d.u2,f.regionV2=d.v2,f.regionRotate=d.rotate,f.regionOffsetX=d.offsetX,f.regionOffsetY=d.offsetY,f.regionWidth=d.width,f.regionHeight=d.height,f.regionOriginalWidth=d.originalWidth,f.regionOriginalHeight=d.originalHeight,f},newBoundingBoxAttachment:function(a,b){return new e.BoundingBoxAttachment(b)}},e.SkeletonBounds=function(){this.polygonPool=[],this.polygons=[],this.boundingBoxes=[]},e.SkeletonBounds.prototype={minX:0,minY:0,maxX:0,maxY:0,update:function(a,b){var c=a.slots,d=c.length,f=a.x,g=a.y,h=this.boundingBoxes,i=this.polygonPool,j=this.polygons;h.length=0;for(var k=0,l=j.length;l>k;k++)i.push(j[k]);j.length=0;for(var k=0;d>k;k++){var m=c[k],n=m.attachment;if(n.type==e.AttachmentType.boundingbox){h.push(n);var o,p=i.length;p>0?(o=i[p-1],i.splice(p-1,1)):o=[],j.push(o),o.length=n.vertices.length,n.computeWorldVertices(f,g,m.bone,o)}}b&&this.aabbCompute()},aabbCompute:function(){for(var a=this.polygons,b=Number.MAX_VALUE,c=Number.MAX_VALUE,d=Number.MIN_VALUE,e=Number.MIN_VALUE,f=0,g=a.length;g>f;f++)for(var h=a[f],i=0,j=h.length;j>i;i+=2){var k=h[i],l=h[i+1];b=Math.min(b,k),c=Math.min(c,l),d=Math.max(d,k),e=Math.max(e,l)}this.minX=b,this.minY=c,this.maxX=d,this.maxY=e},aabbContainsPoint:function(a,b){return a>=this.minX&&a<=this.maxX&&b>=this.minY&&b<=this.maxY},aabbIntersectsSegment:function(a,b,c,d){var e=this.minX,f=this.minY,g=this.maxX,h=this.maxY;if(e>=a&&e>=c||f>=b&&f>=d||a>=g&&c>=g||b>=h&&d>=h)return!1;var i=(d-b)/(c-a),j=i*(e-a)+b;if(j>f&&h>j)return!0;if(j=i*(g-a)+b,j>f&&h>j)return!0;var k=(f-b)/i+a;return k>e&&g>k?!0:(k=(h-b)/i+a,k>e&&g>k?!0:!1)},aabbIntersectsSkeleton:function(a){return this.minX<a.maxX&&this.maxX>a.minX&&this.minY<a.maxY&&this.maxY>a.minY},containsPoint:function(a,b){for(var c=this.polygons,d=0,e=c.length;e>d;d++)if(this.polygonContainsPoint(c[d],a,b))return this.boundingBoxes[d];return null},intersectsSegment:function(a,b,c,d){for(var e=this.polygons,f=0,g=e.length;g>f;f++)if(e[f].intersectsSegment(a,b,c,d))return this.boundingBoxes[f];return null},polygonContainsPoint:function(a,b,c){for(var d=a.length,e=d-2,f=!1,g=0;d>g;g+=2){var h=a[g+1],i=a[e+1];if(c>h&&i>=c||c>i&&h>=c){var j=a[g];j+(c-h)/(i-h)*(a[e]-j)<b&&(f=!f)}e=g}return f},polygonIntersectsSegment:function(a,b,c,d,e){for(var f=a.length,g=b-d,h=c-e,i=b*e-c*d,j=a[f-2],k=a[f-1],l=0;f>l;l+=2){var m=a[l],n=a[l+1],o=j*n-k*m,p=j-m,q=k-n,r=g*q-h*p,s=(i*p-g*o)/r;if((s>=j&&m>=s||s>=m&&j>=s)&&(s>=b&&d>=s||s>=d&&b>=s)){var t=(i*q-h*o)/r;if((t>=k&&n>=t||t>=n&&k>=t)&&(t>=c&&e>=t||t>=e&&c>=t))return!0}j=m,k=n}return!1},getPolygon:function(a){var b=this.boundingBoxes.indexOf(a);return-1==b?null:this.polygons[b]},getWidth:function(){return this.maxX-this.minX},getHeight:function(){return this.maxY-this.minY}},e.Bone.yDown=!0,d.AnimCache={},d.SpineTextureLoader=function(a,b){d.EventTarget.call(this),this.basePath=a,this.crossorigin=b,this.loadingCount=0},d.SpineTextureLoader.prototype=d.SpineTextureLoader,d.SpineTextureLoader.prototype.load=function(a,b){if(a.rendererObject=d.BaseTexture.fromImage(this.basePath+"/"+b,this.crossorigin),!a.rendererObject.hasLoaded){var c=this;++c.loadingCount,a.rendererObject.addEventListener("loaded",function(){--c.loadingCount,c.dispatchEvent({type:"loadedBaseTexture",content:c})})}},d.SpineTextureLoader.prototype.unload=function(a){a.destroy(!0)},d.Spine=function(a){if(d.DisplayObjectContainer.call(this),this.spineData=d.AnimCache[a],!this.spineData)throw new Error("Spine data must be preloaded using PIXI.SpineLoader or PIXI.AssetLoader: "+a);this.skeleton=new e.Skeleton(this.spineData),this.skeleton.updateWorldTransform(),this.stateData=new e.AnimationStateData(this.spineData),this.state=new e.AnimationState(this.stateData),this.slotContainers=[];for(var b=0,c=this.skeleton.drawOrder.length;c>b;b++){var f=this.skeleton.drawOrder[b],g=f.attachment,h=new d.DisplayObjectContainer;if(this.slotContainers.push(h),this.addChild(h),g instanceof e.RegionAttachment){var i=g.rendererObject.name,j=this.createSprite(f,g);f.currentSprite=j,f.currentSpriteName=i,h.addChild(j)}else{if(!(g instanceof e.MeshAttachment))continue;var k=this.createMesh(f,g);f.currentMesh=k,f.currentMeshName=g.name,h.addChild(k)}}this.autoUpdate=!0},d.Spine.prototype=Object.create(d.DisplayObjectContainer.prototype),d.Spine.prototype.constructor=d.Spine,Object.defineProperty(d.Spine.prototype,"autoUpdate",{get:function(){return this.updateTransform===d.Spine.prototype.autoUpdateTransform},set:function(a){this.updateTransform=a?d.Spine.prototype.autoUpdateTransform:d.DisplayObjectContainer.prototype.updateTransform}}),d.Spine.prototype.update=function(a){this.state.update(a),this.state.apply(this.skeleton),this.skeleton.updateWorldTransform();for(var b=this.skeleton.drawOrder,c=0,f=b.length;f>c;c++){var g=b[c],h=g.attachment,i=this.slotContainers[c];if(h){var j=h.type;if(j===e.AttachmentType.region){if(h.rendererObject&&(!g.currentSpriteName||g.currentSpriteName!==h.name)){var k=h.rendererObject.name;if(void 0!==g.currentSprite&&(g.currentSprite.visible=!1),g.sprites=g.sprites||{},void 0!==g.sprites[k])g.sprites[k].visible=!0;else{var l=this.createSprite(g,h);i.addChild(l)}g.currentSprite=g.sprites[k],g.currentSpriteName=k}var m=g.bone;i.position.x=m.worldX+h.x*m.m00+h.y*m.m01,i.position.y=m.worldY+h.x*m.m10+h.y*m.m11,i.scale.x=m.worldScaleX,i.scale.y=m.worldScaleY,i.rotation=-(g.bone.worldRotation*e.degRad),g.currentSprite.tint=d.rgb2hex([g.r,g.g,g.b])}else{if(j!==e.AttachmentType.skinnedmesh){i.visible=!1;continue}if(!g.currentMeshName||g.currentMeshName!==h.name){var n=h.name;if(void 0!==g.currentMesh&&(g.currentMesh.visible=!1),g.meshes=g.meshes||{},void 0!==g.meshes[n])g.meshes[n].visible=!0;else{var o=this.createMesh(g,h);i.addChild(o)}g.currentMesh=g.meshes[n],g.currentMeshName=n}h.computeWorldVertices(g.bone.skeleton.x,g.bone.skeleton.y,g,g.currentMesh.vertices)}i.visible=!0,i.alpha=g.a}else i.visible=!1}},d.Spine.prototype.autoUpdateTransform=function(){this.lastTime=this.lastTime||Date.now();var a=.001*(Date.now()-this.lastTime);this.lastTime=Date.now(),this.update(a),d.DisplayObjectContainer.prototype.updateTransform.call(this)},d.Spine.prototype.createSprite=function(a,b){var c=b.rendererObject,f=c.page.rendererObject,g=new d.Rectangle(c.x,c.y,c.rotate?c.height:c.width,c.rotate?c.width:c.height),h=new d.Texture(f,g),i=new d.Sprite(h),j=c.rotate?.5*Math.PI:0;return i.scale.set(c.width/c.originalWidth,c.height/c.originalHeight),i.rotation=j-b.rotation*e.degRad,i.anchor.x=i.anchor.y=.5,a.sprites=a.sprites||{},a.sprites[c.name]=i,i},d.Spine.prototype.createMesh=function(a,b){var c=b.rendererObject,e=c.page.rendererObject,f=new d.Texture(e),g=new d.Strip(f);return g.drawMode=d.Strip.DrawModes.TRIANGLES,g.canvasPadding=1.5,g.vertices=new d.Float32Array(b.uvs.length),g.uvs=b.uvs,g.indices=b.triangles,a.meshes=a.meshes||{},a.meshes[b.name]=g,g},d.BaseTextureCache={},d.BaseTextureCacheIdGenerator=0,d.BaseTexture=function(a,b){if(this.resolution=1,this.width=100,this.height=100,this.scaleMode=b||d.scaleModes.DEFAULT,this.hasLoaded=!1,this.source=a,this._UID=d._UID++,this.premultipliedAlpha=!0,this._glTextures=[],this.mipmap=!1,this._dirty=[!0,!0,!0,!0],a){if((this.source.complete||this.source.getContext)&&this.source.width&&this.source.height)this.hasLoaded=!0,this.width=this.source.naturalWidth||this.source.width,this.height=this.source.naturalHeight||this.source.height,this.dirty();else{var c=this;this.source.onload=function(){c.hasLoaded=!0,c.width=c.source.naturalWidth||c.source.width,c.height=c.source.naturalHeight||c.source.height,c.dirty(),c.dispatchEvent({type:"loaded",content:c})},this.source.onerror=function(){c.dispatchEvent({type:"error",content:c})}}this.imageUrl=null,this._powerOf2=!1}},d.BaseTexture.prototype.constructor=d.BaseTexture,d.EventTarget.mixin(d.BaseTexture.prototype),d.BaseTexture.prototype.destroy=function(){this.imageUrl?(delete d.BaseTextureCache[this.imageUrl],delete d.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")):this.source&&this.source._pixiId&&delete d.BaseTextureCache[this.source._pixiId],this.source=null,this.unloadFromGPU()},d.BaseTexture.prototype.updateSourceImage=function(a){this.hasLoaded=!1,this.source.src=null,this.source.src=a},d.BaseTexture.prototype.dirty=function(){for(var a=0;a<this._glTextures.length;a++)this._dirty[a]=!0},d.BaseTexture.prototype.unloadFromGPU=function(){this.dirty();for(var a=this._glTextures.length-1;a>=0;a--){var b=this._glTextures[a],c=d.glContexts[a];c&&b&&c.deleteTexture(b)}this._glTextures.length=0,this.dirty()},d.BaseTexture.fromImage=function(a,b,c){var e=d.BaseTextureCache[a];if(void 0===b&&-1===a.indexOf("data:")&&(b=!0),!e){var f=new Image;b&&(f.crossOrigin=""),f.src=a,e=new d.BaseTexture(f,c),e.imageUrl=a,d.BaseTextureCache[a]=e,-1!==a.indexOf(d.RETINA_PREFIX+".")&&(e.resolution=2)}return e},d.BaseTexture.fromCanvas=function(a,b){a._pixiId||(a._pixiId="canvas_"+d.TextureCacheIdGenerator++);var c=d.BaseTextureCache[a._pixiId];return c||(c=new d.BaseTexture(a,b),d.BaseTextureCache[a._pixiId]=c),c},d.TextureCache={},d.FrameCache={},d.TextureCacheIdGenerator=0,d.Texture=function(a,b,c,e){this.noFrame=!1,b||(this.noFrame=!0,b=new d.Rectangle(0,0,1,1)),a instanceof d.Texture&&(a=a.baseTexture),this.baseTexture=a,this.frame=b,this.trim=e,this.valid=!1,this.requiresUpdate=!1,this._uvs=null,this.width=0,this.height=0,this.crop=c||new d.Rectangle(0,0,1,1),a.hasLoaded?(this.noFrame&&(b=new d.Rectangle(0,0,a.width,a.height)),this.setFrame(b)):a.addEventListener("loaded",this.onBaseTextureLoaded.bind(this))},d.Texture.prototype.constructor=d.Texture,d.EventTarget.mixin(d.Texture.prototype),d.Texture.prototype.onBaseTextureLoaded=function(){var a=this.baseTexture;a.removeEventListener("loaded",this.onLoaded),this.noFrame&&(this.frame=new d.Rectangle(0,0,a.width,a.height)),this.setFrame(this.frame),this.dispatchEvent({type:"update",content:this})},d.Texture.prototype.destroy=function(a){a&&this.baseTexture.destroy(),this.valid=!1},d.Texture.prototype.setFrame=function(a){if(this.noFrame=!1,this.frame=a,this.width=a.width,this.height=a.height,this.crop.x=a.x,this.crop.y=a.y,this.crop.width=a.width,this.crop.height=a.height,!this.trim&&(a.x+a.width>this.baseTexture.width||a.y+a.height>this.baseTexture.height))throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=a&&a.width&&a.height&&this.baseTexture.source&&this.baseTexture.hasLoaded,this.trim&&(this.width=this.trim.width,this.height=this.trim.height,this.frame.width=this.trim.width,this.frame.height=this.trim.height),this.valid&&this._updateUvs()},d.Texture.prototype._updateUvs=function(){this._uvs||(this._uvs=new d.TextureUvs);var a=this.crop,b=this.baseTexture.width,c=this.baseTexture.height;this._uvs.x0=a.x/b,this._uvs.y0=a.y/c,this._uvs.x1=(a.x+a.width)/b,this._uvs.y1=a.y/c,this._uvs.x2=(a.x+a.width)/b,this._uvs.y2=(a.y+a.height)/c,this._uvs.x3=a.x/b,this._uvs.y3=(a.y+a.height)/c},d.Texture.fromImage=function(a,b,c){var e=d.TextureCache[a];return e||(e=new d.Texture(d.BaseTexture.fromImage(a,b,c)),d.TextureCache[a]=e),e},d.Texture.fromFrame=function(a){var b=d.TextureCache[a];if(!b)throw new Error('The frameId "'+a+'" does not exist in the texture cache ');return b},d.Texture.fromCanvas=function(a,b){var c=d.BaseTexture.fromCanvas(a,b);return new d.Texture(c)},d.Texture.addTextureToCache=function(a,b){d.TextureCache[b]=a},d.Texture.removeTextureFromCache=function(a){var b=d.TextureCache[a];return delete d.TextureCache[a],delete d.BaseTextureCache[a],b},d.TextureUvs=function(){this.x0=0,this.y0=0,this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.x3=0,this.y3=0},d.Texture.emptyTexture=new d.Texture(new d.BaseTexture),d.RenderTexture=function(a,b,c,e,f){if(this.width=a||100,this.height=b||100,this.resolution=f||1,this.frame=new d.Rectangle(0,0,this.width*this.resolution,this.height*this.resolution),this.crop=new d.Rectangle(0,0,this.width*this.resolution,this.height*this.resolution),this.baseTexture=new d.BaseTexture,this.baseTexture.width=this.width*this.resolution,this.baseTexture.height=this.height*this.resolution,this.baseTexture._glTextures=[],this.baseTexture.resolution=this.resolution,this.baseTexture.scaleMode=e||d.scaleModes.DEFAULT,this.baseTexture.hasLoaded=!0,d.Texture.call(this,this.baseTexture,new d.Rectangle(0,0,this.width,this.height)),this.renderer=c||d.defaultRenderer,this.renderer.type===d.WEBGL_RENDERER){var g=this.renderer.gl;this.baseTexture._dirty[g.id]=!1,this.textureBuffer=new d.FilterTexture(g,this.width*this.resolution,this.height*this.resolution,this.baseTexture.scaleMode),this.baseTexture._glTextures[g.id]=this.textureBuffer.texture,this.render=this.renderWebGL,this.projection=new d.Point(.5*this.width,.5*-this.height)}else this.render=this.renderCanvas,this.textureBuffer=new d.CanvasBuffer(this.width*this.resolution,this.height*this.resolution),this.baseTexture.source=this.textureBuffer.canvas;this.valid=!0,this._updateUvs()},d.RenderTexture.prototype=Object.create(d.Texture.prototype),d.RenderTexture.prototype.constructor=d.RenderTexture,d.RenderTexture.prototype.resize=function(a,b,c){(a!==this.width||b!==this.height)&&(this.valid=a>0&&b>0,this.width=this.frame.width=this.crop.width=a,this.height=this.frame.height=this.crop.height=b,c&&(this.baseTexture.width=this.width,this.baseTexture.height=this.height),this.renderer.type===d.WEBGL_RENDERER&&(this.projection.x=this.width/2,this.projection.y=-this.height/2),this.valid&&this.textureBuffer.resize(this.width*this.resolution,this.height*this.resolution))},d.RenderTexture.prototype.clear=function(){this.valid&&(this.renderer.type===d.WEBGL_RENDERER&&this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer),this.textureBuffer.clear())},d.RenderTexture.prototype.renderWebGL=function(a,b,c){if(this.valid){var d=a.worldTransform;d.identity(),d.translate(0,2*this.projection.y),b&&d.append(b),d.scale(1,-1),a.worldAlpha=1;for(var e=a.children,f=0,g=e.length;g>f;f++)e[f].updateTransform();var h=this.renderer.gl;h.viewport(0,0,this.width*this.resolution,this.height*this.resolution),h.bindFramebuffer(h.FRAMEBUFFER,this.textureBuffer.frameBuffer),c&&this.textureBuffer.clear(),this.renderer.spriteBatch.dirty=!0,this.renderer.renderDisplayObject(a,this.projection,this.textureBuffer.frameBuffer),this.renderer.spriteBatch.dirty=!0}},d.RenderTexture.prototype.renderCanvas=function(a,b,c){if(this.valid){var d=a.worldTransform;d.identity(),b&&d.append(b),a.worldAlpha=1;for(var e=a.children,f=0,g=e.length;g>f;f++)e[f].updateTransform();c&&this.textureBuffer.clear();var h=this.textureBuffer.context,i=this.renderer.resolution;this.renderer.resolution=this.resolution,this.renderer.renderDisplayObject(a,h),this.renderer.resolution=i}},d.RenderTexture.prototype.getImage=function(){var a=new Image;return a.src=this.getBase64(),a},d.RenderTexture.prototype.getBase64=function(){return this.getCanvas().toDataURL()},d.RenderTexture.prototype.getCanvas=function(){if(this.renderer.type===d.WEBGL_RENDERER){var a=this.renderer.gl,b=this.textureBuffer.width,c=this.textureBuffer.height,e=new Uint8Array(4*b*c);a.bindFramebuffer(a.FRAMEBUFFER,this.textureBuffer.frameBuffer),a.readPixels(0,0,b,c,a.RGBA,a.UNSIGNED_BYTE,e),a.bindFramebuffer(a.FRAMEBUFFER,null);var f=new d.CanvasBuffer(b,c),g=f.context.getImageData(0,0,b,c);return g.data.set(e),f.context.putImageData(g,0,0),f.canvas}return this.textureBuffer.canvas},d.RenderTexture.tempMatrix=new d.Matrix,d.VideoTexture=function(a,b){if(!a)throw new Error("No video source element specified.");(a.readyState===a.HAVE_ENOUGH_DATA||a.readyState===a.HAVE_FUTURE_DATA)&&a.width&&a.height&&(a.complete=!0),d.BaseTexture.call(this,a,b),this.autoUpdate=!1,this.updateBound=this._onUpdate.bind(this),a.complete||(this._onCanPlay=this.onCanPlay.bind(this),a.addEventListener("canplay",this._onCanPlay),a.addEventListener("canplaythrough",this._onCanPlay),a.addEventListener("play",this.onPlayStart.bind(this)),a.addEventListener("pause",this.onPlayStop.bind(this)))},d.VideoTexture.prototype=Object.create(d.BaseTexture.prototype),d.VideoTexture.constructor=d.VideoTexture,d.VideoTexture.prototype._onUpdate=function(){this.autoUpdate&&(window.requestAnimationFrame(this.updateBound),this.dirty())},d.VideoTexture.prototype.onPlayStart=function(){this.autoUpdate||(window.requestAnimationFrame(this.updateBound),this.autoUpdate=!0)},d.VideoTexture.prototype.onPlayStop=function(){this.autoUpdate=!1},d.VideoTexture.prototype.onCanPlay=function(){"canplaythrough"===event.type&&(this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.dispatchEvent({type:"loaded",content:this}))))},d.VideoTexture.prototype.destroy=function(){this.source&&this.source._pixiId&&(d.BaseTextureCache[this.source._pixiId]=null,delete d.BaseTextureCache[this.source._pixiId],this.source._pixiId=null,delete this.source._pixiId),d.BaseTexture.prototype.destroy.call(this)},d.VideoTexture.baseTextureFromVideo=function(a,b){a._pixiId||(a._pixiId="video_"+d.TextureCacheIdGenerator++);var c=d.BaseTextureCache[a._pixiId];return c||(c=new d.VideoTexture(a,b),d.BaseTextureCache[a._pixiId]=c),c},d.VideoTexture.textureFromVideo=function(a,b){var c=d.VideoTexture.baseTextureFromVideo(a,b);return new d.Texture(c)},d.VideoTexture.fromUrl=function(a,b){var c=document.createElement("video");return c.src=a,c.autoPlay=!0,c.play(),d.VideoTexture.textureFromVideo(c,b)},d.AssetLoader=function(a,b){this.assetURLs=a,this.crossorigin=b,this.loadersByType={jpg:d.ImageLoader,jpeg:d.ImageLoader,png:d.ImageLoader,gif:d.ImageLoader,webp:d.ImageLoader,json:d.JsonLoader,atlas:d.AtlasLoader,anim:d.SpineLoader,xml:d.BitmapFontLoader,fnt:d.BitmapFontLoader}},d.EventTarget.mixin(d.AssetLoader.prototype),d.AssetLoader.prototype.constructor=d.AssetLoader,d.AssetLoader.prototype._getDataType=function(a){var b="data:",c=a.slice(0,b.length).toLowerCase();if(c===b){var d=a.slice(b.length),e=d.indexOf(",");if(-1===e)return null;var f=d.slice(0,e).split(";")[0];return f&&"text/plain"!==f.toLowerCase()?f.split("/").pop().toLowerCase():"txt"}return null},d.AssetLoader.prototype.load=function(){function a(a){b.onAssetLoaded(a.data.content)}var b=this;this.loadCount=this.assetURLs.length;for(var c=0;c<this.assetURLs.length;c++){var d=this.assetURLs[c],e=this._getDataType(d);e||(e=d.split("?").shift().split(".").pop().toLowerCase());var f=this.loadersByType[e];if(!f)throw new Error(e+" is an unsupported file type");var g=new f(d,this.crossorigin);g.on("loaded",a),g.load()}},d.AssetLoader.prototype.onAssetLoaded=function(a){this.loadCount--,this.emit("onProgress",{content:this,loader:a}),this.onProgress&&this.onProgress(a),this.loadCount||(this.emit("onComplete",{content:this}),this.onComplete&&this.onComplete())},d.JsonLoader=function(a,b){this.url=a,this.crossorigin=b,this.baseUrl=a.replace(/[^\/]*$/,""),this.loaded=!1},d.JsonLoader.prototype.constructor=d.JsonLoader,d.EventTarget.mixin(d.JsonLoader.prototype),d.JsonLoader.prototype.load=function(){window.XDomainRequest&&this.crossorigin?(this.ajaxRequest=new window.XDomainRequest,this.ajaxRequest.timeout=3e3,this.ajaxRequest.onerror=this.onError.bind(this),this.ajaxRequest.ontimeout=this.onError.bind(this),this.ajaxRequest.onprogress=function(){},this.ajaxRequest.onload=this.onJSONLoaded.bind(this)):(this.ajaxRequest=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP"),this.ajaxRequest.onreadystatechange=this.onReadyStateChanged.bind(this)),this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.send()},d.JsonLoader.prototype.onReadyStateChanged=function(){4!==this.ajaxRequest.readyState||200!==this.ajaxRequest.status&&-1!==window.location.href.indexOf("http")||this.onJSONLoaded()},d.JsonLoader.prototype.onJSONLoaded=function(){if(!this.ajaxRequest.responseText)return void this.onError();if(this.json=JSON.parse(this.ajaxRequest.responseText),this.json.frames&&this.json.meta&&this.json.meta.image){var a=this.baseUrl+this.json.meta.image,b=new d.ImageLoader(a,this.crossorigin),c=this.json.frames;this.texture=b.texture.baseTexture,b.addEventListener("loaded",this.onLoaded.bind(this));for(var f in c){var g=c[f].frame;if(g){var h=new d.Rectangle(g.x,g.y,g.w,g.h),i=h.clone(),j=null;if(c[f].trimmed){var k=c[f].sourceSize,l=c[f].spriteSourceSize;j=new d.Rectangle(l.x,l.y,k.w,k.h)}d.TextureCache[f]=new d.Texture(this.texture,h,i,j)}}b.load()}else if(this.json.bones)if(d.AnimCache[this.url])this.onLoaded();else{var m=this.url.substr(0,this.url.lastIndexOf("."))+".atlas",n=new d.JsonLoader(m,this.crossorigin),o=this;n.onJSONLoaded=function(){if(!this.ajaxRequest.responseText)return void this.onError();var a=new d.SpineTextureLoader(this.url.substring(0,this.url.lastIndexOf("/"))),b=new e.Atlas(this.ajaxRequest.responseText,a),c=new e.AtlasAttachmentLoader(b),f=new e.SkeletonJson(c),g=f.readSkeletonData(o.json);d.AnimCache[o.url]=g,o.spine=g,o.spineAtlas=b,o.spineAtlasLoader=n,a.loadingCount>0?a.addEventListener("loadedBaseTexture",function(a){a.content.content.loadingCount<=0&&o.onLoaded()}):o.onLoaded()},n.load()}else this.onLoaded()},d.JsonLoader.prototype.onLoaded=function(){this.loaded=!0,this.dispatchEvent({type:"loaded",content:this})},d.JsonLoader.prototype.onError=function(){this.dispatchEvent({type:"error",content:this})},d.AtlasLoader=function(a,b){this.url=a,this.baseUrl=a.replace(/[^\/]*$/,""),this.crossorigin=b,this.loaded=!1},d.AtlasLoader.constructor=d.AtlasLoader,d.EventTarget.mixin(d.AtlasLoader.prototype),d.AtlasLoader.prototype.load=function(){this.ajaxRequest=new d.AjaxRequest,this.ajaxRequest.onreadystatechange=this.onAtlasLoaded.bind(this),this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.overrideMimeType&&this.ajaxRequest.overrideMimeType("application/json"),this.ajaxRequest.send(null)},d.AtlasLoader.prototype.onAtlasLoaded=function(){if(4===this.ajaxRequest.readyState)if(200===this.ajaxRequest.status||-1===window.location.href.indexOf("http")){this.atlas={meta:{image:[]},frames:[]};var a=this.ajaxRequest.responseText.split(/\r?\n/),b=-3,c=0,e=null,f=!1,g=0,h=0,i=this.onLoaded.bind(this);for(g=0;g<a.length;g++)if(a[g]=a[g].replace(/^\s+|\s+$/g,""),""===a[g]&&(f=g+1),a[g].length>0){if(f===g)this.atlas.meta.image.push(a[g]),c=this.atlas.meta.image.length-1,this.atlas.frames.push({}),b=-3;
else if(b>0)if(b%7===1)null!=e&&(this.atlas.frames[c][e.name]=e),e={name:a[g],frame:{}};else{var j=a[g].split(" ");if(b%7===3)e.frame.x=Number(j[1].replace(",","")),e.frame.y=Number(j[2]);else if(b%7===4)e.frame.w=Number(j[1].replace(",","")),e.frame.h=Number(j[2]);else if(b%7===5){var k={x:0,y:0,w:Number(j[1].replace(",","")),h:Number(j[2])};k.w>e.frame.w||k.h>e.frame.h?(e.trimmed=!0,e.realSize=k):e.trimmed=!1}}b++}if(null!=e&&(this.atlas.frames[c][e.name]=e),this.atlas.meta.image.length>0){for(this.images=[],h=0;h<this.atlas.meta.image.length;h++){var l=this.baseUrl+this.atlas.meta.image[h],m=this.atlas.frames[h];this.images.push(new d.ImageLoader(l,this.crossorigin));for(g in m){var n=m[g].frame;n&&(d.TextureCache[g]=new d.Texture(this.images[h].texture.baseTexture,{x:n.x,y:n.y,width:n.w,height:n.h}),m[g].trimmed&&(d.TextureCache[g].realSize=m[g].realSize,d.TextureCache[g].trim.x=0,d.TextureCache[g].trim.y=0))}}for(this.currentImageId=0,h=0;h<this.images.length;h++)this.images[h].on("loaded",i);this.images[this.currentImageId].load()}else this.onLoaded()}else this.onError()},d.AtlasLoader.prototype.onLoaded=function(){this.images.length-1>this.currentImageId?(this.currentImageId++,this.images[this.currentImageId].load()):(this.loaded=!0,this.emit("loaded",{content:this}))},d.AtlasLoader.prototype.onError=function(){this.emit("error",{content:this})},d.SpriteSheetLoader=function(a,b){this.url=a,this.crossorigin=b,this.baseUrl=a.replace(/[^\/]*$/,""),this.texture=null,this.frames={}},d.SpriteSheetLoader.prototype.constructor=d.SpriteSheetLoader,d.EventTarget.mixin(d.SpriteSheetLoader.prototype),d.SpriteSheetLoader.prototype.load=function(){var a=this,b=new d.JsonLoader(this.url,this.crossorigin);b.on("loaded",function(b){a.json=b.data.content.json,a.onLoaded()}),b.load()},d.SpriteSheetLoader.prototype.onLoaded=function(){this.emit("loaded",{content:this})},d.ImageLoader=function(a,b){this.texture=d.Texture.fromImage(a,b),this.frames=[]},d.ImageLoader.prototype.constructor=d.ImageLoader,d.EventTarget.mixin(d.ImageLoader.prototype),d.ImageLoader.prototype.load=function(){this.texture.baseTexture.hasLoaded?this.onLoaded():this.texture.baseTexture.on("loaded",this.onLoaded.bind(this))},d.ImageLoader.prototype.onLoaded=function(){this.emit("loaded",{content:this})},d.ImageLoader.prototype.loadFramedSpriteSheet=function(a,b,c){this.frames=[];for(var e=Math.floor(this.texture.width/a),f=Math.floor(this.texture.height/b),g=0,h=0;f>h;h++)for(var i=0;e>i;i++,g++){var j=new d.Texture(this.texture.baseTexture,{x:i*a,y:h*b,width:a,height:b});this.frames.push(j),c&&(d.TextureCache[c+"-"+g]=j)}this.load()},d.BitmapFontLoader=function(a,b){this.url=a,this.crossorigin=b,this.baseUrl=a.replace(/[^\/]*$/,""),this.texture=null},d.BitmapFontLoader.prototype.constructor=d.BitmapFontLoader,d.EventTarget.mixin(d.BitmapFontLoader.prototype),d.BitmapFontLoader.prototype.load=function(){this.ajaxRequest=new d.AjaxRequest,this.ajaxRequest.onreadystatechange=this.onXMLLoaded.bind(this),this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.overrideMimeType&&this.ajaxRequest.overrideMimeType("application/xml"),this.ajaxRequest.send(null)},d.BitmapFontLoader.prototype.onXMLLoaded=function(){if(4===this.ajaxRequest.readyState&&(200===this.ajaxRequest.status||-1===window.location.protocol.indexOf("http"))){var a=this.ajaxRequest.responseXML;if(!a||/MSIE 9/i.test(navigator.userAgent)||navigator.isCocoonJS)if("function"==typeof window.DOMParser){var b=new DOMParser;a=b.parseFromString(this.ajaxRequest.responseText,"text/xml")}else{var c=document.createElement("div");c.innerHTML=this.ajaxRequest.responseText,a=c}var e=this.baseUrl+a.getElementsByTagName("page")[0].getAttribute("file"),f=new d.ImageLoader(e,this.crossorigin);this.texture=f.texture.baseTexture;var g={},h=a.getElementsByTagName("info")[0],i=a.getElementsByTagName("common")[0];g.font=h.getAttribute("face"),g.size=parseInt(h.getAttribute("size"),10),g.lineHeight=parseInt(i.getAttribute("lineHeight"),10),g.chars={};for(var j=a.getElementsByTagName("char"),k=0;k<j.length;k++){var l=parseInt(j[k].getAttribute("id"),10),m=new d.Rectangle(parseInt(j[k].getAttribute("x"),10),parseInt(j[k].getAttribute("y"),10),parseInt(j[k].getAttribute("width"),10),parseInt(j[k].getAttribute("height"),10));g.chars[l]={xOffset:parseInt(j[k].getAttribute("xoffset"),10),yOffset:parseInt(j[k].getAttribute("yoffset"),10),xAdvance:parseInt(j[k].getAttribute("xadvance"),10),kerning:{},texture:d.TextureCache[l]=new d.Texture(this.texture,m)}}var n=a.getElementsByTagName("kerning");for(k=0;k<n.length;k++){var o=parseInt(n[k].getAttribute("first"),10),p=parseInt(n[k].getAttribute("second"),10),q=parseInt(n[k].getAttribute("amount"),10);g.chars[p].kerning[o]=q}d.BitmapText.fonts[g.font]=g,f.addEventListener("loaded",this.onLoaded.bind(this)),f.load()}},d.BitmapFontLoader.prototype.onLoaded=function(){this.emit("loaded",{content:this})},d.SpineLoader=function(a,b){this.url=a,this.crossorigin=b,this.loaded=!1},d.SpineLoader.prototype.constructor=d.SpineLoader,d.EventTarget.mixin(d.SpineLoader.prototype),d.SpineLoader.prototype.load=function(){var a=this,b=new d.JsonLoader(this.url,this.crossorigin);b.on("loaded",function(b){a.json=b.data.content.json,a.onLoaded()}),b.load()},d.SpineLoader.prototype.onLoaded=function(){this.loaded=!0,this.emit("loaded",{content:this})},d.AbstractFilter=function(a,b){this.passes=[this],this.shaders=[],this.dirty=!0,this.padding=0,this.uniforms=b||{},this.fragmentSrc=a||[]},d.AbstractFilter.prototype.constructor=d.AbstractFilter,d.AbstractFilter.prototype.syncUniforms=function(){for(var a=0,b=this.shaders.length;b>a;a++)this.shaders[a].dirty=!0},d.AlphaMaskFilter=function(a){d.AbstractFilter.call(this),this.passes=[this],a.baseTexture._powerOf2=!0,this.uniforms={mask:{type:"sampler2D",value:a},mapDimensions:{type:"2f",value:{x:1,y:5112}},dimensions:{type:"4fv",value:[0,0,0,0]}},a.baseTexture.hasLoaded?(this.uniforms.mask.value.x=a.width,this.uniforms.mask.value.y=a.height):(this.boundLoadedFunction=this.onTextureLoaded.bind(this),a.baseTexture.on("loaded",this.boundLoadedFunction)),this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D mask;","uniform sampler2D uSampler;","uniform vec2 offset;","uniform vec4 dimensions;","uniform vec2 mapDimensions;","void main(void) {","   vec2 mapCords = vTextureCoord.xy;","   mapCords += (dimensions.zw + offset)/ dimensions.xy ;","   mapCords.y *= -1.0;","   mapCords.y += 1.0;","   mapCords *= dimensions.xy / mapDimensions;","   vec4 original =  texture2D(uSampler, vTextureCoord);","   float maskAlpha =  texture2D(mask, mapCords).r;","   original *= maskAlpha;","   gl_FragColor =  original;","}"]},d.AlphaMaskFilter.prototype=Object.create(d.AbstractFilter.prototype),d.AlphaMaskFilter.prototype.constructor=d.AlphaMaskFilter,d.AlphaMaskFilter.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.mask.value.width,this.uniforms.mapDimensions.value.y=this.uniforms.mask.value.height,this.uniforms.mask.value.baseTexture.off("loaded",this.boundLoadedFunction)},Object.defineProperty(d.AlphaMaskFilter.prototype,"map",{get:function(){return this.uniforms.mask.value},set:function(a){this.uniforms.mask.value=a}}),d.ColorMatrixFilter=function(){d.AbstractFilter.call(this),this.passes=[this],this.uniforms={matrix:{type:"mat4",value:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float invert;","uniform mat4 matrix;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * matrix;","}"]},d.ColorMatrixFilter.prototype=Object.create(d.AbstractFilter.prototype),d.ColorMatrixFilter.prototype.constructor=d.ColorMatrixFilter,Object.defineProperty(d.ColorMatrixFilter.prototype,"matrix",{get:function(){return this.uniforms.matrix.value},set:function(a){this.uniforms.matrix.value=a}}),d.GrayFilter=function(){d.AbstractFilter.call(this),this.passes=[this],this.uniforms={gray:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float gray;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), gray);","}"]},d.GrayFilter.prototype=Object.create(d.AbstractFilter.prototype),d.GrayFilter.prototype.constructor=d.GrayFilter,Object.defineProperty(d.GrayFilter.prototype,"gray",{get:function(){return this.uniforms.gray.value},set:function(a){this.uniforms.gray.value=a}}),d.DisplacementFilter=function(a){d.AbstractFilter.call(this),this.passes=[this],a.baseTexture._powerOf2=!0,this.uniforms={displacementMap:{type:"sampler2D",value:a},scale:{type:"2f",value:{x:30,y:30}},offset:{type:"2f",value:{x:0,y:0}},mapDimensions:{type:"2f",value:{x:1,y:5112}},dimensions:{type:"4fv",value:[0,0,0,0]}},a.baseTexture.hasLoaded?(this.uniforms.mapDimensions.value.x=a.width,this.uniforms.mapDimensions.value.y=a.height):(this.boundLoadedFunction=this.onTextureLoaded.bind(this),a.baseTexture.on("loaded",this.boundLoadedFunction)),this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D displacementMap;","uniform sampler2D uSampler;","uniform vec2 scale;","uniform vec2 offset;","uniform vec4 dimensions;","uniform vec2 mapDimensions;","void main(void) {","   vec2 mapCords = vTextureCoord.xy;","   mapCords += (dimensions.zw + offset)/ dimensions.xy ;","   mapCords.y *= -1.0;","   mapCords.y += 1.0;","   vec2 matSample = texture2D(displacementMap, mapCords).xy;","   matSample -= 0.5;","   matSample *= scale;","   matSample /= mapDimensions;","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + matSample.x, vTextureCoord.y + matSample.y));","   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb, 1.0);","   vec2 cord = vTextureCoord;","}"]},d.DisplacementFilter.prototype=Object.create(d.AbstractFilter.prototype),d.DisplacementFilter.prototype.constructor=d.DisplacementFilter,d.DisplacementFilter.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.displacementMap.value.width,this.uniforms.mapDimensions.value.y=this.uniforms.displacementMap.value.height,this.uniforms.displacementMap.value.baseTexture.off("loaded",this.boundLoadedFunction)},Object.defineProperty(d.DisplacementFilter.prototype,"map",{get:function(){return this.uniforms.displacementMap.value},set:function(a){this.uniforms.displacementMap.value=a}}),Object.defineProperty(d.DisplacementFilter.prototype,"scale",{get:function(){return this.uniforms.scale.value},set:function(a){this.uniforms.scale.value=a}}),Object.defineProperty(d.DisplacementFilter.prototype,"offset",{get:function(){return this.uniforms.offset.value},set:function(a){this.uniforms.offset.value=a}}),d.PixelateFilter=function(){d.AbstractFilter.call(this),this.passes=[this],this.uniforms={invert:{type:"1f",value:0},dimensions:{type:"4fv",value:new d.Float32Array([1e4,100,10,10])},pixelSize:{type:"2f",value:{x:10,y:10}}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec2 testDim;","uniform vec4 dimensions;","uniform vec2 pixelSize;","uniform sampler2D uSampler;","void main(void) {","   vec2 coord = vTextureCoord;","   vec2 size = dimensions.xy/pixelSize;","   vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;","   gl_FragColor = texture2D(uSampler, color);","}"]},d.PixelateFilter.prototype=Object.create(d.AbstractFilter.prototype),d.PixelateFilter.prototype.constructor=d.PixelateFilter,Object.defineProperty(d.PixelateFilter.prototype,"size",{get:function(){return this.uniforms.pixelSize.value},set:function(a){this.dirty=!0,this.uniforms.pixelSize.value=a}}),d.BlurXFilter=function(){d.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 4.0*blur, vTextureCoord.y)) * 0.05;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 3.0*blur, vTextureCoord.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 2.0*blur, vTextureCoord.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - blur, vTextureCoord.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + blur, vTextureCoord.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 2.0*blur, vTextureCoord.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 3.0*blur, vTextureCoord.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 4.0*blur, vTextureCoord.y)) * 0.05;","   gl_FragColor = sum;","}"]},d.BlurXFilter.prototype=Object.create(d.AbstractFilter.prototype),d.BlurXFilter.prototype.constructor=d.BlurXFilter,Object.defineProperty(d.BlurXFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(a){this.dirty=!0,this.uniforms.blur.value=1/7e3*a}}),d.BlurYFilter=function(){d.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 4.0*blur)) * 0.05;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 4.0*blur)) * 0.05;","   gl_FragColor = sum;","}"]},d.BlurYFilter.prototype=Object.create(d.AbstractFilter.prototype),d.BlurYFilter.prototype.constructor=d.BlurYFilter,Object.defineProperty(d.BlurYFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(a){this.uniforms.blur.value=1/7e3*a}}),d.BlurFilter=function(){this.blurXFilter=new d.BlurXFilter,this.blurYFilter=new d.BlurYFilter,this.passes=[this.blurXFilter,this.blurYFilter]},d.BlurFilter.prototype=Object.create(d.AbstractFilter.prototype),d.BlurFilter.prototype.constructor=d.BlurFilter,Object.defineProperty(d.BlurFilter.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(a){this.blurXFilter.blur=this.blurYFilter.blur=a}}),Object.defineProperty(d.BlurFilter.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(a){this.blurXFilter.blur=a}}),Object.defineProperty(d.BlurFilter.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(a){this.blurYFilter.blur=a}}),d.InvertFilter=function(){d.AbstractFilter.call(this),this.passes=[this],this.uniforms={invert:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float invert;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);","}"]},d.InvertFilter.prototype=Object.create(d.AbstractFilter.prototype),d.InvertFilter.prototype.constructor=d.InvertFilter,Object.defineProperty(d.InvertFilter.prototype,"invert",{get:function(){return this.uniforms.invert.value},set:function(a){this.uniforms.invert.value=a}}),d.SepiaFilter=function(){d.AbstractFilter.call(this),this.passes=[this],this.uniforms={sepia:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float sepia;","uniform sampler2D uSampler;","const mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);","}"]},d.SepiaFilter.prototype=Object.create(d.AbstractFilter.prototype),d.SepiaFilter.prototype.constructor=d.SepiaFilter,Object.defineProperty(d.SepiaFilter.prototype,"sepia",{get:function(){return this.uniforms.sepia.value},set:function(a){this.uniforms.sepia.value=a}}),d.TwistFilter=function(){d.AbstractFilter.call(this),this.passes=[this],this.uniforms={radius:{type:"1f",value:.5},angle:{type:"1f",value:5},offset:{type:"2f",value:{x:.5,y:.5}}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec4 dimensions;","uniform sampler2D uSampler;","uniform float radius;","uniform float angle;","uniform vec2 offset;","void main(void) {","   vec2 coord = vTextureCoord - offset;","   float distance = length(coord);","   if (distance < radius) {","       float ratio = (radius - distance) / radius;","       float angleMod = ratio * ratio * angle;","       float s = sin(angleMod);","       float c = cos(angleMod);","       coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);","   }","   gl_FragColor = texture2D(uSampler, coord+offset);","}"]},d.TwistFilter.prototype=Object.create(d.AbstractFilter.prototype),d.TwistFilter.prototype.constructor=d.TwistFilter,Object.defineProperty(d.TwistFilter.prototype,"offset",{get:function(){return this.uniforms.offset.value},set:function(a){this.dirty=!0,this.uniforms.offset.value=a}}),Object.defineProperty(d.TwistFilter.prototype,"radius",{get:function(){return this.uniforms.radius.value},set:function(a){this.dirty=!0,this.uniforms.radius.value=a}}),Object.defineProperty(d.TwistFilter.prototype,"angle",{get:function(){return this.uniforms.angle.value},set:function(a){this.dirty=!0,this.uniforms.angle.value=a}}),d.ColorStepFilter=function(){d.AbstractFilter.call(this),this.passes=[this],this.uniforms={step:{type:"1f",value:5}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float step;","void main(void) {","   vec4 color = texture2D(uSampler, vTextureCoord);","   color = floor(color * step) / step;","   gl_FragColor = color;","}"]},d.ColorStepFilter.prototype=Object.create(d.AbstractFilter.prototype),d.ColorStepFilter.prototype.constructor=d.ColorStepFilter,Object.defineProperty(d.ColorStepFilter.prototype,"step",{get:function(){return this.uniforms.step.value},set:function(a){this.uniforms.step.value=a}}),d.DotScreenFilter=function(){d.AbstractFilter.call(this),this.passes=[this],this.uniforms={scale:{type:"1f",value:1},angle:{type:"1f",value:5},dimensions:{type:"4fv",value:[0,0,0,0]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec4 dimensions;","uniform sampler2D uSampler;","uniform float angle;","uniform float scale;","float pattern() {","   float s = sin(angle), c = cos(angle);","   vec2 tex = vTextureCoord * dimensions.xy;","   vec2 point = vec2(","       c * tex.x - s * tex.y,","       s * tex.x + c * tex.y","   ) * scale;","   return (sin(point.x) * sin(point.y)) * 4.0;","}","void main() {","   vec4 color = texture2D(uSampler, vTextureCoord);","   float average = (color.r + color.g + color.b) / 3.0;","   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);","}"]},d.DotScreenFilter.prototype=Object.create(d.AbstractFilter.prototype),d.DotScreenFilter.prototype.constructor=d.DotScreenFilter,Object.defineProperty(d.DotScreenFilter.prototype,"scale",{get:function(){return this.uniforms.scale.value},set:function(a){this.dirty=!0,this.uniforms.scale.value=a}}),Object.defineProperty(d.DotScreenFilter.prototype,"angle",{get:function(){return this.uniforms.angle.value},set:function(a){this.dirty=!0,this.uniforms.angle.value=a}}),d.CrossHatchFilter=function(){d.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);","    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);","    if (lum < 1.00) {","        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.75) {","        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.50) {","        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.3) {","        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","}"]},d.CrossHatchFilter.prototype=Object.create(d.AbstractFilter.prototype),d.CrossHatchFilter.prototype.constructor=d.CrossHatchFilter,Object.defineProperty(d.CrossHatchFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(a){this.uniforms.blur.value=1/7e3*a}}),d.RGBSplitFilter=function(){d.AbstractFilter.call(this),this.passes=[this],this.uniforms={red:{type:"2f",value:{x:20,y:20}},green:{type:"2f",value:{x:-20,y:20}},blue:{type:"2f",value:{x:20,y:-20}},dimensions:{type:"4fv",value:[0,0,0,0]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec2 red;","uniform vec2 green;","uniform vec2 blue;","uniform vec4 dimensions;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;","   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;","   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;","   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;","}"]},d.RGBSplitFilter.prototype=Object.create(d.AbstractFilter.prototype),d.RGBSplitFilter.prototype.constructor=d.RGBSplitFilter,Object.defineProperty(d.RGBSplitFilter.prototype,"red",{get:function(){return this.uniforms.red.value},set:function(a){this.uniforms.red.value=a}}),Object.defineProperty(d.RGBSplitFilter.prototype,"green",{get:function(){return this.uniforms.green.value},set:function(a){this.uniforms.green.value=a}}),Object.defineProperty(d.RGBSplitFilter.prototype,"blue",{get:function(){return this.uniforms.blue.value},set:function(a){this.uniforms.blue.value=a}}),"undefined"!=typeof c?("undefined"!=typeof b&&b.exports&&(c=b.exports=d),c.PIXI=d):"undefined"!=typeof define&&define.amd?define(d):a.PIXI=d}).call(this)},{}],69:[function(a,b){b.exports=a("./lib/Preloader")},{"./lib/Preloader":76}],70:[function(a,b){var c=a("./util/UtilHTTP"),d=function(a){this.mime=null,this.size=null,this.lastModified=null,this.httpHeader=null,a&&this.setFromHTTPHeader(a)};d.prototype={setFromHTTPHeader:function(a){this.httpHeader=c.parseHeader(a),this.httpHeader["content-length"]&&(this.size=this.httpHeader["content-length"]),this.httpHeader["content-type"]&&(this.mime=this.httpHeader["content-type"]),this.httpHeader["last-modified"]&&(this.lastModified=new Date(this.httpHeader["last-modified"]))}},b.exports=d},{"./util/UtilHTTP":78}],71:[function(a,b){function c(){return this.loadType==m.typeText||this.loadType==m.typeArraybuffer||this.loadType==m.typeBlob||this.loadType==m.typeJSON||this.loadType==m.typeDocument}function d(){return void 0!==this.xhr.responseType}function e(a,b){return a.responseType=b,a.responseType==b}var f=a("js-oop"),g=a("./LoaderCache"),h=a("./FileMeta"),i=a("signals"),j=a("./util/UtilArrayBuffer"),k=a("./util/UtilHTTP"),l=XMLHttpRequest,m=new f({initialize:function(a){this.xhr=null,this.content=null,this.url=null,this.cacheID=null,this.loadType=a||m.typeText,this.loadTypeSet=!1,this.fileMeta=null,this.onStart=new i,this.onProgress=new i,this.onComplete=new i,this.onError=new i,this._onStateChange=this._onStateChange.bind(this),this._onProgress=this._onProgress.bind(this)},canLoadUsingXHR:function(){return"undefined"!=typeof l},canLoadType:function(a){var b=new l;return b.open("GET","someFakeURL",!0),e(b,a)},load:function(a,b){if(this.url=a,this.cacheID=b,g.hasFile(this.url))this.content=g.get(this.url),this._dispatchProgress(1),this._dispatchComplete();else if(this.canLoadUsingXHR()){if(this.xhr=new l,this.xhr.open("GET",a,!0),this.xhr.onreadystatechange=this._onStateChange,void 0!==this.xhr.onprogress&&(this.xhr.onprogress=this._onProgress),this.loadType!=m.typeText){c.call(this)||(console.warn("Attempting to use incompatible load type "+this.loadType+". Switching it to "+m.typeText),this.loadType=m.typeText);try{this.loadTypeSet=d.call(this)&&e(this.xhr,this.loadType)}catch(f){this.loadTypeSet=!1}this.loadTypeSet||this.loadType!=m.typeBlob&&this.loadType!=m.typeArraybuffer||this.xhr.overrideMimeType("text/plain; charset=x-user-defined")}this.xhr.send()}},stopLoad:function(){this.xhr.abort()},_dispatchStart:function(){this.onStart.dispatch()},_dispatchProgress:function(a){this.onProgress.dispatch(a)},_dispatchComplete:function(){this.onComplete.dispatch(this.content)},_dispatchError:function(a){this.onError.dispatch(a)},_onProgress:function(a){var b=a.loaded||a.position,c=a.total||a.totalSize;this._dispatchProgress(c?b/c:0)},_onStateChange:function(){if(this.xhr.readyState>1){var a="",b=!1;try{a=this.xhr.status}catch(c){b=!0}if("200"==a)switch(this.xhr.readyState){case 2:this.fileMeta=new h(this.xhr.getAllResponseHeaders()),this._dispatchStart();break;case 3:break;case 4:this._parseContent(),this.cacheID&&this._addToCache(),this._dispatchComplete()}else b||(this.xhr.onreadystatechange=void 0,this._dispatchError(this.xhr.status))}},_addToCache:function(){g.add(this.cacheID,this.content)},_parseContent:function(){if(this.loadTypeSet||this.loadType==m.typeText)this.content=this.xhr.response;else switch(this.loadType){case m.typeArraybuffer:if(!ArrayBuffer)throw new Error("This browser does not support ArrayBuffer");this.content=j.stringToArrayBuffer(this.xhr.response);break;case m.typeBlob:if(!Blob)throw new Error("This browser does not support Blob");this.fileMeta||(this.fileMeta=new h),null===this.fileMeta.mime&&(this.fileMeta.mime=k.getMimeFromURL(this.url)),this.content=new Blob([j.stringToArrayBuffer(this.xhr.response)],{type:this.fileMeta.mime});break;case m.typeJSON:this.content=JSON.parse(this.xhr.response);break;case m.typeDocument:this.content=this.xhr.response}}});m.typeText="text",m.typeArraybuffer="arraybuffer",m.typeBlob="blob",m.typeJSON="json",m.typeDocument="document",b.exports=m},{"./FileMeta":70,"./LoaderCache":72,"./util/UtilArrayBuffer":77,"./util/UtilHTTP":78,"js-oop":61,signals:93}],72:[function(a,b){var c={data:{},get:function(a){return this.data[a]},hasFile:function(a){return void 0!==this.data[a]},add:function(a,b){return this.data[a]=b},remove:function(a){var b=void 0!==data[a];return this.data[a]=void 0,b}};b.exports=c},{}],73:[function(a,b){var c=a("js-oop"),d=a("./LoaderBase"),e=(a("./util/UtilArrayBuffer"),a("./util/UtilHTTP")),f=a("./FileMeta"),g=new c({Extends:d,initialize:function(){this._imageLoaded=!1,this.parent(),this.loadType=d.typeArraybuffer},load:function(a,b){this.canLoadUsingXHR()&&this.canLoadType(this.loadType)&&ArrayBuffer&&(window.URL||window.webkitURL||FileReader)?this.parent(a,b):this._createAndLoadImage(a)},_dispatchProgress:function(a){this.onProgress.dispatch(this._imageLoaded?a:.9999*a)},_dispatchComplete:function(){this._imageLoaded&&this.onComplete.dispatch()},_onImageLoadComplete:function(){this._imageLoaded=!0,this._dispatchProgress(1),this._dispatchComplete()},_onImageLoadFail:function(){this._dispatchError("Image failed to load")},_parseContent:function(){var a=null,b=null;if(this.fileMeta||(this.fileMeta=new f),this.loadTypeSet&&null!==this.fileMeta.mime||(this.fileMeta.mime=e.getMimeFromURL(this.url)),this.xhr.response instanceof ArrayBuffer)a=this.xhr.response;else{if(!this.xhr.mozResponseArrayBuffer)throw new Error("Return type for image load unsupported");a=this.xhr.mozResponseArrayBuffer}if(b=new Blob([a],{type:this.fileMeta.mime}),window.URL||window.webkitURL)this._createAndLoadImage((window.URL||window.webkitURL).createObjectURL(b));else if(FileReader){var c=new FileReader;c.onloadend=function(){(window.URL||window.webkitURL)&&(window.URL||window.webkitURL).revokeObjectURL(b),this._createAndLoadImage(c.result)}.bind(this),c.readAsDataURL(b)}},_createAndLoadImage:function(a){this.content=new Image,this.content.onload=this._onImageLoadComplete.bind(this),this.content.onerror=this._onImageLoadFail.bind(this),this.content.src=a}});b.exports=g},{"./FileMeta":70,"./LoaderBase":71,"./util/UtilArrayBuffer":77,"./util/UtilHTTP":78,"js-oop":61}],74:[function(a,b){var c=a("js-oop"),d=a("./LoaderBase"),e=new c({Extends:d,initialize:function(){this.parent(),this.loadType=d.typeJSON}});b.exports=e},{"./LoaderBase":71,"js-oop":61}],75:[function(a,b){var c=a("js-oop"),d=a("./LoaderBase"),e=new c({Extends:d,initialize:function(){this.parent(),this.loadType=d.typeText}});b.exports=e},{"./LoaderBase":71,"js-oop":61}],76:[function(a,b){var c=a("js-oop"),d=a("signals"),e=a("./util/UtilPath"),f=a("./LoaderImage"),g=a("./LoaderText"),h=a("./LoaderJSON"),i={png:f,jpg:f,gif:f,json:h},j=g,k=new c({initialize:function(){this.percTotal=0,this.loadIdx=0,this.urls=[],this.modifiedURL={},this.loaders={},this.cacheID={},this.percentageOfLoad={},this.progress=0,this.onProgress=new d,this.onComplete=new d,this.urlLoading=null,this._onLoadError=this._onLoadError.bind(this),this._onLoadProgress=this._onLoadProgress.bind(this),this._continueLoadQueue=this._continueLoadQueue.bind(this)},add:function(a,b,c){this.addFromLoaderType(a,this._getLoader(a),b,c)},addImage:function(a,b,c){this.addFromLoaderType(a,f,b,c)},addJSON:function(a,b,c){this.addFromLoaderType(a,h,b,c)},addText:function(a,b,c){this.addFromLoaderType(a,g,b,c)},addFromLoaderType:function(a,b,c,d){this.loaders[a]=new b,this._setupURL(a,c,d)},setCacheID:function(a,b){this.cacheID[a]=b},setPercentage:function(a,b){this.percentageOfLoad[a]=b},load:function(){null===this.urlLoading&&(this._setupPercentages(),this._continueLoadQueue())},stopLoad:function(){if(null!==this.urlLoading)for(var a=0,b=this.urls.length;b>a;a++)this.loaders[this.urls[a]].stopLoad()},getContent:function(a){return this.loaders[a]&&this.loaders[a].content},_setupURL:function(a,b,c){this.urls.push(a),this.modifiedURL[a]=c?c(a,b):b?e.getURLForDensity(a,b):a},_setupPercentages:function(){for(var a=0,b=1,c=0,d=0,e=1/this.urls.length,f=0,g=this.urls.length;g>f;f++)this.percentageOfLoad[this.urls[f]]?(a+=this.percentageOfLoad[this.urls[f]],c++):d++;if(d>0){a>1&&(b=1/a,a*=b);e=(1-a)/d;for(var f=0,g=this.urls.length;g>f;f++)this.percentageOfLoad[this.urls[f]]?this.percentageOfLoad[this.urls[f]]*=b:this.percentageOfLoad[this.urls[f]]=e}},_continueLoadQueue:function(){if(this.loadIdx<this.urls.length){null!==this.urlLoading&&(this.percTotal+=this.percentageOfLoad[this.urlLoading]),this.urlLoading=this.urls[this.loadIdx];var a=this.loaders[this.urlLoading],b=this.cacheID[this.urlLoading];this.loadIdx++,a.onProgress.add(this._onLoadProgress),a.onError.addOnce(this._onLoadError),a.onComplete.addOnce(this._continueLoadQueue),a.load(this.modifiedURL[this.urlLoading],b)
}else this.onComplete.dispatch()},_onLoadError:function(a){console.warn("Couldn't load "+this.urlLoading+" received the error: "+a);var b=this.percentageOfLoad[this.urlLoading];this.onProgress.dispatch(this.percTotal+b,this.urlLoading),this._continueLoadQueue()},_onLoadProgress:function(a){var b=this.percentageOfLoad[this.urlLoading]*a;this.onProgress.dispatch(this.percTotal+b,this.urlLoading)},_getLoader:function(a){var b=/\.(\w+)$/,c=b.exec(a),d=c&&c[1],e=null;return d&&(d=d.toLowerCase(),e=i[d]),e||(e=j),e}});b.exports=k},{"./LoaderImage":73,"./LoaderJSON":74,"./LoaderText":75,"./util/UtilPath":79,"js-oop":61,signals:93}],77:[function(a,b){b.exports={arrayBufferToString:function(){return String.fromCharCode.apply(null,new Uint16Array(buf))},stringToArrayBuffer:function(a){for(var b=new ArrayBuffer(2*a.length),c=new Uint16Array(b),d=0,e=a.length;e>d;d++)c[d]=a.charCodeAt(d);return b}}},{}],78:[function(a,b){var c={gif:"image/gif",jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",svg:"image/svg+xml",html:"text/html",css:"text/css",csv:"text/csv",xml:"text/xml"},d=a("./UtilPath");b.exports={getMimeFromURL:function(a){return this.getMimeFromExtension(d.getFileExtension(a))},getMimeFromExtension:function(a){var b=c[a.toLowerCase()];return b||"application/octet-stream"},parseHeader:function(a){for(var b=a.split("\n"),c={},d=/([a-zA-Z0-9\-_]+): *(.+)/,e=null,f=0,g=b.length;g>f;f++)""!=b[f]&&(e=d.exec(b[f]),e&&(c[e[1]]=e[2]));return c}}},{"./UtilPath":79}],79:[function(a,b){b.exports={getFileExtension:function(a){var b=a.split("/"),c=/\.([a-zA-Z]+)/.exec(b[b.length-1]);return c[1]||null},getURLForDensity:function(a,b){var c=/(\.\w+$)/,d=window.devicePixelRatio,e=null;if(b){var f=d-1;for(e=b[f];(void 0===e||null===e)&&f>=0;)e=b[f],f--;e||(e=b[0]),"number"==typeof e&&(e="@"+e+"x")}else e="@"+d+"x";return a.replace(c,e+"$1")}}},{}],80:[function(a,b){function c(a,b){var c=a.firstChild;return c?a.insertBefore(b,c):a.appendChild(b)}b.exports=c},{}],81:[function(a,b){"use strict";b.exports=a("./lib/core.js"),a("./lib/done.js"),a("./lib/es6-extensions.js"),a("./lib/node-extensions.js")},{"./lib/core.js":82,"./lib/done.js":83,"./lib/es6-extensions.js":84,"./lib/node-extensions.js":85}],82:[function(a,b){"use strict";function c(a){function b(a){return null===i?void k.push(a):void f(function(){var b=i?a.onFulfilled:a.onRejected;if(null===b)return void(i?a.resolve:a.reject)(j);var c;try{c=b(j)}catch(d){return void a.reject(d)}a.resolve(c)})}function c(a){try{if(a===l)throw new TypeError("A promise cannot be resolved with itself.");if(a&&("object"==typeof a||"function"==typeof a)){var b=a.then;if("function"==typeof b)return void e(b.bind(a),c,g)}i=!0,j=a,h()}catch(d){g(d)}}function g(a){i=!1,j=a,h()}function h(){for(var a=0,c=k.length;c>a;a++)b(k[a]);k=null}if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof a)throw new TypeError("not a function");var i=null,j=null,k=[],l=this;this.then=function(a,c){return new l.constructor(function(e,f){b(new d(a,c,e,f))})},e(a,c,g)}function d(a,b,c,d){this.onFulfilled="function"==typeof a?a:null,this.onRejected="function"==typeof b?b:null,this.resolve=c,this.reject=d}function e(a,b,c){var d=!1;try{a(function(a){d||(d=!0,b(a))},function(a){d||(d=!0,c(a))})}catch(e){if(d)return;d=!0,c(e)}}var f=a("asap");b.exports=c},{asap:86}],83:[function(a,b){"use strict";var c=a("./core.js"),d=a("asap");b.exports=c,c.prototype.done=function(){var a=arguments.length?this.then.apply(this,arguments):this;a.then(null,function(a){d(function(){throw a})})}},{"./core.js":82,asap:86}],84:[function(a,b){"use strict";function c(a){this.then=function(b){return"function"!=typeof b?this:new d(function(c,d){e(function(){try{c(b(a))}catch(e){d(e)}})})}}var d=a("./core.js"),e=a("asap");b.exports=d,c.prototype=d.prototype;var f=new c(!0),g=new c(!1),h=new c(null),i=new c(void 0),j=new c(0),k=new c("");d.resolve=function(a){if(a instanceof d)return a;if(null===a)return h;if(void 0===a)return i;if(a===!0)return f;if(a===!1)return g;if(0===a)return j;if(""===a)return k;if("object"==typeof a||"function"==typeof a)try{var b=a.then;if("function"==typeof b)return new d(b.bind(a))}catch(e){return new d(function(a,b){b(e)})}return new c(a)},d.all=function(a){var b=Array.prototype.slice.call(a);return new d(function(a,c){function d(f,g){try{if(g&&("object"==typeof g||"function"==typeof g)){var h=g.then;if("function"==typeof h)return void h.call(g,function(a){d(f,a)},c)}b[f]=g,0===--e&&a(b)}catch(i){c(i)}}if(0===b.length)return a([]);for(var e=b.length,f=0;f<b.length;f++)d(f,b[f])})},d.reject=function(a){return new d(function(b,c){c(a)})},d.race=function(a){return new d(function(b,c){a.forEach(function(a){d.resolve(a).then(b,c)})})},d.prototype["catch"]=function(a){return this.then(null,a)}},{"./core.js":82,asap:86}],85:[function(a,b){"use strict";var c=a("./core.js"),d=a("asap");b.exports=c,c.denodeify=function(a,b){return b=b||1/0,function(){var d=this,e=Array.prototype.slice.call(arguments);return new c(function(c,f){for(;e.length&&e.length>b;)e.pop();e.push(function(a,b){a?f(a):c(b)});var g=a.apply(d,e);!g||"object"!=typeof g&&"function"!=typeof g||"function"!=typeof g.then||c(g)})}},c.nodeify=function(a){return function(){var b=Array.prototype.slice.call(arguments),e="function"==typeof b[b.length-1]?b.pop():null,f=this;try{return a.apply(this,arguments).nodeify(e,f)}catch(g){if(null===e||"undefined"==typeof e)return new c(function(a,b){b(g)});d(function(){e.call(f,g)})}}},c.prototype.nodeify=function(a,b){return"function"!=typeof a?this:void this.then(function(c){d(function(){a.call(b,null,c)})},function(c){d(function(){a.call(b,c)})})}},{"./core.js":82,asap:86}],86:[function(a,b){(function(a){function c(){for(;e.next;){e=e.next;var a=e.task;e.task=void 0;var b=e.domain;b&&(e.domain=void 0,b.enter());try{a()}catch(d){if(i)throw b&&b.exit(),setTimeout(c,0),b&&b.enter(),d;setTimeout(function(){throw d},0)}b&&b.exit()}g=!1}function d(b){f=f.next={task:b,domain:i&&a.domain,next:null},g||(g=!0,h())}var e={task:void 0,next:null},f=e,g=!1,h=void 0,i=!1;if("undefined"!=typeof a&&a.nextTick)i=!0,h=function(){a.nextTick(c)};else if("function"==typeof setImmediate)h="undefined"!=typeof window?setImmediate.bind(window,c):function(){setImmediate(c)};else if("undefined"!=typeof MessageChannel){var j=new MessageChannel;j.port1.onmessage=c,h=function(){j.port2.postMessage(0)}}else h=function(){setTimeout(c,0)};b.exports=d}).call(this,a("_process"))},{_process:40}],87:[function(a,b){function c(a){return this instanceof c?(this.running=!1,this.last=g(),this._frame=0,this._tick=this.tick.bind(this),void(a&&this.on("tick",a))):new c(a)}var d=a("inherits"),e=a("events").EventEmitter,f=a("raf"),g=a("right-now");b.exports=c,d(c,e),c.prototype.start=function(){return this.running?void 0:(this.running=!0,this.last=g(),this._frame=f(this._tick),this)},c.prototype.stop=function(){return this.running=!1,0!==this._frame&&f.cancel(this._frame),this._frame=0,this},c.prototype.tick=function(){this._frame=f(this._tick);var a=g(),b=a-this.last;this.emit("tick",b),this.last=a}},{events:39,inherits:88,raf:90,"right-now":89}],88:[function(a,b){b.exports="function"==typeof Object.create?function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],89:[function(a,b){(function(a){b.exports=a.performance&&a.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],90:[function(a,b){for(var c=a("performance-now"),d="undefined"==typeof window?{}:window,e=["moz","webkit"],f="AnimationFrame",g=d["request"+f],h=d["cancel"+f]||d["cancelRequest"+f],i=!0,j=0;j<e.length&&!g;j++)g=d[e[j]+"Request"+f],h=d[e[j]+"Cancel"+f]||d[e[j]+"CancelRequest"+f];if(!g||!h){i=!1;var k=0,l=0,m=[],n=1e3/60;g=function(a){if(0===m.length){var b=c(),d=Math.max(0,n-(b-k));k=d+b,setTimeout(function(){var a=m.slice(0);m.length=0;for(var b=0;b<a.length;b++)if(!a[b].cancelled)try{a[b].callback(k)}catch(c){setTimeout(function(){throw c},0)}},Math.round(d))}return m.push({handle:++l,callback:a,cancelled:!1}),l},h=function(a){for(var b=0;b<m.length;b++)m[b].handle===a&&(m[b].cancelled=!0)}}b.exports=function(a){return i?g.call(d,function(){try{a.apply(this,arguments)}catch(b){setTimeout(function(){throw b},0)}}):g.call(d,a)},b.exports.cancel=function(){h.apply(d,arguments)}},{"performance-now":91}],91:[function(a,b){(function(a){(function(){var c,d,e;"undefined"!=typeof performance&&null!==performance&&performance.now?b.exports=function(){return performance.now()}:"undefined"!=typeof a&&null!==a&&a.hrtime?(b.exports=function(){return(c()-e)/1e6},d=a.hrtime,c=function(){var a;return a=d(),1e9*a[0]+a[1]},e=c()):Date.now?(b.exports=function(){return Date.now()-e},e=Date.now()):(b.exports=function(){return(new Date).getTime()-e},e=(new Date).getTime())}).call(this)}).call(this,a("_process"))},{_process:40}],92:[function(a,b){"use strict";function c(a,b){if(!Array.isArray(a))throw new Error("shuffle expect an array as parameter.");b=b||{};var c,d,e=a,f=a.length,g=b.rng||Math.random;for(b.copy===!0&&(e=a.slice());f;)c=Math.floor(g()*f),f-=1,d=e[f],e[f]=e[c],e[c]=d;return e}c.pick=function(a,b){if(!Array.isArray(a))throw new Error("shuffle.pick() expect an array as parameter.");b=b||{};var c=b.rng||Math.random,d=b.picks||1;if("number"==typeof d&&1!==d){for(var e,f=a.length,g=a.slice(),h=[];d;)e=Math.floor(c()*f),h.push(g[e]),g.splice(e,1),f-=1,d-=1;return h}return a[Math.floor(c()*a.length)]},b.exports=c},{}],93:[function(a,b){/** @license
 * JS Signals <http://millermedeiros.github.com/js-signals/>
 * Released under the MIT license
 * Author: Miller Medeiros
 * Version: 1.0.0 - Build: 268 (2012/11/29 05:48 PM)
 */
!function(a){function c(a,b,c,d,e){this._listener=b,this._isOnce=c,this.context=d,this._signal=a,this._priority=e||0}function d(a,b){if("function"!=typeof a)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",b))}function e(){this._bindings=[],this._prevParams=null;var a=this;this.dispatch=function(){e.prototype.dispatch.apply(a,arguments)}}c.prototype={active:!0,params:null,execute:function(a){var b,c;return this.active&&this._listener&&(c=this.params?this.params.concat(a):a,b=this._listener.apply(this.context,c),this._isOnce&&this.detach()),b},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},e.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(a,b,d,e){var f,g=this._indexOfListener(a,d);if(-1!==g){if(f=this._bindings[g],f.isOnce()!==b)throw new Error("You cannot add"+(b?"":"Once")+"() then add"+(b?"Once":"")+"() the same listener without removing the relationship first.")}else f=new c(this,a,b,d,e),this._addBinding(f);return this.memorize&&this._prevParams&&f.execute(this._prevParams),f},_addBinding:function(a){var b=this._bindings.length;do--b;while(this._bindings[b]&&a._priority<=this._bindings[b]._priority);this._bindings.splice(b+1,0,a)},_indexOfListener:function(a,b){for(var c,d=this._bindings.length;d--;)if(c=this._bindings[d],c._listener===a&&c.context===b)return d;return-1},has:function(a,b){return-1!==this._indexOfListener(a,b)},add:function(a,b,c){return d(a,"add"),this._registerListener(a,!1,b,c)},addOnce:function(a,b,c){return d(a,"addOnce"),this._registerListener(a,!0,b,c)},remove:function(a,b){d(a,"remove");var c=this._indexOfListener(a,b);return-1!==c&&(this._bindings[c]._destroy(),this._bindings.splice(c,1)),a},removeAll:function(){for(var a=this._bindings.length;a--;)this._bindings[a]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(){if(this.active){var a,b=Array.prototype.slice.call(arguments),c=this._bindings.length;if(this.memorize&&(this._prevParams=b),c){a=this._bindings.slice(),this._shouldPropagate=!0;do c--;while(a[c]&&this._shouldPropagate&&a[c].execute(b)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var f=e;f.Signal=e,"function"==typeof define&&define.amd?define(function(){return f}):"undefined"!=typeof b&&b.exports?b.exports=f:a.signals=f}(this)},{}],94:[function(a,b,c){!function(){function a(a){a||(a=Math.random),this.p=new Uint8Array(256),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var b=0;256>b;b++)this.p[b]=256*a();for(b=0;512>b;b++)this.perm[b]=this.p[255&b],this.permMod12[b]=this.perm[b]%12}var d=.5*(Math.sqrt(3)-1),e=(3-Math.sqrt(3))/6,f=1/3,g=1/6,h=(Math.sqrt(5)-1)/4,i=(5-Math.sqrt(5))/20;a.prototype={grad3:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),grad4:new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),noise2D:function(a,b){var c,f,g,h,i,j=this.permMod12,k=this.perm,l=this.grad3,m=(a+b)*d,n=Math.floor(a+m),o=Math.floor(b+m),p=(n+o)*e,q=n-p,r=o-p,s=a-q,t=b-r;s>t?(h=1,i=0):(h=0,i=1);var u=s-h+e,v=t-i+e,w=s-1+2*e,x=t-1+2*e,y=255&n,z=255&o,A=.5-s*s-t*t;if(0>A)c=0;else{var B=3*j[y+k[z]];A*=A,c=A*A*(l[B]*s+l[B+1]*t)}var C=.5-u*u-v*v;if(0>C)f=0;else{var D=3*j[y+h+k[z+i]];C*=C,f=C*C*(l[D]*u+l[D+1]*v)}var E=.5-w*w-x*x;if(0>E)g=0;else{var F=3*j[y+1+k[z+1]];E*=E,g=E*E*(l[F]*w+l[F+1]*x)}return 70*(c+f+g)},noise3D:function(a,b,c){var d,e,h,i,j,k,l,m,n,o,p=this.permMod12,q=this.perm,r=this.grad3,s=(a+b+c)*f,t=Math.floor(a+s),u=Math.floor(b+s),v=Math.floor(c+s),w=(t+u+v)*g,x=t-w,y=u-w,z=v-w,A=a-x,B=b-y,C=c-z;A>=B?B>=C?(j=1,k=0,l=0,m=1,n=1,o=0):A>=C?(j=1,k=0,l=0,m=1,n=0,o=1):(j=0,k=0,l=1,m=1,n=0,o=1):C>B?(j=0,k=0,l=1,m=0,n=1,o=1):C>A?(j=0,k=1,l=0,m=0,n=1,o=1):(j=0,k=1,l=0,m=1,n=1,o=0);var D=A-j+g,E=B-k+g,F=C-l+g,G=A-m+2*g,H=B-n+2*g,I=C-o+2*g,J=A-1+3*g,K=B-1+3*g,L=C-1+3*g,M=255&t,N=255&u,O=255&v,P=.6-A*A-B*B-C*C;if(0>P)d=0;else{var Q=3*p[M+q[N+q[O]]];P*=P,d=P*P*(r[Q]*A+r[Q+1]*B+r[Q+2]*C)}var R=.6-D*D-E*E-F*F;if(0>R)e=0;else{var S=3*p[M+j+q[N+k+q[O+l]]];R*=R,e=R*R*(r[S]*D+r[S+1]*E+r[S+2]*F)}var T=.6-G*G-H*H-I*I;if(0>T)h=0;else{var U=3*p[M+m+q[N+n+q[O+o]]];T*=T,h=T*T*(r[U]*G+r[U+1]*H+r[U+2]*I)}var V=.6-J*J-K*K-L*L;if(0>V)i=0;else{var W=3*p[M+1+q[N+1+q[O+1]]];V*=V,i=V*V*(r[W]*J+r[W+1]*K+r[W+2]*L)}return 32*(d+e+h+i)},noise4D:function(a,b,c,d){var e,f,g,j,k,l=(this.permMod12,this.perm),m=this.grad4,n=(a+b+c+d)*h,o=Math.floor(a+n),p=Math.floor(b+n),q=Math.floor(c+n),r=Math.floor(d+n),s=(o+p+q+r)*i,t=o-s,u=p-s,v=q-s,w=r-s,x=a-t,y=b-u,z=c-v,A=d-w,B=0,C=0,D=0,E=0;x>y?B++:C++,x>z?B++:D++,x>A?B++:E++,y>z?C++:D++,y>A?C++:E++,z>A?D++:E++;var F,G,H,I,J,K,L,M,N,O,P,Q;F=B>=3?1:0,G=C>=3?1:0,H=D>=3?1:0,I=E>=3?1:0,J=B>=2?1:0,K=C>=2?1:0,L=D>=2?1:0,M=E>=2?1:0,N=B>=1?1:0,O=C>=1?1:0,P=D>=1?1:0,Q=E>=1?1:0;var R=x-F+i,S=y-G+i,T=z-H+i,U=A-I+i,V=x-J+2*i,W=y-K+2*i,X=z-L+2*i,Y=A-M+2*i,Z=x-N+3*i,$=y-O+3*i,_=z-P+3*i,ab=A-Q+3*i,bb=x-1+4*i,cb=y-1+4*i,db=z-1+4*i,eb=A-1+4*i,fb=255&o,gb=255&p,hb=255&q,ib=255&r,jb=.6-x*x-y*y-z*z-A*A;if(0>jb)e=0;else{var kb=l[fb+l[gb+l[hb+l[ib]]]]%32*4;jb*=jb,e=jb*jb*(m[kb]*x+m[kb+1]*y+m[kb+2]*z+m[kb+3]*A)}var lb=.6-R*R-S*S-T*T-U*U;if(0>lb)f=0;else{var mb=l[fb+F+l[gb+G+l[hb+H+l[ib+I]]]]%32*4;lb*=lb,f=lb*lb*(m[mb]*R+m[mb+1]*S+m[mb+2]*T+m[mb+3]*U)}var nb=.6-V*V-W*W-X*X-Y*Y;if(0>nb)g=0;else{var ob=l[fb+J+l[gb+K+l[hb+L+l[ib+M]]]]%32*4;nb*=nb,g=nb*nb*(m[ob]*V+m[ob+1]*W+m[ob+2]*X+m[ob+3]*Y)}var pb=.6-Z*Z-$*$-_*_-ab*ab;if(0>pb)j=0;else{var qb=l[fb+N+l[gb+O+l[hb+P+l[ib+Q]]]]%32*4;pb*=pb,j=pb*pb*(m[qb]*Z+m[qb+1]*$+m[qb+2]*_+m[qb+3]*ab)}var rb=.6-bb*bb-cb*cb-db*db-eb*eb;if(0>rb)k=0;else{var sb=l[fb+1+l[gb+1+l[hb+1+l[ib+1]]]]%32*4;rb*=rb,k=rb*rb*(m[sb]*bb+m[sb+1]*cb+m[sb+2]*db+m[sb+3]*eb)}return 27*(e+f+g+j+k)}},"undefined"!=typeof define&&define.amd?define(function(){return a}):"undefined"!=typeof window&&(window.SimplexNoise=a),"undefined"!=typeof c&&(c.SimplexNoise=a),"undefined"!=typeof b&&(b.exports=a)}()},{}],95:[function(a,b){var c=a("lodash"),d=a("dom-select"),e=a("dom-css"),f=a("domify"),g=a("dom-event"),h=g.off,i=a("insert").append,j=a("insert").remove,k=a("inherits"),l=a("mixes"),m=a("signals").Signal,n=a("atts"),o=a("element-class"),p="The view is not defined in this SpookyElement",q=function(a,b){if(!(this instanceof q))return new q(a,b);if(a){if(a.spooky)return a;if(a.jquery){if(!a.length)return this;a=a[0]}}if(b&&b.jquery&&(b=b.length?b[0]:null),this._view=null,this.onAppended=new m,c.isFunction(a)){this.template=a;var d=f(this.render(b));this.view=d}else c.isString(a)?0===a.indexOf("<")?this.view=f(a):this.select(a,b):c.isElement(a)?this.view=a:this.template&&(this.view=f(this.render(a)));this.spooky=!0};k(q,Array),l(q,{view:{set:function(a){this._view=a,null===a?this.length=0:(this[0]=this._view,this.length=1)},get:function(){return this._view}},paramsChanged:function(){},select:function(a,b){return b&&b.spooky&&(b=b.view),this.view=d(a,b),this},getElement:function(a){if(!this.view)throw new Error(p);return a?d(a,this.view):this.view},findElement:function(a){return this.getElement(a)},find:function(a){var b=this.getElement(a);return b?new q(b):null},findAll:function(a){if(!this.view)throw new Error(p);var b=d.all(a,this.view),c=[];if(b)for(var e=0,f=b.length;f>e;e+=1){var g=b[e];c.push(new q(g))}return c},appendTo:function(a){if(!this.view)throw new Error(p);var b=a;return c.isString(b)&&(b=d(b)),b&&b.spooky&&(b=b.view),i(b,this.view),this.onAppended.dispatch(this),this},append:function(a){if(!this.view)throw new Error(p);return c.isString(a)&&(a=f(a)),i(this.view,a),this},render:function(a){if(this.template&&c.isFunction(this.template)){var b=this.template(a),d=b.replace(/^\s+|\s+$/g,"");return d}return this},on:function(a,b){if(!this.view)throw new Error(p);return g(this.view,a,b),this},off:function(a,b){if(!this.view)throw new Error(p);return h(this.view,a,b),this},css:function(a,b){if(!this.view)throw new Error(p);return b?e(this.view,a,b):e(this.view,a),this},attr:function(a,b){if(!this.view)throw new Error(p);return 2==arguments.length?(n.attr(this.view,a,b),this):1==arguments.length?n.attr(this.view,a):this},addClass:function(a){if(!this.view)throw new Error(p);return o(this.view).add(a),this},removeClass:function(a){if(!this.view)throw new Error(p);return o(this.view).remove(a),this},hasClass:function(a){if(!this.view)throw new Error(p);return o(this.view).has(a)},getWidth:function(){if(!this.view)throw new Error(p);return this.view.offsetWidth},getHeight:function(){if(!this.view)throw new Error(p);return this.view.offsetHeight},html:function(a){if(!this.view)throw new Error(p);return c.isUndefined(a)?this.view.innerHTML:(this.view.innerHTML=a,this)},animateIn:function(a,b){return b&&b(),this},animateOut:function(a,b){return b&&b(),this},resize:function(a,b){return this.width=a,this.height=b,this.css({width:a,height:b}),this},destroy:function(){this.removeAddedSignals(),this.view&&this.remove(),this.view=null},remove:function(){if(!this.view)throw new Error(p);return j(this.view),this.view=null,this},addSignal:function(a,b,d,e){if(!a)throw new Error("Signal was not provided");if(!b)throw new Error("handler funciton was not provided");this._addedSignals||(this._addedSignals=[]),c.isObject(d)&&(b=b.bind(d));var f={signal:a,handler:b};this.removeSignal(a,b),e===!0?f.signal.addOnce(f.handler):f.signal.add(f.handler),this._addedSignals.push(f)},addSignalOnce:function(a,b,c){this.addSignal(a,b,c,!0)},removeSignal:function(a,b){this._addedSignals&&this._addedSignals.length&&this._addedSignals.some(function(c,d){return c.signal==a&&c.handler==b?(c.signal.remove(c.handler),this._addedSignals.splice(d,1),!0):void 0}.bind(this))},removeAddedSignals:function(){this._addedSignals&&this._addedSignals.length&&(this._addedSignals.forEach(function(a){a.signal.remove(a.handler)}),this._addedSignals=[])}}),b.exports=q},{atts:96,"dom-css":97,"dom-event":27,"dom-select":29,domify:102,"element-class":31,inherits:103,insert:107,lodash:113,mixes:114,signals:93}],96:[function(a,b){/*!
 * atts 0.0.1+201311070728
 * https://github.com/ryanve/atts
 * MIT License 2013 Ryan Van Etten
 */
!function(a,c,d){"undefined"!=typeof b&&b.exports?b.exports=d():a[c]=d()}(this,"atts",function(){function a(a,b,c){var d,e=a.attributes,f=e&&e.length,g=0;if("function"!=typeof b)return+f||0;for(c=c||a;f>g;)if(b.call(c,(d=e[g++]).value,d.name,d))return g;return 0}function b(a,b){this[b]=a}function c(c){var d={};return a(c,b,d),d}function d(a,b){for(var c in b)m.call(b,c)&&e(a,c,b[c])}function e(a,b,e){if(1!==a.nodeType)throw new TypeError("@0");if(void 0===b&&b===e)return c(a);if(b=b[q](),"string"!=typeof b)d(a,b);else{if(void 0===e)return null==(b=a[o](b))?e:""+b;null===e?a[p](b):"boolean"==typeof e?g(a,b,e):a[n](b,e=""+e)}return e}function f(a,b){b="string"==typeof b?b.match(j):[].concat(b);for(var c=b&&b.length;c--;)a[p](b[c])}function g(a,b,c){"boolean"==typeof c||(c=null==a[o](b)||a[b]===!1);var d=!c;return c?a[n](b,""):a[p](b),a[b]===d?a[b]=c:c}function h(a,b){if("string"!=typeof a)return null!=a[o](b);if(b="number"!=typeof b?b||"div":this[q](),b="string"!=typeof b?b:document.createElement(b),a in b)return!0;if("class"===a)return"className"in b;for(var c in b)if(a.toLowerCase()===c.toLowerCase())return!0;return!1}function i(a,b){for(var c=a.length,d=0;c>d;d++)b(a[d]);return a}var j=/\S+/g,k={},l=k.fn={},m=k.hasOwnProperty,n="setAttribute",o="getAttribute",p="removeAttribute",q="valueOf";return k.attr=e,k.atts=c,k.hasAttr=h,k.anyAttr=a,k.removeAttr=f,k.toggleAttr=g,l.attr=function(a,b){return void 0!==b||a!==b&&"string"!=typeof(a=a[q]())?i(this,function(c){var d="function"==typeof b?b.call(c):b;void 0===d||e(c,a,d)}):e(this[0],a)},l.removeAttr=function(a){return i(this,function(b){f(b,a)})},l.toggleAttr=function(a,b){return i(this,function(c){g(c,a,b)})},k})},{}],97:[function(a,b,c){arguments[4][22][0].apply(c,arguments)},{dup:22,"prefix-style":98,"to-camel-case":99}],98:[function(a,b,c){arguments[4][23][0].apply(c,arguments)},{dup:23}],99:[function(a,b,c){arguments[4][24][0].apply(c,arguments)},{dup:24,"to-space-case":100}],100:[function(a,b,c){arguments[4][25][0].apply(c,arguments)},{dup:25,"to-no-case":101}],101:[function(a,b,c){arguments[4][26][0].apply(c,arguments)},{dup:26}],102:[function(a,b){function c(a,b){if("string"!=typeof a)throw new TypeError("String expected");b||(b=document);var c=/<([\w:]+)/.exec(a);if(!c)return b.createTextNode(a);a=a.replace(/^\s+|\s+$/g,"");var d=c[1];if("body"==d){var e=b.createElement("html");return e.innerHTML=a,e.removeChild(e.lastChild)}var g=f[d]||f._default,h=g[0],i=g[1],j=g[2],e=b.createElement("div");for(e.innerHTML=i+a+j;h--;)e=e.lastChild;if(e.firstChild==e.lastChild)return e.removeChild(e.firstChild);for(var k=b.createDocumentFragment();e.firstChild;)k.appendChild(e.removeChild(e.firstChild));return k}b.exports=c;var d=document.createElement("div");d.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>';var e=!d.getElementsByTagName("link").length;d=void 0;var f={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:e?[1,"X<div>","</div>"]:[0,"",""]};f.td=f.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],f.option=f.optgroup=[1,'<select multiple="multiple">',"</select>"],f.thead=f.tbody=f.colgroup=f.caption=f.tfoot=[1,"<table>","</table>"],f.text=f.circle=f.ellipse=f.line=f.path=f.polygon=f.polyline=f.rect=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"]},{}],103:[function(a,b,c){arguments[4][88][0].apply(c,arguments)},{dup:88}],104:[function(a,b){function c(a,b){var c=e(d(arguments,1)),f=a.parentNode,g=a.nextSibling;return f.insertBefore(c,g),b}var d=a("to-array"),e=a("./mutation");b.exports=c},{"./mutation":108,"to-array":109}],105:[function(a,b){function c(a,b){var c=e(d(arguments,1));return a.appendChild(c),b}var d=a("to-array"),e=a("./mutation");b.exports=c},{"./mutation":108,"to-array":109}],106:[function(a,b){function c(a,b){var c=e(d(arguments,1)),f=a.parentNode;return f.insertBefore(c,a),b}var d=a("to-array"),e=a("./mutation");b.exports=c},{"./mutation":108,"to-array":109}],107:[function(a,b){var c=a("./mutation"),d=a("./prepend"),e=a("./append"),f=a("./after"),g=a("./before"),h=a("./remove"),i=a("./replace");b.exports={prepend:d,append:e,after:f,before:g,remove:h,replace:i,mutation:c}},{"./after":104,"./append":105,"./before":106,"./mutation":108,"./prepend":110,"./remove":111,"./replace":112}],108:[function(a,b){function c(a){if(a=a.map(d),1===a.length)return a[0];var b=document.createDocumentFragment();return a.forEach(e,b),b}function d(a){return"string"==typeof a?document.createTextNode(a):a&&a.view&&a.view.nodeType?a.view:a}function e(a){this.appendChild(a)}b.exports=c},{}],109:[function(a,b){function c(a,b){var c=[];b=b||0;for(var d=b||0;d<a.length;d++)c[d-b]=a[d];return c}b.exports=c},{}],110:[function(a,b){function c(a,b){var c=e(d(arguments,1));return a.insertBefore(c,a.firstChild),b}var d=a("to-array"),e=a("./mutation");b.exports=c},{"./mutation":108,"to-array":109}],111:[function(a,b){function c(a){var b=e(arguments);return b.map(function(a){return a&&a.view&&a.view.nodeType?a.view:a}).forEach(d),a}function d(a){a.parentNode&&a.parentNode.removeChild(a)}{var e=a("to-array");a("./mutation")}b.exports=c},{"./mutation":108,"to-array":109}],112:[function(a,b){function c(a,b){var c=e(d(arguments,1)),f=a.parentNode;return f.replaceChild(c,a),b}var d=a("to-array"),e=a("./mutation");b.exports=c},{"./mutation":108,"to-array":109}],113:[function(a,b,c){(function(a){(function(){function d(a,b,c){for(var d=(c||0)-1,e=a?a.length:0;++d<e;)if(a[d]===b)return d;return-1}function e(a,b){var c=typeof b;if(a=a.cache,"boolean"==c||null==b)return a[b]?0:-1;"number"!=c&&"string"!=c&&(c="object");var e="number"==c?b:u+b;return a=(a=a[c])&&a[e],"object"==c?a&&d(a,b)>-1?0:-1:a?0:-1}function f(a){var b=this.cache,c=typeof a;if("boolean"==c||null==a)b[a]=!0;else{"number"!=c&&"string"!=c&&(c="object");var d="number"==c?a:u+a,e=b[c]||(b[c]={});"object"==c?(e[d]||(e[d]=[])).push(a):e[d]=!0}}function g(a){return a.charCodeAt(0)}function h(a,b){for(var c=a.criteria,d=b.criteria,e=-1,f=c.length;++e<f;){var g=c[e],h=d[e];if(g!==h){if(g>h||"undefined"==typeof g)return 1;if(h>g||"undefined"==typeof h)return-1}}return a.index-b.index}function i(a){var b=-1,c=a.length,d=a[0],e=a[c/2|0],g=a[c-1];if(d&&"object"==typeof d&&e&&"object"==typeof e&&g&&"object"==typeof g)return!1;var h=l();h["false"]=h["null"]=h["true"]=h.undefined=!1;var i=l();for(i.array=a,i.cache=h,i.push=f;++b<c;)i.push(a[b]);return i}function j(a){return"\\"+Y[a]}function k(){return r.pop()||[]}function l(){return s.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function m(a){a.length=0,r.length<w&&r.push(a)}function n(a){var b=a.cache;b&&n(b),a.array=a.cache=a.criteria=a.object=a.number=a.string=a.value=null,s.length<w&&s.push(a)}function o(a,b,c){b||(b=0),"undefined"==typeof c&&(c=a?a.length:0);for(var d=-1,e=c-b||0,f=Array(0>e?0:e);++d<e;)f[d]=a[b+d];return f}function p(a){function b(a){return a&&"object"==typeof a&&!Zd(a)&&Hd.call(a,"__wrapped__")?a:new c(a)}function c(a,b){this.__chain__=!!b,this.__wrapped__=a}function f(a){function b(){if(d){var a=o(d);Id.apply(a,arguments)}if(this instanceof b){var f=s(c.prototype),g=c.apply(f,a||arguments);return Eb(g)?g:f}return c.apply(e,a||arguments)}var c=a[0],d=a[2],e=a[4];return Yd(b,a),b}function r(a,b,c,d,e){if(c){var f=c(a);if("undefined"!=typeof f)return f}var g=Eb(a);if(!g)return a;var h=Ad.call(a);if(!U[h])return a;var i=Wd[h];switch(h){case N:case O:return new i(+a);case Q:case T:return new i(a);case S:return f=i(a.source,C.exec(a)),f.lastIndex=a.lastIndex,f}var j=Zd(a);if(b){var l=!d;d||(d=k()),e||(e=k());for(var n=d.length;n--;)if(d[n]==a)return e[n];f=j?i(a.length):{}}else f=j?o(a):ee({},a);return j&&(Hd.call(a,"index")&&(f.index=a.index),Hd.call(a,"input")&&(f.input=a.input)),b?(d.push(a),e.push(f),(j?Yb:he)(a,function(a,g){f[g]=r(a,b,c,d,e)}),l&&(m(d),m(e)),f):f}function s(a){return Eb(a)?Nd(a):{}}function w(a,b,c){if("function"!=typeof a)return Zc;if("undefined"==typeof b||!("prototype"in a))return a;var d=a.__bindData__;if("undefined"==typeof d&&(Xd.funcNames&&(d=!a.name),d=d||!Xd.funcDecomp,!d)){var e=Fd.call(a);Xd.funcNames||(d=!D.test(e)),d||(d=H.test(e),Yd(a,d))}if(d===!1||d!==!0&&1&d[1])return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return Ic(a,b)}function Y(a){function b(){var a=i?g:this;if(e){var n=o(e);Id.apply(n,arguments)}if((f||k)&&(n||(n=o(arguments)),f&&Id.apply(n,f),k&&n.length<h))return d|=16,Y([c,l?d:-4&d,n,null,g,h]);if(n||(n=arguments),j&&(c=a[m]),this instanceof b){a=s(c.prototype);var p=c.apply(a,n);return Eb(p)?p:a}return c.apply(a,n)}var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],i=1&d,j=2&d,k=4&d,l=8&d,m=c;return Yd(b,a),b}function $(a,b){var c=-1,f=ib(),g=a?a.length:0,h=g>=v&&f===d,j=[];if(h){var k=i(b);k?(f=e,b=k):h=!1}for(;++c<g;){var l=a[c];f(b,l)<0&&j.push(l)}return h&&n(b),j}function _(a,b,c,d){for(var e=(d||0)-1,f=a?a.length:0,g=[];++e<f;){var h=a[e];if(h&&"object"==typeof h&&"number"==typeof h.length&&(Zd(h)||mb(h))){b||(h=_(h,b,c));var i=-1,j=h.length,k=g.length;for(g.length+=j;++i<j;)g[k++]=h[i]}else c||g.push(h)}return g}function ab(a,b,c,d,e,f){if(c){var g=c(a,b);if("undefined"!=typeof g)return!!g}if(a===b)return 0!==a||1/a==1/b;var h=typeof a,i=typeof b;if(!(a!==a||a&&X[h]||b&&X[i]))return!1;if(null==a||null==b)return a===b;var j=Ad.call(a),l=Ad.call(b);if(j==L&&(j=R),l==L&&(l=R),j!=l)return!1;switch(j){case N:case O:return+a==+b;case Q:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case S:case T:return a==vd(b)}var n=j==M;if(!n){var o=Hd.call(a,"__wrapped__"),p=Hd.call(b,"__wrapped__");if(o||p)return ab(o?a.__wrapped__:a,p?b.__wrapped__:b,c,d,e,f);if(j!=R)return!1;var q=a.constructor,r=b.constructor;if(q!=r&&!(Db(q)&&q instanceof q&&Db(r)&&r instanceof r)&&"constructor"in a&&"constructor"in b)return!1}var s=!e;e||(e=k()),f||(f=k());for(var t=e.length;t--;)if(e[t]==a)return f[t]==b;var u=0;if(g=!0,e.push(a),f.push(b),n){if(t=a.length,u=b.length,g=u==t,g||d)for(;u--;){var v=t,w=b[u];if(d)for(;v--&&!(g=ab(a[v],w,c,d,e,f)););else if(!(g=ab(a[u],w,c,d,e,f)))break}}else ge(b,function(b,h,i){return Hd.call(i,h)?(u++,g=Hd.call(a,h)&&ab(a[h],b,c,d,e,f)):void 0}),g&&!d&&ge(a,function(a,b,c){return Hd.call(c,b)?g=--u>-1:void 0});return e.pop(),f.pop(),s&&(m(e),m(f)),g}function bb(a,b,c,d,e){(Zd(b)?Yb:he)(b,function(b,f){var g,h,i=b,j=a[f];if(b&&((h=Zd(b))||ie(b))){for(var k=d.length;k--;)if(g=d[k]==b){j=e[k];break}if(!g){var l;c&&(i=c(j,b),(l="undefined"!=typeof i)&&(j=i)),l||(j=h?Zd(j)?j:[]:ie(j)?j:{}),d.push(b),e.push(j),l||bb(j,b,c,d,e)}}else c&&(i=c(j,b),"undefined"==typeof i&&(i=b)),"undefined"!=typeof i&&(j=i);a[f]=j})}function db(a,b){return a+Ed(Vd()*(b-a+1))}function eb(a,b,c){var f=-1,g=ib(),h=a?a.length:0,j=[],l=!b&&h>=v&&g===d,o=c||l?k():j;if(l){var p=i(o);g=e,o=p}for(;++f<h;){var q=a[f],r=c?c(q,f,a):q;(b?!f||o[o.length-1]!==r:g(o,r)<0)&&((c||l)&&o.push(r),j.push(q))}return l?(m(o.array),n(o)):c&&m(o),j}function fb(a){return function(c,d,e){var f={};d=b.createCallback(d,e,3);var g=-1,h=c?c.length:0;if("number"==typeof h)for(;++g<h;){var i=c[g];a(f,i,d(i,g,c),c)}else he(c,function(b,c,e){a(f,b,d(b,c,e),e)});return f}}function gb(a,b,c,d,e,g){var h=1&b,i=2&b,j=4&b,k=16&b,l=32&b;if(!i&&!Db(a))throw new wd;k&&!c.length&&(b&=-17,k=c=!1),l&&!d.length&&(b&=-33,l=d=!1);var m=a&&a.__bindData__;if(m&&m!==!0)return m=o(m),m[2]&&(m[2]=o(m[2])),m[3]&&(m[3]=o(m[3])),!h||1&m[1]||(m[4]=e),!h&&1&m[1]&&(b|=8),!j||4&m[1]||(m[5]=g),k&&Id.apply(m[2]||(m[2]=[]),c),l&&Ld.apply(m[3]||(m[3]=[]),d),m[1]|=b,gb.apply(null,m);var n=1==b||17===b?f:Y;return n([a,b,c,d,e,g])}function hb(a){return ae[a]}function ib(){var a=(a=b.indexOf)===rc?d:a;return a}function jb(a){return"function"==typeof a&&Bd.test(a)}function kb(a){var b,c;return a&&Ad.call(a)==R&&(b=a.constructor,!Db(b)||b instanceof b)?(ge(a,function(a,b){c=b}),"undefined"==typeof c||Hd.call(a,c)):!1}function lb(a){return be[a]}function mb(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Ad.call(a)==L||!1}function nb(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c=b,b=!1),r(a,b,"function"==typeof c&&w(c,d,1))}function ob(a,b,c){return r(a,!0,"function"==typeof b&&w(b,c,1))}function pb(a,b){var c=s(a);return b?ee(c,b):c}function qb(a,c,d){var e;return c=b.createCallback(c,d,3),he(a,function(a,b,d){return c(a,b,d)?(e=b,!1):void 0}),e}function rb(a,c,d){var e;return c=b.createCallback(c,d,3),tb(a,function(a,b,d){return c(a,b,d)?(e=b,!1):void 0}),e}function sb(a,b,c){var d=[];ge(a,function(a,b){d.push(b,a)});var e=d.length;for(b=w(b,c,3);e--&&b(d[e--],d[e],a)!==!1;);return a}function tb(a,b,c){var d=_d(a),e=d.length;for(b=w(b,c,3);e--;){var f=d[e];if(b(a[f],f,a)===!1)break}return a}function ub(a){var b=[];return ge(a,function(a,c){Db(a)&&b.push(c)}),b.sort()}function vb(a,b){return a?Hd.call(a,b):!1}function wb(a){for(var b=-1,c=_d(a),d=c.length,e={};++b<d;){var f=c[b];e[a[f]]=f}return e}function xb(a){return a===!0||a===!1||a&&"object"==typeof a&&Ad.call(a)==N||!1}function yb(a){return a&&"object"==typeof a&&Ad.call(a)==O||!1}function zb(a){return a&&1===a.nodeType||!1}function Ab(a){var b=!0;if(!a)return b;var c=Ad.call(a),d=a.length;return c==M||c==T||c==L||c==R&&"number"==typeof d&&Db(a.splice)?!d:(he(a,function(){return b=!1}),b)}function Bb(a,b,c,d){return ab(a,b,"function"==typeof c&&w(c,d,2))}function Cb(a){return Pd(a)&&!Qd(parseFloat(a))}function Db(a){return"function"==typeof a}function Eb(a){return!(!a||!X[typeof a])}function Fb(a){return Hb(a)&&a!=+a}function Gb(a){return null===a}function Hb(a){return"number"==typeof a||a&&"object"==typeof a&&Ad.call(a)==Q||!1}function Ib(a){return a&&"object"==typeof a&&Ad.call(a)==S||!1}function Jb(a){return"string"==typeof a||a&&"object"==typeof a&&Ad.call(a)==T||!1}function Kb(a){return"undefined"==typeof a}function Lb(a,c,d){var e={};return c=b.createCallback(c,d,3),he(a,function(a,b,d){e[b]=c(a,b,d)}),e}function Mb(a){var b=arguments,c=2;if(!Eb(a))return a;if("number"!=typeof b[2]&&(c=b.length),c>3&&"function"==typeof b[c-2])var d=w(b[--c-1],b[c--],2);else c>2&&"function"==typeof b[c-1]&&(d=b[--c]);for(var e=o(arguments,1,c),f=-1,g=k(),h=k();++f<c;)bb(a,e[f],d,g,h);return m(g),m(h),a}function Nb(a,c,d){var e={};if("function"!=typeof c){var f=[];ge(a,function(a,b){f.push(b)}),f=$(f,_(arguments,!0,!1,1));for(var g=-1,h=f.length;++g<h;){var i=f[g];e[i]=a[i]}}else c=b.createCallback(c,d,3),ge(a,function(a,b,d){c(a,b,d)||(e[b]=a)});return e}function Ob(a){for(var b=-1,c=_d(a),d=c.length,e=nd(d);++b<d;){var f=c[b];e[b]=[f,a[f]]}return e}function Pb(a,c,d){var e={};if("function"!=typeof c)for(var f=-1,g=_(arguments,!0,!1,1),h=Eb(a)?g.length:0;++f<h;){var i=g[f];i in a&&(e[i]=a[i])}else c=b.createCallback(c,d,3),ge(a,function(a,b,d){c(a,b,d)&&(e[b]=a)});return e}function Qb(a,c,d,e){var f=Zd(a);if(null==d)if(f)d=[];else{var g=a&&a.constructor,h=g&&g.prototype;d=s(h)}return c&&(c=b.createCallback(c,e,4),(f?Yb:he)(a,function(a,b,e){return c(d,a,b,e)})),d}function Rb(a){for(var b=-1,c=_d(a),d=c.length,e=nd(d);++b<d;)e[b]=a[c[b]];return e}function Sb(a){for(var b=arguments,c=-1,d=_(b,!0,!1,1),e=b[2]&&b[2][b[1]]===a?1:d.length,f=nd(e);++c<e;)f[c]=a[d[c]];return f}function Tb(a,b,c){var d=-1,e=ib(),f=a?a.length:0,g=!1;return c=(0>c?Sd(0,f+c):c)||0,Zd(a)?g=e(a,b,c)>-1:"number"==typeof f?g=(Jb(a)?a.indexOf(b,c):e(a,b,c))>-1:he(a,function(a){return++d>=c?!(g=a===b):void 0}),g}function Ub(a,c,d){var e=!0;c=b.createCallback(c,d,3);var f=-1,g=a?a.length:0;if("number"==typeof g)for(;++f<g&&(e=!!c(a[f],f,a)););else he(a,function(a,b,d){return e=!!c(a,b,d)});return e}function Vb(a,c,d){var e=[];c=b.createCallback(c,d,3);var f=-1,g=a?a.length:0;if("number"==typeof g)for(;++f<g;){var h=a[f];c(h,f,a)&&e.push(h)}else he(a,function(a,b,d){c(a,b,d)&&e.push(a)});return e}function Wb(a,c,d){c=b.createCallback(c,d,3);var e=-1,f=a?a.length:0;if("number"!=typeof f){var g;return he(a,function(a,b,d){return c(a,b,d)?(g=a,!1):void 0}),g}for(;++e<f;){var h=a[e];if(c(h,e,a))return h}}function Xb(a,c,d){var e;return c=b.createCallback(c,d,3),Zb(a,function(a,b,d){return c(a,b,d)?(e=a,!1):void 0}),e}function Yb(a,b,c){var d=-1,e=a?a.length:0;if(b=b&&"undefined"==typeof c?b:w(b,c,3),"number"==typeof e)for(;++d<e&&b(a[d],d,a)!==!1;);else he(a,b);return a}function Zb(a,b,c){var d=a?a.length:0;if(b=b&&"undefined"==typeof c?b:w(b,c,3),"number"==typeof d)for(;d--&&b(a[d],d,a)!==!1;);else{var e=_d(a);d=e.length,he(a,function(a,c,f){return c=e?e[--d]:--d,b(f[c],c,f)})}return a}function $b(a,b){var c=o(arguments,2),d=-1,e="function"==typeof b,f=a?a.length:0,g=nd("number"==typeof f?f:0);return Yb(a,function(a){g[++d]=(e?b:a[b]).apply(a,c)}),g}function _b(a,c,d){var e=-1,f=a?a.length:0;if(c=b.createCallback(c,d,3),"number"==typeof f)for(var g=nd(f);++e<f;)g[e]=c(a[e],e,a);else g=[],he(a,function(a,b,d){g[++e]=c(a,b,d)});return g}function ac(a,c,d){var e=-1/0,f=e;if("function"!=typeof c&&d&&d[c]===a&&(c=null),null==c&&Zd(a))for(var h=-1,i=a.length;++h<i;){var j=a[h];j>f&&(f=j)}else c=null==c&&Jb(a)?g:b.createCallback(c,d,3),Yb(a,function(a,b,d){var g=c(a,b,d);g>e&&(e=g,f=a)});return f}function bc(a,c,d){var e=1/0,f=e;if("function"!=typeof c&&d&&d[c]===a&&(c=null),null==c&&Zd(a))for(var h=-1,i=a.length;++h<i;){var j=a[h];f>j&&(f=j)}else c=null==c&&Jb(a)?g:b.createCallback(c,d,3),Yb(a,function(a,b,d){var g=c(a,b,d);e>g&&(e=g,f=a)});return f}function cc(a,c,d,e){if(!a)return d;var f=arguments.length<3;c=b.createCallback(c,e,4);var g=-1,h=a.length;if("number"==typeof h)for(f&&(d=a[++g]);++g<h;)d=c(d,a[g],g,a);else he(a,function(a,b,e){d=f?(f=!1,a):c(d,a,b,e)});return d}function dc(a,c,d,e){var f=arguments.length<3;return c=b.createCallback(c,e,4),Zb(a,function(a,b,e){d=f?(f=!1,a):c(d,a,b,e)}),d}function ec(a,c,d){return c=b.createCallback(c,d,3),Vb(a,function(a,b,d){return!c(a,b,d)})}function fc(a,b,c){if(a&&"number"!=typeof a.length&&(a=Rb(a)),null==b||c)return a?a[db(0,a.length-1)]:q;var d=gc(a);return d.length=Td(Sd(0,b),d.length),d}function gc(a){var b=-1,c=a?a.length:0,d=nd("number"==typeof c?c:0);return Yb(a,function(a){var c=db(0,++b);d[b]=d[c],d[c]=a}),d}function hc(a){var b=a?a.length:0;return"number"==typeof b?b:_d(a).length}function ic(a,c,d){var e;c=b.createCallback(c,d,3);var f=-1,g=a?a.length:0;if("number"==typeof g)for(;++f<g&&!(e=c(a[f],f,a)););else he(a,function(a,b,d){return!(e=c(a,b,d))});return!!e}function jc(a,c,d){var e=-1,f=Zd(c),g=a?a.length:0,i=nd("number"==typeof g?g:0);for(f||(c=b.createCallback(c,d,3)),Yb(a,function(a,b,d){var g=i[++e]=l();f?g.criteria=_b(c,function(b){return a[b]}):(g.criteria=k())[0]=c(a,b,d),g.index=e,g.value=a}),g=i.length,i.sort(h);g--;){var j=i[g];i[g]=j.value,f||m(j.criteria),n(j)}return i}function kc(a){return a&&"number"==typeof a.length?o(a):Rb(a)}function lc(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var e=a[b];e&&d.push(e)}return d}function mc(a){return $(a,_(arguments,!0,!0,1))}function nc(a,c,d){var e=-1,f=a?a.length:0;for(c=b.createCallback(c,d,3);++e<f;)if(c(a[e],e,a))return e;return-1}function oc(a,c,d){var e=a?a.length:0;for(c=b.createCallback(c,d,3);e--;)if(c(a[e],e,a))return e;return-1}function pc(a,c,d){var e=0,f=a?a.length:0;if("number"!=typeof c&&null!=c){var g=-1;for(c=b.createCallback(c,d,3);++g<f&&c(a[g],g,a);)e++}else if(e=c,null==e||d)return a?a[0]:q;return o(a,0,Td(Sd(0,e),f))}function qc(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c="function"!=typeof b&&d&&d[b]===a?null:b,b=!1),null!=c&&(a=_b(a,c,d)),_(a,b)}function rc(a,b,c){if("number"==typeof c){var e=a?a.length:0;c=0>c?Sd(0,e+c):c||0}else if(c){var f=Ac(a,b);return a[f]===b?f:-1}return d(a,b,c)}function sc(a,c,d){var e=0,f=a?a.length:0;if("number"!=typeof c&&null!=c){var g=f;for(c=b.createCallback(c,d,3);g--&&c(a[g],g,a);)e++}else e=null==c||d?1:c||e;return o(a,0,Td(Sd(0,f-e),f))}function tc(){for(var a=[],b=-1,c=arguments.length,f=k(),g=ib(),h=g===d,j=k();++b<c;){var l=arguments[b];(Zd(l)||mb(l))&&(a.push(l),f.push(h&&l.length>=v&&i(b?a[b]:j)))}var o=a[0],p=-1,q=o?o.length:0,r=[];a:for(;++p<q;){var s=f[0];if(l=o[p],(s?e(s,l):g(j,l))<0){for(b=c,(s||j).push(l);--b;)if(s=f[b],(s?e(s,l):g(a[b],l))<0)continue a;r.push(l)}}for(;c--;)s=f[c],s&&n(s);return m(f),m(j),r}function uc(a,c,d){var e=0,f=a?a.length:0;if("number"!=typeof c&&null!=c){var g=f;for(c=b.createCallback(c,d,3);g--&&c(a[g],g,a);)e++}else if(e=c,null==e||d)return a?a[f-1]:q;return o(a,Sd(0,f-e))}function vc(a,b,c){var d=a?a.length:0;for("number"==typeof c&&(d=(0>c?Sd(0,d+c):Td(c,d-1))+1);d--;)if(a[d]===b)return d;return-1}function wc(a){for(var b=arguments,c=0,d=b.length,e=a?a.length:0;++c<d;)for(var f=-1,g=b[c];++f<e;)a[f]===g&&(Kd.call(a,f--,1),e--);return a}function xc(a,b,c){a=+a||0,c="number"==typeof c?c:+c||1,null==b&&(b=a,a=0);for(var d=-1,e=Sd(0,Cd((b-a)/(c||1))),f=nd(e);++d<e;)f[d]=a,a+=c;return f}function yc(a,c,d){var e=-1,f=a?a.length:0,g=[];for(c=b.createCallback(c,d,3);++e<f;){var h=a[e];c(h,e,a)&&(g.push(h),Kd.call(a,e--,1),f--)}return g}function zc(a,c,d){if("number"!=typeof c&&null!=c){var e=0,f=-1,g=a?a.length:0;for(c=b.createCallback(c,d,3);++f<g&&c(a[f],f,a);)e++}else e=null==c||d?1:Sd(0,c);return o(a,e)}function Ac(a,c,d,e){var f=0,g=a?a.length:f;for(d=d?b.createCallback(d,e,1):Zc,c=d(c);g>f;){var h=f+g>>>1;d(a[h])<c?f=h+1:g=h}return f}function Bc(){return eb(_(arguments,!0,!0))}function Cc(a,c,d,e){return"boolean"!=typeof c&&null!=c&&(e=d,d="function"!=typeof c&&e&&e[c]===a?null:c,c=!1),null!=d&&(d=b.createCallback(d,e,3)),eb(a,c,d)}function Dc(a){return $(a,o(arguments,1))}function Ec(){for(var a=-1,b=arguments.length;++a<b;){var c=arguments[a];if(Zd(c)||mb(c))var d=d?eb($(d,c).concat($(c,d))):c}return d||[]}function Fc(){for(var a=arguments.length>1?arguments:arguments[0],b=-1,c=a?ac(me(a,"length")):0,d=nd(0>c?0:c);++b<c;)d[b]=me(a,b);return d}function Gc(a,b){var c=-1,d=a?a.length:0,e={};for(b||!d||Zd(a[0])||(b=[]);++c<d;){var f=a[c];b?e[f]=b[c]:f&&(e[f[0]]=f[1])}return e}function Hc(a,b){if(!Db(b))throw new wd;return function(){return--a<1?b.apply(this,arguments):void 0}}function Ic(a,b){return arguments.length>2?gb(a,17,o(arguments,2),null,b):gb(a,1,null,null,b)}function Jc(a){for(var b=arguments.length>1?_(arguments,!0,!1,1):ub(a),c=-1,d=b.length;++c<d;){var e=b[c];a[e]=gb(a[e],1,null,null,a)}return a}function Kc(a,b){return arguments.length>2?gb(b,19,o(arguments,2),null,a):gb(b,3,null,null,a)}function Lc(){for(var a=arguments,b=a.length;b--;)if(!Db(a[b]))throw new wd;return function(){for(var b=arguments,c=a.length;c--;)b=[a[c].apply(this,b)];return b[0]}}function Mc(a,b){return b="number"==typeof b?b:+b||a.length,gb(a,4,null,null,null,b)}function Nc(a,b,c){var d,e,f,g,h,i,j,k=0,l=!1,m=!0;if(!Db(a))throw new wd;if(b=Sd(0,b)||0,c===!0){var n=!0;m=!1}else Eb(c)&&(n=c.leading,l="maxWait"in c&&(Sd(b,c.maxWait)||0),m="trailing"in c?c.trailing:m);var o=function(){var c=b-(oe()-g);if(0>=c){e&&Dd(e);var l=j;e=i=j=q,l&&(k=oe(),f=a.apply(h,d),i||e||(d=h=null))}else i=Jd(o,c)},p=function(){i&&Dd(i),e=i=j=q,(m||l!==b)&&(k=oe(),f=a.apply(h,d),i||e||(d=h=null))};return function(){if(d=arguments,g=oe(),h=this,j=m&&(i||!n),l===!1)var c=n&&!i;else{e||n||(k=g);var q=l-(g-k),r=0>=q;r?(e&&(e=Dd(e)),k=g,f=a.apply(h,d)):e||(e=Jd(p,q))}return r&&i?i=Dd(i):i||b===l||(i=Jd(o,b)),c&&(r=!0,f=a.apply(h,d)),!r||i||e||(d=h=null),f}}function Oc(a){if(!Db(a))throw new wd;var b=o(arguments,1);return Jd(function(){a.apply(q,b)},1)}function Pc(a,b){if(!Db(a))throw new wd;var c=o(arguments,2);return Jd(function(){a.apply(q,c)},b)}function Qc(a,b){if(!Db(a))throw new wd;var c=function(){var d=c.cache,e=b?b.apply(this,arguments):u+arguments[0];return Hd.call(d,e)?d[e]:d[e]=a.apply(this,arguments)};return c.cache={},c}function Rc(a){var b,c;if(!Db(a))throw new wd;return function(){return b?c:(b=!0,c=a.apply(this,arguments),a=null,c)}}function Sc(a){return gb(a,16,o(arguments,1))}function Tc(a){return gb(a,32,null,o(arguments,1))}function Uc(a,b,c){var d=!0,e=!0;if(!Db(a))throw new wd;return c===!1?d=!1:Eb(c)&&(d="leading"in c?c.leading:d,e="trailing"in c?c.trailing:e),V.leading=d,V.maxWait=b,V.trailing=e,Nc(a,b,V)}function Vc(a,b){return gb(b,16,[a])}function Wc(a){return function(){return a}}function Xc(a,b,c){var d=typeof a;if(null==a||"function"==d)return w(a,b,c);if("object"!=d)return bd(a);var e=_d(a),f=e[0],g=a[f];return 1!=e.length||g!==g||Eb(g)?function(b){for(var c=e.length,d=!1;c--&&(d=ab(b[e[c]],a[e[c]],null,!0)););return d}:function(a){var b=a[f];return g===b&&(0!==g||1/g==1/b)}}function Yc(a){return null==a?"":vd(a).replace(de,hb)}function Zc(a){return a}function $c(a,d,e){var f=!0,g=d&&ub(d);d&&(e||g.length)||(null==e&&(e=d),h=c,d=a,a=b,g=ub(d)),e===!1?f=!1:Eb(e)&&"chain"in e&&(f=e.chain);var h=a,i=Db(h);Yb(g,function(b){var c=a[b]=d[b];i&&(h.prototype[b]=function(){var b=this.__chain__,d=this.__wrapped__,e=[d];Id.apply(e,arguments);var g=c.apply(a,e);if(f||b){if(d===g&&Eb(g))return this;g=new h(g),g.__chain__=b}return g})})}function _c(){return a._=zd,this}function ad(){}function bd(a){return function(b){return b[a]}}function cd(a,b,c){var d=null==a,e=null==b;if(null==c&&("boolean"==typeof a&&e?(c=a,a=1):e||"boolean"!=typeof b||(c=b,e=!0)),d&&e&&(b=1),a=+a||0,e?(b=a,a=0):b=+b||0,c||a%1||b%1){var f=Vd();return Td(a+f*(b-a+parseFloat("1e-"+((f+"").length-1))),b)}return db(a,b)}function dd(a,b){if(a){var c=a[b];return Db(c)?a[b]():c}}function ed(a,c,d){var e=b.templateSettings;a=vd(a||""),d=fe({},d,e);var f,g=fe({},d.imports,e.imports),h=_d(g),i=Rb(g),k=0,l=d.interpolate||G,m="__p += '",n=ud((d.escape||G).source+"|"+l.source+"|"+(l===E?B:G).source+"|"+(d.evaluate||G).source+"|$","g");a.replace(n,function(b,c,d,e,g,h){return d||(d=e),m+=a.slice(k,h).replace(I,j),c&&(m+="' +\n__e("+c+") +\n'"),g&&(f=!0,m+="';\n"+g+";\n__p += '"),d&&(m+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'"),k=h+b.length,b}),m+="';\n";var o=d.variable,p=o;p||(o="obj",m="with ("+o+") {\n"+m+"\n}\n"),m=(f?m.replace(y,""):m).replace(z,"$1").replace(A,"$1;"),m="function("+o+") {\n"+(p?"":o+" || ("+o+" = {});\n")+"var __t, __p = '', __e = _.escape"+(f?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+m+"return __p\n}";var r="\n/*\n//# sourceURL="+(d.sourceURL||"/lodash/template/source["+K++ +"]")+"\n*/";try{var s=qd(h,"return "+m+r).apply(q,i)}catch(t){throw t.source=m,t}return c?s(c):(s.source=m,s)}function fd(a,b,c){a=(a=+a)>-1?a:0;var d=-1,e=nd(a);for(b=w(b,c,1);++d<a;)e[d]=b(d);return e}function gd(a){return null==a?"":vd(a).replace(ce,lb)}function hd(a){var b=++t;return vd(null==a?"":a)+b}function id(a){return a=new c(a),a.__chain__=!0,a}function jd(a,b){return b(a),a}function kd(){return this.__chain__=!0,this}function ld(){return vd(this.__wrapped__)}function md(){return this.__wrapped__}a=a?cb.defaults(Z.Object(),a,cb.pick(Z,J)):Z;var nd=a.Array,od=a.Boolean,pd=a.Date,qd=a.Function,rd=a.Math,sd=a.Number,td=a.Object,ud=a.RegExp,vd=a.String,wd=a.TypeError,xd=[],yd=td.prototype,zd=a._,Ad=yd.toString,Bd=ud("^"+vd(Ad).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),Cd=rd.ceil,Dd=a.clearTimeout,Ed=rd.floor,Fd=qd.prototype.toString,Gd=jb(Gd=td.getPrototypeOf)&&Gd,Hd=yd.hasOwnProperty,Id=xd.push,Jd=a.setTimeout,Kd=xd.splice,Ld=xd.unshift,Md=function(){try{var a={},b=jb(b=td.defineProperty)&&b,c=b(a,a,a)&&b}catch(d){}return c}(),Nd=jb(Nd=td.create)&&Nd,Od=jb(Od=nd.isArray)&&Od,Pd=a.isFinite,Qd=a.isNaN,Rd=jb(Rd=td.keys)&&Rd,Sd=rd.max,Td=rd.min,Ud=a.parseInt,Vd=rd.random,Wd={};Wd[M]=nd,Wd[N]=od,Wd[O]=pd,Wd[P]=qd,Wd[R]=td,Wd[Q]=sd,Wd[S]=ud,Wd[T]=vd,c.prototype=b.prototype;var Xd=b.support={};Xd.funcDecomp=!jb(a.WinRTError)&&H.test(p),Xd.funcNames="string"==typeof qd.name,b.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:E,variable:"",imports:{_:b}},Nd||(s=function(){function b(){}return function(c){if(Eb(c)){b.prototype=c;var d=new b;b.prototype=null}return d||a.Object()}}());var Yd=Md?function(a,b){W.value=b,Md(a,"__bindData__",W)}:ad,Zd=Od||function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Ad.call(a)==M||!1},$d=function(a){var b,c=a,d=[];if(!c)return d;if(!X[typeof a])return d;for(b in c)Hd.call(c,b)&&d.push(b);return d},_d=Rd?function(a){return Eb(a)?Rd(a):[]}:$d,ae={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},be=wb(ae),ce=ud("("+_d(be).join("|")+")","g"),de=ud("["+_d(ae).join("")+"]","g"),ee=function(a,b,c){var d,e=a,f=e;if(!e)return f;var g=arguments,h=0,i="number"==typeof c?2:g.length;if(i>3&&"function"==typeof g[i-2])var j=w(g[--i-1],g[i--],2);else i>2&&"function"==typeof g[i-1]&&(j=g[--i]);for(;++h<i;)if(e=g[h],e&&X[typeof e])for(var k=-1,l=X[typeof e]&&_d(e),m=l?l.length:0;++k<m;)d=l[k],f[d]=j?j(f[d],e[d]):e[d];return f},fe=function(a,b,c){var d,e=a,f=e;if(!e)return f;for(var g=arguments,h=0,i="number"==typeof c?2:g.length;++h<i;)if(e=g[h],e&&X[typeof e])for(var j=-1,k=X[typeof e]&&_d(e),l=k?k.length:0;++j<l;)d=k[j],"undefined"==typeof f[d]&&(f[d]=e[d]);return f},ge=function(a,b,c){var d,e=a,f=e;if(!e)return f;if(!X[typeof e])return f;b=b&&"undefined"==typeof c?b:w(b,c,3);for(d in e)if(b(e[d],d,a)===!1)return f;return f},he=function(a,b,c){var d,e=a,f=e;if(!e)return f;if(!X[typeof e])return f;b=b&&"undefined"==typeof c?b:w(b,c,3);for(var g=-1,h=X[typeof e]&&_d(e),i=h?h.length:0;++g<i;)if(d=h[g],b(e[d],d,a)===!1)return f;return f},ie=Gd?function(a){if(!a||Ad.call(a)!=R)return!1;var b=a.valueOf,c=jb(b)&&(c=Gd(b))&&Gd(c);return c?a==c||Gd(a)==c:kb(a)}:kb,je=fb(function(a,b,c){Hd.call(a,c)?a[c]++:a[c]=1}),ke=fb(function(a,b,c){(Hd.call(a,c)?a[c]:a[c]=[]).push(b)}),le=fb(function(a,b,c){a[c]=b}),me=_b,ne=Vb,oe=jb(oe=pd.now)&&oe||function(){return(new pd).getTime()},pe=8==Ud(x+"08")?Ud:function(a,b){return Ud(Jb(a)?a.replace(F,""):a,b||0)};return b.after=Hc,b.assign=ee,b.at=Sb,b.bind=Ic,b.bindAll=Jc,b.bindKey=Kc,b.chain=id,b.compact=lc,b.compose=Lc,b.constant=Wc,b.countBy=je,b.create=pb,b.createCallback=Xc,b.curry=Mc,b.debounce=Nc,b.defaults=fe,b.defer=Oc,b.delay=Pc,b.difference=mc,b.filter=Vb,b.flatten=qc,b.forEach=Yb,b.forEachRight=Zb,b.forIn=ge,b.forInRight=sb,b.forOwn=he,b.forOwnRight=tb,b.functions=ub,b.groupBy=ke,b.indexBy=le,b.initial=sc,b.intersection=tc,b.invert=wb,b.invoke=$b,b.keys=_d,b.map=_b,b.mapValues=Lb,b.max=ac,b.memoize=Qc,b.merge=Mb,b.min=bc,b.omit=Nb,b.once=Rc,b.pairs=Ob,b.partial=Sc,b.partialRight=Tc,b.pick=Pb,b.pluck=me,b.property=bd,b.pull=wc,b.range=xc,b.reject=ec,b.remove=yc,b.rest=zc,b.shuffle=gc,b.sortBy=jc,b.tap=jd,b.throttle=Uc,b.times=fd,b.toArray=kc,b.transform=Qb,b.union=Bc,b.uniq=Cc,b.values=Rb,b.where=ne,b.without=Dc,b.wrap=Vc,b.xor=Ec,b.zip=Fc,b.zipObject=Gc,b.collect=_b,b.drop=zc,b.each=Yb,b.eachRight=Zb,b.extend=ee,b.methods=ub,b.object=Gc,b.select=Vb,b.tail=zc,b.unique=Cc,b.unzip=Fc,$c(b),b.clone=nb,b.cloneDeep=ob,b.contains=Tb,b.escape=Yc,b.every=Ub,b.find=Wb,b.findIndex=nc,b.findKey=qb,b.findLast=Xb,b.findLastIndex=oc,b.findLastKey=rb,b.has=vb,b.identity=Zc,b.indexOf=rc,b.isArguments=mb,b.isArray=Zd,b.isBoolean=xb,b.isDate=yb,b.isElement=zb,b.isEmpty=Ab,b.isEqual=Bb,b.isFinite=Cb,b.isFunction=Db,b.isNaN=Fb,b.isNull=Gb,b.isNumber=Hb,b.isObject=Eb,b.isPlainObject=ie,b.isRegExp=Ib,b.isString=Jb,b.isUndefined=Kb,b.lastIndexOf=vc,b.mixin=$c,b.noConflict=_c,b.noop=ad,b.now=oe,b.parseInt=pe,b.random=cd,b.reduce=cc,b.reduceRight=dc,b.result=dd,b.runInContext=p,b.size=hc,b.some=ic,b.sortedIndex=Ac,b.template=ed,b.unescape=gd,b.uniqueId=hd,b.all=Ub,b.any=ic,b.detect=Wb,b.findWhere=Wb,b.foldl=cc,b.foldr=dc,b.include=Tb,b.inject=cc,$c(function(){var a={};return he(b,function(c,d){b.prototype[d]||(a[d]=c)}),a}(),!1),b.first=pc,b.last=uc,b.sample=fc,b.take=pc,b.head=pc,he(b,function(a,d){var e="sample"!==d;b.prototype[d]||(b.prototype[d]=function(b,d){var f=this.__chain__,g=a(this.__wrapped__,b,d);
return f||null!=b&&(!d||e&&"function"==typeof b)?new c(g,f):g})}),b.VERSION="2.4.1",b.prototype.chain=kd,b.prototype.toString=ld,b.prototype.value=md,b.prototype.valueOf=md,Yb(["join","pop","shift"],function(a){var d=xd[a];b.prototype[a]=function(){var a=this.__chain__,b=d.apply(this.__wrapped__,arguments);return a?new c(b,a):b}}),Yb(["push","reverse","sort","unshift"],function(a){var c=xd[a];b.prototype[a]=function(){return c.apply(this.__wrapped__,arguments),this}}),Yb(["concat","slice","splice"],function(a){var d=xd[a];b.prototype[a]=function(){return new c(d.apply(this.__wrapped__,arguments),this.__chain__)}}),b}var q,r=[],s=[],t=0,u=+new Date+"",v=75,w=40,x=" 	\f\n\r\u2028\u2029",y=/\b__p \+= '';/g,z=/\b(__p \+=) '' \+/g,A=/(__e\(.*?\)|\b__t\)) \+\n'';/g,B=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,C=/\w*$/,D=/^\s*function[ \n\r\t]+\w/,E=/<%=([\s\S]+?)%>/g,F=RegExp("^["+x+"]*0+(?=.$)"),G=/($^)/,H=/\bthis\b/,I=/['\n\r\t\u2028\u2029\\]/g,J=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],K=0,L="[object Arguments]",M="[object Array]",N="[object Boolean]",O="[object Date]",P="[object Function]",Q="[object Number]",R="[object Object]",S="[object RegExp]",T="[object String]",U={};U[P]=!1,U[L]=U[M]=U[N]=U[O]=U[Q]=U[R]=U[S]=U[T]=!0;var V={leading:!1,maxWait:0,trailing:!1},W={configurable:!1,enumerable:!1,value:null,writable:!1},X={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},Y={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},Z=X[typeof window]&&window||this,$=X[typeof c]&&c&&!c.nodeType&&c,_=X[typeof b]&&b&&!b.nodeType&&b,ab=_&&_.exports===$&&$,bb=X[typeof a]&&a;!bb||bb.global!==bb&&bb.window!==bb||(Z=bb);var cb=p();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Z._=cb,define(function(){return cb})):$&&_?ab?(_.exports=cb)._=cb:$._=cb:Z._=cb}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],114:[function(a,b){function c(a,b){for(var c in b)if(b.hasOwnProperty(c)){var f=b[c];if("function"==typeof f)a[c]=f;else if(f&&"object"==typeof f){var g=d(e,f);Object.defineProperty(a,c,g)}}}var d=a("xtend"),e={enumerable:!0,configurable:!0};b.exports=function(a,b){c(a.prototype,b)},b.exports.mix=c},{xtend:115}],115:[function(a,b){function c(){for(var a={},b=0;b<arguments.length;b++){var c=arguments[b];for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])}return a}b.exports=c},{}],116:[function(a,b){var c=function(){var a=Date.now(),b=a,c=0,d=1/0,e=0,f=0,g=1/0,h=0,i=0,j=0,k=document.createElement("div");k.id="stats",k.addEventListener("mousedown",function(a){a.preventDefault(),s(++j%2)},!1),k.style.cssText="width:80px;opacity:0.9;cursor:pointer";var l=document.createElement("div");l.id="fps",l.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",k.appendChild(l);var m=document.createElement("div");m.id="fpsText",m.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",m.innerHTML="FPS",l.appendChild(m);var n=document.createElement("div");for(n.id="fpsGraph",n.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",l.appendChild(n);74>n.children.length;){var o=document.createElement("span");o.style.cssText="width:1px;height:30px;float:left;background-color:#113",n.appendChild(o)}var p=document.createElement("div");p.id="ms",p.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",k.appendChild(p);var q=document.createElement("div");q.id="msText",q.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",q.innerHTML="MS",p.appendChild(q);var r=document.createElement("div");for(r.id="msGraph",r.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",p.appendChild(r);74>r.children.length;)o=document.createElement("span"),o.style.cssText="width:1px;height:30px;float:left;background-color:#131",r.appendChild(o);var s=function(a){switch(j=a){case 0:l.style.display="block",p.style.display="none";break;case 1:l.style.display="none",p.style.display="block"}};return{REVISION:12,domElement:k,setMode:s,begin:function(){a=Date.now()},end:function(){var j=Date.now();c=j-a,d=Math.min(d,c),e=Math.max(e,c),q.textContent=c+" MS ("+d+"-"+e+")";var k=Math.min(30,30-30*(c/200));return r.appendChild(r.firstChild).style.height=k+"px",i++,j>b+1e3&&(f=Math.round(1e3*i/(j-b)),g=Math.min(g,f),h=Math.max(h,f),m.textContent=f+" FPS ("+g+"-"+h+")",k=Math.min(30,30-30*(f/100)),n.appendChild(n.firstChild).style.height=k+"px",b=j,i=0),j},update:function(){a=this.end()}}};"object"==typeof b&&(b.exports=c)},{}],117:[function(a,b){function c(a){a=a||{},this.value=0,this.momentum=0,this.totalCells=e(a.totalCells,1),this.cellSize=e(a.cellSize,0),this.viewSize=a.viewSize||0,this.gutterSize=e(a.gutterSize,this.viewSize/4),this.dipToClosestCell=a.dipToClosestCell,this.updateSize(),this.lastInput=0,this.interacting=!1,this.dipMaxSpeed=10,this.dipSnappiness=.1,this.inputDelta=0,this.inputDeltaIndex=0,this.inputDeltaHistoryMax=3,this.inputDeltas=[];for(var b=0;b<this.inputDeltaHistoryMax;b++)this.inputDeltas.push(0)}var d=a("clamp"),e=a("defined");b.exports=function(a){return new c(a)},c.prototype.update=function(){var a=this.value<0,b=this.value>this.max,c=!a&&!b;a?(this.momentum=0,this.inputDelta>0&&(this.inputDelta*=1-this.value/-this.gutterSize)):b&&(this.momentum=0,this.inputDelta<0&&(this.inputDelta*=(this.maxGutter-this.value)/this.gutterSize));var e=!this.interacting;this.value-=this.cellSizeHalf;var f=0;if(e){c&&this.dipToClosestCell?f=(this.value%this.cellSize+this.cellSize)%this.cellSize-this.cellSizeHalf:a?f=this.value+this.cellSizeHalf:b&&(f=this.value-this.max+this.cellSizeHalf);var g=(1-d(Math.abs(this.momentum)/this.dipMaxSpeed,0,1))*this.dipSnappiness;f*=g}this.value-=this.inputDelta,this.inputDelta=0,this.value-=this.momentum,this.momentum*=.9,this.value-=f,this.value+=this.cellSizeHalf,this.value=d(this.value,-this.gutterSize,this.maxGutter)},c.prototype.start=function(a){this.interacting=!0,this.momentum=0,this.inputDelta=0,this.lastInput=a},c.prototype.move=function(a){this.interacting&&(this.inputDelta=a-this.lastInput,this.inputDeltas[this.inputDeltaIndex]=this.inputDelta,this.inputDeltaIndex=(this.inputDeltaIndex+1)%this.inputDeltaHistoryMax,this.lastInput=a)},c.prototype.updateSize=function(){this.cellSizeHalf=.5*this.cellSize,this.fullSize=Math.max(this.viewSize,this.cellSize*this.totalCells),this.max=this.fullSize-this.viewSize,this.maxGutter=this.max+this.gutterSize},c.prototype.end=function(){if(this.interacting){this.interacting=!1,this.momentum=this.inputDeltas.reduce(function(a,b){return Math.abs(a)>Math.abs(b)?a:b},0),this.delta=0;for(var a=0;a<this.inputDeltaHistoryMax;a++)this.inputDeltas[a]=0}}},{clamp:118,defined:119}],118:[function(a,b){function c(a,b,c){return c>b?b>a?b:a>c?c:a:c>a?c:a>b?b:a}b.exports=c},{}],119:[function(a,b){b.exports=function(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a]}},{}],120:[function(a,b){function c(a,b){var c=a.clientX||0,d=a.clientY||0,e=h(b);return[c-e.left,d-e.top]}function d(a,b){return Array.prototype.slice.call(a).filter(function(a){return a.target===b})[0]||a[0]}function e(a,b){for(var c=0;c<a.length;c++)if(a[c].identifier===b)return a[c];return null}function f(a,b){return function(c){b?a.addEventListener(c.type,c.listener):a.removeEventListener(c.type,c.listener)}}function g(a){return a.replace(/^(touch|mouse)/,"").replace(/up$/,"end").replace(/down$/,"start")}function h(a){return a===window||a===document||a===document.body?k:a.getBoundingClientRect()}var i=a("events/"),j=["touchstart","touchmove","touchend","mousedown","mousemove","mouseup"],k={left:0,top:0};b.exports=function(a,b){function h(a,b){var c;return l&&/^touchend/.test(b)?(c=e(a.changedTouches,l.identifier||0),c&&(l=null)):!l&&/^touchstart/.test(b)?l=c=d(a.changedTouches,k.target):l&&(c=e(a.changedTouches,l.identifier||0)),c}b=b||{},a=a||window;var k=new i;k.target=b.target||a;var l=null,m=b.filtered,n=j;"string"==typeof b.type&&(n=j.filter(function(a){return 0===a.indexOf(b.type)}));var o=n.map(function(a){var b=g(a),e=function(e){var f=e;if(/^touch/.test(a)&&(f=m?h(e,a):d(e.changedTouches,k.target)),f){var g=c(f,k.target);k.emit(b,e,g)}};return{type:a,listener:e}});return k.enable=function(){o.forEach(f(a,!0))},k.disable=function(){o.forEach(f(a,!1))},k.enable(),k}},{"events/":121}],121:[function(a,b,c){arguments[4][39][0].apply(c,arguments)},{dup:39}],122:[function(a,b,c){!function(a,d){"use strict";var e="0.7.3",f="",g="?",h="function",i="undefined",j="object",k="major",l="model",m="name",n="type",o="vendor",p="version",q="architecture",r="console",s="mobile",t="tablet",u="smarttv",v="wearable",w="embedded",x={extend:function(a,b){for(var c in b)-1!=="browser cpu device engine os".indexOf(c)&&b[c].length%2===0&&(a[c]=b[c].concat(a[c]));return a},has:function(a,b){return"string"==typeof a?-1!==b.toLowerCase().indexOf(a.toLowerCase()):void 0},lowerize:function(a){return a.toLowerCase()}},y={rgx:function(){for(var a,b,c,e,f,g,k,l=0,m=arguments;l<m.length&&!g;){var n=m[l],o=m[l+1];if(typeof a===i){a={};for(e in o)f=o[e],typeof f===j?a[f[0]]=d:a[f]=d}for(b=c=0;b<n.length&&!g;)if(g=n[b++].exec(this.getUA()))for(e=0;e<o.length;e++)k=g[++c],f=o[e],typeof f===j&&f.length>0?2==f.length?a[f[0]]=typeof f[1]==h?f[1].call(this,k):f[1]:3==f.length?a[f[0]]=typeof f[1]!==h||f[1].exec&&f[1].test?k?k.replace(f[1],f[2]):d:k?f[1].call(this,k,f[2]):d:4==f.length&&(a[f[0]]=k?f[3].call(this,k.replace(f[1],f[2])):d):a[f]=k?k:d;l+=2}return a},str:function(a,b){for(var c in b)if(typeof b[c]===j&&b[c].length>0){for(var e=0;e<b[c].length;e++)if(x.has(b[c][e],a))return c===g?d:c}else if(x.has(b[c],a))return c===g?d:c;return a}},z={browser:{oldsafari:{major:{1:["/8","/1","/3"],2:"/4","?":"/"},version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:"NT 6.4",RT:"ARM"}}}},A={browser:[[/(opera\smini)\/((\d+)?[\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/((\d+)?[\w\.-]+)/i,/(opera).+version\/((\d+)?[\w\.]+)/i,/(opera)[\/\s]+((\d+)?[\w\.]+)/i],[m,p,k],[/\s(opr)\/((\d+)?[\w\.]+)/i],[[m,"Opera"],p,k],[/(kindle)\/((\d+)?[\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?((\d+)?[\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?((\d+)?[\w\.]*)/i,/(?:ms|\()(ie)\s((\d+)?[\w\.]+)/i,/(rekonq)((?:\/)[\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron)\/((\d+)?[\w\.-]+)/i],[m,p,k],[/(trident).+rv[:\s]((\d+)?[\w\.]+).+like\sgecko/i],[[m,"IE"],p,k],[/(yabrowser)\/((\d+)?[\w\.]+)/i],[[m,"Yandex"],p,k],[/(comodo_dragon)\/((\d+)?[\w\.]+)/i],[[m,/_/g," "],p,k],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?((\d+)?[\w\.]+)/i,/(uc\s?browser|qqbrowser)[\/\s]?((\d+)?[\w\.]+)/i],[m,p,k],[/(dolfin)\/((\d+)?[\w\.]+)/i],[[m,"Dolphin"],p,k],[/((?:android.+)crmo|crios)\/((\d+)?[\w\.]+)/i],[[m,"Chrome"],p,k],[/version\/((\d+)?[\w\.]+).+?mobile\/\w+\s(safari)/i],[p,k,[m,"Mobile Safari"]],[/version\/((\d+)?[\w\.]+).+?(mobile\s?safari|safari)/i],[p,k,m],[/webkit.+?(mobile\s?safari|safari)((\/[\w\.]+))/i],[m,[k,y.str,z.browser.oldsafari.major],[p,y.str,z.browser.oldsafari.version]],[/(konqueror)\/((\d+)?[\w\.]+)/i,/(webkit|khtml)\/((\d+)?[\w\.]+)/i],[m,p,k],[/(navigator|netscape)\/((\d+)?[\w\.-]+)/i],[[m,"Netscape"],p,k],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?((\d+)?[\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/((\d+)?[\w\.-]+)/i,/(mozilla)\/((\d+)?[\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf)[\/\s]?((\d+)?[\w\.]+)/i,/(links)\s\(((\d+)?[\w\.]+)/i,/(gobrowser)\/?((\d+)?[\w\.]+)*/i,/(ice\s?browser)\/v?((\d+)?[\w\._]+)/i,/(mosaic)[\/\s]((\d+)?[\w\.]+)/i],[m,p,k]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[q,"amd64"]],[/(ia32(?=;))/i],[[q,x.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[q,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[q,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[q,/ower/,"",x.lowerize]],[/(sun4\w)[;\)]/i],[[q,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[q,x.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[l,o,[n,t]],[/applecoremedia\/[\w\.]+ \((ipad)/],[l,[o,"Apple"],[n,t]],[/(apple\s{0,1}tv)/i],[[l,"Apple TV"],[o,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[o,l,[n,t]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[l,[o,"Amazon"],[n,t]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[l,y.str,z.device.amazon.model],[o,"Amazon"],[n,s]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[l,o,[n,s]],[/\((ip[honed|\s\w*]+);/i],[l,[o,"Apple"],[n,s]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[o,l,[n,s]],[/\(bb10;\s(\w+)/i],[l,[o,"BlackBerry"],[n,s]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7)/i],[l,[o,"Asus"],[n,t]],[/(sony)\s(tablet\s[ps])/i],[o,l,[n,t]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[o,l,[n,r]],[/android.+;\s(shield)\sbuild/i],[l,[o,"Nvidia"],[n,r]],[/(playstation\s[3portablevi]+)/i],[l,[o,"Sony"],[n,r]],[/(sprint\s(\w+))/i],[[o,y.str,z.device.sprint.vendor],[l,y.str,z.device.sprint.model],[n,s]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[o,l,[n,t]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[o,[l,/_/g," "],[n,s]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[l,[o,"Microsoft"],[n,r]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[o,"Microsoft"],[n,s]],[/\s((milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?))[\w\s]+build\//i,/(mot)[\s-]?(\w+)*/i],[[o,"Motorola"],l,[n,s]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[l,[o,"Motorola"],[n,t]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[o,"Samsung"],l,[n,t]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-n900))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[o,"Samsung"],l,[n,s]],[/(samsung);smarttv/i],[o,l,[n,u]],[/\(dtv[\);].+(aquos)/i],[l,[o,"Sharp"],[n,u]],[/sie-(\w+)*/i],[l,[o,"Siemens"],[n,s]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[o,"Nokia"],l,[n,s]],[/android\s3\.[\s\w-;]{10}(a\d{3})/i],[l,[o,"Acer"],[n,t]],[/android\s3\.[\s\w-;]{10}(lg?)-([06cv9]{3,4})/i],[[o,"LG"],l,[n,t]],[/(lg) netcast\.tv/i],[o,l,[n,u]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[l,[o,"LG"],[n,s]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[l,[o,"Lenovo"],[n,t]],[/linux;.+((jolla));/i],[o,l,[n,s]],[/((pebble))app\/[\d\.]+\s/i],[o,l,[n,v]],[/android.+;\s(glass)\s\d/i],[l,[o,"Google"],[n,v]],[/(mobile|tablet);.+rv\:.+gecko\//i],[[n,x.lowerize],o,l]],engine:[[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[m,p],[/rv\:([\w\.]+).*(gecko)/i],[p,m]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[m,p],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[m,[p,y.str,z.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[m,"Windows"],[p,y.str,z.os.windows.version]],[/\((bb)(10);/i],[[m,"BlackBerry"],p],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\os|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[m,p],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[m,"Symbian"],p],[/\((series40);/i],[m],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[m,"Firefox OS"],p],[/(nintendo|playstation)\s([wids3portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[m,p],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[m,"Chromium OS"],p],[/(sunos)\s?([\w\.]+\d)*/i],[[m,"Solaris"],p],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[m,p],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[m,"iOS"],[p,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[m,"Mac OS"],[p,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[m,p]]},B=function(b,c){if(!(this instanceof B))return new B(b,c).getResult();var d=b||(a&&a.navigator&&a.navigator.userAgent?a.navigator.userAgent:f),e=c?x.extend(A,c):A;this.getBrowser=function(){return y.rgx.apply(this,e.browser)},this.getCPU=function(){return y.rgx.apply(this,e.cpu)},this.getDevice=function(){return y.rgx.apply(this,e.device)},this.getEngine=function(){return y.rgx.apply(this,e.engine)},this.getOS=function(){return y.rgx.apply(this,e.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return d},this.setUA=function(a){return d=a,this},this.setUA(d)};if(B.VERSION=e,B.BROWSER={NAME:m,MAJOR:k,VERSION:p},B.CPU={ARCHITECTURE:q},B.DEVICE={MODEL:l,VENDOR:o,TYPE:n,CONSOLE:r,MOBILE:s,SMARTTV:u,TABLET:t,WEARABLE:v,EMBEDDED:w},B.ENGINE={NAME:m,VERSION:p},B.OS={NAME:m,VERSION:p},typeof c!==i)typeof b!==i&&b.exports&&(c=b.exports=B),c.UAParser=B;else{a.UAParser=B,typeof define===h&&define.amd&&define(function(){return B});var C=a.jQuery||a.Zepto;if(typeof C!==i){var D=new B;C.ua=D.getResult(),C.ua.get=function(){return D.getUA()},C.ua.set=function(a){D.setUA(a);var b=D.getResult();for(var c in b)C.ua[c]=b[c]}}}}(this)},{}],123:[function(a,b){var c=a("./lib/WarpedItem"),d=a("./lib/Point"),e=a("raf-loop"),f=a("gsap"),g=function(a){this.init(a)};g.prototype={init:function(a){this.data=a,this.warp=a.warp||"rollover",this._scale=a.scale,this._justify=a.justify,this._elementString=a.element,this._elements=document.querySelectorAll(a.element),this._wrapperString=a.elementWrapper,this._wrapper=document.querySelector(a.elementWrapper),this.rect=this._wrapper.getBoundingClientRect(),this._elementsPerRow=a.grid?a.grid[0]:Math.ceil(this._wrapper.offsetWidth/this._elementWidth),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseEnter=this.onMouseEnter.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.onItemEnter=this.onItemEnter.bind(this),this.render=this.render.bind(this),this.update=this.update.bind(this),this.destroy=this.destroy.bind(this),this.createGrid=this.createGrid.bind(this),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._doRender=!1,this._doTransform=!1,this.renderer=e(this.render),this.update(),"mousemove"==this.warp&&this._wrapper.addEventListener("mousemove",this.onMouseMove),this._wrapper.addEventListener("mouseenter",this.onMouseEnter),this._wrapper.addEventListener("mouseleave",this.onMouseLeave),"rollover"===this.warp?(this._doRender=!0,this._doTransform=!0,this.start()):setTimeout(function(){this._doRender=!0,this._doTransform=!0,this.start()}.bind(this),1e3)},update:function(){this._doRender=!1,this._elementWidth=this._elements[0].offsetWidth,this._elementHeight=this._elements[0].offsetHeight,this._elApspectRatio=this._elementWidth/this._elementHeight,this._points=[],this._centerPoints=[],this._transformPoints=[],this._targetPoints=[],this._prevTargPoints=[],this._items=[],this._speed=this.data.speed||50,this._multiSpeed=this.data.multiSpeed||1,this._range=this._elementWidth*(this.data.range||.5),this._numItems=this._elements.length,this._numRows=parseInt(this._numItems/this._elementsPerRow,10),this._numRowsRest=this._numItems%this._elementsPerRow,this.totalRows=this._numRows+this._numRowsRest,this.totalColumns=this._elementsPerRow,this.createGrid()},createGrid:function(){var a,b,e=0,f=this._numRows,g=this._numRowsRest,h=this._elementsPerRow,i=this._points,j=this._centerPoints,k=this._elements,l=this._elementWidth,m=this._elementHeight;for(a=0;f+1>=a;a++){var n=a==f+1?0===g?-1:g:h;for(b=0;n>=b;b++)i[e]=new d(b*l,a*m),i[e].id=e,i[e].isAcive=!1,e++}for(this._numPoints=e,a=0;a<this._numItems;a++){var o=parseInt(a/h,10),p=a%h,q=o*(h+1)+p,r=q+1,s=(o+1)*(h+1)+p,t=s+1,u=i[q].x+.5*l,v=i[q].y+.5*m;j[a]=new d(u,v);var w=!1,x=!1,y=!1,z=!1;0===o&&(w=!0),o===this.totalRows&&(y=!0),0===p&&(z=!0),p===this.totalColumns&&(x=!0);var A,B,C,D,E=.5*(l*this._scale-l),F=.5*(m*this._scale-m);this._justify&&0===o?(A=0,B=0,C=i[s].y+2*F,D=i[t].y+2*F):this._justify&&o===this.totalRows-1?(A=i[q].y-2*F,B=i[r].y-2*F,C=i[s].y,D=i[t].y):(A=i[q].y-F,B=i[r].y-F,C=i[s].y+F,D=i[t].y+F);var G,H,I,J;this._justify&&0===p?(G=0,H=i[r].x+2*E,I=0,J=i[t].x+2*E):this._justify&&p===this.totalColumns-1?(G=i[q].x-2*E,H=i[r].x,I=i[s].x-2*E,J=i[t].x):(G=i[q].x-E,H=i[r].x+E,I=i[s].x-E,J=i[t].x+E);var K=new d(G,A),L=new d(H,B),M=new d(I,C),N=new d(J,D);this._items[a]?this._items[a].update({topLeft:i[q],topRight:i[r],bottomRight:i[t],bottomLeft:i[s],center:j[a],topLeftTarget:K,topRightTarget:L,bottomLeftTarget:M,bottomRightTarget:N,row:o,column:p}):(this._items[a]=new c({element:k[a],elementString:k[a].getAttribute("id"),topLeft:i[q],topRight:i[r],bottomRight:i[t],bottomLeft:i[s],center:j[a],topLeftTarget:K,topRightTarget:L,bottomLeftTarget:M,bottomRightTarget:N,row:o,column:p}),"rollover"==this.warp&&k[a].addEventListener("mouseenter",this.onItemEnter))}this._doRender=!0},render:function(){if(this._doRender){var a,b,c,d=this._range,e=this._speed,f=this._multiSpeed;if("mousemove"==this.warp&&this._doTransform){if("undefined"==typeof this._mouseY)return;for(c=0;c<this._numPoints;c++)b=this._points[c],a=this._mousePoint.distanceObj(b),b.x=b.x-a.dx/a.distance*(d/a.distance)*e*f-(b.x-b.xOrigin)/2,b.y=b.y-a.dy/a.distance*(d/a.distance)*e*f-(b.y-b.yOrigin)/2}for(c=0;c<this._numItems;c++)this._items[c].render()}},reset:function(){this._doTransform=!1;for(var a=0;a<this._points.length;a++){var b=this._points[a];b.isAcive=!1,"mousemove"==this.warp&&f.killTweensOf(b),f.killTweensOf(b),f.to(b,this.data.tweenDuration,{x:b.xOrigin,y:b.yOrigin,ease:this.data.ease})}},start:function(){this.renderer.start()},stop:function(){this.renderer.stop()},onMouseMove:function(a){console.log("onMouseMove(), e.clientY: ",a.clientY),this._mouseX=a.clientX,this._mouseY=a.clientY,this._mousePoint=new d(a.pageX-parseInt(this.rect.left,10),a.pageY-parseInt(this.rect.top,10))},onMouseEnter:function(){this.resetTimer&&clearTimeout(this.resetTimer),"mousemove"==this.warp&&f.killAll(!0,!0,!0),this._doTransform=!0},onMouseLeave:function(){"mousemove"==this.warp?this.resetTimer=setTimeout(function(){this.reset()}.bind(this),200):this.reset()},tweenPointsToTarget:function(){for(var a=0;a<this._transformPoints.length;a++){var b=this._transformPoints[a],c=this._targetPoints[a];f.killTweensOf(b),f.to(b,this.data.tweenDuration,{x:c.x,y:c.y,ease:this.data.ease})}if(this._prevTargPoints.length)for(var d=0;d<this._prevTargPoints.length;d++){var e=this._prevTargPoints[d];e.isActive||(f.killTweensOf(e),f.to(e,this.data.tweenDuration,{x:e.xOrigin,y:e.yOrigin,ease:this.data.ease}))}this._prevTargPoints=this._transformPoints},onItemEnter:function(a){if(this._transformPoints.length)for(var b=0;b<this._transformPoints.length;b++)this._transformPoints[b].isActive=!1;var c=!1;this._items.forEach(function(b){b._elementString===a.target.id&&(b._TL.isActive=!0,b._TR.isActive=!0,b._BL.isActive=!0,b._BR.isActive=!0,this._transformPoints=[b._TL,b._TR,b._BL,b._BR],this._targetPoints=[b._TLtarget,b._TRtarget,b._BLtarget,b._BRtarget],c=!0)}.bind(this)),c&&this.tweenPointsToTarget(this._transformPoints,this._targetPoints)},destroy:function(){this.stop(),this.renderer=null,"mousemove"==this.warp&&this._wrapper.removeEventListener("mousemove",this.onMouseMove),this._wrapper.removeEventListener("mouseenter",this.onMouseEnter),this._wrapper.removeEventListener("mouseleave",this.onMouseLeave);for(var a=0;a<this._numItems;a++)"rollover"==this.warp&&this._items[a]._element.removeEventListener("mouseenter",this.onItemEnter),this._items[a].destroy(),this._items[a]=null},resize:function(a,b){this._doRender=!1,this.rect=this._wrapper.getBoundingClientRect(),this._wrapper.style.width=a+"px",this._wrapper.style.height=b+"px";for(var c=a/this._elementsPerRow,d=c/this._elApspectRatio,e=0;e<this._items.length;e++)this._items[e].resize(c,d);this.update(),this._doRender=!0}},b.exports=g},{"./lib/Point":127,"./lib/WarpedItem":128,gsap:41,"raf-loop":87}],124:[function(require,module,exports){function createLUDecompositionPackage(){function _chkMatrix(a,b,c){if(!c.isMatrix)throw console.warn("***ERROR: in LUDecomposition."+a+": argument "+b+" is not a Matrix."),null}function _chkLUDecomposition(a,b,c){if(!c.isLUDecomposition)throw console.warn("***ERROR: in LUDecomposition."+a+": argument "+b+" is not an LUDecomposition."),null}function _arrange(mo,r){with(mo)for(var res=Matrix.create(m,n),i=0;i<m;i++)for(var j=0;j<n;j++)res.mat[i][j]=mat[r[i]][j];return res}this.version=version;var abs=Math.abs,min=Math.min;this.create=function(a){_chkMatrix("create",1,a);var b,c,d=Matrix.create(a.mat),e=d.mat;b=a.m,c=a.n;for(var f=new Array,g=0;b>g;g++)f[g]=g;for(var h,i=1,j=new Array(b),k=0;c>k;k++){for(var g=0;b>g;g++)j[g]=e[g][k];for(var g=0;b>g;g++){h=e[g];for(var l=min(g,k),m=0,n=0;l>n;n++)m+=h[n]*j[n];h[k]=j[g]-=m}for(var o=k,g=k+1;b>g;g++)abs(j[g])>abs(j[o])&&(o=g);if(o!=k){for(var n=0;c>n;n++){var p=e[o][n];e[o][n]=e[k][n],e[k][n]=p}var n=f[o];f[o]=f[k],f[k]=n,i=-i}if(b>k&&0!=e[k][k])for(var g=k+1;b>g;g++)e[g][k]/=e[k][k]}var q=new Object;return q.LU=e,q.m=b,q.n=c,q.pivsign=i,q.piv=f,q.isLUDecomposition=!0,q},this.restore=function(a,b){_chkMatrix("restore",1,a),_chkLUDecomposition("restore",2,b);for(var c=Matrix.create(a.m,a.n),d=b.piv,e=0;e<a.m;e++)for(var f=0;f<a.n;f++)c.mat[d[e]][f]=a.mat[e][f];return c},this.isNonsingular=function(lud){_chkLUDecomposition("isNonsingular",1,lud);var eps=Matrix.getEPS();with(lud)for(var j=0;j<n;j++)if(abs(LU[j][j])<eps)return!1;return!0},this.getL=function(lud){_chkLUDecomposition("getL",1,lud);var xm=lud.m,xn=lud.m>=lud.n?lud.n:lud.m,X=Matrix.create(xm,xn),L=X.mat;with(lud)for(var i=0;xm>i;i++)for(var j=0;xn>j;j++)L[i][j]=i>j?LU[i][j]:i==j?1:0;return X},this.getU=function(lud){_chkLUDecomposition("getU",1,lud);var xm=lud.m>=lud.n?lud.n:lud.m,xn=lud.n,X=Matrix.create(xm,xn),U=X.mat;with(lud)for(var i=0;xm>i;i++)for(var j=0;xn>j;j++)U[i][j]=j>=i?LU[i][j]:0;return X},this.det=function(lud){_chkLUDecomposition("det",1,lud);var eps=Matrix.getEPS();if(lud.m!=lud.n)throw console.warn("***ERROR: in LUDecomposition.det: argument 1 is not square."),null;var d=lud.pivsign;with(lud)for(var j=0;j<n;j++){{LU[j][j]}if(d*=LU[j][j],abs(d)<eps)return 0}return d},this.solve=function(lud,bmat){if(_chkMatrix("solve",2,bmat),_chkLUDecomposition("solve",1,lud),bmat.m!=lud.m)throw console.warn("***ERROR: in LUDecomposition.solve: matrix row dimensions do not agree."),null;if(!this.isNonsingular(lud))throw console.warn("***ERROR: in LUDecomposition.solve: matrix is singular."),null;var nx=bmat.n,Xmat=_arrange(bmat,lud.piv),X=Xmat.mat;with(lud){for(var k=0;k<n;k++)for(var i=k+1;i<n;i++)for(var j=0;nx>j;j++)X[i][j]-=X[k][j]*LU[i][k];for(var k=n-1;k>=0;k--){for(var j=0;nx>j;j++)X[k][j]/=LU[k][k];for(var i=0;k>i;i++)for(var j=0;nx>j;j++)X[i][j]-=X[k][j]*LU[i][k]}}return Xmat}}function createMatrixPackage(){function _chkNum(a){return abs(a)<EPS?0:a}function _chkMatrix(a,b,c){if(!c.isMatrix)throw"***ERROR: Argument "+b+" of Matrix."+a+' is not a Matrix; its value is "'+c+'".'}function _createMatrixfromArray(a){for(var b=a.length,c=0;b>c;c++){if(!(a[c]instanceof Array))throw"***ERROR: in Matrix.create: argument 1 is not a 2D array.";if(a[c].length!=a[0].length)throw"***ERROR: in Matrix.create: argument 1 has different length rows."}for(var d=a[0].length,e=new Array(b),c=0;b>c;c++){e[c]=new Array(d);for(var f=0;d>f;f++)e[c][f]=_chkNum(a[c][f])}var g=new Object;return g.m=b,g.n=d,g.mat=e,g.isMatrix=!0,g}function _createMatrixfromDimensions(a,b){for(var c=new Array(a),d=0;a>d;d++)c[d]=new Array(b);var e=new Object;return e.m=a,e.n=b,e.mat=c,e.isMatrix=!0,e}this.version=version;var abs=Math.abs,EPS=Math.pow(2,-40);this.getEPS=function(){return EPS},this.setEPS=function(a){EPS=a},this.create=function(a,b){var c=a instanceof Array;if(!c&&"number"!=typeof a)throw"***ERROR: in Matrix.create: argument 1 is not an array or a number.";if(c&&null!=b)throw"***ERROR: in Matrix.create: argument 1 is an array but argument 2 is also present.";return c?_createMatrixfromArray(a):_createMatrixfromDimensions(a,b)},this.identity=function(m,n){var res=_createMatrixfromDimensions(m,n);with(res){for(var i=0;m>i;i++)for(var j=0;n>j;j++)mat[i][j]=0;for(var i=0;i<Math.min(m,n);i++)mat[i][i]=1}return res},this.unit=function(m,n){var res=_createMatrixfromDimensions(m,n);with(res)for(var i=0;m>i;i++)for(var j=0;n>j;j++)mat[i][j]=1;return res},this.random=function(m,n){var res=_createMatrixfromDimensions(m,n);with(res)for(var i=0;m>i;i++)for(var j=0;n>j;j++)mat[i][j]=_chkNum(Math.random());return res},this.copy=function(mo,fromRow,fromCol,m,n){_chkMatrix("copy",1,mo);var res=_createMatrixfromDimensions(m,n);with(res)for(var i=0;m>i;i++)for(var j=0;n>j;j++)mat[i][j]=mo.mat[i+fromRow][j+fromCol];return res},this.transpose=function(mo){_chkMatrix("transpose",1,mo);var res=_createMatrixfromDimensions(mo.n,mo.m);with(res)for(var i=0;i<m;i++)for(var j=0;j<n;j++)mat[i][j]=mo.mat[j][i];return res},this.diagOf=function(mo){_chkMatrix("diagOf",1,mo);var res=_createMatrixfromDimensions(Math.min(mo.m,mo.n),1);with(res)for(var i=0;i<m;i++)mat[i][0]=mo.mat[i][i];return res},this.diag=function(mo){if(_chkMatrix("diag",1,mo),1!=mo.n)throw"***ERROR: in Matrix.diag: argument 1 is not a column vector.";var res=Matrix.identity(mo.m,mo.m);with(res)for(var i=0;i<m;i++)mat[i][i]=mo.mat[i][0];return res},this.max=function(mo){with(_chkMatrix("max",1,mo),mo)for(var res=mat[0][0],i=0;i<m;i++)for(var j=0;j<n;j++)mat[i][j]>res&&(res=mat[i][j]);return _chkNum(res)},this.min=function(mo){with(_chkMatrix("min",1,mo),mo)for(var res=mat[0][0],i=0;i<m;i++)for(var j=0;j<n;j++)mat[i][j]<res&&(res=mat[i][j]);return _chkNum(res)},this.scale=function(mo,scalar){_chkMatrix("scale",1,mo);var res=_createMatrixfromArray(mo.mat);with(res)for(var i=0;i<m;i++)for(var j=0;j<n;j++)mat[i][j]=_chkNum(scalar*mat[i][j]);return res},this.add=function(mo1,mo2){if(_chkMatrix("add",1,mo1),_chkMatrix("add",2,mo2),mo1.m!=mo2.m||mo1.n!=mo2.n)throw"***ERROR: in Matrix.add: matrix dimensions don't match.";var res=_createMatrixfromDimensions(mo1.m,mo1.n);with(res)for(var i=0;i<m;i++)for(var j=0;j<n;j++)mat[i][j]=_chkNum(mo1.mat[i][j]+mo2.mat[i][j]);return res},this.sub=function(mo1,mo2){if(_chkMatrix("sub",1,mo1),_chkMatrix("sub",2,mo2),mo1.m!=mo2.m||mo1.n!=mo2.n)throw"***ERROR: in Matrix.sub: matrix dimensions don't match.";var res=_createMatrixfromDimensions(mo1.m,mo1.n);with(res)for(var i=0;i<m;i++)for(var j=0;j<n;j++)mat[i][j]=_chkNum(mo1.mat[i][j]-mo2.mat[i][j]);return res},this.mult=function(mo1,mo2){if(_chkMatrix("mult",1,mo1),_chkMatrix("mult",2,mo2),mo1.n!=mo2.m)throw"***ERROR: in Matrix.mult: matrix dimensions don't match.";var temp,res=_createMatrixfromDimensions(mo1.m,mo2.n);with(res)for(var i=0;i<m;i++)for(var j=0;j<n;j++){temp=0;
for(var k=0;k<mo1.n;k++)temp+=mo1.mat[i][k]*mo2.mat[k][j];mat[i][j]=_chkNum(temp)}return res},this.map=function(f,mo){_chkMatrix("map",2,mo);var res=_createMatrixfromDimensions(mo.m,mo.n);with(res)for(var i=0;i<m;i++)for(var j=0;j<n;j++)mat[i][j]=_chkNum(f(mo.mat[i][j]));return res},this.combine=function(f,mo1,mo2){if(_chkMatrix("combine",1,mo1),_chkMatrix("combine",2,mo2),mo1.m!=mo2.m||mo1.n!=mo2.n)throw"***ERROR: in Matrix.combine: matrix dimensions don't match.";var res=_createMatrixfromDimensions(mo1.m,mo1.n);with(res)for(var i=0;i<m;i++)for(var j=0;j<n;j++)mat[i][j]=_chkNum(f(mo1.mat[i][j],mo2.mat[i][j]));return res},this.trace=function(mo){_chkMatrix("trace",1,mo);var t=0;with(mo)for(var i=0;i<Math.min(m,n);i++)t+=mat[i][i];return _chkNum(t)},this.det=function(mo){if(_chkMatrix("det",1,mo),mo.m!=mo.n)throw"***ERROR: in Matrix.det: argument is not square.";with(LUDecomposition)return _chkNum(det(create(mo)))},this.inverse=function(a){return _chkMatrix("inverse",1,a),Matrix.solve(a,Matrix.identity(a.m,a.m))},this.solve=function(A,B){if(_chkMatrix("solve",1,A),_chkMatrix("solve",2,B),A.m==A.n)with(LUDecomposition)return solve(create(A),B);else{if(!(A.m>A.n))throw"***ERROR: in Matrix.solve: argument 1 has fewer rows than columns.";with(QRDecomposition){var temp=create(A);return solve(temp,B)}}},this.eigenstructure=function(a){if(_chkMatrix("eigenstructure",1,a),a.m!=a.n)throw"***ERROR: in Matrix.eigenstructure: argument is not a square matrix.";return EVDecomposition.create(a)},this.display=function(a,b){_chkMatrix("display",1,a),null==b&&(b=3),displayMat(a.mat,null,null,b)}}var version="LUDecomposition 1.00",LUDecomposition=new createLUDecompositionPackage,version="Matrix 1.01",Matrix=new createMatrixPackage;module.exports=Matrix},{}],125:[function(a,b){var c=a("./PerspectiveTransformsHelpers"),d=a("./Matrix");b.exports=function(a){var b=a.element,e=a.src,f=a.dst,g="iPad"==navigator.platform||"iPhone"==navigator.platform||"iPod"==navigator.platform||"iPhone Simulator"==navigator.platform||"iPad Simulator"==navigator.platform,h=c;if(h.CheckConcave(f)){for(var i=[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],j=[0,0,0,0,0,0,0,0],k=0;4>k;k++)i[k]=[],i[k][0]=i[k+4][3]=e[k].x,i[k][1]=i[k+4][4]=e[k].y,i[k][2]=i[k+4][5]=1,i[k][3]=i[k][4]=i[k][5]=i[k+4][0]=i[k+4][1]=i[k+4][2]=0,i[k][6]=-e[k].x*f[k].x,i[k][7]=-e[k].y*f[k].x,i[k+4][6]=-e[k].x*f[k].y,i[k+4][7]=-e[k].y*f[k].y,j[k]=f[k].x,j[k+4]=f[k].y;var l=[];for(k=0;k<j.length;k++)l[k]=[j[k]];var m=d.create(i),n=d.create(l),o=d.solve(m,n);if(g){var p=new WebKitCSSMatrix;p.m11=o.mat[0][0],p.m12=o.mat[3][0],p.m13=0,p.m14=o.mat[6][0],p.m21=o.mat[1][0],p.m22=o.mat[4][0],p.m23=0,p.m24=o.mat[7][0],p.m31=0,p.m32=0,p.m33=1,p.m34=0,p.m41=o.mat[2][0],p.m42=o.mat[5][0],p.m43=0,p.m44=1,document.getElementById(b).style.webkitTransform=p}else""==c.TransformVendor&&c.detectPropertyPrefix(),document.getElementById(b).style[c.TransformVendor]="matrix3d("+o.mat[0][0]+","+o.mat[3][0]+", 0,"+o.mat[6][0]+","+o.mat[1][0]+","+o.mat[4][0]+", 0,"+o.mat[7][0]+",0, 0, 1, 0,"+o.mat[2][0]+","+o.mat[5][0]+", 0, 1)"}}},{"./Matrix":124,"./PerspectiveTransformsHelpers":126}],126:[function(a,b){var c=a("./Point"),d={};d.CheckConcave=function(a){for(var b=d,c=4,e=b.CalcVector(a[0],a[c-1]),f=b.CalcVector(a[1],a[0]),g=b.CalcDeterminant(e,f),h=0,i=1;c-1>i;i++)if(e=f,f=b.CalcVector(a[i+1],a[i]),h=b.CalcDeterminant(e,f),0>h*g)return!1;return e=f,f=b.CalcVector(a[0],a[c-1]),h=b.CalcDeterminant(e,f),0>h*g?!1:!0},d.CalcVector=function(a,b){var d=a.x-b.x,e=a.y-b.y;return new c(d,e)},d.CalcDeterminant=function(a,b){return a.x*b.y-a.y*b.x},d.TransformVendor="",d.detectPropertyPrefix=function(){for(var a="Transform",b=["Moz","ms","Webkit","O"],c=0,e=b.length;e>c;c++)"undefined"!=typeof document.body.style[b[c]+a]&&(d.TransformVendor=b[c]+"Transform");""==d.TransformVendor&&(d.TransformVendor="msTransform")},b.exports=d},{"./Point":127}],127:[function(a,b){var c=function(a,b){this.x=a||0,this.y=b||0,this.xOrigin=this.x,this.yOrigin=this.y,this.copy=function(){return new c(this.x,this.y)},this.equals=function(a){return this.x===a.x&&this.y===a.y},this.distanceObj=function(a){var b=this.x-a.x,c=this.y-a.y,d=Math.sqrt(b*b+c*c);return{dx:b,dy:c,distance:d}}};b.exports=c},{}],128:[function(a,b){var c=a("./PerspectiveTransform"),d=function(a){this.init(a)};d.prototype={init:function(a){this._element=a.element,this._elementString=a.elementString,this.update=this.update.bind(this),this.render=this.render.bind(this),this.resize=this.resize.bind(this),this.destroy=this.destroy.bind(this),this.doRender=!0,this.update(a)},render:function(){var a=this._TL,b=this._TR,d=this._BR,e=this._BL;this.doRender&&(console.log("PerspectiveTransform"),c({element:this._elementString,src:[{x:0,y:0},{x:this._width,y:0},{x:this._width,y:this._height},{x:0,y:this._height}],dst:[{x:parseInt(a.x-this._leftIni,10),y:parseInt(a.y-this._topIni,10)},{x:parseInt(b.x-this._leftIni,10),y:parseInt(b.y-this._topIni,10)},{x:parseInt(d.x-this._leftIni,10),y:parseInt(d.y-this._topIni,10)},{x:parseInt(e.x-this._leftIni,10),y:parseInt(e.y-this._topIni,10)}]})),this.doRender=!(this._TLini.equals(a)&&this._TRini.equals(b)&&this._BRini.equals(d)&&this._BLini.equals(e))},update:function(a){this.row=a.row,this.column=a.column,this._TLini=a.topLeft.copy(),this._TRini=a.topRight.copy(),this._BRini=a.bottomRight.copy(),this._BLini=a.bottomLeft.copy(),this._TLtarget=a.topLeftTarget,this._TRtarget=a.topRightTarget,this._BLtarget=a.bottomLeftTarget,this._BRtarget=a.bottomRightTarget,this._center=a.center,this._TL=a.topLeft,this._TR=a.topRight,this._BR=a.bottomRight,this._BL=a.bottomLeft,this._width=a.element.offsetWidth,this._height=a.element.offsetHeight,this._leftIni=a.element.offsetLeft,this._topIni=a.element.offsetTop},_onOver:function(a){a&&a.preventDefault()},_onOut:function(a){a&&a.preventDefault()},_onClick:function(a){a&&a.preventDefault()},resize:function(a,b){this._element.style.width=a+"px",this._element.style.height=b+"px"},destroy:function(){}},b.exports=d},{"./PerspectiveTransform":125}],129:[function(a,b,c){"use strict";!function(a){"object"==typeof c?b.exports=a():"function"==typeof define&&define.amd?define(a):(window.WatchJS=a(),window.watch=window.WatchJS.watch,window.unwatch=window.WatchJS.unwatch,window.callWatchers=window.WatchJS.callWatchers)}(function(){var a,b,c,d={noMore:!1},e=function(a){var b={};return a&&"[object Function]"==b.toString.call(a)},f=function(a){return a%1===0},g=function(a){return"[object Array]"===Object.prototype.toString.call(a)},h=function(){return Object.defineProperty||Object.prototype.__defineGetter__},i=function(a,b,c,d){try{Object.defineProperty(a,b,{get:c,set:d,enumerable:!0,configurable:!0})}catch(e){try{Object.prototype.__defineGetter__.call(a,b,c),Object.prototype.__defineSetter__.call(a,b,d)}catch(f){throw"watchJS error: browser not supported :/"}}},j=function(a,b,c){try{Object.defineProperty(a,b,{enumerable:!1,configurable:!0,writable:!1,value:c})}catch(d){a[b]=c}},k=function(){e(arguments[1])?l.apply(this,arguments):g(arguments[1])?m.apply(this,arguments):n.apply(this,arguments)},l=function(a,b,c){if(!(a instanceof String)&&(a instanceof Object||g(a))){var d=[];if(g(a))for(var e=0;e<a.length;e++)d.push(e);else for(var f in a)d.push(f);m(a,d,b,c)}},m=function(a,b,c,d){for(var e in b)n(a,b[e],c,d)},n=function(b,c,d,f){e(b[c])||(null!=b[c]&&(void 0===f||f>0)&&(void 0!==f&&f--,l(b[c],d,f)),a(b,c,d))},o=function(){e(arguments[1])?p.apply(this,arguments):g(arguments[1])?q.apply(this,arguments):b.apply(this,arguments)},p=function(a,b){if(!(a instanceof String)&&(a instanceof Object||g(a))){var c=[];if(g(a))for(var d=0;d<a.length;d++)c.push(d);else for(var e in a)c.push(e);q(a,c,b)}},q=function(a,c,d){for(var e in c)b(a,c[e],d)};if(h()){a=function(a,b,e){var f=a[b];t(a,b),a.watchers||j(a,"watchers",{}),a.watchers[b]||(a.watchers[b]=[]),a.watchers[b].push(e);var g=function(){return f},h=function(g){var h=f;f=g,a[b]&&l(a[b],e),t(a,b),d.noMore||JSON.stringify(h)!==JSON.stringify(g)&&(c(a,b,"set",g,h),d.noMore=!1)};i(a,b,g,h)},c=function(a,b,c,d,e){for(var g in a.watchers[b])f(g)&&a.watchers[b][g].call(a,b,c,d,e)};var r=["pop","push","reverse","shift","sort","slice","unshift"],s=function(a,b,d,e){j(a[b],e,function(){var f=d.apply(a[b],arguments);return n(a,a[b]),"slice"!==e&&c(a,b,e,arguments),f})},t=function(a,b){if(a[b]&&!(a[b]instanceof String)&&g(a[b]))for(var c,d=r.length;d--;)c=r[d],s(a,b,a[b][c],c)};b=function(a,b,c){for(var d in a.watchers[b]){var e=a.watchers[b][d];e==c&&a.watchers[b].splice(d,1)}}}else{var u=[];a=function(a,b,c){u.push({obj:a,prop:b,serialized:JSON.stringify(a[b]),watcher:c})},b=function(a,b,c){for(var d in u){var e=u[d];e.obj==a&&e.prop==b&&e.watcher==c&&u.splice(d,1)}},c=function(a,b,c,d){for(var e in u){var f=u[e];f.obj==a&&f.prop==b&&f.watcher.call(a,b,c,d)}};var v=function(){for(var a in u){var b=u[a],c=JSON.stringify(b.obj[b.prop]);c!=b.serialized&&(b.watcher.call(b.obj,b.prop,b.obj[b.prop],JSON.parse(b.serialized)),b.serialized=c)}};setInterval(v,50)}return d.watch=k,d.unwatch=o,d.callWatchers=c,d})},{}],130:[function(a,b){"use strict";function c(a,b){function c(){4===l.readyState&&j()}function d(){var a=void 0;if(l.response?a=l.response:"text"!==l.responseType&&l.responseType||(a=l.responseText||l.responseXML),t)try{a=JSON.parse(a)}catch(b){}return a}function e(a){clearTimeout(n),a instanceof Error||(a=new Error(""+(a||"unknown"))),a.statusCode=0,b(a,k)}function j(){clearTimeout(n);var a=1223===l.status?204:l.status,c=k,e=null;0!==a?(c={body:d(),statusCode:a,method:p,headers:{},url:o,rawRequest:l},l.getAllResponseHeaders&&(c.headers=g(l.getAllResponseHeaders()))):e=new Error("Internal XMLHttpRequest Error"),b(e,c,c.body)}var k={body:void 0,headers:{},statusCode:0,method:p,url:o,rawRequest:l};if("string"==typeof a&&(a={uri:a}),a=a||{},"undefined"==typeof b)throw new Error("callback argument missing");b=f(b);var l=a.xhr||null;l||(l=a.cors||a.useXDR?new i:new h);var m,n,o=l.url=a.uri||a.url,p=l.method=a.method||"GET",q=a.body||a.data,r=l.headers=a.headers||{},s=!!a.sync,t=!1;if("json"in a&&(t=!0,r.Accept||(r.Accept="application/json"),"GET"!==p&&"HEAD"!==p&&(r["Content-Type"]="application/json",q=JSON.stringify(a.json))),l.onreadystatechange=c,l.onload=j,l.onerror=e,l.onprogress=function(){},l.ontimeout=e,l.open(p,o,!s),l.withCredentials=!!a.withCredentials,!s&&a.timeout>0&&(n=setTimeout(function(){l.abort("timeout")},a.timeout+2)),l.setRequestHeader)for(m in r)r.hasOwnProperty(m)&&l.setRequestHeader(m,r[m]);else if(a.headers)throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in a&&(l.responseType=a.responseType),"beforeSend"in a&&"function"==typeof a.beforeSend&&a.beforeSend(l),l.send(q),l}function d(){}var e=a("global/window"),f=a("once"),g=a("parse-headers"),h=e.XMLHttpRequest||d,i="withCredentials"in new h?h:e.XDomainRequest;b.exports=c},{"global/window":131,once:132,"parse-headers":136}],131:[function(a,b){(function(a){b.exports="undefined"!=typeof window?window:"undefined"!=typeof a?a:"undefined"!=typeof self?self:{}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],132:[function(a,b){function c(a){var b=!1;return function(){return b?void 0:(b=!0,a.apply(this,arguments))}}b.exports=c,c.proto=c(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return c(this)},configurable:!0})})},{}],133:[function(a,b){function c(a,b,c){if(!g(b))throw new TypeError("iterator must be a function");arguments.length<3&&(c=this),"[object Array]"===h.call(a)?d(a,b,c):"string"==typeof a?e(a,b,c):f(a,b,c)}function d(a,b,c){for(var d=0,e=a.length;e>d;d++)i.call(a,d)&&b.call(c,a[d],d,a)}function e(a,b,c){for(var d=0,e=a.length;e>d;d++)b.call(c,a.charAt(d),d,a)}function f(a,b,c){for(var d in a)i.call(a,d)&&b.call(c,a[d],d,a)}var g=a("is-function");b.exports=c;var h=Object.prototype.toString,i=Object.prototype.hasOwnProperty},{"is-function":134}],134:[function(a,b){function c(a){var b=d.call(a);return"[object Function]"===b||"function"==typeof a&&"[object RegExp]"!==b||"undefined"!=typeof window&&(a===window.setTimeout||a===window.alert||a===window.confirm||a===window.prompt)}b.exports=c;var d=Object.prototype.toString},{}],135:[function(a,b,c){function d(a){return a.replace(/^\s*|\s*$/g,"")}c=b.exports=d,c.left=function(a){return a.replace(/^\s*/,"")},c.right=function(a){return a.replace(/\s*$/,"")}},{}],136:[function(a,b){var c=a("trim"),d=a("for-each"),e=function(a){return"[object Array]"===Object.prototype.toString.call(a)};b.exports=function(a){if(!a)return{};var b={};return d(c(a).split("\n"),function(a){var d=a.indexOf(":"),f=c(a.slice(0,d)).toLowerCase(),g=c(a.slice(d+1));"undefined"==typeof b[f]?b[f]=g:e(b[f])?b[f].push(g):b[f]=[b[f],g]}),b}},{"for-each":133,trim:135}],137:[function(a,b){var c=a("dom-select"),d=a("prepend-child");b.exports={init:function(a){this.sprites={};var b=document.createElement("div");b.innerHTML=a;for(var d=c.all("svg",b),e=0;e<d.length;e++)this.sprites[d[e].getAttribute("id")]=this.getHTML(d[e])},getHTML:function(a){var b=document.createElement("div");return b.appendChild(a),b.innerHTML},get:function(a){var b=document.createElement("div");return b.innerHTML=this.sprites["svg-"+a],c("svg",b)},addTo:function(a,b){d(b instanceof Array?b[0]:b,this.get(a))},createGradient:function(){var a="http://www.w3.org/2000/svg",b=document.createElementNS(a,"svg");b.innerHTML='<defs><linearGradient id="iconGradient" x1="0%" y1="0%" x2="0%" y2="100%" spreadMethod="pad"><stop offset="0%" stop-color="#ba9f34" stop-opacity="1"/><stop offset="100%" stop-color="#7f7242" stop-opacity="1"/></linearGradient></defs>',document.body.appendChild(b)}}},{"dom-select":29,"prepend-child":80}],138:[function(a,b){var c=a("js-oop"),d=a("spooky-element"),e=a("./plugins/DOMPlugin"),f=a("handlebars"),g=a("../settings"),h=a("gsap");b.exports=new c({Extends:d,initialize:function(a,b){c.parent(this,f.compile(a)(b)),e(this.view)},changeSection:function(b){a("../framework").go(b)},init:function(a,b){g.isMobile?h.set(this,{x:this.width||window.innerWidth,onComplete:b}):h.set(this,{autoAlpha:0,onComplete:b})},aniIn:function(a,b){g.isMobile?h.to(this,.75,{x:0,ease:Expo.easeInOut,onComplete:b,clearProps:"transform"}):h.to(this,.75,{autoAlpha:1,onComplete:b})},aniOut:function(a,b){g.isMobile?h.to(this,.75,{x:-(this.width||window.innerWidth),ease:Expo.easeInOut,onComplete:b}):h.to(this,.75,{autoAlpha:0,onComplete:b})},resize:function(a,b){this.width=a,this.height=b},destroy:function(){e.remove(this.view)},formatLocationName:function(a){for(var b="",c="",d="",e=0;e<a.length;e++){var f=a[e];f.types.indexOf("locality")>-1&&(b=f.long_name),f.types.indexOf("administrative_area_level_1")>-1&&(c=f.short_name),f.types.indexOf("country")>-1&&(d=f.long_name)}return b+" "+c+", "+d}})},{"../framework":167,"../settings":217,"./plugins/DOMPlugin":170,gsap:41,handlebars:57,"js-oop":61,"spooky-element":95}],139:[function(a,b){var c=a("js-oop"),d=a("./BaseSection"),e=(a("../util/get"),a("./index.js"),a("bw-vm")),f=(a("./common/loader"),a("./gallery/Modal")),g=a("gsap"),h=a("../settings"),i=a("./gallery/Page"),j=a("./gallery/PageBtn"),k=a("./gallery/NavBtn"),l=a("watchjs"),m=l.watch,n=l.unwatch,o=a("../util/localKeys");b.exports=new c({Extends:d,initialize:function(){this.model=a("../model").gallery;var b=this.model.columnsPerPg*this.model.rowsPerPg;this.model.columnsPerPg=h.isMobile?1:this.model.columnsPerPg,this.model.rowsPerPg=h.isMobile?b:this.model.rowsPerPg,this.model.count=b,this.model.keys=o.get(),console.log("Gallery.model: ",this.model),this.template='<div id="gallery">\r\n    <div class="content">\r\n        <div id="gallery-header">\r\n            <nav class="collections-nav">\r\n                <a href="#!/gallery/allPhotos" id="all-photos-btn">{{allPhotos}}</a>\r\n                <a href="#!/gallery/myPhotos" id="my-photos-btn">{{myPhotos}}</a>\r\n            </nav>\r\n            <h1>{{title}}</h1>\r\n        </div>\r\n        <div class="collections-container needsclick">\r\n            <div class="photo-collection needsclick"></div>\r\n        </div>\r\n    </div>\r\n</div>',c.parent(this,this.template,this.model.text),this.collectionContainer=this.find(".collections-container"),this.photosContainer=this.find(".photo-collection"),this.header=this.find("#gallery-header"),this.modal=null,this.onClick=this.onClick.bind(this),this.onOver=this.onOver.bind(this),this.onOut=this.onOut.bind(this),this.onTileClick=this.onTileClick.bind(this),this.onUpdate=this.onUpdate.bind(this),this.show=this.show.bind(this),this.showModal=this.showModal.bind(this)},init:function(a,b){a&&"function"==typeof a?b=a:"undefined"!=typeof a&&(this.req=a),this.pageVM=new e({overlap:!1}),this.allPhotosBtn=new k(this.findElement("#all-photos-btn")),this.myPhotosBtn=new k(this.findElement("#my-photos-btn")),this.model.keys.length?(this.myPhotosBtn.onClick.add(this.onClick),this.allPhotosBtn.onClick.add(this.onClick)):(this.allPhotosBtn.css({display:"none"}),this.myPhotosBtn.css({display:"none"})),this.nextBtn=new j({html:'<a href="#next-page" id="next-page" class="page-btn next"></a>',parentEl:this.view,text:this.model.text.nextPage}),this.nextBtn.init(),this.nextBtn.onClick.add(this.onClick),this.prevBtn=new j({html:'<a href="#prev-page" id="prev-page" class="page-btn prev"></a>',parentEl:this.view,text:this.model.text.previousPage}),this.prevBtn.init(),this.prevBtn.onClick.add(this.onClick),m(this.model,this.onUpdate),c.parent(this,a,b)},aniIn:function(a){c.parent(this,a,function(){d&&h.isMobile&&this.showModal({id:"share",sid:d,total:1,photos:[],query:"id="+d,text:this.model.text})}.bind(this));var b=a.params.gid,d=a.params.sid;"undefined"!=typeof b&&"allPhotos"!=b?(this.model.page=0,this.model.id="myPhotos",keys=this.model.keys.length>this.model.count?this.model.keys.slice(0,this.model.count):this.model.keys,this.model.query="id="+keys.join(","),this.show(this.model),this.myPhotosBtn.aniIn(),this.allPhotosBtn.aniOut()):(this.allPhotosBtn.aniIn(),this.myPhotosBtn.aniOut(),this.model.page=0,this.model.id="allPhotos",this.model.query="count="+this.model.count+"&reversed=0&sort=posted&page=0",this.show(this.model)),console.log("sid: ",d),d&&!h.isMobile&&this.showModal({id:"share",sid:d,total:1,photos:[],query:"id="+d,text:this.model.text},{showRightAway:!0})},show:function(a,b){return console.log("Gallery.show(), data :",a),a.page==this.currentPage&&a.id==this.currentGallery?void(b&&b()):(console.log("this.currentPage: ",this.currentPage),"undefined"!=typeof this.currentPage&&(h.isMobile?g.to(this["page"+this.currentPage][0],.75,{x:-(this.getWidth()||window.innerWidth),ease:Expo.easeInOut}):g.to(this["page"+this.currentPage][0],.75,{autoAlpha:0})),this.currentPage=a.page,this.currentGallery=a.id,this["page"+a.page]=new i({html:'<div id="page-'+a.page+'" class="gallery-page needsclick"><div class="content needsclick" id="tiles-container"></div></div>',parentEl:this.photosContainer.view}),this["page"+a.page].onClick.add(this.onTileClick),void this.pageVM.show(this["page"+a.page],a,function(){b&&b()}.bind(this)))},showModal:function(a,b){console.log("Gallery.showModal(), data: ",a),this.modal=new f({html:'<div id="gallery-modal" class="modal"></div>',parentEl:this.view}),this.modal.init(a),b&&b.showRightAway&&g.set(this.modal.view,{autoAlpha:1})},aniOut:function(a,b){c.parent(this,a,b)},onClick:function(a){switch(console.log("onClick, $view[0].id: ",a[0].id),a[0].id){case"all-photos-btn":this.model.page=0,this.model.id="allPhotos",this.model.query="count="+this.model.count+"&reversed=0&sort=posted&page=0",this.show(this.model);break;case"my-photos-btn":this.model.page=0,this.model.id="myPhotos";var b=[];b=this.model.keys.length>this.model.count?this.model.keys.slice(0,this.model.count):this.model.keys,this.model.query="id="+b.join(",")+"&count="+this.model.count,this.show(this.model);break;case"next-page":console.log("this.model: ",this.model),this.model.next&&(this.model.page+=1,this.model.query=this.model.next,this.show(this.model));break;case"prev-page":this.model.previous&&(this.model.page-=1,this.model.query=this.model.previous,this.show(this.model))}},onTileClick:function(a){console.log("onTileClick(), tile: ",a),console.log("id: ",a[0].getAttribute("data-id")),this.model.sid=a[0].getAttribute("data-id"),this.showModal(this.model)},onUpdate:function(a,b,c){switch(a){case"id":"allPhotos"==c&&this.model.keys.length?(this.allPhotosBtn.aniIn(),this.myPhotosBtn.aniOut()):this.model.keys.length&&(this.allPhotosBtn.aniOut(),this.myPhotosBtn.aniIn());break;case"next":c?this.nextBtn.aniIn():this.nextBtn.aniOut();break;case"previous":c?this.prevBtn.aniIn():this.prevBtn.aniOut()}},onOver:function(a){switch(a&&a.preventDefault(),a.currentTarget.id){case"all-photos-btn":break;case"my-photos-btn":}},onOut:function(a){switch(a&&a.preventDefault(),a.currentTarget.id){case"all-photos-btn":break;case"my-photos-btn":}},resize:function(a,b){this.modal&&this.modal.view&&this.modal.resize(a,b);var c=this.collectionContainer.getHeight(),d=this.collectionContainer.getWidth(),e=d/c,f=this.model.columnsPerPg/this.model.rowsPerPg;if(h.isMobile)this.photosContainer.css({height:"100%",width:"100%",marginTop:"0px",top:"0px",left:"0",marginLeft:"0px"});else{if(f>e){var g=d/f;this.photosContainer.css({height:g+"px",width:d+"px",marginTop:-g/2+"px",top:"50%",left:"0px",marginLeft:"0px"})}else{var i=c*f;this.photosContainer.css({height:c+"px",width:i+"px",marginTop:"0px",top:"0px",left:"50%",marginLeft:-i/(this.model.columnsPerPg/this.model.rowsPerPg)+"px"})}var j=this.photosContainer.getWidth(),k=this.photosContainer.getHeight();this.pageVM.s.width=j,this.pageVM.s.height=k;var l=(c-k)/2,m=(d-j)/2;this.header.css({top:20+l+"px",right:20+m+"px"}),this["page"+this.currentPage]&&this["page"+this.currentPage].resize(j,k)}},destroy:function(){console.log("Gallery.destroy(), this.currentPage: ",this.currentPage),console.log(this["page"+this.currentPage]),"undefined"!=typeof this.currentPage&&this["page"+this.currentPage].destroy(),n(this.model,this.onUpdate),c.parent(this),console.log("destroy()")}})},{"../model":215,"../settings":217,"../util/get":219,"../util/localKeys":220,"./BaseSection":138,"./common/loader":157,"./gallery/Modal":159,"./gallery/NavBtn":161,"./gallery/Page":162,"./gallery/PageBtn":163,"./index.js":167,"bw-vm":15,gsap:41,"js-oop":61,watchjs:129}],140:[function(a,b){var c,d,e=a("js-oop"),f=a("./BaseSection"),g=(a("dom-select"),a("../util/maps/getcurlocation")),h=a("../settings"),i=a("./landing/Background"),j=a("../assets/Icons"),k=a("./common/Dropdown"),l=a("gsap"),m=a("../model"),n=a("google-maps-api")(m.googleapi,["places"]),o=(a("./common/SlotBorderButton"),a("./common/IconButton")),p=a("./common/ButtonBase"),q=a("spooky-element");n().then(function(a){c=a,d=new c.Geocoder}),b.exports=new e({Extends:f,initialize:function(){e.parent(this,'<div id="landing">\r\n	<div class="content">\r\n		<div class="dom">\r\n			<div class="logo">\r\n				<div class="lockup">\r\n					<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 416.5 345.7" enable-background="new 0 0 416.5 345.7" xml:space="preserve">\r\n						<g>\r\n							<g>\r\n\r\n									<linearGradient id="SVGID_1_" gradientUnits="userSpaceOnUse" x1="227.3905" y1="57.9328" x2="227.3905" y2="7.552359e-11" gradientTransform="matrix(1 0 0 1 -14.004 0)">\r\n									<stop  offset="0" style="stop-color:#7D6D29"/>\r\n									<stop  offset="1" style="stop-color:#D2B62A"/>\r\n								</linearGradient>\r\n								<path id=\'sv-intro-preloader-lux\' fill="url(#SVGID_1_)" d="M197,48c13.7,0,24.7-5.6,24.7-24.5l0-23.5l-10,0v23.5c0,13.7-6.6,20.4-14.7,20.4\r\n									c-8.1,0-14.6-6.6-14.6-20.3V0h-10.1l0,23.6C172.3,42.5,183.4,48.1,197,48z M274.6,37.1L259,19.9L274.7,0l-11.2,0l-10.4,13.2\r\n									L241.1,0l-11.4,0l18,20l-7.1,9c-10,12.7-20.9,24.9-42.2,24.9c-26.3,0-34.7-10.7-52.3-10.7V0h-10v51.9c26.8-3,37.8,6,61.2,6\r\n									c30.2,0,48-20.7,56.4-31.3l9.4,10.4c1.1,1.2,2.2,2.5,3.3,3.5c0,0,9.3,10,15.4,12.2c2.7,0.9,5.7,1.4,8.8,0.8\r\n									C290.6,53.6,278,40.9,274.6,37.1z"/>\r\n							</g>\r\n						</g>\r\n						<g>\r\n							<g>\r\n								<path fill="#FFADA8" d="M18.5,147.6c0,21,32.5,41.7,32.5,68.1V252c0,17.3-9.8,29-25.1,29C10,281.1,0,269.8,0,252v-32.5h18.5V253\r\n									c0,5.6,1.5,10,7.3,10c5.4,0,6.6-4.6,6.6-10v-30c0-28.5-32.5-46.1-32.5-73.2v-29.5c0-17.3,9.8-29,25.4-29s25.6,11.2,25.6,29v31.2\r\n									H32.5v-32.2c0-5.6-1.2-10-7.1-10c-5.6,0-6.8,4.6-6.8,10V147.6z"/>\r\n								<path fill="#FFADA8" d="M127.4,278.9h-20.3l-3.9-44.7H83.5l-3.9,44.7h-20L84,92.9h18.5L127.4,278.9z M85.2,216.4h16.3\r\n									c-3.2-30.5-6.3-62.7-8.3-83.5L85.2,216.4z"/>\r\n								<path fill="#FFADA8" d="M164.3,189.8l-7.3,18.1v71h-18.5V93.4h18.5v80.3l25.9-80.3h20.7l-27.3,69.8l28.3,115.7h-18.8L164.3,189.8z\r\n									"/>\r\n								<path fill="#FFADA8" d="M252.2,93.4h18.5V252c0,17.8-12.7,29-28.3,29s-27.3-11.7-27.3-29V93.4h18.5V253c0,5.4,3.4,10,9,10\r\n									s9.5-4.4,9.5-10V93.4z"/>\r\n								<path fill="#FFADA8" d="M310.4,202.5h-5.6v76.4h-18.5V93.4h24.9c15.9,0,28.3,8.8,28.3,31.2V171c0,14.9-5.4,23.4-13.4,27.8l14.9,80\r\n									h-18.5L310.4,202.5z M304.8,184.4h4.4c8.1,0,11.7-4.4,11.7-14.6v-43.7c0-10.5-3.7-14.9-11.7-14.9h-4.4V184.4z"/>\r\n								<path fill="#FFADA8" d="M416.5,278.9h-20.3l-3.9-44.7h-19.8l-3.9,44.7h-20l24.4-185.9h18.5L416.5,278.9z M374.3,216.4h16.3\r\n									c-3.2-30.5-6.3-62.7-8.3-83.5L374.3,216.4z"/>\r\n							</g>\r\n						</g>\r\n						<g>\r\n							<g>\r\n								<path fill="#FFADA8" d="M96.9,345.7v-28h8.8c6.6,0,13,4.2,13,14s-6.4,14-13,14H96.9z M102.1,340.9h1.9c2.4,0,4.4-0.5,6.3-1.8\r\n									c1.9-1.3,3.1-3.8,3.1-7.4s-1.2-6.1-3.1-7.4c-1.9-1.3-3.9-1.8-6.3-1.8h-1.9V340.9z"/>\r\n								<path fill="#FFADA8" d="M160,333.2l7.8,12.5H162l-7.5-12.1h-2.7v12.1h-5.2v-28h10.2c5.4,0,8.5,3.2,8.5,8\r\n									C165.2,329.4,163.4,332.2,160,333.2z M156.8,328.9c2.2,0,3.3-1,3.3-3.2s-1.1-3.2-3.3-3.2h-5v6.3H156.8z"/>\r\n								<path fill="#FFADA8" d="M194.5,317.7h17.3v4.8h-12.1v5.9h9.7v4.8h-9.7v7.7h12.5v4.8h-17.7V317.7z"/>\r\n								<path fill="#FFADA8" d="M256.1,345.7l-2-6.6h-8.9l-2,6.6h-5.6l9.5-28h5.2l9.5,28H256.1z M249.6,324.6l-3,9.7h5.9L249.6,324.6z"/>\r\n								<path fill="#FFADA8" d="M287.9,345.7v-28h5.8l6.6,17.5l6.6-17.5h5.8v28h-5.2v-17.3l-5.4,14.7h-3.8l-5.4-14.7v17.3H287.9z"/>\r\n							</g>\r\n						</g>\r\n						<linearGradient id="SVGID_2_" gradientUnits="userSpaceOnUse" x1="354.0005" y1="27.0875" x2="354.0005" y2="24.4208">\r\n							<stop  offset="0" style="stop-color:#7D6D29"/>\r\n							<stop  offset="1" style="stop-color:#D2B62A"/>\r\n						</linearGradient>\r\n						<rect x="303.2" y="24.4" fill="url(#SVGID_2_)" width="101.7" height="2.7"/>\r\n						<linearGradient id="SVGID_3_" gradientUnits="userSpaceOnUse" x1="55.6672" y1="27.0875" x2="55.6672" y2="24.4208">\r\n							<stop  offset="0" style="stop-color:#7D6D29"/>\r\n							<stop  offset="1" style="stop-color:#D2B62A"/>\r\n						</linearGradient>\r\n						<rect x="4.8" y="24.4" fill="url(#SVGID_3_)" width="101.7" height="2.7"/>\r\n					</svg>\r\n				</div>\r\n				<div class="icon"></div>\r\n			</div>\r\n			<div class="cover"></div>\r\n			<div class="panel">\r\n				<div class="location icon-button underline"><input type="text" class=\'location-tf\' placeholder="{{location}}" /></div>\r\n				<div class="curlocation icon-button underline"><span >{{curlocation}}</span></div>\r\n				<div class="divide">\r\n					<div class="left"></div>\r\n					<div class="txt">{{divide}}</div>\r\n					<div class="right"></div>\r\n				</div>\r\n				<div class="landmark icon-button underline"><span>{{landmarkDefault}}</span><br/><span></span></div>\r\n				{{!-- <div class="border-button begin">{{begin}}</div> --}}\r\n				<div class="gallery icon-button">{{gallery}}</div>\r\n				{{!-- <div class="video icon-button">{{video}}</div> --}}\r\n			</div>\r\n		</div>\r\n		<canvas id="leaves"></canvas>\r\n	</div>\r\n</div>\r\n',m.landing)},init:function(b,d){var f=a("../model");this.bg=new i(this.find("#leaves")[0]),this.logo=this.find(".logo"),this.logo.find(".icon").append(j.get("logo")),this.logo.originalWidth=this.logo.getWidth(),this.location=this.find(".panel .location"),this.location.append(j.get("location")),new p(this.location.find("svg")).onClick.add(this.locationBtnClickHnd.bind(this)),this.locateText=this.find(".panel .location input"),this.locateText.on("focus",function(){this.locateInitialValue=this.locateText.value,this.locateText.value=""}.bind(this)),this.locateText.on("blur",function(){""==this.locateText.value&&(this.locateText.value=this.locateInitialValue)}.bind(this)),this.curLocation=new p(this.find(".panel .curlocation")),this.curLocation.append(j.get("geolocate")),this.curLocation.onClick.add(this.getLocation.bind(this)),this.divide=this.find(".panel .divide"),this.find(".panel .landmark").append(j.get("landmark")),this.landmarkText1=this.find(".panel .landmark span:first-of-type"),this.landmarkText2=this.find(".panel .landmark span:last-of-type");var g=new o(this.find(".panel .gallery"));g.append(j.get("gallery")),g.onClick.add(this.changeSection.bind(this,"gallery")),this.cover=this.find(".cover"),this.panel=this.find(".panel");var l=Math.min(310,window.innerHeight-240);this.dd=new k(this.find(".panel .landmark")[0],f.landmarks,{scrollOutside:!0,direction:"down",height:l}),this.dd.onOpen.add(this.dropdownOpened.bind(this)),this.dd.onClose.add(this.dropdownClosed.bind(this)),this.dd.onSelect.addOnce(this.itemSelected.bind(this)),this.searchBox=new c.places.Autocomplete(this.find(".location-tf").view),c.event.addListener(this.searchBox,"place_changed",this.searchSelectHnd.bind(this)),setTimeout(function(){this.searchBox.pacID=Date.now(),this.searchBox.view=new q(this.findPacContainer(this.searchBox)),this.searchBox.view.addClass(["landing","needsclick","registered",this.searchBox.pacID].join(" ")),h.isTablet&&this.searchBox.view.addClass("up"),this.searchBox.view.on("DOMNodeInserted",function(a){var b=a.target;if(b.className.indexOf("pac-item")+1){b.className+=" needsclick";for(var c=0;c<b.childNodes.length;c++)b.childNodes[c].className+=" needsclick"}})}.bind(this),750),e.parent(this,b,d)},findPacContainer:function(a){var b=a.gm_accessors_.place;for(var c in b)if(b[c].gm_accessors_){b=b[c].gm_accessors_.input;break}for(var c in b)for(var d in b[c])if(b[c][d]instanceof HTMLElement&&"div"==b[c][d].tagName.toLowerCase())return b[c][d]},searchSelectHnd:function(){var a=this.searchBox.getPlace();return a.geometry?void this.setLocation(a):void(a.name&&""!==a.name&&d.geocode({address:a.name},this.geocodeHnd.bind(this)))},geocodeHnd:function(a,b){b==c.GeocoderStatus.OK&&this.setLocation(a[0])},locationBtnClickHnd:function(){var a=this.find(".location-tf").view.value;""!==a&&d.geocode({address:a},this.geocodeHnd.bind(this))},setLocation:function(a){var b=a.geometry.location,c=a.address_components,d=a.formatted_address;h.location={lat:b.lat(),lng:b.lng(),landmark:b.name?b.name:"",location:c?this.formatLocationName(c):d},this.find(".location-tf")[0].value=h.location.location,ga("send","event","location","click",c?this.formatLocationName(c):d),this.changeToLatLon(b.lat(),b.lng())},changeToLatLon:function(a,b){var c="/experience/"+[a,b].join(",");this.changeSection(c)},dropdownOpened:function(){var a=this.height-(this.dd.top+this.panel[0].offsetTop)-this.dd.options.height-(h.isMobile?0:10);l.to(this.cover,.5,{autoAlpha:.5}),l.to(this.panel,.5,{y:a,ease:Expo.easeInOut}),h.isMobile&&l.to(this.logo,.5,{autoAlpha:0})},dropdownClosed:function(){l.to(this.panel,.5,{y:0,ease:Expo.easeInOut}),l.to(this.cover,.5,{autoAlpha:0}),h.isMobile&&l.to(this.logo,.5,{autoAlpha:1})},itemSelected:function(a){this.landmarkText1.html(a.name),this.landmarkText2.html(a.location),h.location=a,this.changeToLatLon(a.lat,a.lng)
},getLocation:function(){h.user?(h.location=h.user,this.curLocation.find("span").html(h.location.location),this.changeToLatLon(h.location.lat,h.location.lng)):g(function(a,b){a||(h.user=h.location=b,this.curLocation.find("span").html(b.location),this.changeToLatLon(h.location.lat,h.location.lng))}.bind(this))},aniIn:function(a,b){e.parent(this,a,b),this.bg.init(),this.bg.animateIn()},aniOut:function(a,b){e.parent(this,a,b)},resize:function(a,b){var c=h.isTablet&&this.width==a&&b<this.height-100?!0:!1;c?this.css({width:this.width,height:this.height-50}):(this.css({width:"",height:""}),h.isMobile?(500>=b?(this.logo.addClass("small"),this.panel.addClass("small")):b>500&&550>b?(this.logo.addClass("small"),this.panel.removeClass("small")):b>550&&(this.logo.removeClass("small"),this.panel.removeClass("small")),this.dd.calculateTop()):l.to(this.logo,1,{width:b>690?this.logo.originalWidth:.9*this.logo.originalWidth,ease:Expo.easeInOUt}),e.parent(this,a,b),this.bg.resize(a-9,b-10))},destroy:function(){this.searchBox.unbindAll(),this.searchBox.view&&this.searchBox.view.remove(),e.parent(this)}})},{"../assets/Icons":137,"../model":215,"../settings":217,"../util/maps/getcurlocation":222,"./BaseSection":138,"./common/ButtonBase":146,"./common/Dropdown":148,"./common/IconButton":150,"./common/SlotBorderButton":155,"./landing/Background":168,"dom-select":29,"google-maps-api":36,gsap:41,"js-oop":61,"spooky-element":95}],141:[function(a,b){var c=a("js-oop"),d=a("./BaseSection"),e=a("../model"),f=a("./snapshot/Builder"),g=(a("./snapshot/TextTile"),a("../assets/Icons")),h=a("./snapshot/OptionsPanel"),i=a("./snapshot/SharePanel"),j=a("gsap"),k=a("dom-event"),l=a("./common/IconButton"),m=a("./common/CloseButton");b.exports=new c({Extends:d,initialize:function(){var b=a("../model").snapshot;b.share=a("../model").sharing,c.parent(this,'<div id="snapshot">\r\n	<div class="content">\r\n		<div class="close"></div>\r\n		<div class="controls">\r\n			<div class="options">\r\n				<div class="menu">\r\n					<div class="items">\r\n						<div class="text icon-button">{{menu.text}}</div>\r\n						<div class="effects icon-button">{{menu.effects}}</div>\r\n					</div>\r\n					<div class="divide">\r\n						<div class="left"></div>\r\n						<div class="txt">{{menu.divide}}</div>\r\n						<div class="right"></div>\r\n					</div>\r\n				</div>\r\n				<div class="text panel">\r\n					<div class="font">\r\n						<div class="text">{{text.font}}</div>\r\n						<div class="setting">\r\n							<div class="left"></div>\r\n							<div class="items">\r\n								{{#each text.fonts}}\r\n									<div data-id="{{font}}">{{txt}}</div>\r\n								{{/each}}\r\n							</div>\r\n							<div class="right"></div>\r\n						</div>\r\n					</div>\r\n					<div class="size">\r\n						<div class="text">{{text.size}}</div>\r\n						<div class="setting">\r\n							<div class="left">{{text.marker}}</div>\r\n							<div class="slider"><div class="track"><div class="mark"></div></div></div>\r\n							<div class="right">{{text.marker}}</div>\r\n						</div>\r\n					</div>\r\n					<div class="colour">\r\n						<div class="text">{{text.colour}}</div>\r\n						<div class="items">\r\n							{{#each text.colours}}\r\n								<div data-id="{{hex}}" data-name="{{name}}"><div class="icon"></div></div>\r\n							{{/each}}\r\n						</div>\r\n					</div>\r\n					<div class="add border-button">{{text.add}}</div>\r\n					<div class="next border-button">{{text.next}}</div>\r\n				</div>\r\n				<div class="effects panel">\r\n					<div class="filters">\r\n						<div class="text">{{effects.filter}}</div>\r\n						<div class="items filters">\r\n							{{#each effects.filters}}\r\n								<div data-id="{{type}}" data-name="{{name}}"><div class="icon"></div><div class="image filter_{{@index}}"></div></div>\r\n							{{/each}}\r\n						</div>\r\n						<div class="info filter"></div>\r\n						<div class="text overlay">{{effects.overlay}}</div>\r\n						<div class="items overlays">\r\n							{{#each effects.overlays}}\r\n								<div data-id="{{type}}" data-name="{{name}}"><div class="icon"></div><div class="text">{{@index}}</div><div class="image shine-{{@index}}"></div></div>\r\n							{{/each}}\r\n						</div>\r\n						<div class="info overlay"></div>\r\n					</div>\r\n					<div class="stickers">\r\n						<div class="text">{{effects.sticker}}</div>\r\n						<div class="items">\r\n							<div class="page">\r\n							{{#each stickers}}\r\n								{{#isModNum @index 6}}</div><div class="page">{{/isModNum}}\r\n								<div class="item" data-url="{{this}}"></div>	\r\n							{{/each}}\r\n							</div>\r\n							<div class="pagination">\r\n								{{#each stickers}}\r\n									{{#isModNum @index 6}}<div><div class="circle"></div></div>{{/isModNum}}\r\n								{{/each}}\r\n							</div>\r\n						</div>\r\n					</div>\r\n					<div class="gallery">\r\n						<div class="checkbox"><div class="icon"></div></div>\r\n						<div class="text">{{effects.gallery}}</div>\r\n					</div>\r\n					<div class="next border-button">{{effects.next}}</div>\r\n				</div>\r\n			</div>\r\n			<div class="share">\r\n				<div class="title">{{share.title}}</div>\r\n				<div class="divide">\r\n					<div class="left"></div>\r\n					<div class="txt">{{share.networks}}</div>\r\n					<div class="right"></div>\r\n				</div>\r\n				<div class="networks">\r\n					{{#each share.links}}\r\n					<a class="{{this}}" target="_blank"></a>\r\n					{{/each}}\r\n				</div>\r\n				<div class="info">{{share.info}}</div>\r\n				<div class="back border-button">{{back}}</div>\r\n				<div class="gallery border-button">{{share.gallery}}</div>\r\n			</div>\r\n		</div>\r\n		<div id="delete"></div>\r\n		<canvas id="builder"></canvas>\r\n		<div class="retake icon-button">{{retake}}</div>\r\n	</div>\r\n</div>',b)},init:function(a,b){this.keyDelete=this.keyDelete.bind(this),k(document,"keyup",this.keyDelete),this.builder=new f(this.find("#builder")[0]),this.close=new m(this.find(".close")),this.close.append(g.get("close")),this.close.onClick.add(this.onRetake.bind(this)),this.retake=new l(this.find(".retake")),this.retake.append(g.get("camera")),this.retake.onClick.add(this.onRetake.bind(this)),this.controlSize=this.find(".controls")[0].offsetWidth,this.builder.on("object:selected",this.checkType.bind(this)),this.builder.on("mouse:move",this.matchTilePosition.bind(this)),this.builder.on("mouse:down",this.hideDelete.bind(this)),this.del=this.find("#delete"),this.del.append(g.get("close")),this.del.on("click",this.deleteClick.bind(this)),this.hideDelete(),this.options=new h(this.find(".controls > .options")[0],this.controlSize),this.options.onFilter.add(this.builder.setFilter.bind(this.builder)),this.options.onOverlay.add(this.builder.setOverlay.bind(this.builder)),this.options.onSticker.add(this.builder.addSticker.bind(this.builder)),this.options.onText.add(this.builder.addText.bind(this.builder)),this.options.onUpdate.add(this.builder.renderAll.bind(this.builder)),this.options.onComplete.add(this.saveImage.bind(this)),this.share=new i(this.find(".controls > .share")[0]),this.share.onReturn.add(this.restart.bind(this)),this.share.onComplete.add(this.changeSection.bind(this,"gallery")),j.set(this.share,{x:this.controlSize}),c.parent(this,a,b)},restart:function(){this.del.css({display:"block",opacity:0,visibility:"hidden"}),this.gotoOptions(),this.builder.enableAll()},onRetake:function(){this.changeSection("experience/"+e.capture.lat+","+e.capture.lng)},checkType:function(a){"text"==a.target.tileType&&this.options.setActiveText(a.target),this.matchTilePosition(a)},matchTilePosition:function(){var a=this.find(".canvas-container")[0].getBoundingClientRect(),b=this.builder.getActiveObject();b&&(this.del.css({top:Math.round(a.top+b.top-35),left:Math.round(a.left+b.left+b.width*b.scaleX+10)}),j.to(this.del,.5,{autoAlpha:1}))},hideDelete:function(){this.builder.getActiveObject()||j.to(this.del,.5,{autoAlpha:0})},deleteClick:function(){this.builder.removeActiveTile(),this.hideDelete()},keyDelete:function(a){46!=a.which||this.builder.getActiveObject().isEditing||(this.builder.removeActiveTile(),this.hideDelete())},saveImage:function(a){this.del.css({display:"none"}),this.builder.save(a,function(a){this.share.updateShareID(a),this.gotoShare()}.bind(this))},gotoShare:function(){j.to(this.options,.5,{x:-this.controlSize,ease:Expo.easeInOut}),j.to(this.share,.5,{x:0,ease:Expo.easeInOut})},gotoOptions:function(){j.to(this.options,.5,{x:0,ease:Expo.easeInOut}),j.to(this.share,.5,{x:this.controlSize,ease:Expo.easeInOut})},aniIn:function(a,b){c.parent(this,a,b),this.options.animateIn(.4)},aniOut:function(a,b){c.parent(this,a,b)},resize:function(a,b){c.parent(this,a,b),this.builder.resize(500,500)},destroy:function(){this.options.destroy(),this.share.destroy(),this.builder.destroy(),c.parent(this)}})},{"../assets/Icons":137,"../model":215,"./BaseSection":138,"./common/CloseButton":147,"./common/IconButton":150,"./snapshot/Builder":172,"./snapshot/OptionsPanel":176,"./snapshot/SharePanel":178,"./snapshot/TextTile":182,"dom-event":27,gsap:41,"js-oop":61}],142:[function(a,b){var c=a("js-oop"),d=a("./BaseSection"),e=a("../model"),f=a("../assets/Icons"),g=a("./snapshot/Builder"),h=a("./common/ButtonBase"),i=a("./snapshot/OptionsPanelMobile"),j=a("./snapshot/SharePanelMobile"),k=a("./common/NavBar"),l=a("gsap"),m=a("../settings"),n=a("dom-event");b.exports=new c({Extends:d,initialize:function(){var b=a("../model").snapshot;b.share=a("../model").sharing,c.parent(this,'<div id="snapshot">\r\n	<div class="close"></div>\r\n	<div class="font-colour"><span class="filter"></span><span class="overlay"></span></div>\r\n	<div class="start options">\r\n		<div class="buttons">\r\n			<div class="text">{{menu.text}}</div>\r\n			<div class="effects">{{menu.effects}}</div>\r\n		</div>\r\n		<div class="buttons">\r\n			<div class="retake">{{retake}}</div>\r\n			<div class="share">{{share.mobile}}</div>\r\n		</div>\r\n	</div>\r\n	<div class="customize options">\r\n		<div class="full">\r\n			<div class="text font">\r\n				<div class="text">{{text.font}}</div>\r\n				<div class="setting">\r\n					<div class="left"></div>\r\n					<div class="items">\r\n						{{#each text.fonts}}\r\n							<div data-id="{{font}}">{{txt}}</div>\r\n						{{/each}}\r\n					</div>\r\n					<div class="right"></div>\r\n				</div>\r\n			</div>\r\n			<div class="text colour">\r\n				<div class="items">\r\n					{{#each text.colours}}\r\n						<div data-id="{{hex}}" data-name="{{name}}"><div class="icon"></div></div>\r\n					{{/each}}\r\n				</div>\r\n			</div>\r\n			<div class="effect filter">\r\n				<div class="items">\r\n				{{#each effects.filters}}\r\n					<div data-id="{{type}}" data-name="{{name}}"><div class="icon"></div><div class="image filter_{{@index}}"></div></div>\r\n				{{/each}}\r\n				</div>\r\n			</div>\r\n			<div class="effect overlay">\r\n				<div class="items">\r\n				{{#each effects.overlays}}\r\n					<div data-id="{{type}}" data-name="{{name}}"><div class="icon"></div><div class="text">{{@index}}</div><div class="image shine-{{@index}}"></div></div>\r\n				{{/each}}\r\n				</div>\r\n			</div>\r\n			<div class="effect sticker">\r\n				<div class="text">{{effects.sticker}}</div>\r\n				<div class="items needsclick">\r\n					<div class="wrapper needsclick">\r\n					{{#each stickers}}\r\n						<div class="needsclick" data-url="{{this}}"></div>	\r\n					{{/each}}\r\n					</div>\r\n				</div>\r\n			</div>\r\n			<div class="submit gallery">\r\n				<div class="checkbox"><div class="icon"></div></div>\r\n				<div class="text">{{effects.gallery}}</div>\r\n			</div>\r\n			{{!-- <div class="submit legal">\r\n				<div class="checkbox"><div class="icon"></div></div>\r\n				<div class="text">{{legal}}</div>\r\n			</div> --}}\r\n		</div>\r\n		<div class="buttons">\r\n			<div class="prev"></div>\r\n			<div class="next"></div>\r\n		</div>\r\n	</div>\r\n	<div class="share options">\r\n		<div class="buttons">\r\n			<div class="back">{{back}}</div>\r\n			<div class="gallery">{{share.gallery}}</div>\r\n		</div>\r\n		<div class="links">\r\n			<div>{{share.mobileTitle}}</div>\r\n			{{#each share.mobileLinks}}\r\n			<a class="{{this}}" target="_blank"></a>\r\n			{{/each}}\r\n			{{#each share.links}}\r\n			<a class="{{this}}" target="_blank"></a>\r\n			{{/each}}\r\n		</div>\r\n	</div>\r\n	<div id="delete"></div>\r\n	<canvas id="builder"></canvas>\r\n</div>',b)},init:function(a,b){this.builder=new g(this.find("#builder")[0],this.onTextSelected.bind(this)),this.builderCanvas=this.find(".canvas-container"),this.builder.on("object:selected",this.checkType.bind(this)),this.builder.on("mouse:move",this.matchTilePosition.bind(this)),this.builder.on("mouse:down",this.hideDelete.bind(this)),m.isIOS&&(this.checkKeyboardSize=this.checkKeyboardSize.bind(this),this.builder.on("text:editing:entered",this.onTextSelected.bind(this))),this.del=new h(this.find("#delete")),this.del.append(f.get("close")),this.del.onClick.add(this.deleteClick.bind(this)),this.hideDelete(),this.close=new h(this.find(".close")[0]),this.close.onClick.add(this.changeSection.bind(this,"experience")),this.start=this.find(".start"),this.text=new h(this.start.find(".text")[0]),this.text.onClick.add(this.addText.bind(this)),this.effects=new h(this.start.find(".effects")[0]),this.effects.onClick.add(this.gotoEffects.bind(this)),this.retake=new h(this.start.find(".retake")[0]),this.retake.onClick.add(this.onRetake.bind(this)),this.share=new h(this.start.find(".share")[0]),this.share.onClick.add(this.gotoSubmit.bind(this)),f.addTo("close",this.close),f.addTo("text",this.text),f.addTo("effects",this.effects),f.addTo("camera",this.retake),f.addTo("share",this.share),this.nameField=this.find(".font-colour"),this.options=new i(this.find(".customize")[0],this.nameField),this.options.onFilter.add(this.builder.setFilter.bind(this.builder)),this.options.onOverlay.add(this.builder.setOverlay.bind(this.builder)),this.options.onSticker.add(this.builder.addSticker.bind(this.builder)),this.options.onText.add(this.builder.addText.bind(this.builder)),this.options.onUpdate.add(this.builder.renderAll.bind(this.builder)),this.options.onReturn.add(this.gotoStart.bind(this)),this.options.onComplete.add(this.gotoShare.bind(this)),this.share=new j(this.find(".share.options")[0]),this.share.onReturn.add(this.restart.bind(this)),c.parent(this,a,b)},restart:function(){this.del.css({display:"block",opacity:0,visibility:"hidden"}),this.builder.enableAll(),this.gotoStart()},onRetake:function(){this.changeSection("experience/"+e.capture.lat+","+e.capture.lng)},checkType:function(a){"text"==a.target.tileType&&(this.options.setActiveText(a.target,this.isNewText),this.gotoText(),this.isNewText=!1),this.matchTilePosition(a),this.lastTile=a.target},matchTilePosition:function(){var a=this.builderCanvas[0].getBoundingClientRect(),b=this.builder.getActiveObject();b&&(l.set(this.del,{clearProps:"transform"}),this.del.css({top:Math.round(a.top+b.top-35),left:Math.round(a.left+b.left+b.width*b.scaleX+10)}),l.to(this.del,.5,{autoAlpha:1}))},hideDelete:function(){this.builder.getActiveObject()||l.to(this.del,.5,{autoAlpha:0})},deleteClick:function(){this.builder.removeActiveTile(),this.hideDelete()},addText:function(){this.isNewText=!0,this.builder.addText(),this.gotoText()},gotoStart:function(){l.to([this.share,this.options],.5,{autoAlpha:0}),l.to(this.start,.5,{autoAlpha:1})},gotoText:function(){this.options.gotoText(),l.to([this.share,this.start],.5,{autoAlpha:0}),l.to(this.options,.5,{autoAlpha:1})},gotoEffects:function(){this.options.gotoEffects(),l.to([this.share,this.start],.5,{autoAlpha:0}),l.to(this.options,.5,{autoAlpha:1})},gotoSubmit:function(){this.options.gotoSubmit(),l.to([this.share,this.start],.5,{autoAlpha:0}),l.to(this.options,.5,{autoAlpha:1})},gotoShare:function(a){this.del.css({display:"none"}),this.builder.save(a,function(a){this.share.updateShareID(a),l.to([this.options,this.start],.5,{autoAlpha:0}),l.to(this.share,.5,{autoAlpha:1})}.bind(this))},aniIn:function(a,b){k.css({display:"none"}),c.parent(this,a,b)},aniOut:function(a,b){k.css({display:"block"}),c.parent(this,a,b)},onTextSelected:function(){l.set(this,{y:175}),n(this.lastTile.hiddenTextarea,"blur",this.checkKeyboardSize)},checkKeyboardSize:function(){l.set(this,{clearProps:"transform"})},resize:function(a,b){var d=this.width==a&&b<this.height-100?!0:!1;if(d)this.lastTile.top>50&&l.set([this.builder.wrapperEl,this.del],{y:-(this.lastTile.top-50),zIndex:2});else{l.set([this.builder.wrapperEl,this.del],{clearProps:"transform,zIndex"}),this.builder.resize(a,a);var e=Math.min(a,b-this.builderCanvas[0].offsetTop-this.share[0].offsetHeight);this.nameField.css(a>e?{top:10+e}:{top:""}),this.options.resize(a,b),c.parent(this,a,b)}},destroy:function(){this.builder.destroy(),c.parent(this)}})},{"../assets/Icons":137,"../model":215,"../settings":217,"./BaseSection":138,"./common/ButtonBase":146,"./common/NavBar":151,"./snapshot/Builder":172,"./snapshot/OptionsPanelMobile":177,"./snapshot/SharePanelMobile":180,"dom-event":27,gsap:41,"js-oop":61}],143:[function(a,b){var c,d,e,f,g,h=a("gsap"),i=a("js-oop"),j=(a("./BaseSection"),a("handlebars")),k=a("./plugins/DOMPlugin"),l=(a("signals"),a("extend-object"),a("spooky-element")),m=a("../model"),n=a("dom-event"),o=(n.off,a("./common/AssetLibAudio").getInstance()),p=(a("dom-select"),a("../assets/Icons"),a("./common/NavBar")),q=(a("raf"),a("./streetview/dat"),a("./streetview/streetview/SakuraStreetView")),r=a("./streetview/SVIntroPreloader"),s=a("../settings"),t=a("./common/loader"),u=window.performance||Date,v=(u.now(),50);a("google-maps-api")(m.googleapi,["places"])().then(function(a){g=a,f=new g.StreetViewService,SVP=g.StreetViewPanorama});var w=[[49.252446,-123.117516],[35.643203,139.699217],[35.642967,139.699329],[35.642991,139.699376]],x=w[3],y=!1,z=new i({Extends:l,initialize:function(){window.__sv=this,i.parent(this,j.compile('<div id="streetview">\r\n	<div class="map"></div>\r\n    <div class=\'gl-view-container\'>\r\n        <div class=\'xyzPlanes\'></div>\r\n        <div class=\'captured-preview\'></div>\r\n        <canvas class=\'gl-view\'></canvas>\r\n    </div>\r\n    <div class="logo"><img src="https://maps.gstatic.com/mapfiles/embed/images/logo2.png" /></div>\r\n    <div class="copyright"></div>\r\n</div>\r\n')(a("../model").streetview)),this.curLoc={lng:0,lat:0,landmark:"",location:""},this.logo=this.find(".logo"),this.copyright=this.find(".copyright"),this.rotateCamera=this.rotateCamera.bind(this),this.setPov=this.setPov.bind(this),this.isLocationUpdate=!1,this.loop=this.loop.bind(this),this.clearTip=this.clearTip.bind(this),this.glView=this.find(".gl-view"),this.glView.css({visibility:"hidden"})},init:function(b,f){k(this.view),y||this.ssv||(c=a("./streetview/inactivity/InactivityTimer"),d=a("./streetview/inactivity/InteractionTip"),e=a("./streetview/inactivity/IdleLandmarkSelector"),this.panoLinkHnd=this.panoLinkHnd.bind(this),this.startAmbientSound=this.startAmbientSound.bind(this),this.inactivityTimer=new c({onShowTip:15e3,onShowLandmarks:9e4}),this.inactivityTimer.onShowTip.addOnce(this.showTipHnd.bind(this)),s.isMobile||this.inactivityTimer.onShowLandmarks.add(this.showLandmarksHnd.bind(this)),this.ssv=new q(window.innerWidth,window.innerHeight,this.glView[0],1),this.ssv.onLinkSelect.add(this.panoLinkHnd),s.isMobile||(this.ambientSound=o.get("ambient-sound"))),this.isLocationUpdate||this.glView.css({visibility:"hidden"}),p.onSnapshot.addOnce(this.snapshotBtnHnd.bind(this)),f()},startAmbientSound:function(){this.ambientSound.pos(0),this.ambientSound.volume(0),this.ambientSound.fadeIn(.75,3)},aniIn:function(a,b){if(this.introPre&&this.introPre.view&&this.introPre.remove(),this.isLocationUpdate||(this.introPre=new r,this.append(this.introPre),this.ambientSound&&(this.startAmbientSound(),this.ambientSound.on("end",this.startAmbientSound))),this.inactivityTimer.stop(),this.ssv.disableInteraction(),this.ssv.blur(),t.start(),a.params.latlon){var c=a.params.latlon.split(",");this.svCheckCounter=0,this.requestLat=Number(c[0]),this.requestLng=Number(c[1]),this.pendingLocation={lat:Number(c[0]),lng:Number(c[1])},this.cancelForNewRequest=!0,setTimeout(function(){this.cancelForNewRequest=!1,this.svAvailabilityCheck(this.pendingLocation,v)}.bind(this),.125)}else this.svLoad(x[0],x[1],{});b()},aniOut:function(a,b){-1==a.route.indexOf("experience")&&(this.ambientSound&&(this.ambientSound.off("end",this.startAmbientSound),this.ambientSound.fadeOut(0,3)),this.isLocationUpdate=!1,this.destroy()),b()},resize:function(a,b){this.glView.css({width:a,height:b}),this.ssv.resize(a,b)},changeSection:function(b){a("../framework").go(b)},destroy:function(){this.inactivityTimer.stop(),this.intervalID&&(clearInterval(this.intervalID),this.intervalID=null),this.introPre&&this.introPre.view&&this.introPre.remove(),this.interactionTip&&this.interactionTip.view&&this.interactionTip.remove(),this.modalLandmarkSelector&&this.modalLandmarkSelector.view&&this.modalLandmarkSelector.remove(),k.remove(this.view)},svAvailabilityCheck:function(a,b){this.pendingRadius=b,f.getPanoramaByLocation(a,b,this.svAvailabilityCheckHnd.bind(this))},panoLinkHnd:function(a){this.inactivityTimer.stop(),this.ssv.disableInteraction(),this.ssv.blur(),t.start(),f.getPanoramaById(a,this.svAvailabilityCheckHnd.bind(this))},svAvailabilityCheckHnd:function(a,b){if(!this.cancelForNewRequest)if(this.svCheckCounter++,b==g.StreetViewStatus.OK&&this.validateSV(a)){var c=a.location.latLng;this.copyright.html(a.copyright),this.svLoad(c.lat(),c.lng(),a)}else{var d,e;this.svCheckCounter<5?(d={lat:this.pendingLocation.lat+.001*Math.random(),lng:this.pendingLocation.lng+.001*Math.random()},e=1):(d=this.pendingLocation,e=2),this.svAvailabilityCheck(d,this.pendingRadius*e)}},validateSV:function(a){var b=!1,c=!!(a.copyright.indexOf("Google")+1),d=!c,e=!(!s.location.pitch&&!s.location.heading),f=d&&e,g=!(!a.location||!a.location.latLng);return b=(f||c)&&g},svLoad:function(a,b,c){this.ssv.curPanoData=c,this.ssv.loadStarted.addOnce(function(){this.ssv.panoLoader.addEventListener("progress",this.svProgressHnd.bind(this)),this.ssv.panoLoader.addEventListener("load",this.svLoadComplete.bind(this))}.bind(this)),this.ssv.panoID=null,this.curLoc.lat=a,this.curLoc.lng=b;var d=this.findLandmarkData(parseFloat(this.requestLat||a),parseFloat(this.requestLng||b));d&&this.ssv.setCameraPosition(d.heading-180,d.pitch-90),this.ssv.loadFromID(c.location.pano,void 0!==d)},setPov:function(){var a=this.map.getPov();a.pitch=this.cameraPov.pitch,a.heading=this.cameraPov.heading,this.map.setPov(a)},rotateCamera:function(){this.cameraPov.pitch+=20,this.cameraPov.pitch>90?(this.mapContainer.html(""),this.mapContainer.attr("style",""),this.preloadDone()):(this.cameraPov.heading=0,this.setPov(),h.to(this.cameraPov,.5,{heading:360,ease:Linear.easeNone,onUpdate:this.setPov,onComplete:this.rotateCamera}))},findLandmarkData:function(a,b){a=a.toFixed(6),b=b.toFixed(6);for(var c=0,d=m.landmarks.length;d>c;c++)if(console.log(m.landmarks[c].lat.toFixed(6),a,m.landmarks[c].lng.toFixed(6),b),m.landmarks[c].lat.toFixed(6)==a&&m.landmarks[c].lng.toFixed(6)==b)return m.landmarks[c];return void 0},svProgressHnd:function(a){p.getInstance().setProgress(a.message)},svLoadComplete:function(){h.to(this.logo,.5,{autoAlpha:1,ease:Linear.easeNone}),h.to(this.copyright,.5,{autoAlpha:.75,ease:Linear.easeNone}),this.glView.css({visibility:"visible"}),this.ssv.randomizeTrees(),this.ssv.enableInteraction(),this.loop(),this.ssv.unblur(),t.stop(),this.introPre&&this.introPre.view?(this.ssv.resetCamera(),k.removeBorder(),this.introPre.aniOut(this.introOutComplete.bind(this))):this.introOutComplete()},introOutComplete:function(){this.isLocationUpdate||(this.ssv.aniCamera(),p.getInstance().show(2.5,!0)),this.inactivityTimer.start(),this.isLocationUpdate=!0},showTipHnd:function(){this.interactionTip||(this.inactivityTimer.stop(),this.interactionTip=new d,this.append(this.interactionTip),this.interactionTip.aniIn(),this.interactionTip.onClose.addOnce(this.clearTip.bind(this)))},clearTip:function(){this.interactionTip.aniOut(),this.interactionTip=null,this.inactivityTimer.start()},showLandmarksHnd:function(){this.interactionTip||this.modalLandmarkSelector||(this.inactivityTimer.stop(),this.modalLandmarkSelector=new e({landmarks:m.getRandomLandmarks()}),this.modalLandmarkSelector.onClose.addOnce(this.closeLandmarkSelector.bind(this)),this.modalLandmarkSelector.onSelect.addOnce(this.landmarkSelect.bind(this)),this.append(this.modalLandmarkSelector),this.modalLandmarkSelector.aniIn())},closeLandmarkSelector:function(){this.modalLandmarkSelector.aniOut(),this.modalLandmarkSelector=null,this.inactivityTimer.start()},landmarkSelect:function(a){this.closeLandmarkSelector(),s.location=a,this.changeToLatLon(a.lat,a.lng)},changeToLatLon:function(a,b){var c="/experience/"+[a,b].join(",");this.changeSection(c)},loop:function(){this.intervalID||(this.intervalID=setInterval(function(){this.ssv.update(),this.ssv.render()}.bind(this),40))},snapshotBtnHnd:function(){this.intervalID&&(clearInterval(this.intervalID),this.intervalID=null),m.capture={lat:this.curLoc.lat,lng:this.curLoc.lng,location:s.location.location,landmark:s.location.name,image:this.ssv.capture()},this.changeSection("snapshot")}}),A=new z;b.exports={GL_DISABLED:y,getInstance:function(){},init:A.init.bind(A),aniIn:A.aniIn.bind(A),aniOut:A.aniOut.bind(A),resize:A.resize.bind(A)}},{"../assets/Icons":137,"../framework":167,"../model":215,"../settings":217,"./BaseSection":138,"./common/AssetLibAudio":145,"./common/NavBar":151,"./common/loader":157,"./plugins/DOMPlugin":170,"./streetview/SVIntroPreloader":184,"./streetview/dat":186,"./streetview/inactivity/IdleLandmarkSelector":188,"./streetview/inactivity/InactivityTimer":189,"./streetview/inactivity/InteractionTip":190,"./streetview/streetview/SakuraStreetView":211,"dom-event":27,"dom-select":29,"extend-object":32,"google-maps-api":36,gsap:41,handlebars:57,"js-oop":61,raf:90,signals:93,"spooky-element":95}],144:[function(a,b,c){arguments[4][143][0].apply(c,arguments)},{"../assets/Icons":137,"../framework":167,"../model":215,"../settings":217,"./BaseSection":138,"./common/AssetLibAudio":145,"./common/NavBar":151,"./common/loader":157,"./plugins/DOMPlugin":170,"./streetview/SVIntroPreloader":184,"./streetview/dat":186,"./streetview/inactivity/IdleLandmarkSelector":188,"./streetview/inactivity/InactivityTimer":189,"./streetview/inactivity/InteractionTip":190,"./streetview/streetview/SakuraStreetView":211,"dom-event":27,"dom-select":29,dup:143,"extend-object":32,"google-maps-api":36,gsap:41,handlebars:57,"js-oop":61,raf:90,signals:93,"spooky-element":95}],145:[function(a,b){var c,d=a("howler").Howl,e=(a("howler").Howler,a("dom-event")),f=(e.off,a("lodash")),g=a("signals"),h=a("shuffle-array"),i={},j=null,k=function(){this.onComplete=new g,this.onProgress=new g,this.qIndex=0,this.kotoKeys=[],this.activeClips=[],this.loadHnd=this.loadHnd.bind(this),window.__assetAudioLib=this,this.Howl=d};k.prototype={init:function(a){c=f.map(a,function(a,b){return b.toLowerCase().indexOf("koto")+1&&this.kotoKeys.push(b),f.extend({},a,{key:b})},this),this["continue"]()},"continue":function(){if(!(this.qIndex>=c.length)){var a=this.qIndex;i[c[a].key]=new d({autoplay:!1,buffer:!1,format:null,loop:!1,sprite:{},volume:.05,urls:c[a].paths,onload:this.loadHnd})}},loadHnd:function(){this.qIndex++,this.onProgress.dispatch(this.qIndex/c.length),this.qIndex<c.length?this["continue"]():this.onComplete.dispatch()},soundComplete:function(a){var b=this.activeClips.indexOf(a);this.activeClips=this.activeClips.splice(b,1)},getRandomKoto:function(){if(this.activeClips.length<32){var a=h(this.kotoKeys.slice())[0],b=this.get(a);return b.on("end",this.soundComplete.bind(this,b)),this.activeClips.push(b),b}return null},set:function(a,b){i[a]=b},get:function(a){var b=i[a];return b||null}},b.exports={getInstance:function(){return j=j||new k}}},{"dom-event":27,howler:58,lodash:63,"shuffle-array":92,signals:93}],146:[function(a,b){var c=a("js-oop"),d=a("spooky-element"),e=a("signals").Signal,f=a("gsap"),g=a("../../settings");b.exports=new c({Extends:d,initialize:function(a){c.parent(this,a instanceof Array?a[0]:a),this.onTouchStart=new e,this.onTouchEnd=new e,this.onOver=new e,this.onOut=new e,this.onClick=new e,g.isMobile?(this.on("touchstart",this._onTouchStart=this._onTouchStart.bind(this)),this.on("touchend",this._onTouchEnd=this._onTouchEnd.bind(this))):(this.on("mouseenter",this._onOver=this._onOver.bind(this)),this.on("mouseleave",this._onOut=this._onOut.bind(this))),this.on("click",this._onClick=this._onClick.bind(this))},_onTouchStart:function(a){this.event=a,this.onTouchStart.dispatch(this),f.to(this,.4,{alpha:.5})},_onTouchEnd:function(a){this.event=a,this.onTouchEnd.dispatch(this),f.to(this,.4,{alpha:1})},_onOver:function(a){this.event=a,this.onOver.dispatch(this)},_onOut:function(a){this.event=a,this.onOut.dispatch(this)},_onClick:function(a){this.event=a,this.onClick.dispatch(this)},destroy:function(){this.off("mouseover",this._onOver),this.off("mouseout",this._onOut),this.off("touchstart",this._onTouchStart),this.off("touchend",this._onTouchEnd),this.off("click",this._onClick),this.removeAddedSignals(),c.parent(this)}})},{"../../settings":217,gsap:41,"js-oop":61,signals:93,"spooky-element":95}],147:[function(a,b){var c=a("js-oop"),d=a("./ButtonBase"),e=a("gsap");b.exports=new c({Extends:d,initialize:function(a){c.parent(this,a)},_onOver:function(){e.to(this,.5,{rotation:90,ease:Expo.easeInOut})},_onOut:function(){e.to(this,.5,{rotation:0,ease:Expo.easeInOut})}})},{"./ButtonBase":146,gsap:41,"js-oop":61}],148:[function(a,b){var c=a("js-oop"),d=a("iscroll"),e=a("spooky-element"),f=a("gsap"),g=a("signals").Signal,h=a("dom-event"),i=a("../../assets/Icons"),j=a("../../settings"),k=a("touches"),l=a("./ButtonBase");b.exports=new c({initialize:function(a,b,c){this.target=a,this.data=b,this.options=c||{},this.options.height=this.options.height||310,this.options.width=this.options.width||"100%",this.options.direction=this.options.direction||"up",this.options.scrollOutside=this.options.scrollOutside||!1,this.options.outsidePadding=this.options.outsidePadding||16,this.options.zIndex=this.options.zIndex||10,this.options.inDelay=this.options.inDelay||0,this.options.outDelay=this.options.outDelay||0,this.onOpen=new g,this.onClose=new g,this.onSelect=new g,this.init()},init:function(){this.dom=new e('<div class="dropdown needsclick"></div>'),this.content=new e('<div class="list needsclick"></div>'),this.dom.append(this.content),this.dom.appendTo(this.target.parentNode),this.items=[];for(var a,b=0;b<this.data.length;b++)a=new l('<div class="needsclick"><span>'+this.data[b].name+"</span><br/><span>"+this.data[b].location+"</span></div>"),a.data=this.data[b],a.append(i.get("landmark")),j.isMobile?a.on("tap",this.selected.bind(this,a)):a.onClick.add(this.selected.bind(this,a)),a.onOver.add(this.itemRollover.bind(this)),a.onOut.add(this.itemRollout.bind(this)),this.content.append(a),this.items.push(a);this.scroll=new d(this.dom[0],{mouseWheel:!0,mouseWheelDuration:300,mouseWheelEase:d.utils.ease.quadratic,scrollbars:!0,fadeScrollbars:!1,interactiveScrollbars:!0,resizeScrollbars:!0,deceleration:3e-4,tap:!0,click:!0}),this.calculateTop(),this.dom.css({height:0,left:this.target.offsetLeft,width:this.options.width,"z-index":this.options.zIndex}),this.options.scrollOutside&&this.dom.css({width:isNaN(this.options.width)?"calc("+this.options.width+" + "+this.options.outsidePadding+"px)":this.options.width+this.options.outsidePadding,"padding-right":this.options.outsidePadding}),this.toggle=this.toggle.bind(this),this.checkHit=this.checkHit.bind(this),h(this.target,"click",this.toggle),this.events=k(window,{target:this.dom[0],filtered:!0}),this.events.on("end",this.checkHit)},calculateTop:function(){this.top="up"===this.options.direction?this.target.offsetTop:this.target.offsetTop+this.target.offsetHeight,this.topOpen="up"==this.options.direction?this.top-this.options.height:this.top,this.dom.css({top:this.top})
},itemRollover:function(a){f.to(a,.4,{backgroundColor:"#e5e5e5"})},itemRollout:function(a){a.hasClass("selected")||f.to(a,.4,{backgroundColor:"#ffffff"})},checkHit:function(a,b){this.opened&&!this.within(b,this.dom[0])&&this.animateOut()},within:function(a,b){var c=b.getBoundingClientRect(),d="up"==this.options.direction?0:-this.target.offsetHeight,e="down"==this.options.direction?c.height:c.height+this.target.offsetHeight;return a[0]>=0&&a[1]>=d&&a[0]<c.width&&a[1]<e},updatePosition:function(a){a&&(this.options.width=a),this.dom.css({left:this.target.offsetLeft,width:this.options.width})},select:function(a){this.items[a]&&this.selected(this.items[a])},selected:function(a){for(var b=0;b<this.items.length;b++)this.items[b].removeClass("selected");a.addClass("selected"),j.location=a.data,ga("send","event","landmark","click",a.data.name),this.onSelect.dispatch(a.data),this.animateOut()},toggle:function(){this.opened?this.animateOut():this.animateIn()},animateIn:function(a){if(!this.opened){a=a||0,a+=this.options.inDelay,this.onOpen.dispatch(),this.opened=!0,this.arrow=e(this.target).find(".down-arrow"),this.arrow&&this.arrow.view&&f.to(this.arrow.view,.5,{rotation:180,transformOrigin:"50% 55%",onUpdate:function(){console.log("applying rot")}}),f.to(this.dom,.5,{height:this.options.height,top:this.topOpen,delay:a,ease:Expo.easeInOut,onComplete:this.scroll.refresh.bind(this.scroll)});for(var b=0,c=this.items.length;c>b;b++)f.set(this.items[b],{autoAlpha:0,x:-20}),f.to(this.items[b],.5,{autoAlpha:1,delay:a+.3+.1*b}),f.to(this.items[b],.5,{x:0,clearProps:"transform",ease:Expo.easeOut,delay:a+.3+.1*b})}},animateOut:function(a){this.opened&&(a=a||0,a+=this.options.outDelay,this.onClose.dispatch(),this.opened=!1,this.arrow=e(this.target).find(".down-arrow"),this.arrow&&this.arrow.view&&f.to(this.arrow.view,.5,{rotation:0,transformOrigin:"50% 55%"}),f.to(this.dom,.5,{height:0,top:this.top,delay:a,ease:Expo.easeInOut}))},destroy:function(){h.off(this.target,"click",this.toggle),this.events.off("end",this.checkHit)}})},{"../../assets/Icons":137,"../../settings":217,"./ButtonBase":146,"dom-event":27,gsap:41,iscroll:60,"js-oop":61,signals:93,"spooky-element":95,touches:120}],149:[function(a,b){var c=a("js-oop"),d=a("howler").Howler,e=a("../../framework"),f=a("../../assets/Icons"),g=(a("dom-event"),a("element-class"),a("gsap")),h=a("./ButtonBase"),i=a("./SmallLogoButton"),j=a("../../settings"),k=(a("./NavBar"),a("./Rotate")),l=new c({initialize:function(){this.initialized=!1},init:function(a,b){if(!this.initialized){var c=document.createElement("div");c.appendChild(f.get("logo")),this.logo=j.isMobile?new h(c).addClass("smallLogo"):new i(c),this.logo.onClick.add(e.go.bind(e,"/")),this.logo.appendTo(e.container),this.rotate=new k,this.rotate.appendTo(e.container),this.muteBtn=new h("<button class='global mute'><span class='icon mute'></span></button>"),j.isMobile||this.muteBtn.appendTo(e.container),this.muteBtn.onClick.add(this.toggleMuteHnd.bind(this)),this.muteBtn.find(".icon.mute").append(f.get("unmuted")),this.initialized=!0}b()},checkRotation:function(a){this.rotate&&(a&&j.isPhone||!a&&j.isTablet?this.rotate.animateIn():this.rotate.animateOut())},aniIn:function(a,b){g.to(this.logo,.5,{autoAlpha:"/"!=a.route?1:0}),g.to(this.muteBtn,.5,{autoAlpha:a.route.indexOf("experience")+1?1:0}),b()},aniOut:function(a,b){b()},resize:function(){},toggleMuteHnd:function(){d._muted?d.unmute():d.mute(),this.muteBtn.find("svg").remove(),this.muteBtn.find(".icon.mute").append(f.get(d._muted?"muted":"unmuted"))}}),m=new l;b.exports={init:m.init.bind(m),aniIn:m.aniIn.bind(m),aniOut:m.aniOut.bind(m),resize:m.resize.bind(m),checkRotation:m.checkRotation.bind(m)}},{"../../assets/Icons":137,"../../framework":167,"../../settings":217,"./ButtonBase":146,"./NavBar":151,"./Rotate":154,"./SmallLogoButton":156,"dom-event":27,"element-class":31,gsap:41,howler:58,"js-oop":61}],150:[function(a,b){var c=a("js-oop"),d=a("./ButtonBase"),e=a("gsap");b.exports=new c({Extends:d,initialize:function(a){c.parent(this,a),this.originalColor=window.getComputedStyle(this[0]).color},_onOver:function(){this.svg||(this.svg=this.find("svg")),e.to(this.svg,.5,{opacity:.5}),e.to(this,.5,{color:"#ba9f34"})},_onOut:function(){e.to(this,.5,{color:this.originalColor}),e.to(this.svg,.5,{opacity:1})}})},{"./ButtonBase":146,gsap:41,"js-oop":61}],151:[function(a,b){var c,d,e=a("js-oop"),f=a("signals"),g=a("extend-object"),h=a("dom-select"),i=a("spooky-element"),j=a("../../settings"),k=a("../../model"),l=a("gsap"),m=a("../BaseSection"),n=a("./Dropdown"),o=a("../../assets/Icons"),p=a("google-maps-api")(k.googleapi,["places"]);p().then(function(a){d=a,c=new d.Geocoder});var q=a("../../util/maps/getcurlocation"),g=a("extend"),r=a("./ButtonBase"),s=a("../../util/share"),j=a("../../settings"),t=a("./NavBarButton"),u=new f,v=new e({Extends:m,initialize:function(){window.__navbar=this;var b=a("../../model").navbar;b.share=a("../../model").sharing,b.isMobile=j.isMobile,e.parent(this,"<div class='ui-bar'>\r\n    <div class='sv-progress-bar'><span class='progress'></span></div>\r\n    <div class='flex-wrapper'>\r\n    <div class='ui-bar-item icon logo'></div>\r\n    <div class='ui-bar-item combined'>\r\n        <div class='slider'><div class='search'><button class='icon currentloc'></button><button class='icon location left'></button><input type='text' class='location-tf' placeholder='{{search-placeholder}}' autocomplete=\"on\"/><button class='icon location right'></button></div><button class='landmark-dropdown'><div class='icon landmark'></div><span class='label'><span class='landmark'>{{default-landmark-label}}</span><span class='location'>{{default-location-label}}</span></span><div class='icon down-arrow'></div></div></button>\r\n    </div>\r\n    <button class='ui-bar-item snapshot'><span class='icon camera'></span>{{btn-snapshot}}</button>\r\n    <button class='ui-bar-item gallery'><span class='icon gallery'></span>{{btn-gallery}}</button>\r\n    <button class=\"ui-bar-item streetview\">\r\n        {{#unless isMobile}}\r\n        {{btn-streetview}}\r\n        {{/unless}}\r\n        {{#if isMobile}}\r\n        {{btn-streetview-mobile}}\r\n        {{/if}}\r\n    </button>\r\n    {{#unless isMobile}}\r\n    <div class='ui-bar-item share title'>{{label-share}}</div>\r\n    {{/unless}}\r\n    {{#if isMobile}}\r\n        {{#each share.mobileLinks}}\r\n        <a class='ui-bar-item share {{this}}' target=\"_blank\"></a>\r\n        {{/each}}\r\n    {{/if}}\r\n    {{#each share.links}}\r\n    <a class='ui-bar-item share {{this}}' target=\"_blank\"></a>\r\n    {{/each}}\r\n    </div>\r\n</div>\r\n",b),this.inited=!1,this.css({bottom:-this.getHeight(),visibility:"hidden"}),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.geocodeHnd=this.geocodeHnd.bind(this),this.sliderToggled=!1,this.progbar=this.find(".progress")},setProgress:function(a){l.to(this.progbar,.6,{width:a+"%",ease:Strong.easeOut}),100==Number(a)?l.to(this.progbar,.5,{marginLeft:"100%",force3D:!0,ease:Quad.easeOut}):l.to(this.progbar,0,{marginLeft:0,force3D:!0})},init:function(b,c){if(!this.inited){this.render(a("../../model").navbar),this.inited=!0,h("#container").appendChild(this.view),this.setupUI(),this.searchToggleHnd=this.searchToggleHnd.bind(this),this.landmarkToggleHnd=this.landmarkToggleHnd.bind(this),this.galleryBTN.on("click",this.changeSection.bind(this,"gallery")),this.snapshotBTN.on("click",this.triggerSnapshop.bind(this)),j.isPhone?this.searchToggle.on("click",this.searchToggleHnd):(this.searchToggle.on("click",this.locationBtnClickHnd.bind(this,!1)),this.itf.addClass=this.itf.addClass.bind(this.itf),this.itf.removeClass=this.itf.removeClass.bind(this.itf),this.searchToggle.on("mouseenter",function(){l.delayedCall(.3,this.itf.addClass,["over"])}.bind(this)),this.searchToggle.on("mouseleave",function(){l.killDelayedCallsTo(this.itf.addClass),l.delayedCall(.2,this.itf.removeClass,["over"])}.bind(this))),this.landmarkToggle.on("click",this.landmarkToggleHnd.bind(this,!0)),this.currentLocBTN.on("click",this.curLocHnd.bind(this)),this.ddButton=this.find(".landmark-dropdown")[0],this.dd=new n(this.ddButton,k.landmarks,{width:this.ddButton.offsetWidth,inDelay:j.isMobile?.4:0}),this.dd.onSelect.add(this.itemSelected.bind(this)),this.buttons=[];var d=this[0].querySelectorAll("button, a");for(e=0,f=d.length;f>e;e++)this.buttons[e]=j.isMobile?new r(d[e]):new t(d[e],60),!j.isMobile&&this.buttons[e].hasClass("location")?this.locationBG=this.buttons[e].bg:this.buttons[e].hasClass("streetview")?this.buttons[e].onClick.add(this.gotoExperience.bind(this)):this.buttons[e].hasClass("share")&&(cls=this.buttons[e].attr("class").replace("ui-bar-item share ",""),o.addTo("copy"!=cls||j.isMobile?cls:"save",j.isMobile?this.buttons[e]:this.buttons[e].find(".content")),"copy"==cls?this.copyLink=this.buttons[e]:"whatsapp"==cls?this.whatsappLink=this.buttons[e]:"line"==cls&&(this.lineLink=this.buttons[e]),this.buttons[e].onClick.add(this.gotoShare.bind(this,this.buttons[e])));this.items=this.findAll(".ui-bar-item");for(var e=0,f=this.items.length;f>e;e++)this.items[e].icons=this.items[e][0].querySelectorAll("svg")}c&&c()},searchToggleHnd:function(){this.slider.hasClass("slider--toggled")?this.sliderToggleHnd(!1):this.locationBtnClickHnd()},landmarkToggleHnd:function(){this.slider.hasClass("slider--toggled")||this.sliderToggleHnd(!0)},setGalleryData:function(a){this.galleryData=a},setShare:function(a){this.addClass("share"),this.shareID=a,this.copyLink.attr("href","download.php?id="+this.shareID),this.copyLink.attr("target",""),this.whatsappLink&&this.whatsappLink.attr("href","whatsapp://send?text="+encodeURIComponent(k.sharing.whatsapp.replace("[LINK]",s.getURL(this.shareID)))),this.lineLink&&this.lineLink.attr("href","line://msg/text/"+encodeURIComponent(k.sharing.line+s.getURL(this.shareID)))},gotoShare:function(a){var b=a.attr("class").replace("ui-bar-item share ","").replace(" over","");console.log(b);var c;switch(b){case"facebook":c=s.getFacebook(this.shareID);break;case"twitter":c=s.getTwitter(this.shareID,k.sharing.twitter);break;case"google":c=s.getGPlus(this.shareID)}ga("send","event","share","click",b),c&&s.open(c)},gotoExperience:function(){this.changeSection("/experience/"+this.galleryData.lat+","+this.galleryData.lng)},aniIn:function(a,b){var c=this.getRequestState(a);(c.isExperience||c.galleryItem)&&(c.galleryItem&&this.setShare(c.galleryItem),this.show()),b()},aniOut:function(a,b){this.removeClass("share");var c=this.getRequestState(a);c.isExperience||c.galleryItem||this.hide(),b()},show:function(a,b){this.active=!0,a=a||0,this.resize(this.width,this.height),b&&l.set(this,{bottom:-this.getHeight()});for(var c,d=0,e=this.items.length;e>d;d++){c=a+.5+.1*d,l.set(this.items[d],{autoAlpha:0}),l.to(this.items[d],.5,{autoAlpha:1,delay:c});for(var f=0,g=this.items[d].icons.length;g>f;f++)l.set(this.items[d].icons[f],{scaleX:0,scaleY:0}),l.to(this.items[d].icons[f],.5,{scaleX:1,scaleY:1,clearProps:"transform",ease:Expo.easeOut,delay:c+.3})}l.to(this,.5,{delay:a,bottom:0,visibility:"visible",ease:Expo.easeInOut})},hide:function(){this.active=!1,l.to(this,.5,{bottom:-this.getHeight(),ease:Expo.easeInOut,onComplete:function(){this.css("visibility","hidden")}.bind(this)})},getActive:function(){return this.active},resize:function(a,b){e.parent(this,a,b),this.dd&&this.dd.updatePosition(this.ddButton.offsetWidth),this.locationBG&&l.set(this.find(".icon.location .bg"),{width:50+this.itf.getWidth()})},destroy:function(){e.parent(this)},getRequestState:function(a){var b=a.route.indexOf("experience")>-1;return{isExperience:b,galleryItem:a.params.sid}},sliderToggleHnd:function(){this.sliderToggled=!this.sliderToggled,this.slider[this.sliderToggled?"addClass":"removeClass"]("slider--toggled"),l.to(this.slider,.4,{x:this.sliderToggled?.5*-this.slider.getWidth()+100:0,delay:this.sliderToggled?0:.4,ease:Expo.easeOut})},itemSelected:function(a){this.landmarkLBL.html(a.name),this.locationLBL.html(a.location),j.location=a,this.itf[0].value="",this.changeToLatLon(a.lat,a.lng)},searchSelectHnd:function(){var a=this.searchBox.getPlace();return a.geometry?void this.setLocation(a):void(a.name&&""!==a.name&&c.geocode({address:a.name},this.geocodeHnd))},geocodeHnd:function(a,b){b==d.GeocoderStatus.OK&&this.setLocation(a[0])},locationBtnClickHnd:function(){var a=this.find(".location-tf").view.value;""!==a&&c.geocode({address:a},this.geocodeHnd)},setLocation:function(a){var b=a.geometry.location,c=a.address_components,d=a.formatted_address;this.landmarkLBL.html(k.navbar["default-landmark-label"]),this.locationLBL.html(k.navbar["default-location-label"]),j.location={lat:b.lat(),lng:b.lng(),landmark:b.name?b.name:"",location:c?this.formatLocationName(c):d},ga("send","event","location","click",c?this.formatLocationName(c):d),this.changeToLatLon(b.lat(),b.lng())},formatLocationName:function(a){for(var b="",c="",d="",e=0;e<a.length;e++){var f=a[e];f.types.indexOf("locality")>-1&&(b=f.long_name),f.types.indexOf("administrative_area_level_1")>-1&&(c=f.short_name),f.types.indexOf("country")>-1&&(d=f.long_name)}return b+" "+c+", "+d},homeLocationAsSV:function(){this.itf[0].value=j.location.location,this.changeToLatLon(j.location.lat,j.location.lng)},curLocHnd:function(){j.user?(j.location=j.user,this.homeLocationAsSV()):q(function(a,b){a||(j.user=j.location=b,this.homeLocationAsSV())}.bind(this))},changeToLatLon:function(a,b){var c="/experience/"+[a,b].join(",");this.changeSection(c)},triggerSnapshop:function(){u.dispatch()},setupUI:function(){h(".icon.currentloc").appendChild(o.get("geolocate")),h(".icon.location.left").appendChild(o.get("location")),h(".icon.location.right").appendChild(o.get("location")),h(".icon.landmark").appendChild(o.get("landmark")),h(".icon.camera").appendChild(o.get("camera")),h(".icon.gallery").appendChild(o.get("gallery")),h(".icon.down-arrow").appendChild(o.get("down_arrow")),this.toggleArrow=this.find(".down-arrow"),this.currentLocBTN=this.find(".icon.currentloc"),this.slider=this.find(".slider"),this.searchToggle=this.find(".icon.location.left"),this.searchToggleRight=this.find(".icon.location.right"),this.landmarkToggle=this.find(".icon.landmark"),this.itf=this.find(".location-tf"),this.galleryBTN=this.find(".gallery"),this.snapshotBTN=this.find(".snapshot"),this.landmarkLBL=this.find(".landmark-dropdown .label .landmark"),this.locationLBL=this.find(".landmark-dropdown .label .location"),this.searchBox=new d.places.Autocomplete(this.itf.view),d.event.addListener(this.searchBox,"place_changed",this.searchSelectHnd.bind(this)),setTimeout(function(){this.searchBox.pacID=Date.now(),this.searchBox.view=new i(this.findPacContainer(this.searchBox)),this.searchBox.view.addClass(["navbar","registered",this.searchBox.pacID].join(" ")),this.searchBox.view.on("DOMNodeInserted",function(a){var b=a.target;if(b.className.indexOf("pac-item")+1){b.className+=" needsclick";for(var c=0;c<b.childNodes.length;c++)b.childNodes[c].className+=" needsclick"}}),this.dd.updatePosition(this.ddButton.offsetWidth)}.bind(this),750)},findPacContainer:function(a){var b=a.gm_accessors_.place;for(var c in b)if(b[c].gm_accessors_){b=b[c].gm_accessors_.input;break}for(var c in b)for(var d in b[c])if(b[c][d]instanceof HTMLElement&&"div"==b[c][d].tagName.toLowerCase())return b[c][d]}}),w=null,x={};x=g(x,{onSnapshot:u,getInstance:function(){return w=w||new v,x.init||(x=g(x,{init:w.init.bind(w),aniIn:w.aniIn.bind(w),aniOut:w.aniOut.bind(w),resize:w.resize.bind(w),show:w.show.bind(w),hide:w.hide.bind(w),getHeight:w.getHeight.bind(w),setGalleryData:w.setGalleryData.bind(w),setShare:w.setShare.bind(w),css:w.css.bind(w),getActive:w.getActive.bind(w)})),w}}),b.exports=x},{"../../assets/Icons":137,"../../model":215,"../../settings":217,"../../util/maps/getcurlocation":222,"../../util/share":225,"../BaseSection":138,"./ButtonBase":146,"./Dropdown":148,"./NavBarButton":152,"dom-select":29,extend:33,"extend-object":32,"google-maps-api":36,gsap:41,"js-oop":61,signals:93,"spooky-element":95}],152:[function(a,b){var c=a("js-oop"),d=a("./ButtonBase"),e=a("gsap"),f=a("spooky-element");b.exports=new c({Extends:d,initialize:function(a,b){c.parent(this,a),this.size=b,this.addClass=this.addClass.bind(this),this.removeClass=this.removeClass.bind(this),this.content=new f('<div class="content">'+this.html()+"</div>"),this.html(""),this.append(this.content),this.hasClass("share")?e.set(this.content,{opacity:.5}):(this.bg=new f('<div class="bg"></div>'),e.set(this.bg,{y:this.size,autoAlpha:0,height:this.size}),this.append(this.bg))},_onOver:function(a){c.parent(this,a),this.hasClass("share")?e.to(this.content,.5,{opacity:1}):(e.delayedCall(.3,this.addClass,["over"]),e.set(this.bg,{autoAlpha:1}),e.to(this.bg,.5,{y:0,ease:Expo.easeInOut}))},_onOut:function(a){c.parent(this,a),this.hasClass("share")?e.to(this.content,.5,{opacity:.5}):(e.killDelayedCallsTo(this.addClass),e.delayedCall(.2,this.removeClass,["over"]),e.to(this.bg,.5,{y:this.size,ease:Expo.easeInOut}))}})},{"./ButtonBase":146,gsap:41,"js-oop":61,"spooky-element":95}],153:[function(a,b){{var c=a("js-oop"),d=a("touch-scroll-physics"),e=a("touches"),f=a("raf-loop"),g=a("gsap"),h=a("spooky-element");a("dom-event"),a("../../settings")}b.exports=new c({initialize:function(a){this.container=a,this.width=this.container.offsetWidth,this.pages=this.container.querySelectorAll("div.page"),this.currentPage=0,this.pagination=[];for(var b=this.container.querySelectorAll("div.pagination > div"),c=b.length,e=0;c>e;e++)this.pagination[e]=new h(b[e]),this.pagination[e].on("click",this.gotoPage.bind(this,e));for(this.pagination[this.currentPage].addClass("selected"),this.total=this.pages.length,e=0;e<this.total;e++)this.pages[e].origX=e*this.width,g.set(this.pages[e],{x:this.pages[e].origX});this.scroller=d({totalCells:2,viewSize:this.width,cellSize:this.width,gutterSize:.5*this.width,dipToClosestCell:!0}),this.curPage=0,this.listen(),this.draw=this.draw.bind(this),this.raf=f(this.draw),this.raf.start()},gotoPage:function(a){g.to(this.scroller,.5,{value:a*this.width,ease:Expo.easeInOut})},changePage:function(a){this.curPage=a;for(var b=this.pagination.length,c=0;b>c;c++)this.pagination[c].removeClass("selected");this.pagination[a].addClass("selected")},draw:function(a){this.scroller.update(a);for(var b=0;b<this.total;b++)g.set(this.pages[b],{x:this.pages[b].origX-this.scroller.value});var c=Math.round(this.scroller.value/this.width);c!=this.curPage&&this.changePage(c)},listen:function(){this.events=e(window,{target:this.container,filtered:!0}),["start","move","end"].forEach(function(a){this.events.on(a,function(b,c){if("start"!==a||this.within(c,this.container)){var d=c[0];this.scroller[a](d)}}.bind(this))}.bind(this))},within:function(a,b){var c=b.getBoundingClientRect();return a[0]>=0&&a[1]>=0&&a[0]<c.width&&a[1]<c.height-25},destroy:function(){this.events.disable(),this.raf.stop()}})},{"../../settings":217,"dom-event":27,gsap:41,"js-oop":61,"raf-loop":87,"spooky-element":95,"touch-scroll-physics":117,touches:120}],154:[function(a,b){var c=a("js-oop"),d=a("spooky-element"),e=a("gsap"),f=a("handlebars"),g=a("../../settings");b.exports=new c({Extends:d,initialize:function(){var b=a("../../model").rotate;g.isTablet&&(b.title=b.landscape),c.parent(this,f.compile('<div id="rotate">\r\n	<div class="center">\r\n		<div class="rotate"></div>\r\n		<div class="title">{{title}}</div>\r\n		<div class="subtitle">{{subtitle}}</div>\r\n	</div>\r\n</div>')(b)),e.set(this,{autoAlpha:0})},animateIn:function(){e.set(this,{autoAlpha:1})},animateOut:function(){e.set(this,{autoAlpha:0})}})},{"../../model":215,"../../settings":217,gsap:41,handlebars:57,"js-oop":61,"spooky-element":95}],155:[function(a,b){var c=a("js-oop"),d=a("./ButtonBase"),e=a("spooky-element"),f=a("gsap");b.exports=new c({Extends:d,initialize:function(a){c.parent(this,a),this.size=this[0].offsetHeight;var b=this.html();this.html(""),this.txt1=new e('<div class="txt">'+b+"</div>"),this.append(this.txt1),this.txt2=new e('<div class="txt">'+b+"</div>"),f.set(this.txt2,{y:this.size,autoAlpha:0}),this.append(this.txt2),this.bg=new e('<div class="bg"></div>'),f.set(this.bg,{y:this.size}),this.append(this.bg)},_onOver:function(){f.to(this.bg,.5,{y:0,ease:Expo.easeInOut}),f.to(this.txt1,.5,{y:-this.size,autoAlpha:0,ease:Expo.easeInOut}),f.to(this.txt2,.5,{y:0,autoAlpha:1,ease:Expo.easeInOut})},_onOut:function(){f.to(this.bg,.5,{y:this.size,ease:Expo.easeInOut}),f.to(this.txt1,.5,{y:0,autoAlpha:1,ease:Expo.easeInOut}),f.to(this.txt2,.5,{y:this.size,autoAlpha:0,ease:Expo.easeInOut})}})},{"./ButtonBase":146,gsap:41,"js-oop":61,"spooky-element":95}],156:[function(a,b){var c=a("js-oop"),d=a("./NavBarButton"),e=a("./NavBar");b.exports=new c({Extends:d,initialize:function(a){c.parent(this,a,56),this.addClass("smallLogo")},_onOver:function(a){e.getActive()?c.parent(this,a):this.addClass("over")},_onOut:function(a){c.parent(this,a)}})},{"./NavBar":151,"./NavBarButton":152,"js-oop":61}],157:[function(a,b){var c=a("extend-object"),d={loader:null,clips:null,timeouts:[],getInstance:function(a){return c({},this,{loader:a,clips:a.getElementsByTagName("path")})},start:function(){this.clips||(this.loader=document.getElementById("preloader"),this.clips=this.loader.getElementsByTagName("path"),window._loader=this),this.reset();for(var a=0;a<this.clips.length;a++)this.timeouts.push(setTimeout(function(a){a.style.opacity=1,this.timeouts.push(setTimeout(function(a){a.style.opacity=.5}.bind(this,a),300))}.bind(this,this.clips[a]),300*a));this.timeouts.push(setTimeout(this.start.bind(this),300*this.clips.length)),this.loader.style.visibility="visible",this.loader.style.opacity=1},stop:function(){this.loader.style.opacity=0,setTimeout(this.reset.bind(this),500)},reset:function(){this.loader.style.visibility="hidden";for(var a=0;a<this.timeouts.length;a++)clearTimeout(this.timeouts[a]);for(this.timeouts=[],a=0;a<this.clips.length;a++)this.clips[a].setAttribute("style","")}};b.exports=window._loader?window._loader:d},{"extend-object":32}],158:[function(a,b){var c=a("js-oop"),d=a("spooky-element"),e=(a("../../util/get"),a("../../settings"),a("../index.js"),a("signals"),a("../../assets/Icons")),f=a("gsap"),g=a("../common/ButtonBase");b.exports=new c({Extends:g,initialize:function(a){return this.data=a,c.parent(this,a.html),this.appendTo(a.parentEl),this},init:function(){return this.icon=new d('<div class="btn-icon"></div>'),this.append(this.icon),this.icon.append(e.get("close")),this},aniIn:function(a,b){a&&"function"==typeof a&&(b=a),f.to(this.view,.5,{autoAlpha:1,onComplete:function(){b&&b()}.bind(this)})},aniOut:function(a,b){a&&"function"==typeof a&&(b=a),f.to(this.view,.5,{autoAlpha:0,onComplete:function(){}.bind(this)}),b&&b()},_onClick:function(a){a&&a.preventDefault(),this.onClick.dispatch(this)},_onOver:function(a){a&&a.preventDefault(),this.addClass("over"),f.to(this,.5,{rotation:90,ease:Expo.easeInOut}),c.parent(this,a)},_onOut:function(a){a&&a.preventDefault(),this.removeClass("over"),f.to(this,.5,{rotation:0,ease:Expo.easeInOut}),c.parent(this,a)},resize:function(){},destroy:function(){c.parent(this)}})},{"../../assets/Icons":137,"../../settings":217,"../../util/get":219,"../common/ButtonBase":146,"../index.js":167,gsap:41,"js-oop":61,signals:93,"spooky-element":95}],159:[function(a,b){var c=a("js-oop"),d=a("spooky-element"),e=(a("../../util/get"),a("../../settings")),f=(a("../index.js"),a("signals"),a("../../assets/Icons"),a("gsap")),g=a("lodash"),h=(a(e.isMobile?"./Page":"./Page"),a("bw-vm")),i=(a("../../model"),a("./PageBtn")),j=a("./CloseBtn"),k=a("./ModalTile"),l=a("../common/NavBar"),m=(a("dom-select"),a("./fetchData")),n=a("./loadAssets"),o=a("../common/loader"),p=a("../plugins/DOMPlugin");b.exports=new c({Extends:d,initialize:function(a){return this.data=a,c.parent(this,a.html),this.appendTo(this.data.parentEl),this.show=this.show.bind(this),this._click=this._click.bind(this),this.setup=this.setup.bind(this),e.isMobile?f.set(this.view,{x:this.width||window.innerWidth}):f.set(this.view,{autoAlpha:0}),this},init:function(a,b){this.data=a.req?a.req.params:a,a.photos.length?this.setup(a,b):(o.start(),m(a).then(n).then(function(a){this.setup(a,b),o.stop()}.bind(this))["catch"](function(a){console.log(a.stack)}))},setup:function(a,b){this.tiles=a.photos,this.totalTiles=this.tiles.length,this.currentTile=-1,this.snapshotVM=new h({overlap:e.isMobile?!0:!1}),this.totalTiles>1&&(this.nextBtn=new i({html:'<a href="#next-snapshot" id="next-snapshot" class="page-btn next modal-btn"></a>',parentEl:this.view,text:a.text.nextPage}),this.nextBtn.init(),this.nextBtn.onClick.add(this._click),this.prevBtn=new i({html:'<a href="#prev-snapshot" id="prev-snapshot" class="page-btn prev modal-btn"></a>',parentEl:this.view,text:a.text.previousPage}),this.prevBtn.init(),this.prevBtn.onClick.add(this._click)),this.closeBtn=new j({html:'<a href="/#!/gallery/'+this.data.id+'" id="close-snapshot" class="close-btn"></a>',parentEl:this.view}),this.closeBtn.init(),this.closeBtn.onClick.add(this._click),this.aniIn(a,b)},aniIn:function(a,b){p.removeBorder(),a&&a.req?this.data=a.req.params:a&&(this.data=a),l.show(),e.isMobile?f.to(this.view,.75,{x:0,ease:Expo.easeInOut,onComplete:function(){b&&b()}.bind(this),clearProps:"transform"}):f.to(this.view,.75,{autoAlpha:1,onComplete:function(){b&&b()}.bind(this)}),this.show(this.data)},show:function(a,b){var c=g.find(this.tiles,{id:a.sid});l.setGalleryData(c),l.setShare(a.sid);var d=-1;return c?d=g.findIndex(this.tiles,function(b){return b.id==a.sid}):(c=this.tiles[0],d=0),d==this.currentTile?void(b&&b()):(this.currentTile=d,0==d&&this.totalTiles>1?this.prevBtn.aniOut():this.totalTiles>1&&this.prevBtn.aniIn(),d==this.totalTiles-1&&this.totalTiles>1?this.nextBtn.aniOut():this.totalTiles>1&&this.nextBtn.aniIn(),c.direction=a.direction?a.direction:"next",this["tile"+this.currentTile]=new k({model:c,parentEl:this.view}),this.size?this.resize(this.size.width,this.size.height):this.resize(window.innerWidth,window.innerHeight),void this.snapshotVM.show(this["tile"+this.currentTile],c,function(){b&&b()}.bind(this)))},_click:function(a){console.log("_click(), $view[0].id: ",a[0].id);var b;switch(a[0].id){case"next-snapshot":b=this.currentTile+1,b<this.totalTiles&&this.show({gid:this.data.gid,sid:this.tiles[b].id,direction:"next"});break;case"prev-snapshot":b=this.currentTile-1,b>=0&&this.show({gid:this.data.gid,sid:this.tiles[b].id,direction:"previous"});break;case"close-snapshot":this.aniOut(this.destroy)}},aniOut:function(a,b){a&&"function"==typeof a&&(b=a),l.hide(),e.isMobile?f.to(this.view,.75,{x:-(this.width||window.innerWidth),ease:Expo.easeInOut,onComplete:function(){b&&b()}.bind(this)}):f.to(this.view,.75,{autoAlpha:0,onComplete:function(){b&&b()}.bind(this)})},resize:function(a,b){this.size={width:a,height:b};var c=this["tile"+this.currentTile],d=l.getHeight();if(e.isTablet)c.css({top:(this.getHeight()-40-(d+c.getWidth()))/2+"px"});else if(e.isMobile){var f=60;c.css({top:f});var g=Math.min(a,b-f-l.getHeight());this.find(".descriptor").css({bottom:a-g}),this.nextBtn&&this.nextBtn.css({top:f+g-.5*c.find(".descriptor").getHeight()+"px"}),this.prevBtn&&this.prevBtn.css({top:f+g-.5*c.find(".descriptor").getHeight()+"px"})}else c.css({top:(this.getHeight()-(d+c.getWidth()))/2+"px"})},destroy:function(){this.view&&this.remove(),this.view=null}})},{"../../assets/Icons":137,"../../model":215,"../../settings":217,"../../util/get":219,"../common/NavBar":151,"../common/loader":157,"../index.js":167,"../plugins/DOMPlugin":170,"./CloseBtn":158,"./ModalTile":160,"./Page":162,"./PageBtn":163,"./fetchData":165,"./loadAssets":166,"bw-vm":15,"dom-select":29,gsap:41,"js-oop":61,lodash:63,signals:93,"spooky-element":95}],160:[function(a,b){var c=a("js-oop"),d=a("spooky-element"),e=(a("../../util/get"),a("../../settings")),f=(a("../index.js"),a("signals"),a("../../assets/Icons"),a("gsap")),g=a("handlebars");b.exports=new c({Extends:d,initialize:function(a){return this.data=a,this.model=a.model,this.template='<div id="{{id}}" class="modal-tile">\r\n        <img src="{{image}}"/>\r\n        <div class="descriptor">\r\n            <div class="location">{{landmark}}</div>\r\n            <div class="region">{{location}}</div>\r\n            <div class="date">{{date}}</div>\r\n        </div>\r\n</div>',c.parent(this,g.compile(this.template)(this.model)),this.appendTo(this.data.parentEl),this._click=this._click.bind(this),this.onOver=this.onOver.bind(this),this.onOut=this.onOut.bind(this),this.removeHandlers=this.removeHandlers.bind(this),this},init:function(a,b){this.descriptor=this.find(".descriptor");var c=this.width||window.innerWidth;return a.direction&&"previous"==a.direction&&(c=-c),e.isMobile?f.set(this.view,{x:c}):f.set(this.view,{autoAlpha:0}),b&&b(),this},aniIn:function(a,b){a&&"function"==typeof a&&(b=a),e.isMobile?f.to(this.view,.75,{x:0,ease:Expo.easeInOut,onComplete:function(){b&&b()}.bind(this),clearProps:"transform"}):f.to(this.view,.75,{autoAlpha:1,onComplete:function(){b&&b()}.bind(this)}),b&&b()},aniOut:function(a,b){a&&"function"==typeof a&&(b=a);var c=-(this.width||window.innerWidth);a.direction&&"previous"==a.direction&&(c=this.width||window.innerWidth),e.isMobile?f.to(this.view,.75,{x:c,ease:Expo.easeInOut,onComplete:function(){b&&b()}}):f.to(this.view,.75,{autoAlpha:0,onComplete:function(){b&&b()}.bind(this)})},removeHandlers:function(){this.off("mouseenter",this.onOver),this.off("mouseleave",this.onOut),this.off("click",this._click),this.onClick=null,this.onRollover=null,this.onRollout=null},_click:function(a){a&&a.preventDefault(),this.onClick.dispatch(this)},onOver:function(a){a&&a.preventDefault(),this.addClass("over"),this.onRollover.dispatch()},onOut:function(a){a&&a.preventDefault(),this.removeClass("over"),this.onRollout.dispatch()},resize:function(){},destroy:function(){c.parent(this),console.log("destroy()")}})},{"../../assets/Icons":137,"../../settings":217,"../../util/get":219,"../index.js":167,gsap:41,handlebars:57,"js-oop":61,signals:93,"spooky-element":95}],161:[function(a,b){var c=a("js-oop"),d=(a("spooky-element"),a("../../util/get"),a("../../settings"),a("../index.js"),a("signals"),a("gsap")),e=a("../common/ButtonBase");b.exports=new c({Extends:e,initialize:function(a){return this.data=a,this.selected=!1,c.parent(this,a),d.set(this.view,{autoAlpha:.5}),this},init:function(){return d.set(this.view,{autoAlpha:.5}),this},aniIn:function(a,b){a&&"function"==typeof a&&(b=a),d.to(this.view,.5,{autoAlpha:1,onComplete:function(){b&&b()}.bind(this)})},aniOut:function(a,b){a&&"function"==typeof a&&(b=a),d.to(this.view,.5,{autoAlpha:.5,onComplete:function(){}.bind(this)}),b&&b()},_onClick:function(a){console.log("NavBtn.onClick()"),a&&a.preventDefault(),this.onClick.dispatch(this)},_onOver:function(a){a&&a.preventDefault(),this.addClass("over"),c.parent(this,a)},_onOut:function(a){a&&a.preventDefault(),this.removeClass("over"),c.parent(this,a)},resize:function(){},destroy:function(){c.parent(this)}})},{"../../settings":217,"../../util/get":219,"../common/ButtonBase":146,"../index.js":167,gsap:41,"js-oop":61,signals:93,"spooky-element":95}],162:[function(a,b){var c=a("js-oop"),d=a("spooky-element"),e=(a("../../util/get"),a("../../settings")),f=(a("../index.js"),a("signals")),g=(a("../../assets/Icons"),a("gsap")),h=a("lodash"),i=a("./PageTile"),j=a("iscroll"),k=a("./fetchData"),l=a("./loadAssets"),m=a("../common/loader"),n=a("warped-grid-gallery");b.exports=new c({Extends:d,initialize:function(a){return this.data=a,c.parent(this,a.html),this.appendTo(this.data.parentEl),this.aniOut=this.aniOut.bind(this),this.aniIn=this.aniIn.bind(this),this._onClick=this._onClick.bind(this),this._onOver=this._onOver.bind(this),this._onOut=this._onOut.bind(this),this.onClick=new f,this.resetGrid=this.resetGrid.bind(this),this.content=this.find(".content"),this.$tiles=[],e.isMobile?g.set(this.view,{x:this.width||window.innerWidth}):g.set(this.view,{autoAlpha:0}),this},init:function(a,b){m.start(),k(a).then(l).then(function(a){a.totalPages=Math.ceil(a.total/a.count),this.data=a,this.$tiles=[],this.tiles=a.photos,this.columnsPerPg=a.columnsPerPg,this.rowsPerPg=a.rowsPerPg,h.map(a.photos,function(a,b){a.index=b,this.$tiles.push(new i({model:a,overlayTarget:this})),this.$tiles[b].appendTo(this.content.view),this.$tiles[b].init(),e.isMobile?this.$tiles[b].on("tap",this._onClick.bind(this,this.$tiles[b])):this.$tiles[b].onClick.add(this._onClick),this.$tiles[b].onOver.add(this._onOver),this.$tiles[b].onOut.add(this._onOut)
}.bind(this)),e.isMobile&&(this.resize(),this.css({width:this.getWidth()+15+"px"}))}.bind(this)).then(b)["catch"](function(a){console.log(a.stack)})},_onClick:function(a){console.log("Page._onClick, $view: ",a),this.onClick.dispatch(a)},_onOver:function(a){h.map(this.$tiles,function(b){b[0].getAttribute("id")!==a[0].getAttribute("id")&&b.showOverlay()}),g.killDelayedCallsTo(this.resetGrid)},_onOut:function(a){h.map(this.$tiles,function(b){b[0].getAttribute("id")!==a[0].getAttribute("id")&&b.hideOverlay()}),g.delayedCall(.2,this.resetGrid)},resetGrid:function(){this.warpedGrid.reset()},aniIn:function(a,b){m.stop(),e.isMobile?(this.scroll=new j(this.view,{mouseWheel:!0,scrollbars:!0,fadeScrollbars:!1,interactiveScrollbars:!0,resizeScrollbars:!0,click:!0,tap:!0}),g.to(this.view,.75,{x:0,ease:Expo.easeInOut,onComplete:function(){b&&b()}.bind(this),clearProps:"transform"})):(this.content.css({"pointer-events":"none"}),g.to(this.view,.75,{autoAlpha:1,onComplete:function(){this.warpedGrid=new n({elementWrapper:"#tiles-container",element:".page-tile",grid:[6,6],multiSpeed:1,speed:50,range:1.5,warp:"rollover",ease:"Expo.easeInOut",tweenDuration:.25,scale:1.2,justify:!0}),this.content.css({"pointer-events":"auto"}),b&&b()}.bind(this)}))},aniOut:function(a,b){e.isMobile?g.to(this.view,.75,{x:-(this.width||window.innerWidth),ease:Expo.easeInOut,onComplete:function(){b&&b()}}):g.to(this.view,.75,{autoAlpha:0,onComplete:function(){b&&b()}.bind(this)})},resize:function(){if(this.$tiles.length){var a=this.content.getWidth()/this.columnsPerPg;h.map(this.$tiles,function(b){b.resize(a,a)}.bind(this))}this.warpedGrid&&this.warpedGrid.update()},destroy:function(){console.log("Page.destroy()"),e.isMobile&&this.scroll&&this.scroll.destroy(),this.warpedGrid&&this.warpedGrid.destroy(),this.$tiles.length&&h.map(this.$tiles,function(a){a.destroy()}.bind(this)),c.parent(this)}})},{"../../assets/Icons":137,"../../settings":217,"../../util/get":219,"../common/loader":157,"../index.js":167,"./PageTile":164,"./fetchData":165,"./loadAssets":166,gsap:41,iscroll:60,"js-oop":61,lodash:63,signals:93,"spooky-element":95,"warped-grid-gallery":123}],163:[function(a,b){var c=a("js-oop"),d=a("spooky-element"),e=(a("../../util/get"),a("../../settings"),a("../index.js"),a("signals"),a("../../assets/Icons")),f=a("gsap"),g=a("../common/ButtonBase");b.exports=new c({Extends:g,initialize:function(a){return this.data=a,c.parent(this,a.html),this.appendTo(a.parentEl),f.set(this.view,{autoAlpha:0}),this},init:function(a,b){return this.removeClass=this.removeClass.bind(this),this.hasClass("next")?(this.direction="next",this.text=new d('<div class="btn-text">'+this.data.text+"</div>"),this.text2=new d('<div class="btn-text">'+this.data.text+"</div>"),this.append(this.text),this.icon=new d('<div class="btn-icon"></div>'),this.append(this.icon),this.icon.append(e.get("right_arrow"))):(this.direction="prev",this.icon=new d('<div class="btn-icon"></div>'),this.append(this.icon),this.icon.append(e.get("right_arrow")),f.set(this.icon,{rotationZ:180,transformOrigin:"50% 50% 50%"}),this.text=new d('<div class="btn-text">'+this.data.text+"</div>"),this.text2=new d('<div class="btn-text">'+this.data.text+"</div>"),this.append(this.text)),this.bg=new d('<div class="btn-bg"></div>'),this.append(this.bg),b&&b(),this},aniIn:function(a,b){a&&"function"==typeof a&&(b=a),f.to(this.view,.5,{autoAlpha:1,onComplete:function(){b&&b()}.bind(this)})},aniOut:function(a,b){a&&"function"==typeof a&&(b=a),f.to(this.view,.5,{autoAlpha:0,onComplete:function(){b&&b()}.bind(this)})},_onClick:function(a){a&&a.preventDefault(),c.parent(this,a)},_onOver:function(a){a&&a.preventDefault(),f.killDelayedCallsTo(this.removeClass),this.addClass("over"),f.to(this.bg,.5,{left:0,ease:Expo.easeOut}),f.to(this.text,.5,{x:this.hasClass("next")?-20:20,autoAlpha:1,ease:Expo.easeOut,delay:.2}),c.parent(this,a)},_onOut:function(a){a&&a.preventDefault(),f.to(this.text,.5,{x:0,autoAlpha:0,ease:Expo.easeOut}),f.to(this.bg,.5,{left:this.hasClass("next")?180:-180,delay:.2,ease:Expo.easeOut}),f.delayedCall(.8,this.removeClass,["over"]),c.parent(this,a)},resize:function(){},destroy:function(){c.parent(this)}})},{"../../assets/Icons":137,"../../settings":217,"../../util/get":219,"../common/ButtonBase":146,"../index.js":167,gsap:41,"js-oop":61,signals:93,"spooky-element":95}],164:[function(a,b){var c=a("js-oop"),d=(a("spooky-element"),a("../../util/get"),a("../../settings")),e=(a("../index.js"),a("signals"),a("../../assets/Icons")),f=a("gsap"),g=a("handlebars"),h=a("../common/ButtonBase");b.exports=new c({Extends:h,initialize:function(a){return this.data=a,this.model=a.model,this.model.isDesktop=!d.isMobile,this.template='<div id="element{{index}}" data-id="{{id}}" class="page-tile needsclick" style="background-image: url(\'{{thumb}}\')">\r\n    <a href="#!/gallery/{{gid}}/snapshot/{{id}}">\r\n        <div class="tile-overlay"></div>\r\n        <div class="descriptor">\r\n        	{{#if isDesktop}}<div class="content">{{/if}}\r\n	            <div class="descriptor-gradient"></div>\r\n	            <div class="icon"></div>\r\n	            <div class="location">{{landmark}}</div>\r\n	            <div class="region">{{location}}</div>\r\n	        {{#if isDesktop}}</div>{{/if}}\r\n        </div>\r\n    </a>\r\n</div>',c.parent(this,g.compile(this.template)(this.model)),this},init:function(a,b){return this.icon=this.find(".icon"),this.icon.append(e.get("landmark")),this.overlay=this.find(".tile-overlay"),this.descriptor=this.find(".descriptor"),this.descriptor.content=this.descriptor.find(".content"),d.isMobile||this.descriptor.appendTo(this.data.overlayTarget),d.isMobile||f.set(this.overlay.view,{autoAlpha:0}),b&&b(),this},aniIn:function(a,b){a&&"function"==typeof a&&(b=a),b&&b()},aniOut:function(a,b){a&&"function"==typeof a&&(b=a),b&&b()},showOverlay:function(){d.isMobile||f.to(this.overlay.view,.5,{autoAlpha:1})},hideOverlay:function(){d.isMobile||f.to(this.overlay.view,.5,{autoAlpha:0})},_onClick:function(a){console.log("PageTile._onClick()"),c.parent(this,a),a&&a.preventDefault()},_onOver:function(a){a&&a.preventDefault(),this.addClass("over"),d.isMobile||f.to(this.descriptor.content,.25,{top:"0%",ease:Expo.easeInOut,delay:.2}),c.parent(this,a)},_onOut:function(a){a&&a.preventDefault(),this.removeClass("over"),d.isMobile||(f.killTweensOf(this.descriptor.content),f.to(this.descriptor.content,.05,{top:"100%",ease:Expo.easeInOut})),c.parent(this,a)},resize:function(a,b){if(this.css({width:a+"px",height:b+"px"}),!d.isMobile){var c=1.2*a,e=1.2*b,f=.5*(c-a),g=.5*(e-b),h=this.model.index,i=h%6>0?f:0;h%6==5&&(i+=f),this.descriptor.css({width:1.2*a,top:this[0].offsetTop+e-this.descriptor.getHeight()-Math.floor(h/6)*g,left:this[0].offsetLeft-i})}},destroy:function(){c.parent(this)}})},{"../../assets/Icons":137,"../../settings":217,"../../util/get":219,"../common/ButtonBase":146,"../index.js":167,gsap:41,handlebars:57,"js-oop":61,signals:93,"spooky-element":95}],165:[function(a,b){function c(a){for(var b=[],c=0;a>c;c++)b.push({id:String(c+500),landmark:Math.floor(1e3*Math.random()+1)+" Groovy Street blah blah blah blah",location:"FUNKY TOWN, KINGDOM OF SAGUENAY",date:"FEBRUARY 22 1999",image:"/images/photos/"+c+".jpg",lat:"",lng:""});return b}var d=a("promise"),e=a("../../settings"),f=a("../../util/get"),g=a("lodash");g.mixin({findByValues:function(a,b,c){return g.filter(a,function(a){return g.contains(c,a[b])})}});var h=!1,i=67,j=!1;b.exports=function(a){return new d(function(b,d){if(a){console.log("fetchData, data: ",a);var k=e.SERVER+"api/get.php";a.query&&(k+="?"+a.query),h?j?b(a):(console.log("get dummy data"),a.allPhotos=c(i),console.log("data.allPhotos: ",a.allPhotos),g.map(a.allPhotos,function(a){a.gid="allPhotos"}),a.myPhotos=g.slice(a.allPhotos,Math.floor(Math.random()*i+1),a.allPhotos.length),g.map(a.myPhotos,function(a){a.gid="myPhotos"}),j=!0,b(a)):(console.log("url: ",k),f(k,function(c){if(c){if(console.log("response: ",c),g.map(c.data,function(b){b.gid=a.id}),a.photos=c.data,"allPhotos"==a.id)a.next=c.next,a.previous=c.previous,a.total=c.total,a.totalPages=Math.ceil(a.total/a.count);else if("myPhotos"==a.id){a.total=a.keys.length;var e=Math.ceil(a.total/a.count);if(a.totalPages=e,a.page>=e-1||1>=e)a.next="";else if(e>1){var f=(a.page+1)*a.count,h=f+a.count>a.total?a.total:f+a.count,i=a.keys.slice(f,h);a.next="id="+i.join(",")}if(a.page<=0||1>=e)a.previous="";else if(e>1){var j=(a.page-1)*a.count,l=j+a.count,m=a.keys.slice(j,l);a.previous="id="+m.join(",")}}b(a)}else d(new Error(k))}))}else d(new Error("no data was supplied to fetchData"))})}},{"../../settings":217,"../../util/get":219,lodash:63,promise:81}],166:[function(a,b){var c=a("promise"),d=(a("../../settings"),a("lodash")),e=a("preloader");b.exports=function(a){return new c(function(b){var c=new e;d.map(a.photos,function(a){c.add(a.image),c.add(a.thumb)}),c.onComplete.addOnce(function(){b(a)}.bind(this)),c.load()})}},{"../../settings":217,lodash:63,preloader:69,promise:81}],167:[function(a,b){{var c=a("bigwheel"),d=a("./plugins/DOMPlugin"),e=a("dom-select"),f=a("../settings"),g=a("element-class"),h=(a("dom-event"),a("fastclick"));a("../assets/Icons"),a("gsap"),a("./common/Rotate")}a("google-maps-api")(a("../model").googleapi,["places"])();var i=function(){window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.host),h(document.body),i.container=e("#container"),f.isPhone&&g(i.container).add("mobile"),f.isTablet&&g(i.container).add("tablet"),f.isPhone||f.isTablet||g(i.container).add("desktop"),i.globalUI=a("./common/GlobalUI"),(f.isPhone||f.isTablet)&&(window.addEventListener("orientationchange",function(){setTimeout(j,500)},!1),j()),d.setup(i.container);var b=a(f.isMobile?"./SnapshotMobile":"./Snapshot"),k=a("./common/NavBar"),l=window.location.origin.indexOf("lux")>-1?!1:!0;i.framework=c(function(c){c({initSection:a("./preloader"),overlap:f.isMobile,onRoute:i.track,routes:{"/":{section:[a("./Landing"),i.globalUI,k],duplicate:!1,useURL:!0},"/experience":{section:[a("./Streetview"),i.globalUI,k],duplicate:!0,useURL:l},"/experience/:latlon":{section:[a("./Streetview"),i.globalUI,k],duplicate:!0,useURL:l},"/gallery":{section:[a("./Gallery"),i.globalUI,k],duplicate:!0,useURL:!0},"/gallery/:gid":{section:[a("./Gallery"),i.globalUI,k],duplicate:!0,useURL:!0},"/gallery/:gid/snapshot/:sid":{section:[a("./Gallery"),i.globalUI,k],duplicate:!0,useURL:!0},"/share/:sid":{section:[a("./Gallery"),i.globalUI,k],duplicate:!0,useURL:!0},"/snapshot":{section:[b,i.globalUI,k],duplicate:!1,useURL:l},404:"/"}})}),i.framework.init()};i.go=function(a){i.framework.go(a)},i.track=function(a,b){if(b){i.preloaded||(i.preloaded=!0,j());var c=""!==b.route&&"/"!=b.route?b.route:"/home";ga("send","pageview",c);var d=g(e("body"));d["/"===b.route?"add":"remove"]("landing")}};var j=function(){var a=Math.max(document.documentElement.clientWidth,window.innerWidth||0),b=Math.max(document.documentElement.clientHeight,window.innerHeight||0),c=g(i.container),d=a>=b;c.add(d?"landscape":"portrait"),c.remove(d?"portrait":"landscape"),window.orientation=d?90:0,i.globalUI.checkRotation(d)};b.exports=i},{"../assets/Icons":137,"../model":215,"../settings":217,"./Gallery":139,"./Landing":140,"./Snapshot":141,"./SnapshotMobile":142,"./Streetview":144,"./common/GlobalUI":149,"./common/NavBar":151,"./common/Rotate":154,"./plugins/DOMPlugin":170,"./preloader":171,bigwheel:8,"dom-event":27,"dom-select":29,"element-class":31,fastclick:34,"google-maps-api":36,gsap:41}],168:[function(a,b){var c=a("js-oop"),d=a("pixi.js"),e=a("../../settings"),f=a("raf"),g=a("./Leaf"),h=a("gsap");b.exports=new c({Extends:d.CanvasRenderer,initialize:function(a){this.leafCount=50,this.size={width:1276,height:720},c.parent(this,this.size.width,this.size.height,{view:a,resolution:e.isMobile?window.devicePixelRatio:1,transparent:!0}),this.stage=new d.Stage(16641767),this.branch=d.Sprite.fromFrame("branch.png"),this.stage.addChild(this.branch),this.batch=new d.DisplayObjectContainer,this.stage.addChild(this.batch),e.isMobile||(this.canopyRight=d.Sprite.fromFrame("canopy-right.png"),this.stage.addChild(this.canopyRight)),this.canopy=d.Sprite.fromFrame("canopy-left.png"),this.stage.addChild(this.canopy),e.isTablet&&(this.canopyRight.scale.x=this.canopyRight.scale.y=.5,this.canopy.scale.x=this.canopy.scale.y=.5,this.branch.scale.x=this.branch.scale.y=.5),this.ratioX=this.size.width/this.size.height,this.ratioY=this.size.height/this.size.width},init:function(){this.leaves=[];var a;e.isMobile?(a=new d.Rectangle(0,0,this.size.width,this.size.height),this.addLeaves(a)):(a=new d.Rectangle(0,0,this.canopy.width,this.size.height),this.addLeaves(a),a=new d.Rectangle(this.canopyRight.x,0,this.canopyRight.width,this.size.height),this.addLeaves(a)),this.tick=this.tick.bind(this),this.tick(),this.branch.alpha=0,this.canopy.alpha=0,this.canopyRight&&(this.canopyRight.alpha=0)},addLeaves:function(a){for(var b,c=0;c<this.leafCount;c++)b=new g(a),this.batch.addChild(b),this.leaves.push(b)},updateLeaves:function(a,b,c){b=b||0,c=c||this.leaves.length;for(var d=b;c>d;d++)this.leaves[d].animationBounds=a},animateIn:function(a){h.to(this.branch,.5,{alpha:1,delay:a}),h.to(this.canopy,.5,{alpha:1,delay:a}),this.canopyRight&&h.to(this.canopyRight,.5,{alpha:1,delay:a})},animateOut:function(a){h.to(this.branch,.5,{alpha:0,delay:a}),h.to(this.canopy,.5,{alpha:0,delay:a}),this.canopyRight&&h.to(this.canopyRight,.5,{alpha:0,delay:a})},tick:function(){for(var a=0,b=this.leaves.length;b>a;a++)this.leaves[a].update();this.render(this.stage),this.ticker=f(this.tick)},resize:function(a,b){this.size.width=a,this.size.height=b,c.parent(this,a,b);var f=a,g=a*this.ratioY;if(b>g&&(g=b,f=b*this.ratioX),this.stage){if(this.leaves){var h;e.isMobile?(h=new d.Rectangle(0,0,this.width,this.height),this.updateLeaves(h)):(h=new d.Rectangle(0,0,this.canopy.width,this.height),this.updateLeaves(h,0,this.leafCount),h=new d.Rectangle(this.canopyRight.x,0,this.canopyRight.width,this.height),this.updateLeaves(h,this.leafCount,2*this.leafCount))}e.isMobile?(this.canopy.width=a,this.canopy.scale.y=this.canopy.scale.x,this.branch.scale.x=this.canopy.scale.x,this.branch.scale.y=this.canopy.scale.y):this.canopyRight.x=a-this.canopyRight.width}},destroy:function(){f.cancel(this.ticker)}})},{"../../settings":217,"./Leaf":169,gsap:41,"js-oop":61,"pixi.js":68,raf:90}],169:[function(a,b){var c=a("js-oop"),d=a("pixi.js"),e=a("../../settings"),f=a("gsap");b.exports=new c({Extends:d.MovieClip,percent:{set:function(a){this._percent=a},get:function(){return this._percent}},initialize:function(a){this.frameCount=4,this.types=3;for(var b=[],f=Math.floor(Math.random()*this.types),g=0,h=this.frameCount;h>g;g++)b[g]=d.TextureCache["petal_"+f+"_"+g+".png"];c.parent(this,b),this.tint=16765647,this.animationSpeed=.2,this.scale.x=this.scale.y=e.isMobile?.2:.4,this.distance=e.isMobile?25:50,this.percent=0,this.animationBounds=a,this.swayRight=this.swayRight.bind(this),this.swayLeft=this.swayLeft.bind(this),this.reset(),this.gotoAndPlay(Math.floor(Math.random()*this.frameCount))},swayRight:function(){f.to(this,this.swaySpeed,{x:this.x+(Math.random()*this.distance+.5*this.distance),percent:.5,ease:Sine.easeInOut,onComplete:this.swayLeft})},swayLeft:function(){f.to(this,this.swaySpeed,{x:this.x-(Math.random()*this.distance+.5*this.distance),percent:-.5,ease:Sine.easeInOut,onComplete:this.swayRight})},reset:function(){this.velocity=Math.random()+(e.isMobile?.1:.3),this.y=this.animationBounds.y-this.getBounds().height,this.x=this.animationBounds.x+Math.random()*this.animationBounds.width,this.swaySpeed=1.5*Math.random()+1,f.killTweensOf(this),this.swayRight()},update:function(){this.y+=this.velocity*(1-Math.abs(this.percent)),this.y>this.animationBounds.height&&this.reset()}})},{"../../settings":217,gsap:41,"js-oop":61,"pixi.js":68}],170:[function(a,b){var c=a("handlebars"),d=a("element-class"),e=a("../../settings"),f=a("gsap"),g=function(a,b){b=b||g.container,b.appendChild(a)};g.setup=function(a){this.container=a,c.registerHelper("math",function(a,b,c){return a=parseFloat(a),c=parseFloat(c),{"+":a+c,"-":a-c,"*":a*c,"/":a/c,"%":a%c}[b]}),c.registerHelper("isModNum",function(a,b,c){return a%b==0?c.fn(this):c.inverse(this)}),e.isMobile||(d(document.body).remove("borderless"),f.set(document.body,{clearProps:"padding"}))},g.remove=function(a){e.isMobile||f.set(document.body,{clearProps:"padding"}),a.parentNode.removeChild(a)},g.removeBorder=function(){f.to(document.body,1,{padding:0})},b.exports=g},{"../../settings":217,"element-class":31,gsap:41,handlebars:57}],171:[function(a,b){{var c=a("js-oop"),d=a("../model"),e=a("./BaseSection"),f=a("preloader"),g=a("./streetview/AssetLib3D"),h=a("./common/AssetLibAudio"),i=a("../settings"),j=(a("pixi.js"),a("../assets/Icons")),k=a("../util/PIXIJsonParser"),l=a("gsap"),m=a("./StreetView");a("extend-object")}b.exports=new c({Extends:e,percent:{get:function(){return this._percent},set:function(a){this._percent=a,this.updatePercent()}},initialize:function(a){c.parent(this,'<div id="preload">\r\n	<div class="text">0%</div>\r\n	<div class="copy"></div>\r\n</div>'),this.text=this.find(".text"),this.copy=this.find(".copy"),l.set([this.text,this.copy],{autoAlpha:0,y:20}),this.preloaded=a,this.auxLoaderComplete=this.auxLoaderComplete.bind(this),this.auxLoaders=[],this.auxLoaded=0,this.basePercent=i.isMobile?1:.7},init:function(a,b){b()},aniIn:function(a,b){b(),l.to(this.text,.5,{autoAlpha:1,y:0,ease:Expo.easeOut}),d.init(function(){this.preloader=new f;for(var a=0,b=d.preload.length;b>a;a++)this.preloader.add(d.preload[a]);for(m.GL_DISABLED||g.getInstance().init(this.preloader,d.get3dAssetList()),a=0,b=d.snapshot.stickers.length;b>a;a++)this.preloader.add(d.snapshot.stickers[a]);for(a=0,b=d.snapshot.overlays.length;b>a;a++)this.preloader.add(d.snapshot.overlays[a]);this.preloader.onProgress.add(this.checkProgress.bind(this)),this.preloader.onComplete.add(this.onLoaded.bind(this)),this.preloader.load()}.bind(this))},updatePercent:function(){this.text.html(Math.round(100*this.percent)+"%")},checkProgress:function(a){this.percent=a*this.basePercent},onLoaded:function(){a("./StreetView").getInstance(),a("./common/NavBar").getInstance(),j.init(this.preloader.getContent("images/icons.html")),i.preloader=this.preloader;var b=new k("json/tps-common.json",this.preloader.getContent("json/tps-common.json"));if(this.auxLoaders.push(b),b.on("loaded",this.auxLoaderComplete),b.load(),!i.isMobile){var c=h.getInstance();this.auxLoaders.push(c),c.onComplete.add(this.auxLoaderComplete),c.onProgress.add(this.audioProgress.bind(this)),c.init(d.assetsAudio)}},audioProgress:function(a){this.percent=this.basePercent+a*(1-this.basePercent)},auxLoaderComplete:function(){this.auxLoaded++,this.auxLoaded===this.auxLoaders.length&&(this.preloaded&&this.preloaded(),this.preloaded=void 0)},aniOut:function(b,c){a("./common/loader").stop(),l.to(this,.5,{autoAlpha:0,y:20,ease:Expo.easeIn,onComplete:c})},resize:function(a,b){c.parent(this,a,b)},destroy:function(){c.parent(this)}})},{"../assets/Icons":137,"../model":215,"../settings":217,"../util/PIXIJsonParser":218,"./BaseSection":138,"./StreetView":143,"./common/AssetLibAudio":145,"./common/NavBar":151,"./common/loader":157,"./streetview/AssetLib3D":183,"extend-object":32,gsap:41,"js-oop":61,"pixi.js":68,preloader:69}],172:[function(a,b){var c=a("js-oop"),d=a("../../settings"),e=a("./TextTile"),f=a("../../util/post"),d=a("../../settings"),g=a("../../model"),h=a("../../util/localKeys"),e=a("./TextTile"),i=a("./ImageTile"),j=(a("dom-select"),a("dom-css"),a("gsap"));b.exports=new c({Extends:fabric.Canvas,initialize:function(a){c.parent(this,a),this.tiles=[],this.selection=!1,this.controlsAboveOverlay=!0,this.size=500,this.base=document.createElement("canvas"),this.base.width=this.size,this.base.height=this.size,g.capture||(g.capture={});var b=g.capture.image?g.capture.image:d.preloader.getContent("images/test-snapshot.png"),e=this.base.getContext("2d");e.drawImage(b,0,0,this.size,this.size),this.bg=new fabric.Image(this.base),this.setBackgroundImage(this.bg),this.setWidth(this.size),this.setHeight(this.size),this.initTile=this.initTile.bind(this),this.renderAll=this.renderAll.bind(this),this.on("before:selection:cleared",this.onSelectionCleared.bind(this))},onSelectionCleared:function(){var a=this.getActiveObject();"text"==a.tileType&&a.checkText()},addText:function(){var a=new e(this.onTextSelected);return this.addTile(a),a},addSticker:function(a){var b=new i(d.preloader.getContent(a));this.addTile(b)},addTile:function(a){a.left=.5*this.width-a.width*a.getScaleX()*.5,a.top=.5*this.height-a.height*a.getScaleY()*.5+20,a.opacity=0,this.add(a),this.tiles.push(a),this.setActiveObject(a),j.to(a,.5,{opacity:1,top:a.top-20,ease:Expo.easeOut,delay:.1,onUpdate:this.renderAll,onComplete:this.initTile,onCompleteParams:[a]})},initTile:function(a){a.setCoords()},setFilter:function(a){this.bg.filters="none"==a?[]:[new fabric.Image.filters[a]],this.bg.applyFilters(this.renderAll)},setOverlay:function(a){a?(this.overlay=new fabric.Image(d.preloader.getContent(a)),this.overlay.setScaleX(this.scale),this.overlay.setScaleY(this.scale)):this.overlay=null,this.setOverlayImage(this.overlay),this.renderAll()},animateIn:function(){},animateOut:function(){},removeActiveTile:function(){for(var a=this.getActiveObject(),b=0;b<this.tiles.length;b++)if(a==this.tiles[b]){this.tiles[b].remove(),this.tiles.splice(b,1);break}},resize:function(a,b){this.viewport={w:a,h:b},this.scale=a/this.size,this.setWidth(a),this.setHeight(b),this.bg.setScaleX(this.scale),this.bg.setScaleY(this.scale),this.overlay&&(this.overlay.setScaleX(this.scale),this.overlay.setScaleY(this.scale)),this.renderAll()},save:function(a,b){ga("send","event","share","save",a?"public":"private"),this.deactivateAll();var c=this.toDataURL({format:"jpeg",quality:1,multiplier:this.size/this.viewport.w});this.tiles.forEach(function(a){a.set("selectable",!1),a.setVisible(!1)});var e=this.toDataURL({format:"jpeg",quality:1,multiplier:this.size/this.viewport.w*.5});this.tiles.forEach(function(a){a.setVisible(!0)}),this.renderAll(),f(d.SERVER+"api/submit.php",{image:c,thumb:e,lat:g.capture.lat||48.859943,lng:g.capture.lng||2.29189,location:g.capture.location||"",landmark:g.capture.landmark||"",gallery:a},function(a){a.success&&(h.add(a.hash),b(a.hash))}.bind(this))},enableAll:function(){this.tiles.forEach(function(a){a.set("selectable",!0)})},destroy:function(){for(var a=0;a<this.tiles.length;a++)this.tiles[a].remove();this.removeListeners(),this.dispose()}})},{"../../model":215,"../../settings":217,"../../util/localKeys":220,"../../util/post":224,"./ImageTile":174,"./TextTile":182,"dom-css":22,"dom-select":29,gsap:41,"js-oop":61}],173:[function(a,b){var c=a("js-oop"),d=a("spooky-element"),e=(a("../../assets/Icons"),a("../common/PanelSlider")),f=a("signals").Signal,g=a("../common/SlotBorderButton"),h=a("../common/ButtonBase");b.exports=new c({Extends:d,initialize:function(a){c.parent(this,a),this.onFilter=new f,this.onOverlay=new f,this.onSticker=new f,this.onComplete=new f,this.filters=[];var b,i=this[0].querySelectorAll(".filters .filters > div"),j=i.length;for(o=0;j>o;o++)b=new h(i[o]),b.onClick.add(this.setFilter.bind(this,b)),this.filters.push(b);this.filterInfo=this.find(".filters .info.filter"),this.setFilter(this.filters[0]),this.overlays=[];var k,l=this[0].querySelectorAll(".filters .overlays > div");for(j=l.length,o=0;j>o;o++)k=new h(l[o]),0==o&&k.find(".text").html(""),k.onClick.add(this.setOverlay.bind(this,k)),this.overlays.push(k);this.overlayInfo=this.find(".filters .info.overlay"),this.setOverlay(this.overlays[0]),this.stickers=[];var m,n=this[0].querySelectorAll(".stickers .items .page > .item");j=n.length;for(var o=0;j>o;o++)m=new d(n[o]),m.css({"background-image":"url("+m.attr("data-url")+")"}),m.on("click",this.addSticker.bind(this,m)),this.stickers.push(m);this.find(".stickers .items .page").remove(),this.slider=new e(this.find(".stickers .items")[0]),this.gallery=new h(this.find(".gallery")),this.gallery.onClick.add(this.toggleGallery.bind(this)),new g(this.find(".next")).onClick.add(this.saveImage.bind(this))},saveImage:function(){var a=this.gallery.hasClass("selected");this.onComplete.dispatch(a)},setFilter:function(a){for(var b=0;b<this.filters.length;b++)this.filters[b]==a?this.filters[b].addClass("selected"):this.filters[b].removeClass("selected");this.filterInfo.html(a.attr("data-name")),this.onFilter.dispatch(a.attr("data-id"))},setOverlay:function(a){for(var b=0;b<this.overlays.length;b++)this.overlays[b]==a?this.overlays[b].addClass("selected"):this.overlays[b].removeClass("selected");this.overlayInfo.html(a.attr("data-name")),this.onOverlay.dispatch(a.attr("data-id"))},toggleGallery:function(){this.gallery.hasClass("selected")?this.gallery.removeClass("selected"):this.gallery.addClass("selected")},addSticker:function(a){this.onSticker.dispatch(a.attr("data-url"))},destroy:function(){this.slider.destroy()}})},{"../../assets/Icons":137,"../common/ButtonBase":146,"../common/PanelSlider":153,"../common/SlotBorderButton":155,"js-oop":61,signals:93,"spooky-element":95}],174:[function(a,b){var c=a("js-oop");b.exports=new c({Extends:fabric.Image,initialize:function(a){c.parent(this,a),this.tileType="image",this.borderColor=this.cornerColor="#ffffff",this.centeredScaling=!0,this.setScaleX(.25),this.setScaleY(.25)}})},{"js-oop":61}],175:[function(a,b){var c=a("js-oop"),d=a("gsap"),e=a("../common/ButtonBase");b.exports=new c({Extends:e,active:{get:function(){return this._active},set:function(a){this._active=a,this._active?this._onOver():this._onOut()}},initialize:function(a){c.parent(this,a)},_onOver:function(a){c.parent(this,a),d.to(this,.5,{opacity:1})},_onOut:function(a){this.active||(c.parent(this,a),d.to(this,.5,{opacity:.5}))}})},{"../common/ButtonBase":146,gsap:41,"js-oop":61}],176:[function(a,b){{var c=a("js-oop"),d=a("spooky-element"),e=a("../../assets/Icons"),f=a("./TextPanel"),g=a("./EffectsPanel"),h=(a("./SharePanel"),a("gsap")),i=a("signals").Signal,j=a("./MenuButton");a("dom-event")}b.exports=new c({Extends:d,initialize:function(a,b){c.parent(this,a),this.size=b,this.menuText=new j(this.find(".menu .text")),this.menuText.append(e.get("text")),this.menuText.onClick.add(this.gotoText.bind(this)),this.menuEffects=new j(this.find(".menu .effects")),this.menuEffects.append(e.get("effects")),this.menuEffects.onClick.add(this.gotoEffects.bind(this)),this.menuDivide=this.find(".menu .divide"),this.onFilter=new i,this.onOverlay=new i,this.onSticker=new i,this.onText=new i,this.onComplete=new i,this.onUpdate=new i,this.text=new f(this.find(".text.panel")[0],this.findAll(".text.panel > div")),this.text.onComplete.add(this.gotoEffects.bind(this)),this.text.onUpdate.add(this.onUpdate.dispatch.bind(this.onUpdate)),this.text.onText.add(this.onText.dispatch.bind(this.onText)),this.effects=new g(this.find(".effects.panel")[0]),this.effects.onFilter.add(this.onFilter.dispatch.bind(this.onFilter)),this.effects.onOverlay.add(this.onOverlay.dispatch.bind(this.onOverlay)),this.effects.onSticker.add(this.onSticker.dispatch.bind(this.onSticker)),this.effects.onComplete.add(this.onComplete.dispatch.bind(this.onComplete)),this.reset()},animateIn:function(a){h.set([this.menuText,this.menuEffects,this.menuDivide],{autoAlpha:0,y:20}),h.to(this.menuText,.5,{autoAlpha:1,y:0,clearProps:"transform",ease:Expo.easeOut,delay:a}),h.to(this.menuEffects,.5,{autoAlpha:.55,y:0,clearProps:"transform",ease:Expo.easeOut,delay:a+.1}),h.to(this.menuDivide,.5,{autoAlpha:1,y:0,clearProps:"transform",ease:Expo.easeOut,delay:a+.2}),this.text.animateIn(a+.3)},setActiveText:function(a){this.text.setTile(a),this.gotoText()},gotoText:function(){this.menuText.active=!0,this.menuEffects.active=!1,h.to(this.text,.5,{x:0,ease:Expo.easeInOut}),h.to(this.effects,.5,{x:this.size,ease:Expo.easeInOut})},gotoEffects:function(a){a=a||0,this.menuText.active=!1,this.menuEffects.active=!0,h.to(this.text,.5,{x:-this.size,ease:Expo.easeInOut}),h.to(this.effects,.5,{x:0,ease:Expo.easeInOut})},reset:function(){h.set(this.text,{x:0}),h.set(this.effects,{x:this.size}),this.menuText.active=!0,this.menuEffects.active=!1},destroy:function(){this.text.destroy(),this.effects.destroy()}})},{"../../assets/Icons":137,"./EffectsPanel":173,"./MenuButton":175,"./SharePanel":178,"./TextPanel":181,"dom-event":27,gsap:41,"js-oop":61,signals:93,"spooky-element":95}],177:[function(a,b){var c=a("js-oop"),d=a("spooky-element"),e=a("../../assets/Icons"),f=a("gsap"),g=a("signals").Signal,h=a("../common/ButtonBase"),i=a("iscroll"),j=a("../../settings");b.exports=new c({Extends:d,initialize:function(a,b){c.parent(this,a),this.effectPanel=b,this.effectText=b.find("span.filter"),this.overlayText=b.find("span.overlay"),this.panels=[],this.currentPanel=0,this.size=this.find(".full")[0].offsetHeight,this.textPanels=this.findAll(".full > .text"),this.effectPanels=this.findAll(".full > .effect"),this.submitPanels=this.findAll(".full > .submit");for(var k=0,l=this.submitPanels.length;l>k;k++)new h(this.submitPanels[k]).onClick.add(this.toggleSelected);this.next=new h(this.find(".next")[0]),e.addTo("mobile_right_arrow",this.next),this.next.onClick.add(this.nextPanel.bind(this)),this.prev=new h(this.find(".prev")[0]),e.addTo("mobile_left_arrow",this.prev),this.prev.onClick.add(this.prevPanel.bind(this)),this.onFilter=new g,this.onOverlay=new g,this.onSticker=new g,this.onText=new g,this.onComplete=new g,this.onReturn=new g,this.onUpdate=new g,this.fontID=0,this.fontLeft=new h(this.find(".text.font .setting .left")),this.fontLeft.append(e.get("left_tick")),this.fontLeft.onClick.add(this.swapFont.bind(this,-1)),this.fontRight=new h(this.find(".text.font .setting .right")),this.fontRight.append(e.get("right_tick")),this.fontRight.onClick.add(this.swapFont.bind(this,1)),this.fonts=[],this.fontContainer=this.find(".font .items"),this.fontW=this.fontContainer[0].offsetWidth,j.isIOS&&this.find(".font .items").css({top:-4});var m=this[0].querySelectorAll(".font .items div");for(k=0,l=m.length;l>k;k++)f.set(m[k],{x:k*this.fontW}),this.fonts.push(new d(m[k]));this.currentFamily=this.fonts[this.fontID].attr("data-id"),this.setColour=this.setColour.bind(this),this.colours=[];var n,o,p,q=this[0].querySelectorAll(".text.colour .items > div");for(k=0,l=q.length;l>k;k++){if(n=new h(q[k]),o=n.attr("data-id"),o.indexOf(",")>-1){p=o.split(","),o="";for(var r=0,s=p.length;s>r;r++)o+=", #"+p[r]+" "+Math.round(r/(p.length-1)*100)+"%";n.css("background-image","linear-gradient(to bottom"+o+")")}else n.css("background-color","#"+n.attr("data-id"));n.onClick.add(this.setColour),this.colours.push(n)}this.setColour(this.colours[0]),this.filters=[];var t,u=this[0].querySelectorAll(".effect.filter .items > div");for(k=0,l=u.length;l>k;k++)t=new h(u[k]),t.onClick.add(this.setFilter.bind(this,t)),this.filters.push(t);this.setFilter(this.filters[0]),this.overlays=[];var v,w=this[0].querySelectorAll(".effect.overlay .items > div");for(k=0,l=w.length;l>k;k++)v=new h(w[k]),0==k&&v.find(".text").html(""),v.onClick.add(this.setOverlay.bind(this,v)),this.overlays.push(v);this.setOverlay(this.overlays[0]),this.stickers=[];var x,y=this[0].querySelectorAll(".effect.sticker .items .wrapper > div");for(k=0,l=y.length;l>k;k++)x=new h(y[k]),x.css({"background-image":"url("+x.attr("data-url")+")"}),x.on("tap",this.addSticker.bind(this,x)),this.stickers.push(x);this.scroll=new i(this.find(".effect.sticker .items")[0],{mouseWheel:!0,scrollbars:!1,scrollX:!0,scrollY:!1,click:!0,tap:!0}),this.find(".effect.sticker .items .wrapper").css({width:this.stickers.length*this.stickers[0][0].offsetWidth+20})},swapFont:function(a){this.fontID+=a,this.fontID>=this.fonts.length&&(this.fontID=0),this.fontID<0&&(this.fontID=this.fonts.length-1),f.to(this.fontContainer,.3,{autoAlpha:0});for(var b=0,c=this.fonts.length;c>b;b++)f.set(this.fonts[b],{x:(b-this.fontID)*this.fontW,delay:.3});f.to(this.fontContainer,.3,{autoAlpha:1,delay:.3}),this.currentFamily=this.fonts[this.fontID].attr("data-id"),this.updateTile()
},setColour:function(a){for(var b=0,c=this.colours.length;c>b;b++)this.colours[b]==a?this.colours[b].addClass("selected"):this.colours[b].removeClass("selected");this.currentColour=a.attr("data-id"),this.updateTile()},setFilter:function(a){for(var b=0;b<this.filters.length;b++)this.filters[b]==a?this.filters[b].addClass("selected"):this.filters[b].removeClass("selected");this.effectText.html(a.attr("data-name")),this.onFilter.dispatch(a.attr("data-id"))},setOverlay:function(a){for(var b=0;b<this.overlays.length;b++)this.overlays[b]==a?this.overlays[b].addClass("selected"):this.overlays[b].removeClass("selected");this.overlayText.html(a.attr("data-name")),this.onOverlay.dispatch(a.attr("data-id"))},addSticker:function(a){this.onSticker.dispatch(a.attr("data-url"))},updateTile:function(){this.tile&&(this.tile.setFontFamily(this.currentFamily),this.tile.setFill(this.currentColour),this.onUpdate.dispatch())},updateUI:function(){for(var a=0,b=this.fonts.length;b>a;a++)f.to(this.fonts[a],.5,{x:(a-this.fontID)*this.fontW,ease:Expo.easeInOut});for(a=0,b=this.colours.length;b>a;a++)if(this.colours[a].attr("data-id")==this.currentColour.replace("#","")){this.setColour(this.colours[a]);break}},setTile:function(a,b){this.tile=a,b?this.updateTile():(this.currentFamily=this.tile.getFontFamily(),this.currentColour=this.tile.getFill(),this.updateUI())},nextPanel:function(){this.currentPanel++,this.currentPanel>=this.panels.length?(this.currentPanel=this.panels.length-1,this.panels==this.submitPanels?this.onComplete.dispatch(this.submitPanels[0].hasClass("selected")):(f.to(this.effectPanel,.5,{autoAlpha:0}),this.onReturn.dispatch())):this.swapPanel()},toggleSelected:function(a){a.hasClass("selected")?a.removeClass("selected"):a.addClass("selected")},prevPanel:function(){this.currentPanel--,this.currentPanel<0?(this.currentPanel=0,this.onReturn.dispatch()):this.swapPanel()},swapPanel:function(a){a=a||.5;var b=-(this.currentPanel*this.size);f.to(this.effectPanel,.5,{autoAlpha:this.panels==this.effectPanels&&this.currentPanel<2?1:0}),this.panels==this.effectPanels&&(f.to(this.effectText,.5,{autoAlpha:0==this.currentPanel?1:0}),f.to(this.overlayText,.5,{autoAlpha:1==this.currentPanel?1:0}));for(var c=0,d=this.panels.length;d>c;c++)f.to(this.panels[c],a,{y:b,ease:Expo.easeInOut})},setActiveText:function(a,b){this.setTile(a,b),this.gotoText()},hidePanels:function(a){for(var b=0,c=a.length;c>b;b++)a[b].css({display:"none"})},showPanels:function(a){for(var b=0,c=a.length;c>b;b++)f.set(a[b],{y:0,display:""})},gotoText:function(){this.panels=this.textPanels,this.hidePanels(this.submitPanels),this.hidePanels(this.effectPanels),this.readyPanels()},gotoEffects:function(){this.panels=this.effectPanels,this.hidePanels(this.textPanels),this.hidePanels(this.submitPanels),this.readyPanels()},gotoSubmit:function(){this.panels=this.submitPanels,this.hidePanels(this.textPanels),this.hidePanels(this.effectPanels),this.readyPanels()},readyPanels:function(){this.showPanels(this.panels),this.currentPanel=0,this.swapPanel(0)},resize:function(){this.scroll.refresh()},destroy:function(){}})},{"../../assets/Icons":137,"../../settings":217,"../common/ButtonBase":146,gsap:41,iscroll:60,"js-oop":61,signals:93,"spooky-element":95}],178:[function(a,b){var c=a("js-oop"),d=a("spooky-element"),e=a("../../assets/Icons"),f=a("prepend-child"),g=a("signals").Signal,h=a("./SharePanelButton"),i=a("../common/SlotBorderButton"),j=a("../../util/share"),k=a("../../model");b.exports=new c({Extends:d,initialize:function(a){c.parent(this,a),this.onComplete=new g,this.onReturn=new g,f(this.find(".title")[0],e.get("share")),new i(this.find(".gallery")).onClick.add(this.onComplete.dispatch.bind(this.onComplete)),new i(this.find(".back")).onClick.add(this.onReturn.dispatch.bind(this.onReturn));var b;this.links=this.findAll(".networks > a");for(var d=0,j=this.links.length;j>d;d++)this.links[d]=new h(this.links[d]),b=this.links[d].attr("class"),e.addTo("copy"==b?"save":b,this.links[d]),"copy"==b&&(this.copyLink=this.links[d]),this.links[d].onClick.add(this.gotoShare.bind(this,this.links[d]))},updateShareID:function(a){this.shareID=a,this.copyLink.attr("href","download.php?id="+this.shareID)},gotoShare:function(a){var b,c=a.attr("class");switch(c){case"facebook":b=j.getFacebook(this.shareID);break;case"twitter":b=j.getTwitter(this.shareID,k.sharing.twitter);break;case"google":b=j.getGPlus(this.shareID)}ga("send","event","share","click",c),b&&j.open(b)},destroy:function(){}})},{"../../assets/Icons":137,"../../model":215,"../../util/share":225,"../common/SlotBorderButton":155,"./SharePanelButton":179,"js-oop":61,"prepend-child":80,signals:93,"spooky-element":95}],179:[function(a,b){var c=a("js-oop"),d=a("../common/ButtonBase"),e=a("gsap");b.exports=new c({Extends:d,intialize:function(a){c.parent(this,a),e.set(this,{opacity:.5})},_onOver:function(){e.to(this,.5,{opacity:1})},_onOut:function(){e.to(this,.5,{opacity:.5})}})},{"../common/ButtonBase":146,gsap:41,"js-oop":61}],180:[function(a,b){var c=a("js-oop"),d=a("spooky-element"),e=a("../../assets/Icons"),f=(a("gsap"),a("signals").Signal),g=a("../common/ButtonBase"),h=a("../../util/share"),i=a("../../model");b.exports=new c({Extends:d,initialize:function(b){c.parent(this,b),this.onReturn=new f,this.gallery=new g(this.find(".gallery")),this.gallery.onClick.add(function(){a("../").go("gallery")}),e.addTo("gallery",this.gallery),this.back=new g(this.find(".back")),this.back.onClick.add(this.onReturn.dispatch.bind(this));var d;this.links=this.findAll(".links > a");for(var h=0,i=this.links.length;i>h;h++)this.links[h]=new g(this.links[h]),d=this.links[h].attr("class"),e.addTo("copy"==d?"save":d,this.links[h]),"copy"==d?this.copyLink=this.links[h]:"whatsapp"==d?this.whatsappLink=this.links[h]:"line"==d&&(this.lineLink=this.links[h]),this.links[h].onClick.add(this.gotoShare.bind(this,this.links[h]))},updateShareID:function(a){this.shareID=a,this.copyLink.attr("href","download.php?id="+this.shareID),this.whatsappLink.attr("href","whatsapp://send?text="+encodeURIComponent(i.sharing.whatsapp.replace("[LINK]",h.getURL(this.shareID)))),this.lineLink.attr("href","line://msg/text/"+encodeURIComponent(i.sharing.line+h.getURL(this.shareID)))},gotoShare:function(a){var b,c=a.attr("class");switch(c){case"facebook":b=h.getFacebook(this.shareID);break;case"twitter":b=h.getTwitter(this.shareID,i.sharing.twitter);break;case"google":b=h.getGPlus(this.shareID)}ga("send","event","share","click",c),b&&h.open(b)},destroy:function(){}})},{"../":167,"../../assets/Icons":137,"../../model":215,"../../util/share":225,"../common/ButtonBase":146,gsap:41,"js-oop":61,signals:93,"spooky-element":95}],181:[function(a,b){var c=a("js-oop"),d=a("spooky-element"),e=a("../../assets/Icons"),f=a("gsap"),g=a("signals").Signal,h=a("../common/ButtonBase"),i=a("dom-event"),j=a("../common/SlotBorderButton"),k=a("../../settings");b.exports=new c({Extends:d,initialize:function(a,b){c.parent(this,a),this.divs=b,this.sizeMin=20,this.sizeMax=100;var l=k.isPhone||k.isTablet?"touchstart":"mousedown",m=k.isPhone||k.isTablet?"touchend":"mouseup",n=k.isPhone||k.isTablet?"touchmove":"mousemove";this.fontID=0,this.fontLeft=new h(this.find(".font .setting .left")),this.fontLeft.append(e.get("left_tick")),this.fontLeft.onClick.add(this.swapFont.bind(this,-1)),this.fontRight=new h(this.find(".font .setting .right")),this.fontRight.append(e.get("right_tick")),this.fontRight.onClick.add(this.swapFont.bind(this,1)),this.fonts=[],this.fontContainer=this.find(".font .items"),this.fontW=this.fontContainer[0].offsetWidth;for(var o=this[0].querySelectorAll(".font .items div"),p=o.length,q=0;p>q;q++)f.set(o[q],{x:q*this.fontW}),this.fonts.push(new d(o[q]));this.currentFamily=this.fonts[this.fontID].attr("data-id"),this.updateSize=this.updateSize.bind(this),this.size=60,this.sizeLeft=new h(this.find(".size .setting .left")),this.sizeLeft.on(l,this.swapSize.bind(this,-1)),this.sizeLeft.on(m,this.stopSize.bind(this)),this.sizeRight=new h(this.find(".size .setting .right")),this.sizeRight.on(l,this.swapSize.bind(this,1)),this.sizeRight.on(m,this.stopSize.bind(this)),this.slider=this.find(".size .setting .slider"),this.sizeTick=this.find(".size .setting .slider .track"),this.sizeW=this.slider[0].offsetWidth-this.sizeTick[0].offsetWidth,this.slider.on("click",this.clickSlider.bind(this)),this.sizeTick.on(l,this.followMouse.bind(this)),this.watchMouse=this.watchMouse.bind(this),this.stopFollow=this.stopFollow.bind(this),i(document,n,this.watchMouse),i(document,m,this.stopFollow),this.positionSizeSlider(),this.colours=[];var r,s,t,u=this[0].querySelectorAll(".colour .items > div");for(p=u.length,q=0;p>q;q++){if(r=new d(u[q]),s=r.attr("data-id"),s.indexOf(",")>-1){t=s.split(","),s="";for(var v=0,w=t.length;w>v;v++)s+=", #"+t[v]+" "+Math.round(v/(t.length-1)*100)+"%";r.css("background-image","linear-gradient(to bottom"+s+")")}else r.css("background-color","#"+r.attr("data-id"));r.on("click",this.setColour.bind(this,r)),this.colours.push(r)}this.setColour(this.colours[0]),this.sliderX=this.slider[0].getBoundingClientRect().left,this.onText=new g,this.onUpdate=new g,this.onComplete=new g,new j(this.find(".next")).onClick.add(this.onComplete.dispatch.bind(this.onComplete)),new j(this.find(".add")).onClick.add(this.addText.bind(this))},animateIn:function(a){for(var b=0,c=this.divs.length;c>b;b++)f.set(this.divs[b],{autoAlpha:0,y:20}),f.to(this.divs[b],.5,{autoAlpha:1,y:0,clearProps:"transform",ease:Expo.easeOut,delay:a+.1*b})},addText:function(){this.newText=!0,this.onText.dispatch()},setTile:function(a){this.tile=a,this.newText?this.updateTile():(this.size=this.tile.getFontSize(),this.currentFamily=this.tile.getFontFamily(),this.currentColour=this.tile.getFill(),this.updateUI()),this.newText=!1},updateTile:function(){this.tile&&(this.tile.setFontSize(this.size),this.tile.setFontFamily(this.currentFamily),this.tile.setFill(this.currentColour),this.onUpdate.dispatch())},updateUI:function(){this.positionSizeSlider();for(var a=this.fonts.length,b=0;a>b;b++)if(this.fonts[b].attr("data-id")==this.currentFamily){this.fontID=b;break}for(b=0;a>b;b++)f.to(this.fonts[b],.5,{x:(b-this.fontID)*this.fontW,ease:Expo.easeInOut});for(a=this.colours.length,b=0;a>b;b++)if(this.colours[b].attr("data-id")==this.currentColour.replace("#","")){this.setColour(this.colours[b]);break}},clickSlider:function(a){this.tracking||(this.size=a.offsetX/this.slider[0].offsetWidth*(this.sizeMax-this.sizeMin)+this.sizeMin,this.positionSizeSlider(),this.updateTile())},followMouse:function(){this.tracking=!0},watchMouse:function(a){if(this.tracking){var b=a.touches?a.touches[0].pageX:a.pageX,c=(b-this.sliderX)/this.slider[0].offsetWidth*(this.sizeMax-this.sizeMin)+this.sizeMin;this.size=Math.max(Math.min(c,this.sizeMax),this.sizeMin),this.positionSizeSlider(),this.updateTile()}},stopFollow:function(){setTimeout(function(){this.tracking=!1}.bind(this),10)},swapSize:function(a){this.sizeIncrement=a,this.sizeInterval=setInterval(this.updateSize,33)},positionSizeSlider:function(){f.set(this.sizeTick,{x:(this.size-this.sizeMin)/(this.sizeMax-this.sizeMin)*this.sizeW})},updateSize:function(){this.size+=this.sizeIncrement,this.size=Math.min(this.sizeMax,Math.max(this.sizeMin,this.size)),this.positionSizeSlider(),this.updateTile()},stopSize:function(){clearInterval(this.sizeInterval)},swapFont:function(a){this.fontID+=a,this.fontID>=this.fonts.length&&(this.fontID=0),this.fontID<0&&(this.fontID=this.fonts.length-1),f.to(this.fontContainer,.3,{autoAlpha:0});for(var b=0,c=this.fonts.length;c>b;b++)f.set(this.fonts[b],{x:(b-this.fontID)*this.fontW,delay:.3});f.to(this.fontContainer,.3,{autoAlpha:1,delay:.3}),this.currentFamily=this.fonts[this.fontID].attr("data-id"),this.updateTile()},setColour:function(a){for(var b=this.colours.length,c=0;b>c;c++)this.colours[c]==a?this.colours[c].addClass("selected"):this.colours[c].removeClass("selected");this.currentColour=a.attr("data-id"),this.updateTile()},destroy:function(){var a=(k.isPhone||k.isTablet?"touchstart":"mousedown",k.isPhone||k.isTablet?"touchend":"mouseup"),b=k.isPhone||k.isTablet?"touchmove":"mousemove";i.off(document,b,this.watchMouse),i.off(document,a,this.stopFollow)}})},{"../../assets/Icons":137,"../../settings":217,"../common/ButtonBase":146,"../common/SlotBorderButton":155,"dom-event":27,gsap:41,"js-oop":61,signals:93,"spooky-element":95}],182:[function(a,b){var c=a("js-oop"),d=(a("dom-event"),a("bad-words")),e=a("../../settings");b.exports=new c({Extends:fabric.IText,initialize:function(a){this.onTextSelected=a,c.parent(this,"Sakura",{top:100,left:100,fill:"#000",fontFamily:"sans-serif",fontSize:50}),this.lastLen=6,this.tileType="text",this.borderColor=this.cornerColor="#ffffff",this.centeredScaling=!0,this.checkTextArea=this.checkTextArea.bind(this),this.on("editing:entered",this.startTextEditing.bind(this)),this.on("editing:exited",this.stopTextEditing.bind(this))},setFill:function(a){if(a.indexOf(",")>-1){this.isGradient=a;for(var b={},d=a.split(","),e=0,f=d.length;f>e;e++)b[e/(d.length-1)]="#"+d[e];this.setGradient("fill",{x1:0,y1:0,x2:0,y2:this.height,colorStops:b})}else this.isGradient=void 0,c.parent(this,"#"+a)},getFill:function(){return this.isGradient?this.isGradient:c.parent(this)},checkText:function(){this.setText(d.clean(this.getText()))},startTextEditing:function(){this.selectAll(),fabric.util.addListener(this.hiddenTextarea,"input",this.checkTextArea),this.hiddenTextarea.style.bottom="",this.hiddenTextarea.style.top=this.top+60+"px",this.hiddenTextarea.focus()},onKeyPress:function(){},stopTextEditing:function(){fabric.util.removeListener(this.hiddenTextarea,"input",this.checkTextArea)},checkTextArea:function(){var a=this.hiddenTextarea.value;this.setText(a),e.isPhone||e.isTablet||(this.selectionStart=this.hiddenTextarea.selectionStart,this.selectionEnd=this.hiddenTextarea.selectionEnd,this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this}))},remove:function(){c.parent(this)}})},{"../../settings":217,"bad-words":2,"dom-event":27,"js-oop":61}],183:[function(a,b){var c,d,e=(a("map"),{}),f=null,g=new THREE.SceneLoader,h=function(){this.parseComplete=this.parseComplete.bind(this),this.loadComplete=this.loadComplete.bind(this),this.assetList=null};h.prototype={init:function(a,b){c=a,d=b,c.onComplete.addOnce(this.loadComplete);for(var e in d)"model"!=d[e].type&&c.add(d[e].path)},loadComplete:function(){var a,b,e=c.getContent("json/3d.json");for(var f in d)switch(b=d[f],a=c.getContent(b.path),b.type){case"model":a=e[b.path],g.parse(a,function(a){this.parseComplete(a,f,b.sceneID)}.bind(this),null);break;case"texture":var h=new THREE.Texture;h.image=a,h.needsUpdate=!0,this.set(f,h)}},parseComplete:function(a,b,c){var d=a.objects["default"]||a.objects[c];this.set(b,d)},set:function(a,b){e[a]=b},getTextures:function(){var a=[];for(var b in e)e[b]instanceof Image&&a.push(this.get(b));return a},get:function(a){var b=e[a];return b instanceof THREE.Texture?this.renderer&&(b.magFilter=THREE.LinearFilter,b.minFilter=THREE.LinearFilter,b.needsUpdate=!0):b=b.clone(),b||null},setContext:function(a){this.renderer=a}},b.exports={getInstance:function(){return f=f||new h}}},{map:64}],184:[function(a,b){var c=a("js-oop"),d=a("handlebars"),e=(a("signals"),a("extend-object"),a("spooky-element")),f=a("../../model"),g=a("../common/loader"),h=(a("../../assets/Icons"),a("gsap")),i=6,j=new c({Extends:e,initialize:function(){c.parent(this,d.compile('<div id="sv-intro-preloader">\r\n    <div class=\'cover-white\'></div>\r\n    <div class="intro-msg">\r\n    <div class="hills-bg">\r\n        <div class="center-wrap">\r\n            <div class=\'lockup\'>\r\n                <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 416.5 345.7" enable-background="new 0 0 416.5 345.7" xml:space="preserve">\r\n                    <g>\r\n                    	<g>\r\n\r\n                    			<linearGradient id="SVGID_1_" gradientUnits="userSpaceOnUse" x1="227.3905" y1="57.9328" x2="227.3905" y2="7.552359e-11" gradientTransform="matrix(1 0 0 1 -14.004 0)">\r\n                    			<stop  offset="0" style="stop-color:#7D6D29"/>\r\n                    			<stop  offset="1" style="stop-color:#D2B62A"/>\r\n                    		</linearGradient>\r\n                    		<path id=\'sv-intro-preloader-lux\' fill="url(#SVGID_1_)" d="M197,48c13.7,0,24.7-5.6,24.7-24.5l0-23.5l-10,0v23.5c0,13.7-6.6,20.4-14.7,20.4\r\n                    			c-8.1,0-14.6-6.6-14.6-20.3V0h-10.1l0,23.6C172.3,42.5,183.4,48.1,197,48z M274.6,37.1L259,19.9L274.7,0l-11.2,0l-10.4,13.2\r\n                    			L241.1,0l-11.4,0l18,20l-7.1,9c-10,12.7-20.9,24.9-42.2,24.9c-26.3,0-34.7-10.7-52.3-10.7V0h-10v51.9c26.8-3,37.8,6,61.2,6\r\n                    			c30.2,0,48-20.7,56.4-31.3l9.4,10.4c1.1,1.2,2.2,2.5,3.3,3.5c0,0,9.3,10,15.4,12.2c2.7,0.9,5.7,1.4,8.8,0.8\r\n                    			C290.6,53.6,278,40.9,274.6,37.1z"/>\r\n                    	</g>\r\n                    </g>\r\n                    <g>\r\n                    	<g>\r\n                    		<path fill="#FFADA8" d="M18.5,147.6c0,21,32.5,41.7,32.5,68.1V252c0,17.3-9.8,29-25.1,29C10,281.1,0,269.8,0,252v-32.5h18.5V253\r\n                    			c0,5.6,1.5,10,7.3,10c5.4,0,6.6-4.6,6.6-10v-30c0-28.5-32.5-46.1-32.5-73.2v-29.5c0-17.3,9.8-29,25.4-29s25.6,11.2,25.6,29v31.2\r\n                    			H32.5v-32.2c0-5.6-1.2-10-7.1-10c-5.6,0-6.8,4.6-6.8,10V147.6z"/>\r\n                    		<path fill="#FFADA8" d="M127.4,278.9h-20.3l-3.9-44.7H83.5l-3.9,44.7h-20L84,92.9h18.5L127.4,278.9z M85.2,216.4h16.3\r\n                    			c-3.2-30.5-6.3-62.7-8.3-83.5L85.2,216.4z"/>\r\n                    		<path fill="#FFADA8" d="M164.3,189.8l-7.3,18.1v71h-18.5V93.4h18.5v80.3l25.9-80.3h20.7l-27.3,69.8l28.3,115.7h-18.8L164.3,189.8z\r\n                    			"/>\r\n                    		<path fill="#FFADA8" d="M252.2,93.4h18.5V252c0,17.8-12.7,29-28.3,29s-27.3-11.7-27.3-29V93.4h18.5V253c0,5.4,3.4,10,9,10\r\n                    			s9.5-4.4,9.5-10V93.4z"/>\r\n                    		<path fill="#FFADA8" d="M310.4,202.5h-5.6v76.4h-18.5V93.4h24.9c15.9,0,28.3,8.8,28.3,31.2V171c0,14.9-5.4,23.4-13.4,27.8l14.9,80\r\n                    			h-18.5L310.4,202.5z M304.8,184.4h4.4c8.1,0,11.7-4.4,11.7-14.6v-43.7c0-10.5-3.7-14.9-11.7-14.9h-4.4V184.4z"/>\r\n                    		<path fill="#FFADA8" d="M416.5,278.9h-20.3l-3.9-44.7h-19.8l-3.9,44.7h-20l24.4-185.9h18.5L416.5,278.9z M374.3,216.4h16.3\r\n                    			c-3.2-30.5-6.3-62.7-8.3-83.5L374.3,216.4z"/>\r\n                    	</g>\r\n                    </g>\r\n                    <g>\r\n                    	<g>\r\n                    		<path fill="#FFADA8" d="M96.9,345.7v-28h8.8c6.6,0,13,4.2,13,14s-6.4,14-13,14H96.9z M102.1,340.9h1.9c2.4,0,4.4-0.5,6.3-1.8\r\n                    			c1.9-1.3,3.1-3.8,3.1-7.4s-1.2-6.1-3.1-7.4c-1.9-1.3-3.9-1.8-6.3-1.8h-1.9V340.9z"/>\r\n                    		<path fill="#FFADA8" d="M160,333.2l7.8,12.5H162l-7.5-12.1h-2.7v12.1h-5.2v-28h10.2c5.4,0,8.5,3.2,8.5,8\r\n                    			C165.2,329.4,163.4,332.2,160,333.2z M156.8,328.9c2.2,0,3.3-1,3.3-3.2s-1.1-3.2-3.3-3.2h-5v6.3H156.8z"/>\r\n                    		<path fill="#FFADA8" d="M194.5,317.7h17.3v4.8h-12.1v5.9h9.7v4.8h-9.7v7.7h12.5v4.8h-17.7V317.7z"/>\r\n                    		<path fill="#FFADA8" d="M256.1,345.7l-2-6.6h-8.9l-2,6.6h-5.6l9.5-28h5.2l9.5,28H256.1z M249.6,324.6l-3,9.7h5.9L249.6,324.6z"/>\r\n                    		<path fill="#FFADA8" d="M287.9,345.7v-28h5.8l6.6,17.5l6.6-17.5h5.8v28h-5.2v-17.3l-5.4,14.7h-3.8l-5.4-14.7v17.3H287.9z"/>\r\n                    	</g>\r\n                    </g>\r\n                    <linearGradient id="SVGID_2_" gradientUnits="userSpaceOnUse" x1="354.0005" y1="27.0875" x2="354.0005" y2="24.4208">\r\n                    	<stop  offset="0" style="stop-color:#7D6D29"/>\r\n                    	<stop  offset="1" style="stop-color:#D2B62A"/>\r\n                    </linearGradient>\r\n                    <rect x="303.2" y="24.4" fill="url(#SVGID_2_)" width="101.7" height="2.7"/>\r\n                    <linearGradient id="SVGID_3_" gradientUnits="userSpaceOnUse" x1="55.6672" y1="27.0875" x2="55.6672" y2="24.4208">\r\n                    	<stop  offset="0" style="stop-color:#7D6D29"/>\r\n                    	<stop  offset="1" style="stop-color:#D2B62A"/>\r\n                    </linearGradient>\r\n                    <rect x="4.8" y="24.4" fill="url(#SVGID_3_)" width="101.7" height="2.7"/>\r\n                </svg>\r\n\r\n\r\n\r\n            </div><br/>\r\n            <div class=\'blossom-loader\'>\r\n                <svg version="1.1" id="sv-intro-preloader-anim" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 89 84.8" style="enable-background:new 0 0 89 84.8;" xml:space="preserve">\r\n                    <defs><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" spreadMethod="pad"><stop offset="0%" stop-color="#ba9f34" stop-opacity="1"/><stop offset="100%" stop-color="#7f7242" stop-opacity="1"/></linearGradient></defs>\r\n                    <path d="M59.5,18L53,6.8c-0.1-0.2-0.2-0.3-0.3-0.5L49.7,1c-0.3-0.6-1-1-1.7-1s-1.4,0.4-1.7,1l-1.7,3l-1.7-3\r\n                        c-0.3-0.6-1-1-1.7-1s-1.4,0.4-1.7,1l-3,5.1c-0.1,0.1-0.3,0.3-0.3,0.4c-0.1,0.2-0.2,0.3-0.2,0.5l-6.4,11.1c-0.4,0.6-0.4,1.4,0,2\r\n                        l6.4,11.1c0,0.2,0.1,0.4,0.2,0.5l6.7,11.7c0.4,0.6,1,1,1.7,1c0.7,0,1.4-0.4,1.7-1l6.5-11.2c0.3-0.3,0.5-0.6,0.6-1l6.4-11.1\r\n                        c0.2-0.3,0.3-0.7,0.3-1C59.9,18.7,59.7,18.3,59.5,18z M44.2,8h0.2l0,0l0,0h0.2h5.5L44.5,18L38.6,8H44.2C44.2,8,44.2,8,44.2,8z\r\n                         M43.5,18.6H31.9l5.8-10.1L43.5,18.6z M43.6,19.6l-5.9,10.2l-5.9-10.2H43.6z M44.5,20.2l5.8,10.1H38.6L44.5,20.2z M45.4,19.6H57\r\n                        l-5.8,10.1L45.4,19.6z M45.3,18.6l5.9-10.2L57,18.6H45.3z M45.6,7l2.3-4.1L50.3,7H45.6z M38.6,7L41,2.9L43.3,7H38.6z M50.3,31.3\r\n                        l-5.9,10.2l-5.9-10.2H50.3z"/>\r\n                    <path d="M88.9,34.7c-0.2-0.7-0.8-1.2-1.5-1.3L84,32.6l2.3-2.6c0.5-0.5,0.6-1.3,0.4-2c-0.2-0.7-0.8-1.2-1.5-1.3l-5.8-1.2\r\n                        c-0.2-0.1-0.3-0.2-0.5-0.2c-0.2,0-0.4,0-0.6,0l-12.6-2.7c-0.7-0.1-1.4,0.1-1.9,0.6l-8.6,9.6c-0.2,0.1-0.3,0.2-0.4,0.4l-9,10\r\n                        c-0.5,0.5-0.6,1.3-0.4,2c0.2,0.7,0.8,1.2,1.5,1.3l12.7,2.7c0.2,0.1,0.3,0.2,0.5,0.2c0.2,0,0.4,0.1,0.6,0L73.3,52c0.1,0,0.2,0,0.4,0\r\n                        l0.1,0c0.6,0,1.1-0.3,1.5-0.7l13.3-14.7C89,36.1,89.1,35.4,88.9,34.7z M66.1,25.2l11.4,2.4l-7.8,8.6l-3.1-9.6L66.1,25.2z M57.1,35.2\r\n                        l10.7,2.3l0.7,0.1l-7.8,8.6L58,38L57.1,35.2z M70.6,36.9l7.8-8.6l3.5,10.8l0.1,0.3L70.6,36.9z M82.1,36.5l-0.6-1.9l4.6,1l-3.1,3.5\r\n                        L82.1,36.5z M80.8,32.5L79.3,28l4.6,1L80.8,32.5z M68.8,36.7l-10.7-2.3l-0.8-0.2l7.8-8.7L68.8,36.7z M56.2,35.4l1.3,4.1l2.3,7.1\r\n                        l-11.5-2.4L56.2,35.4z M61.6,46.9l7.8-8.6l3.6,11.1L61.6,46.9z M70.3,37.9l11.5,2.4L73.9,49l-3.2-9.9L70.3,37.9z"/>\r\n                    <path d="M74.9,78.2l-0.6-5.6c0-0.2,0-0.4,0-0.6c0-0.2-0.1-0.4-0.1-0.5l-1.3-12.8c-0.1-0.7-0.5-1.3-1.2-1.6L60,51.9\r\n                        c-0.1-0.1-0.3-0.2-0.5-0.3l-12.3-5.5c-0.6-0.3-1.4-0.2-2,0.2c-0.6,0.4-0.9,1.1-0.8,1.8L45.7,61c0,0.2,0,0.4,0,0.6\r\n                        c0,0.2,0.1,0.4,0.1,0.5l1.3,12.8c0.1,0.7,0.5,1.3,1.2,1.6l18.1,8.1c0.3,0.1,0.5,0.2,0.8,0.2l0.1,0l0.2,0c1-0.1,1.9-0.9,1.9-2\r\n                        c0-0.2,0-0.3-0.1-0.5L69,79.1l3.2,1.4c0.2,0.1,0.5,0.2,0.7,0.2l0,0l0.1,0c1.1,0,1.9-0.9,1.9-2C75,78.5,75,78.4,74.9,78.2z\r\n                         M49.6,73.7l-1.2-11.6L59,66.9l-1.1,0.8L49.6,73.7z M60.4,65.9l-1.2-11.7L69.9,59L60.4,65.9z M59.4,65.9l-10.6-4.7l9.4-6.8\r\n                        L59.4,65.9z M61.1,66.6l9.4-6.8l1.2,11.6L61.1,66.6z M53.2,56.7l-5,3.7L47,48.7l10.7,4.8L53.2,56.7z M59.7,67.6l1.2,11.7l-10.7-4.8\r\n                        L59.7,67.6z M63.1,79.6l3.2-2.3l0.5,4.7L62.5,80L63.1,79.6z M66.4,75.9C66.4,75.9,66.4,75.9,66.4,75.9l-4.5,3.3l-1.2-11.6l10.6,4.7\r\n                        l-2.7,1.9L66.4,75.9z M71.9,73.2l0.5,4.7l-4.3-1.9L71.9,73.2z"/>\r\n                    <path d="M44,46.4c-0.6-0.4-1.3-0.5-2-0.2l-11.8,5.3c-0.2,0-0.4,0.1-0.5,0.1c-0.2,0.1-0.3,0.2-0.5,0.3l-11.7,5.2\r\n                        c-0.7,0.3-1.1,0.9-1.2,1.6l-2.1,19.8c-0.1,0.7,0.2,1.4,0.8,1.8c0.6,0.4,1.3,0.5,2,0.2l3.2-1.4l-0.4,3.5c-0.1,0.7,0.2,1.4,0.8,1.8\r\n                        c0.3,0.2,0.8,0.4,1.2,0.4c0.3,0,0.6-0.1,0.8-0.2l5.4-2.4c0.2,0,0.4-0.1,0.6-0.2c0.2-0.1,0.3-0.2,0.5-0.3l11.7-5.2\r\n                        c0.7-0.3,1.1-0.9,1.2-1.6l1.3-12.8c0.1-0.2,0.1-0.4,0.1-0.5l1.4-13.4C44.9,47.5,44.6,46.8,44,46.4z M21,76l-4.3,1.9l0.5-4.7L21,76z\r\n                         M30.9,54.4l9.4,6.8l-10.6,4.7L30.9,54.4z M28.6,65.9L19.2,59l10.6-4.7L28.6,65.9z M28.4,67.7l-1.2,11.6l-9.4-6.8L28.4,67.7z\r\n                         M29.5,67.7l9.4,6.8l-10.6,4.7L29.5,67.7z M28.1,66.7l-10.7,4.8l1.2-11.7L28.1,66.7z M22.8,77.3l0.3,0.2l3.5,2.6L22.3,82L22.8,77.3z\r\n                         M30,66.9l10.7-4.8l-1.2,11.7L30,66.9z M31.5,53.6l10.7-4.8L41,60.4L31.5,53.6z"/>\r\n                    <path d="M43.1,43.3l-8.7-9.6c-0.1-0.2-0.2-0.3-0.3-0.5c-0.1-0.1-0.3-0.3-0.4-0.4l-8.6-9.6c-0.5-0.5-1.2-0.8-1.9-0.6\r\n                        L3.7,26.8C3,27,2.5,27.5,2.2,28.2s-0.1,1.4,0.4,2L5,32.7l-3.4,0.7c-0.7,0.1-1.3,0.7-1.5,1.3s-0.1,1.4,0.4,2l4,4.4\r\n                        c0.1,0.2,0.2,0.3,0.3,0.5c0.1,0.1,0.3,0.3,0.4,0.4l8.6,9.5c0.4,0.4,0.9,0.7,1.5,0.7c0.1,0,0.3,0,0.4,0l12.5-2.7l0.2,0\r\n                        c0.1,0,0.3,0,0.4,0L42,46.6c0.7-0.1,1.3-0.7,1.5-1.3S43.6,43.9,43.1,43.3z M20.2,36.7l3.6-11.1l7.8,8.6L20.2,36.7z M10.6,28.4\r\n                        l7.8,8.6L7,39.4l0.3-1L10.6,28.4z M28.2,46.3l-7.8-8.6l11.4-2.4l-0.5,1.6L28.2,46.3z M19.2,36.4l-7.8-8.7l11.5-2.4L19.2,36.4z\r\n                         M9.7,28.1l-1.5,4.5L5.1,29L9.7,28.1z M7.5,34.7l-1,3.2l-0.4,1.2l-3.1-3.5L7.5,34.7z M18.7,38.1l-3.6,11.1l-7.8-8.6L18.7,38.1z\r\n                         M19.7,38.3l7.8,8.7L16,49.4L19.7,38.3z M29.2,46.7l3-9.2l0.6-1.9l7.8,8.7L29.2,46.7z"/>\r\n                </svg>\r\n            </div>\r\n            <div class=\'title\'>{{{title}}}</div>\r\n            <div class=\'copy\'>{{{copy}}}</div>\r\n        </div>\r\n    </div>\r\n    </div>\r\n</div>\r\n')(f["sv-intro-preloader"])),this.loader=g.getInstance(this.find("#sv-intro-preloader-anim").view),this.parentReady=!1,this.childReady=!1,this.animIn()},destroy:function(){},animIn:function(){this.loader.start(),h.from(this.find(".lockup"),.5,{delay:0,opacity:0,y:20,ease:Expo.easeOut}),h.from(this.find(".blossom-loader"),.5,{delay:.1,opacity:0,y:20,ease:Expo.easeOut}),h.from(this.find(".title"),.5,{delay:.2,opacity:0,y:20,ease:Expo.easeOut}),h.from(this.find(".copy"),.5,{delay:.3,opacity:0,y:20,ease:Expo.easeOut}),h.delayedCall(i,function(){this.childReady=!0,this.aniOut()}.bind(this))},aniOut:function(a){if(a&&(this.onComplete=a,this.parentReady=!0),this.parentReady&&this.childReady){this.loader.stop(),h.to(this.find(".center-wrap"),.7,{delay:0,opacity:0,y:20,ease:Linear.easeNone});var b=this.find(".intro-msg");h.to(b,.5,{delay:.2,padding:0}),h.to(b,1.5,{delay:.7,alpha:0}),h.to(this.find(".hills-bg"),.5,{alph:0,delay:2.2}),h.to(this,1.5,{delay:2.7,alpha:0,onComplete:function(){this.remove()}.bind(this)}),h.delayedCall(1.8,this.onComplete)}}});b.exports=j},{"../../assets/Icons":137,"../../model":215,"../common/loader":157,"extend-object":32,gsap:41,handlebars:57,"js-oop":61,signals:93,"spooky-element":95}],185:[function(a,b){var c=a("dom-event"),d=a("dom-event").off,e=a("spooky-element"),f=a("../common/AssetLibAudio").getInstance(),g=function(a){this.tg=new e(a),this.timePrev=null,this.isMouseDown=!1,this.quantMult=2,this.soundInterval=25,this.soundStep=0,this.msPos2D=new THREE.Vector2,this.enabled=!0,this.init()};g.prototype={constructor:g,init:function(){this.msHnd=this.msHnd.bind(this)},enable:function(){this.enabled=!0,this.tg.on("mousemove",this.msHnd),this.tg.on("touchmove",this.msHnd),c(document,"mousedown",this.clickDragHnd),c(document,"mouseup",this.clickDragHnd)},disable:function(){this.enabled=!1,this.tg.off("mousemove",this.msHnd),this.tg.off("touchmove",this.msHnd),d(document,"mousedown",this.clickDragHnd),d(document,"mouseup",this.clickDragHnd)},clickDragHnd:function(a){this.isMouseDown="mousedown"==a.type},msHnd:function(a){if(a.preventDefault(),!this.isMouseDown&&this.enabled){var b=Date.now();if(this.msPos2D.set((a.touches||a.changedTouches||[a])[0].clientX,(a.touches||a.changedTouches||[a])[0].clientY),this.msPos2DPrev){var c=Math.abs(Math.round(this.msPos2D.distanceTo(this.msPos2DPrev)/(this.timePrev-b)*this.quantMult));if(this.soundStep++,this.soundStep>Math.max(this.soundInterval-c,0)){this.soundStep=0;var d=f.getRandomKoto();d&&d.play()}}this.timePrev=b,this.msPos2DPrev=this.msPos2D.clone()}}},b.exports=g},{"../common/AssetLibAudio":145,"dom-event":27,"spooky-element":95}],186:[function(a,b){var c=(a("detect-dom-ready"),a("dat-gui")),d={};d.instance=new c.GUI,d.destroy=function(){d.instance.destroy(),d.instance=new c.GUI},b.exports=d},{"dat-gui":16,"detect-dom-ready":20}],187:[function(a,b){var c=a("js-oop"),d=a("../../common/ButtonBase"),e=a("gsap");b.exports=new c({Extends:d,initialize:function(a){c.parent(this,a),this.thumb=this.find(".thumb"),this.label=this.find(".label"),this.title=this.find(".landmark"),this.subtitle=this.find(".location")},setup:function(){e.set([this.title,this.subtitle],{y:20,autoAlpha:0}),this.thumbSize=this.thumb.getHeight(),e.set(this.thumb,{height:0}),this.size=this.getHeight(),e.set(this,{height:0,y:.5*this.size})},animateIn:function(a){this.setup(),e.to(this,.5,{height:this.size,y:0,clearProps:"transform",delay:a,ease:Expo.easeOut}),e.to(this.thumb,.5,{height:this.thumbSize,ease:Expo.easeOut,delay:a+.5}),e.to(this.title,.5,{y:0,autoAlpha:1,delay:a+1,clearProps:"transform",ease:Expo.easeOut}),e.to(this.subtitle,.5,{y:0,autoAlpha:1,delay:a+1.2,clearProps:"transform",ease:Expo.easeOut})},animateOut:function(){},_onOver:function(a){c.parent(this,a),e.to(this.thumb,.5,{height:this.thumbSize-20,ease:Expo.easeOut}),e.to(this.label,.5,{y:-10,ease:Expo.easeOut})},_onOut:function(a){c.parent(this,a),e.to(this.thumb,.5,{height:this.thumbSize,ease:Expo.easeOut}),e.to(this.label,.5,{y:0,clearProps:"transform",ease:Expo.easeOut})}})},{"../../common/ButtonBase":146,gsap:41,"js-oop":61}],188:[function(a,b){var c=a("js-oop"),d=a("spooky-element"),e=a("extend-object"),f=a("handlebars"),g=a("signals"),h=(a("lodash"),a("../../../assets/Icons")),i=a("dom-event"),j=i.off,k=a("gsap"),l=a("./IdleLandmarkButton");b.exports=new c({Extends:d,initialize:function(b){c.parent(this,f.compile("<div class='idle-tip idle-tip-landmark'>\r\n    <div class=\"center-block\">\r\n        <div class='glow-background'></div>\r\n        <span class='icon'></span>\r\n        <span class='head'>{{head}}</span>\r\n{{#each landmarks}}<button class='landmark-button' data-lng=\"{{lng}}\" data-lat=\"{{lat}}\" data-location=\"{{location}}\" data-landmark=\"{{landmark}}\" data-pitch=\"{{pitch}}\" data-heading=\"{{heading}}\"><div class=\"{{thumbnail}} thumb\"></div><div class='label'><span class='landmark'>{{name}}</span><span class='location'>{{location}}</span></div></button>{{/each}}\r\n        <br/>\r\n        <div class='close-wrap'>\r\n            <button class='close'>{{close}}</button>\r\n        </div>\r\n    </div>\r\n</div>\r\n")(e(b,a("../../../model")["interaction-landmark"]))),this.clickHnd=this.clickHnd.bind(this),this.onClose=new g,this.onSelect=new g,this.icon=this.find(".icon"),this.icon.append(h.get("landmark")),this.title=this.find(".head"),this.close=this.find(".close"),this.landmarks=[];for(var d=this[0].querySelectorAll(".landmark-button"),j=0,m=d.length;m>j;j++)this.landmarks[j]=new l(d[j]),this.landmarks[j].onClick.add(this.clickHnd.bind(this));k.set(this,{autoAlpha:0}),i(document,"click",this.onClose.dispatch),this.close.on("click",this.onClose.dispatch)
},aniIn:function(a){k.set(this.icon,{scaleX:0,scaleY:0}),k.set([this.title,this.close],{autoAlpha:0,y:20}),k.to(this,.5,{autoAlpha:1});for(var a=a,b=0,c=this.landmarks.length;c>b;b++)this.landmarks[b].animateIn(a+=.1);k.to(this.icon,.5,{scaleX:1,scaleY:1,clearProps:"transform",ease:Expo.easeOut,delay:a+=.5}),k.to(this.title,.5,{autoAlpha:1,y:0,clearProps:"transform",ease:Expo.easeOut,delay:a+=.1}),k.to(this.close,.5,{autoAlpha:1,y:0,clearProps:"transform",ease:Expo.easeOut,delay:a+=.1})},clickHnd:function(a){a.event.preventDefault(),this.onSelect.dispatch({lat:a.attr("data-lat"),lng:a.attr("data-lng"),location:a.attr("data-location"),landmark:a.attr("data-landmark"),pitch:a.attr("data-pitch"),heading:a.attr("data-heading")})},aniOut:function(){j(document,"click",this.onClose.dispatch),this.close.off("click",this.onClose.dispatch),k.to([this.icon,this.title,this.close],.5,{y:20,autoAlpha:0,ease:Expo.easeIn}),k.to(this.landmarks,.5,{y:20,autoAlpha:0,ease:Expo.easeIn}),k.to(this,.5,{autoAlpha:0,delay:.2,onComplete:function(){this.remove()}.bind(this)})}})},{"../../../assets/Icons":137,"../../../model":215,"./IdleLandmarkButton":187,"dom-event":27,"extend-object":32,gsap:41,handlebars:57,"js-oop":61,lodash:63,signals:93,"spooky-element":95}],189:[function(a,b){var c=a("js-oop"),d=a("signals"),e=window.performance||Date,f=a("raf"),g=a("dom-event"),h=g.off,i=new c({initialize:function(a){this.rafID=null,this.intervals={},this.start=this.start.bind(this);for(var b in a){var c=a[b].toString(),e=this[b]=new d;this.intervals[c]={startTime:null,signal:e}}},start:function(){var a=e.now();for(var b in this.intervals)this.intervals[b].startTime=a;h(document,"mousemove",this.start),g(document,"mousemove",this.start),h(document,"touchmove",this.start),g(document,"touchmove",this.start),this.rafID||this.tick()},tick:function(){var a=e.now();for(var b in this.intervals)a-this.intervals[b].startTime>Number(b)&&(this.intervals[b].signal.dispatch(),this.intervals[b].startTime=a);this.rafID=f(this.tick.bind(this))},stop:function(){this.rafID&&(f.cancel(this.rafID),this.rafID=null,h(document,"mousemove",this.start),h(document,"touchmove",this.start))}});b.exports=i},{"dom-event":27,"js-oop":61,raf:90,signals:93}],190:[function(a,b){var c=a("js-oop"),d=a("spooky-element"),e=a("handlebars"),f=a("../../../assets/Icons"),g=a("dom-event"),h=g.off,i=a("gsap"),j=a("signals");b.exports=new c({Extends:d,initialize:function(){c.parent(this,e.compile("<div class='idle-tip idle-tip-interaction'>\r\n    <div class=\"center-block\">\r\n        <div class='glow-background'></div>\r\n        <span class='icon'></span>\r\n        <span class='head'>{{head}}</span>\r\n        <span class='sub'>{{{sub}}}</span>\r\n    </div>\r\n</div>\r\n")(a("../../../model")["interaction-tip"])),this.onClose=new j,this.aniIn=this.aniIn.bind(this),this.aniOut=this.aniOut.bind(this),this.icon=this.find(".icon"),this.icon.append(f.get("swipe_wind")),this.title=this.find(".head"),this.subtitle=this.find(".sub"),i.set(this,{autoAlpha:0})},aniIn:function(){i.set(this.icon,{scaleX:0,scaleY:0}),i.set([this.title,this.subtitle],{autoAlpha:0,y:20}),g(document,"click",this.onClose.dispatch),g(document,"touchstart",this.onClose.dispatch),i.to(this,.5,{autoAlpha:1}),i.to(this.icon,.5,{scaleX:1,scaleY:1,clearProps:"transform",ease:Expo.easeOut,delay:.4}),i.to(this.title,.5,{autoAlpha:1,y:0,clearProps:"transform",ease:Expo.easeOut,delay:.5}),i.to(this.subtitle,.5,{autoAlpha:1,y:0,clearProps:"transform",ease:Expo.easeOut,delay:.6})},aniOut:function(){h(document,"click",this.onClose.dispatch),h(document,"touchstart",this.onClose.dispatch),i.to([this.icon,this.title,this.subtitle],.5,{y:20,autoAlpha:0,ease:Expo.easeIn}),i.to(this,.5,{autoAlpha:0,delay:.2,onComplete:function(){this.remove()}.bind(this)})}})},{"../../../assets/Icons":137,"../../../model":215,"dom-event":27,gsap:41,handlebars:57,"js-oop":61,signals:93,"spooky-element":95}],191:[function(a,b){var c=a("extend-object"),d=(a("gsap"),a("../AssetLib3D").getInstance()),e=(a("../../../settings"),a("dom-event")),f=(e.off,THREE.Object3D),g=function(){THREE.Object3D.call(this),this.init()};g.prototype=c(Object.create(f.prototype),{constructor:g,init:function(){this.groundTex=[d.get("ground-coverA")];var a=0,b=THREE.MeshPhongMaterial,c=7200,e=16e3,f=1.5*e,g=this.floor=new THREE.Mesh(new THREE.PlaneBufferGeometry(c,e),new b({map:this.groundTex[0],transparent:!0,side:THREE.FrontSide,fog:!1,color:a,emissive:0,specular:0,shininess:6}));g.material.map.wrapS=THREE.RepeatWrapping,g.material.map.wrapT=THREE.RepeatWrapping,g.material.map.repeat.set(1,2.5),g.material.map.needsUpdate=!0,g.material.needsUpdate=!0,g.castShadow=!1,g.receiveShadow=!0,g.renderDepth=1;var h=this.fadeLeft=new THREE.Mesh(new THREE.PlaneBufferGeometry(c,f),new b({map:d.get("ground-coverA-fade"),transparent:!0,side:THREE.FrontSide,fog:!1,color:a,emissive:0,specular:0,shininess:6})),i=this.fadeRight=new THREE.Mesh(new THREE.PlaneBufferGeometry(c,f),new b({map:d.get("ground-coverA-fade").clone(),transparent:!0,side:THREE.BackSide,fog:!1,color:a,emissive:0,specular:0,shininess:6}));i.material.map.needsUpdate=!0,i.position.x=.5*e+.5*f,h.position.x=-i.position.x;for(var j=[g,i,h],k=0;k<j.length;k++){var l=j[k];l.position.setY(-1e3),l.rotateX(.5*Math.PI),l.rotateY(Math.PI),l.rotateZ(.5*Math.PI),this.add(l)}i.rotateZ(Math.PI),i.rotateY(Math.PI)}}),b.exports=g},{"../../../settings":217,"../AssetLib3D":183,"dom-event":27,"extend-object":32,gsap:41}],192:[function(a,b){var c=a("extend-object"),d=a("gsap"),e=a("../AssetLib3D").getInstance(),f=a("../../../settings"),g=THREE.Object3D,h=function(){THREE.Object3D.call(this),this.hit=new THREE.Mesh(new THREE.BoxGeometry(200,50,200),new THREE.MeshBasicMaterial({color:16711765,transparent:!0,opacity:0,depthTest:!1,depthWrite:!1})),this.hit.scale.set(3.75,2,3),this.hit.position.z=-200,this.hit.visible=!1,this.add(this.hit);var a=!(f.isPhone||f.isTablet),b=this.arrow=e.get("link-arrow");b.material=new THREE.MeshPhongMaterial({map:e.get("tex-arrow-diff"),normalMap:a?e.get("tex-arrow-normal"):null,specularMap:a?e.get("tex-arrow-spec"):null,fog:!f.isAndroid}),b.scale.set(4,4,4),b.rotateY(.5*Math.PI),this.add(b);var c=this.shadow=new THREE.Mesh(new THREE.PlaneBufferGeometry(750,750),new THREE.MeshBasicMaterial({map:e.get("tex-arrow-shadow"),blending:THREE.MultiplyBlending,side:THREE.DoubleSide,transparent:!0,fog:!1}));c.rotateX(-.5*Math.PI),c.position.set(0,-100,0),this.add(c),this.scale.set(.5,.5,.5),this.baseColor=new THREE.Color(16711765),this.roColor=new THREE.Color(14245211),this.roPercent=0};h.prototype=c(Object.create(g.prototype),{constructor:h,rollover:function(){d.set([this.shadow.position,this.arrow.position],{z:0}),d.to([this.shadow.position,this.arrow.position],.5,{overwrite:1,z:-50,repeat:-1,yoyo:!0,ease:Sine.easeOut})},rollout:function(){d.to([this.shadow.position,this.arrow.position],.5,{overwrite:1,z:0})}}),b.exports=h},{"../../../settings":217,"../AssetLib3D":183,"extend-object":32,gsap:41}],193:[function(a,b){var c=a("extend-object"),d=a("../AssetLib3D").getInstance(),e=a("../../../settings"),f=function(a){THREE.Object3D.apply(this,arguments),this.collection=a,this.emitterPos=new THREE.Vector3,this.emitterVel=new THREE.Vector3(9.5,4.5,9.5),this.fps=1/30,this.timeout=.25,this.timeout+=.1*Math.random(),this.particlesPerEmission=10,this.t=Math.random(),this.scale.multiplyScalar(100),this.TYPE_ID=this.TYPE_ID||"treeE5",this.init()};f.prototype=c(Object.create(THREE.Object3D.prototype),{constructor:f,init:function(){var a=this.TYPE_ID,b=e.isDegradedMaterials?THREE.MeshBasicMaterial:THREE.MeshPhongMaterial,c=this.planter=d.get("planter"),f=this.trunk=d.get(a+"-trunk"),g=this.branches=d.get(a+"-branches"),h=this.branchA=d.get(a+"-shot2"),i=this.blossomA=d.get(a+"-blossomA"),j=this.blossomB=d.get(a+"-blossomB"),k=this.petals=d.get(a+"-petals"),l=this.shadow=new THREE.Mesh(new THREE.PlaneBufferGeometry(15,15),new THREE.MeshBasicMaterial({map:d.get("tex-tree-shadow"),side:THREE.DoubleSide,transparent:!0,fog:!1,blending:THREE.MultiplyBlending,depthTest:!1,depthWrite:!1}));l.rotateX(.5*Math.PI),l.rotateZ(2*Math.random()*Math.PI),l.renderDepth=0,l.material.map.minFilter=THREE.NearestFilter,l.material.map.needsUpdate=!0,l.scale.set(2.6,2.6,2.6),l.position.set(0,.5,-1.5);var m=!(e.isPhone||e.isTablet);c.material=new THREE.MeshPhongMaterial({map:d.get("tex-planter-diff"),normalMap:m?d.get("tex-planter-normal"):null,specularMap:m?d.get("tex-planter-spec"):null,color:6710886,fog:!e.isAndroid}),c.scale.multiplyScalar(.8),f.material=new THREE.MeshPhongMaterial({map:d.get("tex-trunk-diff"),normalMap:m?d.get("tex-trunk-normal"):null,specularMap:m?d.get("tex-trunk-spec"):null,shininess:20,specular:2236962,color:8947848,side:THREE.DoubleSide,fog:!1}),f.material.map.minFilter=THREE.LinearMipMapLinearFilter,f.material.map.magFilter=THREE.LinearFilter,f.material.map.needsUpdate=!0,f.material.map.wrapT=f.material.map.wrapS=THREE.RepeatWrapping,f.material.map.repeat.set(1,.5),f.material.normalMap&&(f.material.normalMap.wrapT=f.material.normalMap.wrapS=f.material.specularMap.wrapT=f.material.specularMap.wrapS=THREE.RepeatWrapping,f.material.normalMap.repeat.set(1,.5),f.material.specularMap.repeat.set(1,.5)),f.material.needsUpdate=!0,g.material=new b({map:d.get("tex-branch-diff"),side:THREE.DoubleSide,transparent:!0,fog:!e.isAndroid}),g.material.map.minFilter=THREE.LinearMipMapLinearFilter,g.material.map.magFilter=THREE.LinearFilter,g.material.map.needsUpdate=!0;var n={map:d.get("tex-blossom-1-v2-diff"),side:THREE.DoubleSide,transparent:!0,color:0,emissive:16777215,specular:0,shininess:0,alphaTest:.5,fog:!e.isAndroid};e.isDegradedMaterials&&(n.color=16777215),n.map=d.get("tex-branchA-diff"),n.map.minFilter=THREE.LinearMipMapLinearFilter,n.map.magFilter=THREE.LinearFilter,n.map.needsUpdate=!0,h.material=new b(n),n.map=d.get("tex-blossom-1-v2-diff"),n.map.minFilter=THREE.LinearMipMapLinearFilter,n.map.magFilter=THREE.LinearFilter,n.map.needsUpdate=!0,i.material=new b(n),n.map=d.get("tex-blossom-2-v2-diff"),n.map.minFilter=THREE.LinearMipMapLinearFilter,n.map.magFilter=THREE.LinearFilter,n.map.needsUpdate=!0,j.material=new b(n),n.map=d.get("tex-treeE-petal"),n.map.minFilter=THREE.LinearMipMapLinearFilter,n.map.magFilter=THREE.LinearFilter,n.map.needsUpdate=!0,k.material=new b(n),e.isPhone||e.isTablet||(f.castShadow=!0,f.receiveShadow=!0,i.castShadow=!0,i.receiveShadow=!0,j.castShadow=!0,j.receiveShadow=!0,k.castShadow=!0,k.receiveShadow=!0),this.add(c),this.add(f),this.add(g),this.add(h),this.add(i),this.add(j),this.add(k),this.add(l)},setBlossomColor:function(a,b){for(var c=["branchA","blossomA","blossomB","petals","petalsB"],d=0;d<c.length;d++)this[c[d]]&&this[c[d]].material[a]&&this[c[d]].material[a].setHex(b)},step:function(a){this.t+=this.fps;var b=this.branches.geometry.vertices,c=a?1:this.particlesPerEmission;if(this.t>this.timeout||a){this.t=0;for(var d,e=this.emitterPos,f=this.emitterVel,g=0;c>g;g++)d=Math.round(Math.random()*(b.length-1)),e.copy(b[d]),e.applyMatrix4(this.matrix),this.collection.setOnAvailParticle({pX:e.x+50*Math.random()-25,pY:e.y,pZ:e.z+50*Math.random()-25,vX:Math.random()*f.x-.5*f.x,vY:Math.random()*-f.y-.7,vZ:Math.random()*f.z-.5*f.z})}}}),b.exports=f},{"../../../settings":217,"../AssetLib3D":183,"extend-object":32}],194:[function(a,b){var c=a("extend-object"),d=a("../AssetLib3D").getInstance(),e=a("../../../settings"),f=a("./TreeE5"),g=f.prototype,h=function(){this.TYPE_ID="treeE6",f.apply(this,arguments)};h.prototype=c(Object.create(g),{constructor:h,init:function(){g.init.apply(this);var a=e.isDegradedMaterials?THREE.MeshBasicMaterial:THREE.MeshPhongMaterial,b=this.petalsB=d.get("treeE6-petals-B");b.material=new a({map:d.get("tex-treeE-petal2"),side:THREE.DoubleSide,transparent:!0,color:0,emissive:16777215,specular:0,shininess:0,fog:!e.isAndroid}),b.material.map.minFilter=THREE.LinearMipMapLinearFilter,b.material.map.magFilter=THREE.LinearFilter,b.material.map.needsUpdate=!0,e.isDegradedMaterials&&b.material.color.setHex(16777215),this.add(b)}}),b.exports=h},{"../../../settings":217,"../AssetLib3D":183,"./TreeE5":193,"extend-object":32}],195:[function(a,b){var c=a("extend-object"),d=(a("../AssetLib3D").getInstance(),a("../../../settings"),a("./TreeE5")),e=d.prototype,f=function(){this.TYPE_ID="treeE8",d.apply(this,arguments)};f.prototype=c(Object.create(e),{constructor:f,init:function(){e.init.apply(this)}}),b.exports=f},{"../../../settings":217,"../AssetLib3D":183,"./TreeE5":193,"extend-object":32}],196:[function(a,b){var c=a("../dat"),d=function(a){this.timeoutid=null,this.position=new THREE.Vector3,this.velX=9.5,this.velY=4.5,this.velZ=9.5,this.collection=a,this.fps=1/30,this.timeout=.25,this.particlesPerEmission=10,this.t=0,this.init()};d.prototype={constructor:d,init:function(){},start:function(){},stop:function(){},step:function(){if(this.t+=this.fps,this.t>this.timeout){this.t=0;for(var a=0;a<this.particlesPerEmission;a++)this.collection.setOnAvailParticle({pX:this.position.x+1600*Math.random()-800,pY:this.position.y,pZ:this.position.z+1600*Math.random()-800,vX:Math.random()*this.velX-.5*this.velX,vY:Math.random()*-this.velY-.7,vZ:Math.random()*this.velZ-.5*this.velZ})}},setupDAT:function(){var a=c.instance.addFolder("Emitter");a.add(this,"velX",0,20),a.add(this,"velY",0,20),a.add(this,"velZ",0,20),a.add(this,"velZ",0,20),a.add(this,"timeout",1,1e3),a.add(this,"particlesPerEmission",1,1e3)}},b.exports=d},{"../dat":186}],197:[function(a,b){var c,d,e=a("../dat"),f=a("extend"),g=function(a,b){THREE.BufferGeometry.apply(this,arguments),c=a,d=b,this.init()};g.prototype=f(Object.create(THREE.BufferGeometry.prototype),{constructor:g,init:function(){for(var a,b=new Uint16Array(c),e=new Float32Array(c),f=new Float32Array(c),g=new Float32Array(3*c),h=new Float32Array(3*c),i=new Float32Array(c),j=new Float32Array(c),k=new Float32Array(3*c),l=new Float32Array(c),m=new Float32Array(3*c),n=new Float32Array(c),o=new Uint16Array(c),p=new Float32Array(c),q=new Float32Array(c),r=new Float32Array(c),s=new Float32Array(3*c),t=new Float32Array(c),u=new THREE.Color,v=0;c>v;v++)a=3*v,b[v]=0,e[v]=0,f[v]=.015*Math.random()+.03,g[a]=100*Math.random()-50,g[a+1]=1e4,g[a+2]=0,h[a]=0,h[a+1]=0,h[a+2]=0,i[v]=.4*Math.random()+.4,j[v]=.2*Math.random()+.7,k[a]=0,k[a+1]=0,k[a+2]=0,l[v]=.02*Math.random()+.01,m[a]=5*Math.random()+2.5,m[a+1]=.5*Math.random()+1,m[a+2]=5*Math.random()+2.5,n[v]=4*Math.round(Math.random()*(d-1))+.4,o[v]=Math.random(),r[v]=.3*Math.random(),q[v]=0,p[v]=Math.round(4*Math.random()),u.setHex(16777215),s[a]=u.r,s[a+1]=u.g,s[a+2]=u.b,t[v]=25;this.addAttribute("active",new THREE.BufferAttribute(b,1)),this.addAttribute("lifespan",new THREE.BufferAttribute(e,1)),this.addAttribute("lifespaninc",new THREE.BufferAttribute(f,1)),this.addAttribute("position",new THREE.BufferAttribute(g,3)),this.addAttribute("velocity",new THREE.BufferAttribute(h,3)),this.addAttribute("momentumMult",new THREE.BufferAttribute(j,1)),this.addAttribute("invmass",new THREE.BufferAttribute(i,1)),this.addAttribute("momentum",new THREE.BufferAttribute(k,3)),this.addAttribute("noisescale",new THREE.BufferAttribute(l,1)),this.addAttribute("noisevector",new THREE.BufferAttribute(m,3)),this.addAttribute("spriteid",new THREE.BufferAttribute(n,1)),this.addAttribute("frameoffset",new THREE.BufferAttribute(o,1)),this.addAttribute("currentframe",new THREE.BufferAttribute(p,1)),this.addAttribute("framerate",new THREE.BufferAttribute(r,1)),this.addAttribute("framefloored",new THREE.BufferAttribute(q,1)),this.addAttribute("customColor",new THREE.BufferAttribute(s,3)),this.addAttribute("customSize",new THREE.BufferAttribute(t,1)),this.computeBoundingBox(),this.attributes.active.array.indexOf=Array.prototype.indexOf},setColor:function(a){for(var b,d=new THREE.Color(a),e=this.attributes.customColor.array,f=0;c>f;f++)b=3*f,e[b]=d.r,e[b+1]=d.g,e[b+2]=d.b;this.attributes.customColor.needsUpdate=!0},setSize:function(a){for(var b=this.attributes.customSize.array,d=0;c>d;d++)b[d]=a;this.attributes.customSize.needsUpdate=!0},setOnAvailParticle:function(a){var b=this.attributes.active.array.indexOf(0);this.attributes.active.array[b]=1,this.attributes.position.array[3*b]=a.pX,this.attributes.position.array[3*b+1]=a.pY,this.attributes.position.array[3*b+2]=a.pZ,this.attributes.velocity.array[3*b]=a.vX,this.attributes.velocity.array[3*b+1]=a.vY,this.attributes.velocity.array[3*b+2]=a.vZ,1==b&&(this.attributes.position.array[3*b]=-100,this.attributes.position.array[3*b+1]=-700,this.attributes.position.array[3*b+2]=-100,this.attributes.velocity.array[3*b]=0,this.attributes.velocity.array[3*b+1]=0,this.attributes.velocity.array[3*b+2]=0),this.attributes.position.needsUpdate=!0},setupDat:function(){var a;a=e.instance.addFolder("Particle"),a.addColor({color:"#000000"},"color").onChange(function(a){a=Number("0x"+a.substr(1)),this.setColor(a)}.bind(this))}}),b.exports=g},{"../dat":186,extend:33}],198:[function(a,b){var c,d=a("extend"),e=a("../dat"),f=a("../AssetLib3D").getInstance(),g=(a("./Emitter"),a("./ParticleCollection")),h=a("simplex-noise"),i=(a("./Shaders"),a("./SakuraMaterial")),j=a("../../../settings"),k=j.isPhone||j.istablet?75:100,l=k*k,m=new THREE.Vector3(14,0,0),n=new THREE.Vector3,o=new THREE.Vector3,p=new THREE.Vector3,q=(new THREE.Vector3,new THREE.Vector3),r=new THREE.Vector3,s=new THREE.Vector3,t=new THREE.Vector3,u=65025,v=function(a,b){c=a,this.swipeforceType=b||v.FIELD,THREE.PointCloud.call(this),this.position.set(0,0,0),this.rotation.set(0,0,0),this.t=0,this.simplex=new h,this.dX=5.6,this.dY=1,this.dZ=5.3,this.windScaleX=2,this.windScaleY=0,this.windScaleZ=2,this.fieldEffectSize=6400,this.fieldConversionOffset=this.fieldEffectSize/2,this.fieldConversion=1/this.fieldEffectSize*512,this.floorY=-680,this.swipeAttr=null,this.step=this.stepField,this.init()};v.FIELD="FIELD",v.REPULSOR="REPULSOR",v.prototype=d(Object.create(THREE.PointCloud.prototype),{constructor:v,init:function(){this.sortParticles=!0,this.frustumCulled=!1,this.castShadow=!0;var a=this.petalSeq=[f.get("petal-A0"),f.get("petal-A1"),f.get("petal-A2"),f.get("petal-A3")];c>4&&a.push(f.get("petal-B0"),f.get("petal-B1"),f.get("petal-B2"),f.get("petal-B3")),c>8&&a.push(f.get("petal-C0"),f.get("petal-C1"),f.get("petal-C2"),f.get("petal-C3"));var b=a.length/8;this.geometry=new g(l,b),this.material=new i({textureLength:a.length}),this.material.size=40,this.material.uniforms.tMaps.value=a},stepField:function(){var a,b,c,d,e,f,g,h,i,j=this.geometry.attributes,k=j.active.array,w=j.position.array,x=j.momentum.array,y=j.velocity.array,z=j.noisevector.array,A=j.noisescale.array,B=j.currentframe.array,C=(j.framefloored.array,j.framerate.array),D=j.momentumMult.array,E=j.lifespan.array,F=j.lifespaninc.array,G=(j.spriteid.array,this.swipeAttr),H=this.simplex,I=this.floorY,J=this.fieldConversion,K=this.fieldConversionOffset,L={TL:new THREE.Vector2(-12800,-12800),TR:new THREE.Vector2(12800,-12800),BL:new THREE.Vector2(-12800,12800),BR:new THREE.Vector2(12800,12800)};G&&this.swipeforceType==v.FIELD?(b=G.fieldXZ,c=G.fieldXY,d=G.baseForce):G&&this.swipeforceType==v.REPULSOR&&(g=G.repulsors,d=G.baseForce),this.t+=.01;var M=this.t+.01,N=Math.sin(this.t)+Math.sin(.2*this.t),O=Math.sin(.1*M)+Math.sin(.3*M);m.set(this.windScaleX*N,this.windScaleY*N,this.windScaleZ*O);for(var P=l;P>0;P--)if(a=3*P,1==k[P]){if(f=B[P],n.fromArray(w,a),n.y>I&&(o.fromArray(y,a),e=H.noise2D(n.x*A[P],n.y*A[P]),q.fromArray(z,a),q.multiplyScalar(e),n.add(o),n.add(m),n.add(q),f+=C[P]),G&&this.swipeforceType==v.FIELD){var Q=~~(~~(n.x+K)*J),R=512-~~(~~(n.y+K)*J),S=~~(~~(n.z+K)*J),T=512*S+Q,U=512*R+Q,V=255&b[T],W=255&c[U];if(V&&W&&V>8&&W>8){f+=2*C[P];var X=V*W/u;r.copy(n),r.normalize(),r.multiplyScalar(X*d),n.add(r),q.normalize(),q.multiplyScalar(2),n.add(q),p.copy(r),E[P]=0}else p.fromArray(x,a),Math.abs(p.x)+Math.abs(p.z)>1&&(f+=C[P],n.add(p),n.add(q),p.multiplyScalar(D[P]),E[P]=0);n.y<I&&(n.y=I-10)}else if(G&&this.swipeforceType==v.REPULSOR){var Y=g.length;if(s.set(0,0,0),Y>0)for(var Z=0;Y>Z;Z++){h=g[Z];var $=n.distanceToSquared(h.position),_=Math.pow(h.radius,2);t.copy(n),t.sub(h.position),t.normalize();var ab=t.dot(h.dirVect);ab=ab>0,_>$&&ab&&(i=(1-$/_)*h.speed,r.subVectors(n,h.position),r.multiplyScalar(i),s.add(r),q.normalize(),q.multiplyScalar(.005*i),s.add(q))}s.length()>1?(n.add(s),p.copy(s),p.add(q),E[P]=0):(p.fromArray(x,a),Math.abs(p.x)+Math.abs(p.z)>1&&(f+=C[P],n.add(p),n.add(q),p.multiplyScalar(D[P]),E[P]=0)),n.y<I&&(n.y=I-10)}L.TL.x<n.x&&n.x<L.TR.x&&L.TL.y<n.z&&n.z<L.BL.y?n.y<=I&&(E[P]+=F[P],E[P]>60&&(k[P]=0,p.set(0,0,0),n.set(0,0,0))):(k[P]=0,p.set(0,0,0),n.set(0,0,0)),w[a]=n.x,w[a+1]=n.y,w[a+2]=n.z,x[a]=p.x,x[a+1]=p.y,x[a+2]=p.z,f>=4&&(f=0),B[P]=f}j.lifespan.needsUpdate=!0,j.currentframe.needsUpdate=!0,j.position.needsUpdate=!0,j.momentum.needsUpdate=!0,this.geometry.computeBoundingBox()},applySwipeForce:function(a){this.swipeAttr=a},setupDAT:function(){var a=e.instance.addFolder("System");a.add(this.position,"x",-500,500),a.add(this.position,"y",-500,500),a.add(this.position,"z",-500,500),a.add(this,"windScaleX",-500,500),a.add(this,"windScaleY",-500,500),a.add(this,"windScaleZ",-500,500),a.add(this,"floorY",-1600,1600)}}),b.exports=v},{"../../../settings":217,"../AssetLib3D":183,"../dat":186,"./Emitter":196,"./ParticleCollection":197,"./SakuraMaterial":200,"./Shaders":201,extend:33,"simplex-noise":94}],199:[function(a,b){var c=a("extend-object"),d=a("gsap"),e=a("signals"),f=a("../AssetLib3D").getInstance(),g=1200,h=function(a){THREE.Object3D.call(this),this.released=!1,this.radius=g,this.speed=0,this.dirVect=new THREE.Vector3,this.posTg=a.clone(),this.posLast=a.clone(),this.dirTg=new THREE.Vector3,this.onEnded=new e,this.setSpeed=this.setSpeed.bind(this),this.position.copy(a),this.init()};h.DEBUG=!0,h.MATERIAL=new THREE.MeshBasicMaterial({color:16711765,transparent:!0,opacity:.2,depthTest:!1,depthWrite:!1}),h.prototype=c(Object.create(THREE.Object3D.prototype),{constuctor:h,init:function(){if(h.DEBUG){var a=new THREE.Mesh(new THREE.SphereGeometry(g),h.MATERIAL);this.add(a);var b=new THREE.Mesh(new THREE.BoxGeometry(100,100),new THREE.MeshBasicMaterial({color:16711680,depthTest:!1,depthWrite:!1}));b.translateZ(g),this.add(b);var c=f.get("debug-arrow");c.children[0].material=new THREE.MeshBasicMaterial({color:48830,depthTest:!1,depthWrite:!1}),c.scale.multiplyScalar(1e3),c.rotateX(.5*Math.PI),this.add(c)}},step:function(){return this.released?void(this.step=this.empty):(d.to(this.position,.5,{overwrite:1,x:this.posTg.x,y:this.posTg.y,z:this.posTg.z,onUpdate:this.setSpeed,onComplete:this.setSpeed}),this.dirTg.copy(this.position),this.dirTg.add(this.dirVect),void this.lookAt(this.dirTg))},setSpeed:function(){var a=5e-6*this.posLast.distanceToSquared(this.position);this.speed=a,this.posLast.copy(this.position)},empty:function(){},momentum:function(){var a=Math.max(3*this.speed,1);d.to(this,2,{speed:.1}),d.to(this.position,4,{x:this.posTg.x,y:this.posTg.y,z:this.posTg.z,onComplete:this.onEnded.dispatch.bind(this,this)}),d.to(this,4,{radius:g*a}),h.DEBUG&&d.to(this.children[0].scale,4,{x:a,y:a,z:a})},release:function(){this.released=!0,this.dirVect.normalize(),this.dirVect.multiplyScalar(8e3*this.speed+100),this.dirVect.add(this.position),this.posTg.copy(this.dirVect),this.momentum()}}),b.exports=h},{"../AssetLib3D":183,"extend-object":32,gsap:41,signals:93}],200:[function(a,b){var c=a("extend-object"),d=a("./Shaders"),e=function(a){THREE.PointCloudMaterial.call(this),this.type="SakuraMaterial",this.size=25,this.transparent=!0,this.side=THREE.DoubleSide,this.textureLength=a.textureLength,this.depthWrite=!0,this.depthTest=!0,this.alphaTest=.1,this.attributes={currentframe:{type:"f",value:null},framefloored:{type:"f",value:null},spriteid:{type:"f",value:null},customColor:{type:"c",value:null},customSize:{type:"f",value:null},noisevector:{type:"v3",value:null},noisescale:{type:"f",value:null}},this.uniforms=c(THREE.UniformsUtils.clone(d.Particle.uniforms),{tMaps:{type:"tv",value:[]}}),this.vertexShader=d.Particle.vertexShader.replace(/{{textureLength}}/g,this.textureLength),this.fragmentShader=d.Particle.fragmentShader.replace(/{{textureLength}}/g,this.textureLength)};e.prototype=c(Object.create(THREE.PointCloudMaterial.prototype),{constructor:e}),THREE.SakuraMaterial=e,b.exports=e},{"./Shaders":201,"extend-object":32}],201:[function(a,b){["vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }","vec2 mod289(vec2 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }","vec3 permute(vec3 x) { return mod289(((x*34.0)+1.0)*x); }","float snoise(vec2 v) {","const vec4 C = vec4(0.211324865405187, 0.366025403784439, -0.577350269189626, 0.024390243902439);","vec2 i  = floor(v + dot(v, C.yy) );","vec2 x0 = v -   i + dot(i, C.xx); vec2 i1;","i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);","vec4 x12 = x0.xyxy + C.xxzz; x12.xy -= i1; i = mod289(i);","vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 )) + i.x + vec3(0.0, i1.x, 1.0 ));","vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0); m = m*m ; m = m*m ;","vec3 x = 2.0 * fract(p * C.www) - 1.0;","vec3 h = abs(x) - 0.5;","vec3 ox = floor(x + 0.5);","vec3 a0 = x - ox;","m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );","vec3 g; g.x  = a0.x  * x0.x  + h.x  * x0.y;","g.yz = a0.yz * x12.xz + h.yz * x12.yw;","return 130.0 * dot(m, g);","}"].join("\n");b.exports={ColorCorrectedBasic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.shadowmap]),vertexShader:[THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.skinbase_vertex,"	#ifdef USE_ENVMAP",THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"	#endif",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;","uniform vec3 powRGB;","uniform vec3 mulRGB;","uniform float brightness;","uniform float contrast;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = vec4( diffuse, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"   gl_FragColor.rgb = mulRGB * pow( gl_FragColor.rgb, powRGB );","gl_FragColor.rgb += brightness;","if (contrast > 0.0) {","gl_FragColor.rgb = (gl_FragColor.rgb - 0.5) / (1.0 - contrast) + 0.5;","} else {","gl_FragColor.rgb = (gl_FragColor.rgb - 0.5) * (1.0 + contrast) + 0.5;","}","}"].join("\n")},Particle:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.particle]),vertexShader:["attribute float spriteid;","attribute float currentframe;","attribute float framefloored;","attribute vec3 customColor;","attribute float customSize;","attribute vec3 noisevector;","attribute float noisescale;","uniform float size;","uniform float scale;","uniform sampler2D tMaps[{{textureLength}}];","varying float frame;","varying float vspriteid;","varying vec3 vColor;",THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {","   vColor = customColor;","   frame = currentframe;","   vspriteid = spriteid;",THREE.ShaderChunk.color_vertex,"	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","	#ifdef USE_SIZEATTENUATION","		gl_PointSize = size * ( scale / length( mvPosition.xyz ) );","	#else","		gl_PointSize = customSize;","	#endif","	gl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 psColor;","uniform float opacity;","uniform sampler2D tMaps[{{textureLength}}];","varying float frame;","varying float vspriteid;","varying vec3 vColor;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_particle_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","   int ix = int(floor(frame + vspriteid));","   gl_FragColor = vec4( psColor * vColor, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,"   for (int i=0; i<{{textureLength}}; i++) {","       if (i==ix) {","           gl_FragColor = gl_FragColor * texture2D( tMaps[i], vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );","           break;","       }","   }",THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.color_fragment,"}"].join("\n")},CopyOver:{uniforms:{tCopy:{type:"t",value:null},tDiffuse:{type:"t",value:null},opacity:{type:"f",value:1},overwrite:{type:"f",value:0}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform float overwrite;","uniform sampler2D tDiffuse;","uniform sampler2D tCopy;","varying vec2 vUv;","void main() {","vec4 new_texel = vec4(0,0,0,0);","vec4 under = texture2D( tDiffuse, vUv );","vec4 over = texture2D( tCopy, vUv );","if (overwrite == 0.) {","vec3 new_color = over.rgb*over.aaa + under.rgb*under.aaa*(1.0-over.a);","float new_alpha = over.a+under.a*(1.0-over.a);","new_texel = vec4(new_color, new_alpha);","} else {","new_texel = over;","};","gl_FragColor = new_texel;","}"].join("\n")},Combine:{uniforms:{tCopy:{type:"t",value:null},tDiffuse:{type:"t",value:null},opacity:{type:"f",value:1},overwrite:{type:"f",value:0}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform float overwrite;","uniform sampler2D tDiffuse;","uniform sampler2D tCopy;","varying vec2 vUv;","void main() {","vec4 new_texel = vec4(0,0,0,0);","vec4 under = texture2D( tDiffuse, vUv );","vec4 over = texture2D( tCopy, vUv );","if (overwrite == 0.) {","vec3 new_color = over.rgb*over.aaa + under.rgb*under.aaa*(1.0-over.a);","float new_alpha = over.a+under.a*(1.0-over.a);","new_texel = vec4(new_color, new_alpha);","} else {","new_texel = over;","};","gl_FragColor = new_texel;","}"].join("\n")},AlphaKEY:{uniforms:{tCopy:{type:"t",value:null},tDiffuse:{type:"t",value:null},opacity:{type:"f",value:1},overwrite:{type:"f",value:0}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform float overwrite;","uniform sampler2D tDiffuse;","uniform sampler2D tCopy;","varying vec2 vUv;","void main() {","vec4 new_texel = vec4(0,0,0,0);","vec4 under = texture2D( tDiffuse, vUv );","vec4 over = texture2D( tCopy, vUv );","vec4 KEY = vec4(0., 0., 0., 1.);","vec4 overFullAlpha = vec4(over.rgb, 1.);","if (overFullAlpha == KEY) {","new_texel = under;","} else {","vec3 new_color = over.rgb*over.aaa + under.rgb*under.aaa*(1.0-over.a);","float new_alpha = over.a+under.a*(1.0-over.a);","new_texel = vec4(new_color, new_alpha);","};","gl_FragColor = new_texel;","}"].join("\n")}},/*!
 * THREE.Extras.Shaders contains extra Fx shaders like godrays
 *
 * @author Thibaut 'BKcore' Despoulain <http://bkcore.com>
 *
 */
THREE=THREE||{},THREE.Extras=THREE.Extras||{},THREE.Extras.Shaders={Godrays:{uniforms:{tDiffuse:{type:"t",value:0,texture:null},fX:{type:"f",value:.5},fY:{type:"f",value:.5},fExposure:{type:"f",value:.6},fDecay:{type:"f",value:.93},fDensity:{type:"f",value:.96},fWeight:{type:"f",value:.4},fClamp:{type:"f",value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["varying vec2 vUv;","uniform sampler2D tDiffuse;","uniform float fX;","uniform float fY;","uniform float fExposure;","uniform float fDecay;","uniform float fDensity;","uniform float fWeight;","uniform float fClamp;","const int iSamples = 20;","void main()","{","vec2 deltaTextCoord = vec2(vUv - vec2(fX,fY));","deltaTextCoord *= 1.0 /  float(iSamples) * fDensity;","vec2 coord = vUv;","float illuminationDecay = 1.0;","vec4 FragColor = vec4(0.0);","for(int i=0; i < iSamples ; i++)","{","coord -= deltaTextCoord;","vec4 texel = texture2D(tDiffuse, coord);","texel *= illuminationDecay * fWeight;","FragColor += texel;","illuminationDecay *= fDecay;","}","FragColor *= fExposure;","FragColor = clamp(FragColor, 0.0, fClamp);","gl_FragColor = FragColor;","}"].join("\n")},Additive:{uniforms:{tDiffuse:{type:"t",value:0,texture:null},tAdd:{type:"t",value:1,texture:null},fCoeff:{type:"f",value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform sampler2D tAdd;","uniform float fCoeff;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","vec4 add = texture2D( tAdd, vUv );","gl_FragColor = texel + add * fCoeff;","}"].join("\n")}},THREE.CopyOverShader={uniforms:{tCopy:{type:"t",value:null},tDiffuse:{type:"t",value:null},opacity:{type:"f",value:1},overwrite:{type:"f",value:0}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform float overwrite;","uniform sampler2D tDiffuse;","uniform sampler2D tCopy;","varying vec2 vUv;","void main() {","vec4 new_texel = vec4(0,0,0,0);","vec4 under = texture2D( tDiffuse, vUv );","vec4 over = texture2D( tCopy, vUv );","if (overwrite == 0.) {","vec3 new_color = over.rgb*over.aaa + under.rgb*under.aaa*(1.0-over.a);","float new_alpha = over.a+under.a*(1.0-over.a);","new_texel = vec4(new_color, new_alpha);","} else {","new_texel = over;","};","gl_FragColor = new_texel;","}"].join("\n")},THREE.AlphaKEY={uniforms:{tCopy:{type:"t",value:null},tDiffuse:{type:"t",value:null},opacity:{type:"f",value:1},overwrite:{type:"f",value:0}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform float overwrite;","uniform sampler2D tDiffuse;","uniform sampler2D tCopy;","varying vec2 vUv;","void main() {","vec4 new_texel = vec4(0,0,0,0);","vec4 under = texture2D( tDiffuse, vUv );","vec4 over = texture2D( tCopy, vUv );","vec4 KEY = vec4(0., 0., 0., 1.);","vec4 overFullAlpha = vec4(over.rgb, 1.);","if (overFullAlpha == KEY) {","new_texel = under;","} else {","vec3 new_color = over.rgb*over.aaa + under.rgb*under.aaa*(1.0-over.a);","float new_alpha = over.a+under.a*(1.0-over.a);","new_texel = vec4(new_color, new_alpha);","};","gl_FragColor = new_texel;","}"].join("\n")},/*!
 * THREE.Extras.Shaders contains extra Fx shaders like godrays
 *
 * @author Thibaut 'BKcore' Despoulain <http://bkcore.com>
 *
 */
THREE=THREE||{},THREE.Extras=THREE.Extras||{},THREE.Extras.Shaders={Godrays:{uniforms:{tDiffuse:{type:"t",value:0,texture:null},fX:{type:"f",value:.5},fY:{type:"f",value:.5},fExposure:{type:"f",value:.6},fDecay:{type:"f",value:.93},fDensity:{type:"f",value:.96},fWeight:{type:"f",value:.4},fClamp:{type:"f",value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["varying vec2 vUv;","uniform sampler2D tDiffuse;","uniform float fX;","uniform float fY;","uniform float fExposure;","uniform float fDecay;","uniform float fDensity;","uniform float fWeight;","uniform float fClamp;","const int iSamples = 20;","void main()","{","vec2 deltaTextCoord = vec2(vUv - vec2(fX,fY));","deltaTextCoord *= 1.0 /  float(iSamples) * fDensity;","vec2 coord = vUv;","float illuminationDecay = 1.0;","vec4 FragColor = vec4(0.0);","for(int i=0; i < iSamples ; i++)","{","coord -= deltaTextCoord;","vec4 texel = texture2D(tDiffuse, coord);","texel *= illuminationDecay * fWeight;","FragColor += texel;","illuminationDecay *= fDecay;","}","FragColor *= fExposure;","FragColor = clamp(FragColor, 0.0, fClamp);","gl_FragColor = FragColor;","}"].join("\n")},Additive:{uniforms:{tDiffuse:{type:"t",value:0,texture:null},tAdd:{type:"t",value:1,texture:null},fCoeff:{type:"f",value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform sampler2D tAdd;","uniform float fCoeff;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","vec4 add = texture2D( tAdd, vUv );","gl_FragColor = texel + add * fCoeff;","}"].join("\n")}}},{}],202:[function(a,b){var c=a("js-oop"),d=a("dom-event"),e=a("signals").Signal,f=a("gsap"),g=.3;b.exports=new c({initialize:function(a){this.target=a||document,this.touchEnabled="ontouchstart"in this.target,this.onStart=new e,this.onMove=new e,this.onEnd=new e,this.onCancel=new e,this._start=this._start.bind(this),this._move=this._move.bind(this),this._end=this._end.bind(this),this._cancel=this._cancel.bind(this),this._mouseTimeout=this._mouseTimeout.bind(this),this.enable()},_start:function(a){this.touchEnabled||a.preventDefault();var b=a.touches[0]||a.changedTouches[0];this.onStart.dispatch(b.clientX,b.clientY)},_move:function(a){if(a.preventDefault(),this.touchEnabled){var b=a.touches[0]||a.changedTouches[0];this.onMove.dispatch(b.clientX,b.clientY)}else 0===this.positions.length?this.onStart.dispatch(a.clientX,a.clientY):this.onMove.dispatch(a.clientX,a.clientY),this.positions.push([a.clientX,a.clientY]),f.killDelayedCallsTo(this._mouseTimeout),f.delayedCall(g,this._mouseTimeout,[a])},_end:function(a){a.preventDefault(),a.stopPropagation();var b=a.touches[0]||a.changedTouches[0];this.onEnd.dispatch(b.clientX,b.clientY)},_cancel:function(){this.onCancel.dispatch()},_mouseTimeout:function(a){this.positions=[],this.onEnd.dispatch(a.clientX,a.clientY)},enable:function(){this.touchEnabled?(d(this.target,"touchstart",this._start),d(this.target,"touchmove",this._end),d(this.target,"touchend",this._move),d(this.target,"touchcancel",this._cancel)):(this.positions=[],d(this.target,"mousemove",this._move),d(this.target,"mouseout",this._cancel))},disable:function(){this.touchEnabled?(d.off(this.target,"touchstart",this._start),d.off(this.target,"touchmove",this._end),d.off(this.target,"touchend",this._move),d.off(this.target,"touchcancel",this._cancel)):(d.off(this.target,"mousemove",this._move),d.off(this.target,"mouseout",this._cancel))},destroy:function(){this.disable()}})},{"dom-event":27,gsap:41,"js-oop":61,signals:93}],203:[function(a,b){var c=a("../../../settings"),d=a("extend-object"),e=a("../dat"),f=(a("dom-event"),a("dom-event").off,a("spooky-element")),g=(a("gsap"),a("./Repulsor")),h=(a("../streetview/CameraController"),a("./SwipeControlNormalizer")),i=function(a,b,c){THREE.Object3D.call(this),this.camera=a,this.tg=new f(b),this.events=new h(b),this.ps=c,this.enabled=!0,this.baseForce=20,this.visible=!1,this.init()},j=(c.isPhone||c.isTablet?"touchstart":"mousedown",c.isPhone||c.isTablet?"touchmove":"mousemove",c.isPhone||c.isTablet?"touchend":"mouseup",c.isPhone||c.isTablet?"touchcancel":"mouseout",100),k=-720,l={TL:new THREE.Vector2(-12800,-12800),TR:new THREE.Vector2(12800,-12800),BL:new THREE.Vector2(-12800,12800),BR:new THREE.Vector2(12800,12800)},m=window.performance||Date;i.DEBUG=!1,i.prototype=d(Object.create(THREE.Object3D.prototype),{constructor:i,init:function(){this.Repulsor=g,this.startHnd=this.startHnd.bind(this),this.moveHnd=this.moveHnd.bind(this),this.endHnd=this.endHnd.bind(this),this.repulsorEndedHnd=this.repulsorEndedHnd.bind(this),this.repulsors=[],this.timePrev=0,this.msPos2D=new THREE.Vector2,this.msPos2DPrev=new THREE.Vector2,this.msPos3DPrev=new THREE.Vector3,this.dirVector=new THREE.Vector3,this.distVector=new THREE.Vector3,this.distVector2D=new THREE.Vector2,this.events.onStart.add(this.startHnd),this.events.onCancel.add(function(){}.bind(this))},enable:function(){this.enabled=!0,this.events.disable(),this.events.enable()},disable:function(){this.enabled=!1,this.events.disable()},startHnd:function(a,b){if(this.repulsors.length>j||!this.enabled)return void this.endHnd();this.events.onStart.remove(this.startHnd);this.timePrev=m.now();this.msPos2DPrev.set(a,b);var c=this.getMouseProjection(this.camera,this.coordX(a,this.tg),this.coordY(b,this.tg)),d=k/c.y;if(c.multiplyScalar(d),this.msPos3DPrev.copy(c),!(l.TL.x<c.x&&c.x<l.TR.x&&l.TL.y<c.z&&c.z<l.BL.y))return void this.endHnd();var e=this.curR=new g(c);e.onEnded.addOnce(this.repulsorEndedHnd),this.repulsors.push(e),this.add(e),this.events.onMove.add(this.moveHnd)},endHnd:function(){this.curR&&(this.curR.release(),this.curR=null),this.events.onStart.remove(this.startHnd),this.events.onMove.remove(this.moveHnd),this.events.onEnd.remove(this.endHnd),this.events.onStart.add(this.startHnd)},moveHnd:function(a,b){if(this.enabled){var c=m.now(),d=this.getMouseProjection(this.camera,this.coordX(a,this.tg),this.coordY(b,this.tg)),e=k/d.y;if(d.multiplyScalar(e),!(l.TL.x<d.x&&d.x<l.TR.x&&l.TL.y<d.z&&d.z<l.BL.y))return void this.endHnd();this.msPos2D.set(a,b),this.curR.posTg.copy(d);var f=this.dirVector;f.subVectors(d,this.msPos3DPrev);var g=this.distVector2D;g.copy(this.msPos2D),g=g.distanceTo(this.msPos2DPrev);{c-this.timePrev}this.curR.dirVect.copy(f),this.curR.posTg.copy(d),this.timePrev=c,this.msPos3DPrev.copy(d),this.msPos2DPrev.copy(this.msPos2D)}},repulsorEndedHnd:function(a){var b=this.repulsors.indexOf(a);b+1&&(this.remove(a),this.repulsors.splice(b,1))},step:function(){for(var a=this.repulsors,b=0,c=a.length;c>b;b++)a[b].step();this.ps.applySwipeForce({repulsors:this.repulsors,baseForce:this.baseForce})},getMouseProjection:function(){var a=new THREE.Vector3;return function(b,c,d){a.set(c,d,.5),a.unproject(b);var e=a.sub(b.position).normalize();return e}}(),coordX:function(a,b){return a/b.getWidth()*2-1},coordY:function(a,b){return 2*-(a/b.getHeight())+1},setupDAT:function(){var a;this.markerPlane&&(a=e.instance.addFolder("MarkerPlane"),a.add(this.markerPlane.position,"y",-800,100)),a=e.instance.addFolder("SwipeForceRepulsor"),a.add(this,"baseForce",0,1e3)}}),b.exports=i},{"../../../settings":217,"../dat":186,"../streetview/CameraController":208,"./Repulsor":199,"./SwipeControlNormalizer":202,"dom-event":27,"extend-object":32,gsap:41,"spooky-element":95}],204:[function(a,b){var c=a("../dat"),d=a("dom-event"),e=(a("dom-event").off,a("spooky-element")),f=(a("gsap"),function(a,b,c){this.camera=a,this.tg=new e(b),this.ps=c,this.radius=20,this.velocity=1,this.baseForce=900,this.scaleUP=16,this.waveDecay=.06,this.stepReducer=0,this.timePrev=null,this.scaledXYZPrev=null,this.isMouseDown=!1,this.enabled=!0,this.init()});f.prototype={init:function(){this.setupDrawCanvases(),this.msHnd=this.msHnd.bind(this),this.clickDragHnd=this.clickDragHnd.bind(this),this.tg.on("mousemove",this.msHnd),this.tg.on("touchmove",this.msHnd),d(document,"mousedown",this.clickDragHnd),d(document,"mouseup",this.clickDragHnd)},step:function(){if(this.stepReducer++,!(this.stepReducer<2)&&(this.stepReducer=0,this.scaledXYZPrev)){this.ctxXY.fillStyle=this.ctxXZ.fillStyle="rgba(0,0,0, "+this.waveDecay+")",this.ctxXY.fillRect(0,0,512,512),this.ctxXZ.fillRect(0,0,512,512);var a=this.scaleUP;this.ctxXY.drawImage(this.canvasXY,-a,-a,512+2*a,512+2*a),this.ctxXZ.drawImage(this.canvasXZ,-a,-a,512+2*a,512+2*a),this.ps.applySwipeForce({fieldXZ:new Uint32Array(this.ctxXZ.getImageData(0,0,512,512).data.buffer),fieldXY:new Uint32Array(this.ctxXY.getImageData(0,0,512,512).data.buffer),baseForce:this.baseForce})}},clickDragHnd:function(a){this.isMouseDown="mousedown"==a.type},msHnd:function(a){if(a.preventDefault(),!this.isMouseDown&&this.enabled){var b=Date.now(),c=this.scaledXYZPrev,d=this.getMouseProjection(this.camera,this.coordX(a,this.tg),this.coordY(a,this.tg));d.multiplyScalar(75),d.addScalar(800),d.divideScalar(1600),d.multiplyScalar(512),d.x=Math.round(d.x),d.y=512-Math.round(d.y),d.z=Math.round(d.z),c&&(this.ctxXY.fillStyle="black",this.ctxXY.beginPath(),this.ctxXZ.beginPath(),this.ctxXY.moveTo(c.x,c.y),this.ctxXY.lineTo(d.x,d.y),this.ctxXZ.moveTo(c.x,c.z),this.ctxXZ.lineTo(d.x,d.z),this.ctxXY.stroke(),this.ctxXZ.stroke()),this.timePrev=b,this.scaledXYZPrev=d}},getMouseProjection:function(){var a=new THREE.Vector3;return function(b,c,d){a.set(c,d,.5),a.unproject(b);var e=a.sub(b.position).normalize();return e}}(),coordX:function(a,b){var c=(a.touches||a.changedTouches||[a])[0].clientX;return c/b.getWidth()*2-1},coordY:function(a,b){var c=(a.touches||a.changedTouches||[a])[0].clientY;return 2*-(c/b.getHeight())+1},setupDrawCanvases:function(){this.canvasXY=this.createCanvas(),this.ctxXY=this.getContext(this.canvasXY),this.canvasXZ=this.createCanvas(),this.ctxXZ=this.getContext(this.canvasXZ)},createCanvas:function(){var a=new e(document.createElement("canvas"),".xyzPlanes");return a.addClass("tempCanvas"),a.view.width=512,a.view.height=512,a.view},getContext:function(a){var b=a.getContext("2d");return b.imageSmoothingEnabled=!1,b.mozImageSmoothingEnabled=!1,b.webkitImageSmoothingEnabled=!1,b.lineWidth=15,b.strokeStyle="#FFFFFF",b.fillStyle="#000000",b.fillRect(0,0,512,512),b},setupDAT:function(){var a;this.markerPlane&&(a=c.instance.addFolder("MarkerPlane"),a.add(this.markerPlane.position,"y",-800,100)),a=c.instance.addFolder("SwipeForceWave"),a.add(this,"baseForce",0,1e3),a.add(this,"scaleUP",2,128),a.add(this,"waveDecay",.01,1)}},b.exports=f},{"../dat":186,"dom-event":27,gsap:41,"spooky-element":95}],205:[function(a,b){var c,d=a("../AssetLib3D").getInstance(),e=a("./Shaders"),f=a("./SakuraMaterial"),g=new THREE.Vector3,h=new THREE.Vector3(9.5,4.5,9.5),i=function(a,b){this.referenceGEOM=a,this.collection=b,this.fps=1/30,this.timeout=.35,this.particlesPerEmission=5,this.t=0,this.init()};i.prototype={construtor:i,init:function(){var a=[d.get("blossom-bunch-A"),d.get("blossom-bunch-B"),d.get("blossom-bunch-C")],b=a.length,g=new f({map:d.get("blossom-bunch-A"),textureLength:b,size:80,transparent:!0});g.depthWrite=!0,g.depthTest=!1,g.uniforms.tMaps.value=a,g.vertexShader=e.Blossom.vertexShader.replace(/{{textureLength}}/g,b),g.fragmentShader=e.Blossom.fragmentShader.replace(/{{textureLength}}/g,b),this.geom=new THREE.BufferGeometry;var h,i,j=this.geom,k=4,l=this.referenceGEOM.vertices;c=Math.floor(l.length/k);for(var m=new THREE.Color,n=[16645119,16775162,16774136],o=new Uint16Array(c),p=new Float32Array(3*c),q=new Float32Array(3*c),r=new Float32Array(c),s=new Float32Array(c),t=new Float32Array(3*c),u=new Float32Array(c),v=new Float32Array(3*c),w=new Float32Array(c),x=new Uint16Array(c),y=new Float32Array(c),z=new Float32Array(c),A=new Float32Array(3*c),B=new Float32Array(c),C=new THREE.Vector3,D=new THREE.Vector3(500,700,500),E=0,F=0;c>F;F++){i=F*k,h=3*F,p[h]=l[i].x,p[h+1]=l[i].y,p[h+2]=l[i].z,E=Math.max(l[F].y,E),C.fromArray(p,h),q[h]=0,q[h+1]=0,q[h+2]=0,r[F]=0,s[F]=0,t[h]=0,t[h+1]=0,t[h+2]=0,u[F]=0,v[h]=0,v[h+1]=0,v[h+2]=0,w[F]=0,x[F]=0,y[F]=Math.round(Math.random()*(b-1)),z[F]=0;var G=C.distanceToSquared(D),H=G/98e4;H=H>1?1:H,H=1-H,m.setHex(n[Math.round(Math.random())]),m.offsetHSL(0,0,.05*-H),A[h]=m.r,A[h+1]=m.g,A[h+2]=m.b,B[F]=Math.round(20*Math.random())+85}j.addAttribute("active",new THREE.BufferAttribute(o,1)),j.addAttribute("position",new THREE.BufferAttribute(p,3)),j.addAttribute("velocity",new THREE.BufferAttribute(q,3)),j.addAttribute("momentumMult",new THREE.BufferAttribute(s,1)),j.addAttribute("invmass",new THREE.BufferAttribute(r,1)),j.addAttribute("momentum",new THREE.BufferAttribute(t,3)),j.addAttribute("noisescale",new THREE.BufferAttribute(u,1)),j.addAttribute("noisevector",new THREE.BufferAttribute(v,3)),j.addAttribute("spriteid",new THREE.BufferAttribute(w,1)),j.addAttribute("frameoffset",new THREE.BufferAttribute(x,1)),j.addAttribute("currentframe",new THREE.BufferAttribute(y,1)),j.addAttribute("framerate",new THREE.BufferAttribute(z,1)),j.addAttribute("customColor",new THREE.BufferAttribute(A,3)),j.addAttribute("customSize",new THREE.BufferAttribute(B,1)),j.computeBoundingBox(),this.debugCloud=new THREE.PointCloud(j,new THREE.PointCloudMaterial({color:16711765,size:25}))},step:function(){var a=this.geom.attributes.position.array;if(this.t+=this.fps,this.t>this.timeout){this.t=0;for(var b=0;b<this.particlesPerEmission;b++)g.fromArray(a,Math.round(Math.random()*c)),g.applyMatrix4(this.debugCloud.matrix),this.collection.setOnAvailParticle({pX:g.x+1600*Math.random()-800,pY:g.y,pZ:g.z+1600*Math.random()-800,vX:Math.random()*h.x-.5*h.x,vY:Math.random()*-h.y-.7,vZ:Math.random()*h.z-.5*h.z})}}},b.exports=i},{"../AssetLib3D":183,"./SakuraMaterial":200,"./Shaders":201}],206:[function(a,b){b.exports={uniforms:{tDiffuse:{type:"t",value:null},resolution:{type:"v2",value:new THREE.Vector2(0,0)},dir:{type:"v2",value:new THREE.Vector2(1,0)},strength:{type:"f",value:1},radius:{type:"f",value:1}},vertexShader:"varying vec2 vUv;\r\n\r\nvoid main() {\r\n  vUv = uv;\r\n	  \r\n  gl_Position = projectionMatrix *\r\n                modelViewMatrix *\r\n                vec4(position,1.0);\r\n}\r\n",fragmentShader:'//"in" attributes from our vertex shader\r\n// varying vec4 vColor;\r\n// varying vec2 vTexCoord;\r\n\r\n//declare uniforms\r\nuniform vec2 resolution;\r\nuniform float radius;\r\nuniform vec2 dir;\r\nuniform float strength;\r\n\r\nuniform sampler2D tDiffuse;\r\nvarying vec2 vUv;\r\n\r\nvoid main() {\r\n    //this will be our RGBA sum\r\n    vec4 sum = vec4(0.0);\r\n\r\n    //our original texcoord for this fragment\r\n    vec2 tc = vUv;\r\n\r\n    //the amount to blur, i.e. how far off center to sample from \r\n    //1.0 -> blur by one pixel\r\n    //2.0 -> blur by two pixels, etc.\r\n    vec2 blur = vec2(radius)/resolution; \r\n    \r\n    //the direction of our blur\r\n    //(1.0, 0.0) -> x-axis blur\r\n    //(0.0, 1.0) -> y-axis blur\r\n    float hstep = dir.x;\r\n    float vstep = dir.y;\r\n\r\n    //apply blurring, using a 9-tap filter with predefined gaussian weights\r\n    sum += texture2D(tDiffuse, vec2(tc.x - 4.0*blur.x*hstep, tc.y - 4.0*blur.y*vstep)) * 0.0162162162;\r\n    sum += texture2D(tDiffuse, vec2(tc.x - 3.0*blur.x*hstep, tc.y - 3.0*blur.y*vstep)) * 0.0540540541;\r\n    sum += texture2D(tDiffuse, vec2(tc.x - 2.0*blur.x*hstep, tc.y - 2.0*blur.y*vstep)) * 0.1216216216;\r\n    sum += texture2D(tDiffuse, vec2(tc.x - 1.0*blur.x*hstep, tc.y - 1.0*blur.y*vstep)) * 0.1945945946;\r\n\r\n    sum += texture2D(tDiffuse, vec2(tc.x, tc.y)) * 0.2270270270;\r\n\r\n    sum += texture2D(tDiffuse, vec2(tc.x + 1.0*blur.x*hstep, tc.y + 1.0*blur.y*vstep)) * 0.1945945946;\r\n    sum += texture2D(tDiffuse, vec2(tc.x + 2.0*blur.x*hstep, tc.y + 2.0*blur.y*vstep)) * 0.1216216216;\r\n    sum += texture2D(tDiffuse, vec2(tc.x + 3.0*blur.x*hstep, tc.y + 3.0*blur.y*vstep)) * 0.0540540541;\r\n    sum += texture2D(tDiffuse, vec2(tc.x + 4.0*blur.x*hstep, tc.y + 4.0*blur.y*vstep)) * 0.0162162162;\r\n\r\n    gl_FragColor = vec4(sum.rgb, 1.0);\r\n    //discard alpha for our simple demo, multiply by vertex color and return\r\n    // gl_FragColor = mix(texture2D(tDiffuse, vUv), vec4(sum.rgb, 1.0), strength);\r\n}'}},{}],207:[function(a,b){b.exports={uniforms:{tBokeh:{type:"t",value:null},tDiffuse:{type:"t",value:null},tLookup:{type:"t",value:null},tVignette:{type:"t",value:null},bokehOpacity:{type:"f",value:0},colorOverlayOpacity:{type:"f",value:0}},vertexShader:"varying vec2 vUv;\r\n\r\nvoid main() {\r\n  vUv = uv;\r\n	  \r\n  gl_Position = projectionMatrix *\r\n                modelViewMatrix *\r\n                vec4(position,1.0);\r\n}\r\n",fragmentShader:"#define Blend(base, blend, funcf) 		vec3(funcf(base.r, blend.r), funcf(base.g, blend.g), funcf(base.b, blend.b))\r\n#define BlendScreenf(base, blend) 		(1.0 - ((1.0 - base) * (1.0 - blend)))\r\n#define BlendScreen(base, blend) 		Blend(base, blend, BlendScreenf)\r\n\r\n#define LUT_INVERT\r\n//declare uniforms\r\nuniform float bokehOpacity;\r\nuniform float colorOverlayOpacity;\r\nuniform sampler2D tBokeh;\r\nuniform sampler2D tLookup;\r\nuniform sampler2D tVignette;\r\nuniform sampler2D tDiffuse;\r\nvarying vec2 vUv;\r\n\r\n// http://en.wikipedia.org/wiki/Alpha_compositing\r\nvec4 alphaComposite (in vec4 over, in vec4 under) {\r\n    vec3 color = over.rgb*over.aaa + under.rgb*under.aaa*(1.0-over.a);\r\n    float alpha = over.a+under.a*(1.0-over.a);\r\n    return vec4(color, alpha);\r\n}\r\n\r\nvoid main() {\r\n\r\n    vec2 tc = vUv;\r\n    vec4 textureColor = texture2D(tDiffuse, vUv);\r\n\r\n\r\n    vec4 bokehColor = texture2D(tBokeh, vUv);\r\n    vec4 bohekScreen = vec4(BlendScreen(textureColor.rgb, bokehColor.rgb), bokehColor.a*0.7*bokehOpacity);\r\n    textureColor = alphaComposite(bohekScreen, textureColor);\r\n\r\n    vec4 colorOverlay = vec4(0.9921, 0.8823, 0.847, colorOverlayOpacity*.65);\r\n    textureColor = alphaComposite(colorOverlay, textureColor);\r\n\r\n    #ifndef LUT_NO_CLAMP\r\n    textureColor = clamp(textureColor, 0.0, 1.0);\r\n    #endif\r\n\r\n    mediump float blueColor = textureColor.b * 63.0;\r\n    mediump vec2 quad1;\r\n    quad1.y = floor(floor(blueColor) / 8.0);\r\n    quad1.x = floor(blueColor) - (quad1.y * 8.0);\r\n    mediump vec2 quad2;\r\n    quad2.y = floor(ceil(blueColor) / 8.0);\r\n    quad2.x = ceil(blueColor) - (quad2.y * 8.0);\r\n    highp vec2 texPos1;\r\n    texPos1.x = (quad1.x * 0.125) + 0.5 / 512.0 + ((0.125 - 1.0 / 512.0) * textureColor.r);\r\n    texPos1.y = (quad1.y * 0.125) + 0.5 / 512.0 + ((0.125 - 1.0 / 512.0) * textureColor.g);\r\n\r\n    #ifdef LUT_INVERT\r\n    texPos1.y = 1.0 - texPos1.y;\r\n    #endif\r\n\r\n    highp vec2 texPos2;\r\n    texPos2.x = (quad2.x * 0.125) + 0.5 / 512.0 + ((0.125 - 1.0 / 512.0) * textureColor.r);\r\n    texPos2.y = (quad2.y * 0.125) + 0.5 / 512.0 + ((0.125 - 1.0 / 512.0) * textureColor.g);\r\n\r\n    #ifdef LUT_INVERT\r\n    texPos2.y = 1.0 - texPos2.y;\r\n    #endif\r\n\r\n    lowp vec4 newColor1 = texture2D(tLookup, texPos1);\r\n    lowp vec4 newColor2 = texture2D(tLookup, texPos2);\r\n    textureColor = mix(newColor1, newColor2, fract(blueColor));\r\n\r\n    vec4 vignetteColor = texture2D(tVignette, vUv);\r\n    vec4 vignetteMultiply = vec4(textureColor.rgb*vignetteColor.rgb, vignetteColor.a*0.8);\r\n    textureColor = alphaComposite(vignetteMultiply, textureColor);\r\n\r\n    gl_FragColor = textureColor;\r\n}\r\n"}},{}],208:[function(a,b){var c=a("gsap"),d=a("js-oop"),e=a("dom-event"),f=e.off,g=a("dom-select"),h=75,i=function(a){return a.clientX=a.touches[0].clientX,a.clientY=a.touches[0].clientY,a},j=((new THREE.Matrix4).makeRotationY(.005),new d({initialize:function(a){if(!a)throw"camera not provided to controller";this.camera=a,this.latitude=0,this.longitude=0,this.heading=-3,this.pitch=0,this.alwaysLook=!0,this.enabled=!0,this.phi=0,this.theta=0,this.time=0,this.lookSpeed=.1,this._onMouseDown=this.onMouseDown.bind(this),this._onMouseMove=this.onMouseMove.bind(this),this._onMouseUp=this.onMouseUp.bind(this),this._onMouseWheel=this.onMouseWheel.bind(this),this._onTouchStart=this.onTouchStart.bind(this),this._onTouchMove=this.onTouchMove.bind(this),this._onTouchEnd=this.onTouchEnd.bind(this),this.reset()},aniIn:function(){c.fromTo(this,2,{overwrite:1,latitude:75,longitude:this.heading},{delay:.5,overwrite:1,latitude:this.pitch,longitude:this.heading,ease:Quad.easeOut})},setInitialPosition:function(a,b){this.heading=a||this.heading||-3,this.pitch=b||this.pitch||0,this.reset()},reset:function(){this.latitude=this.pitch,this.longitude=this.heading,this.isUserInteracting=!1},setup:function(){e(document,"mousedown",this._onMouseDown),e(document,"mousemove",this._onMouseMove),e(document,"mouseup",this._onMouseUp),e(g("canvas"),"touchstart",this._onTouchStart),e(g("canvas"),"touchmove",this._onTouchMove),e(g("canvas"),"touchend",this._onTouchEnd)},destroy:function(){f(document,"mousedown",this._onMouseDown),f(document,"mousemove",this._onMouseMove),f(document,"mouseup",this._onMouseUp),f(g("canvas"),"touchstart",this._onTouchStart),f(g("canvas"),"touchmove",this._onTouchMove),f(g("canvas"),"touchend",this._onTouchEnd)},onMouseDown:function(a){a.target==g(".gl-view")&&(this.isUserInteracting=!0,this.onPointerDownPointerX=a.clientX,this.onPointerDownPointerY=a.clientY,this.onPointerDownLon=this.longitude,this.onPointerDownLat=this.latitude)},onTouchStart:function(a){a.preventDefault(),this.onMouseDown(i(a))},onTouchMove:function(a){a.preventDefault(),this.onMouseMove(i(a))},onTouchEnd:function(a){a.preventDefault(),this.onMouseUp(i(a))},onMouseUp:function(){this.isUserInteracting=!1},onMouseMove:function(a){if(!j.DEBUG&&this.isUserInteracting&&this.enabled){var b=(this.onPointerDownPointerX-a.clientX)*this.lookSpeed+this.onPointerDownLon,c=(a.clientY-this.onPointerDownPointerY)*this.lookSpeed+this.onPointerDownLat;c=Math.max(-h,Math.min(h,c)),this.longitude=b,this.latitude=c}},onMouseWheel:function(){var a=this.camera.fov;event.wheelDeltaY?a-=.05*event.wheelDeltaY:event.wheelDelta?a-=.05*event.wheelDelta:event.detail&&(a+=1*event.detail),a=Math.min(90,Math.max(45,a)),TweenLite.to(this.camera,.5,{overwrite:1,fov:a,onUpdate:this.camera.updateProjectionMatrix.bind(this.camera)})},onKeyDown:function(a){switch(a.keyCode){case 38:case 87:this.moveForward=!0;break;case 37:case 65:this.moveLeft=!0;break;case 40:case 83:this.moveBackward=!0;break;case 39:case 68:this.moveRight=!0}},onKeyUp:function(a){switch(a.keyCode){case 38:case 87:this.moveForward=!1;break;case 37:case 65:this.moveLeft=!1;break;case 40:case 83:this.moveBackward=!1;break;case 39:case 68:this.moveRight=!1}},update:function(a){a=a||1,this.latitude=Math.max(-h,Math.min(h,this.latitude));var b=THREE.Math.degToRad(90-this.latitude),c=THREE.Math.degToRad(this.longitude);this.phi=b,this.theta=c,TweenLite.to(this.camera.target,.2,{overwrite:1,x:500*Math.sin(b)*Math.cos(c),y:500*Math.cos(b),z:500*Math.sin(b)*Math.sin(c)}),this.camera.lookAt(this.camera.target),this.time+=a;var d=1;this.moveForward&&this.camera.translateZ(-d),this.moveBackward&&this.camera.translateZ(d),this.moveLeft&&this.camera.translateX(-d),this.moveRight&&this.camera.translateX(d),this.moveUp&&this.camera.translateY(d),this.moveDown&&this.camera.translateY(-d)}}));j.DEBUG=!1,b.exports=j},{"dom-event":27,"dom-select":29,gsap:41,"js-oop":61}],209:[function(a,b){var c=a("extend"),d=a("../particlesys_buffergeom/Shaders"),e=function(){THREE.MeshBasicMaterial.apply(this,arguments),this.type="ColorCorrectedMaterial",this.uniforms=c(THREE.UniformsUtils.clone(d.ColorCorrectedBasic.uniforms),{tMaps:{type:"tv",value:[]},powRGB:{type:"v3",value:new THREE.Vector3(1.2,1,.9)},mulRGB:{type:"v3",value:new THREE.Vector3(1,1,1)},brightness:{type:"f",value:.1},contrast:{type:"f",value:.2}}),this.vertexShader=d.ColorCorrectedBasic.vertexShader.replace(/{{textureLength}}/g,this.textureLength),this.fragmentShader=d.ColorCorrectedBasic.fragmentShader.replace(/{{textureLength}}/g,this.textureLength)};e.prototype=c(Object.create(THREE.MeshBasicMaterial.prototype),{constructor:e}),THREE.ColorCorrectedMaterial=e,b.exports=e},{"../particlesys_buffergeom/Shaders":201,extend:33}],210:[function(a,b){var c=a("extend-object"),d=(a("dom-event"),a("dom-event").off,a("spooky-element")),e=a("signals"),f=null,g=a("../objects/Link"),h=function(a,b){THREE.Object3D.call(this),this.enabled=!0,this.camera=a,this.tg=new d(b),this.items=[],this.onSelect=new e,this.mousePos=new THREE.Vector3,this.raycaster=new THREE.Raycaster,this.init()};h.prototype=c(Object.create(THREE.Object3D.prototype),{init:function(){this.mouseoverHnd=this.mouseoverHnd.bind(this),this.clickHnd=this.clickHnd.bind(this)},mouseoverHnd:function(a){this.mousePos.x=this.coordX(a,this.tg),this.mousePos.y=this.coordY(a,this.tg),this.mousePos.unproject(this.camera);var b=this.raycaster,c=this.camera,d=this.mousePos,e=d.clone();b.set(c.position,e.sub(c.position).normalize());var g=b.intersectObjects(this.hitareas);g.length>0?f!=g[0].object&&(f&&f.parent.rollout(),f=g[0].object,f.parent.rollover()):(f&&f.parent.rollout(),f=null),this.tg.css({cursor:f&&this.enabled?"pointer":"default"})},clickHnd:function(){f&&this.enabled&&(this.onSelect.dispatch(f.parent.panoId),this.tg.off("mousemove",this.mouseoverHnd),this.tg.off("touchmove",this.mouseoverHnd),this.tg.off("click",this.clickHnd),this.tg.css({cursor:"default"}))},step:function(){},setupLinks:function(a){var b,c=0;for(this.hitareas=[];c<this.items.length;c++)b=this.items[c],this.remove(b);if(this.data=a,a.links){var d=Math.PI/180;for(this.hasLinks=a.links.length>0,c=0;c<a.links.length;c++)b=this.getAvailLink(c),b.panoId=a.links[c].pano,b.rotation.y=-(a.links[c].heading-90-a.tiles.centerHeading)*d,b.position.set(0,-600,0),b.translateZ(-1200),this.hitareas.push(b.hit),this.add(b);this.tg.on("mousemove",this.mouseoverHnd),this.tg.on("touchmove",this.mouseoverHnd),this.tg.on("click",this.clickHnd)}},getAvailLink:function(a){if(a<this.items.length)return this.items[a];var b=new g;return this.items.push(b),b},getMouseProjection:function(){var a=new THREE.Vector3;return function(b,c,d){a.set(c,d,.5),a.unproject(b);var e=a.sub(b.position).normalize();return e}}(),coordX:function(a,b){var c=(a.touches||a.changedTouches||[a])[0].clientX;return c/b.getWidth()*2-1},coordY:function(a,b){var c=(a.touches||a.changedTouches||[a])[0].clientY;return 2*-(c/b.getHeight())+1}}),b.exports=h},{"../objects/Link":192,"dom-event":27,"extend-object":32,signals:93,"spooky-element":95}],211:[function(a,b){var c,d,e,f,g=a("js-oop"),h=(a("spooky-element"),a("dom-event")),i=(h.off,a("../dat")),j=a("stats-js"),k=a("signals"),l=(a("../particlesys_buffergeom/Shaders"),a("../particlesys_buffergeom/ParticleSystem")),m=(a("../particlesys_buffergeom/SwipeControlWave"),a("../particlesys_buffergeom/SwipeControlRepulsor")),n=a("../SwipeAudio"),o=a("../AssetLib3D").getInstance(),p=(a("../particlesys_buffergeom/Shaders"),a("./ColorCorrectedMaterial"),a("../particlesys_buffergeom/TreeEmitter"),a("../objects/TreeE5")),q=a("../objects/TreeE6"),r=(a("../objects/TreeE8"),a("../objects/Floor")),s=a("./Links"),t=a("../shaders/BlurShader"),u=a("../shaders/Post"),v=a("gsap"),w=a("shuffle-array"),x=a("../../../settings"),y=a("./StreetView"),z=new THREE.Vector3(0,-700,0),A=new THREE.Quaternion(.09405079277812231,.6874696779434883,-.09050710239542713,.7143866948716546),B=60/180*Math.PI,C=new g({Extends:y,initialize:function(a,b,c,g,h,i){window.app=this,e=a,f=b,this.curPanoData=null,this.showStats=!1,this.onLinkSelect=new k,this.parent(a,b,c,g,h,i);var j={canvas:this.view,shadowMapEnabled:!1,antialias:!0,premultipliedAlpha:!1,devicePixelRatio:Math.min(1.25,window.devicePixelRatio),sortObjects:!1,autoClear:!1,preserveDrawingBuffer:!0};x.isMobile&&window.devicePixelRatio&&(j.devicePixelRatio=window.devicePixelRatio);var l=this.renderer=new THREE.WebGLRenderer(j);l.autoClear=!1,l.sortObjects=!0,l.gammaInput=!0,l.gammaOutput=!0,l.shadowMapEnabled=!0,l.shadowMapType=THREE.PCFSoftShadowMap,this.registerTextures(),this.setupComposers(),this.loadedDiffuse.addOnce(this.panoReady.bind(this)),d=document.createElement("canvas"),window.FileReader&&this.setupColorCorrectDrop()},setupColorCorrectDrop:function(){document.addEventListener("dragover",function(a){a.preventDefault(),a.dataTransfer.dropEffect="copy"},!1),document.addEventListener("dragenter",function(){document.body.style.opacity=.5},!1),document.addEventListener("dragleave",function(){document.body.style.opacity=1},!1),document.addEventListener("drop",function(a){a.preventDefault();var b=new FileReader;b.addEventListener("load",function(a){console.log("this.postpass",this.postpass),this.postpass.uniforms.tLookup.value.image.src=a.target.result,this.postpass.uniforms.tLookup.value.needsUpdate=!0}.bind(this),!1),b.readAsDataURL(a.dataTransfer.files[0]),document.body.style.opacity=1}.bind(this),!1)},hideTree:function(){for(var a=0;a<this.trees.length;a++)this.trees[a].visible=!1},showTree:function(){for(var a=0;a<this.trees.length;a++)this.trees[a].visible=!0},loadFromLatLng:function(a,b,c){this.links.setupLinks(this.curPanoData),this.imageType=c?y.Type.SPHERE:y.Type.STREET,g.parent(this,a,b)},loadFromID:function(a,b){this.links.setupLinks(this.curPanoData),this.imageType=b?y.Type.SPHERE:y.Type.STREET,g.parent(this,a)},setCameraPosition:function(a,b){this.controller&&this.controller.setInitialPosition(a,b)},destroy:function(){this.doDispose(this.petalScene),this.doDispose(this.treeScene),this.doDispose(this.scene),i.destroy(),g.parent(this)},registerTextures:function(){for(var a=o.getTextures(),b=0;b<a.length;b++)this.renderer.setTexture(a[b],0)},panoReady:function(){},resetCamera:function(){this.controller&&this.controller.reset()},aniCamera:function(){this.controller&&this.controller.aniIn()},enableInteraction:function(){this.links.visible=this.links.hasLinks,this.links.enabled=this.links.hasLinks,this.swipeCtl.enable(),this.swipeAudio&&this.swipeAudio.enable(),this.controller&&(this.controller.enabled=!0);for(var a=x.isPhone||x.istablet?2500:5e3,b=0;a>b;b++)this.ps.geometry.setOnAvailParticle({pX:12e3*Math.random()-6e3,pY:-680,pZ:6400*Math.random()-3200,vX:0,vY:0,vZ:0})},disableInteraction:function(){this.links.enabled=!1,this.swipeCtl.disable(),this.swipeAudio&&this.swipeAudio.disable(),this.controller&&(this.controller.enabled=!1)},blur:function(){v.to(this.blurSettings,.7,{colorOverlay:1,blur1:10,blur2:2.5,onUpdate:this.updateBlur,ease:Ease.easeOut})},unblur:function(){v.to(this.blurSettings,.7,{colorOverlay:0,blur1:0,blur2:0,onUpdate:this.updateBlur,ease:Ease.easeOut})},updateBlur:function(){for(var a=0,b=this.blurSettings.shaders.length;b>a;a++)this.blurSettings.shaders[a].uniforms.radius.value=a>=2?this.blurSettings.blur2:this.blurSettings.blur1;this.postpass.uniforms.colorOverlayOpacity.value=this.blurSettings.colorOverlay},capture:function(){var a=Math.min(1280,this.renderer.domElement.width||1280);console.log(a),this.links.visible=!1,this.renderer.preserveDrawingBuffer=!0,this.renderer.clear(),this.render(),fromSrc=this.renderer.domElement;var b,c,e=d.getContext("2d"),f=fromSrc.width,g=fromSrc.height;b=c=Math.min(f,g);var h=Math.round(.5*(f-b)),i=Math.round(.5*(g-c));return d.width=d.height=a,e.drawImage(fromSrc,h,i,b,b,0,0,a,a),d},setupScene:function(){o.setContext(this.renderer),this.parent(),this.treeScene=new THREE.Scene,this.petalScene=new THREE.Scene,this.fogColor=11752560,this.fogNear=-3440,this.fogFar=19860;var a=this.fog=new THREE.Fog(this.fogColor,this.fogNear,this.fogFar);this.scene.fog=this.treeScene.fog=this.petalScene.fog=a;var b=this.renderer.context;c=b.getParameter(b.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.MAX_TEXTURES=c,this.setZoom(c>8?3:2),x.isMobile||(this.swipeAudio=new n(this.view)),this.setupSVSphere(),this.setupGround(),this.setupLinks(),this.setupPSys(),this.setupTrees(),this.setupLensflare(),this.setupLighting()},setupSVSphere:function(){this.colorOverSphere=this.sphereMesh.clone(),this.colorOverSphere.material=new THREE.MeshBasicMaterial({map:o.get("sphere-gradient"),transparent:!0,depthWrite:!1,depthTest:!1,lights:!1,side:THREE.DoubleSide,opacity:.5}),this.treeScene.add(this.colorOverSphere)
},setupGround:function(){this.floor=new r,this.treeScene.add(this.floor)},setupLinks:function(){this.links=new s(this.camera,this.view),this.links.onSelect.add(this.onLinkSelect.dispatch.bind(this)),this.treeScene.add(this.links)},setupTrees:function(){var a,b,c=[p,q],d=this.trees=[],e=this.treeScene,f=2,g=2800,h=8e3,i=2*h,j=x.isPhone||x.isTablet?4:5,k=i/(j-1),l=new THREE.Color,m=207/255;for(this.basePositions=[],a=0;f>a;a++)for(b=0;j>b;b++){var n=Math.round(Math.random()*(c.length-1)),o=c[n],r=new o(this.ps.geometry),s=new THREE.Vector3(k*b-h,-700,g*a-1400);this.basePositions.push(s);var t=s.x+1e3*Math.random()-500,u=s.z+100*Math.random()-50;if(x.isAndroid){var v=Math.max(1-Math.abs(t/h),0)*m;l.setRGB(v,v,v),r.setBlossomColor("emissive",l.getHex())}r.position.set(t,s.y,u),r.lookAt(z),d.push(r),e.add(r)}},randomizeTrees:function(){var a,b=this.basePositions.slice();w(b);for(var c=0;c<this.trees.length;c++)a=this.trees[c],a.position.set(b[c].x+1e3*Math.random()-500,b[c].y,b[c].z+100*Math.random()-50),a.lookAt(z)},setupPSys:function(){this.ps=new l(c,l.REPULSOR),this.petalScene.add(this.ps),this.swipeCtl=new m(this.camera,this.view,this.ps),m.DEBUG&&this.petalScene.add(this.swipeCtl)},setupLensflare:function(){var a=o.get("lens-flare-A"),b=o.get("lens-flare-B"),c=o.get("lens-flare-C");this.lfLight=new THREE.PointLight(16777215,1.5,4500),this.lfLight.color.setHex(16627731),this.lfLight.position.set(-1600,800,0);var d=new THREE.Color(16777215);d.setHex(16627731),this.lensFlare=new THREE.LensFlare(a,300,0,THREE.AdditiveBlending,d),this.lensFlare.add(b,512,0,THREE.AdditiveBlending),this.lensFlare.add(b,512,0,THREE.AdditiveBlending),this.lensFlare.add(b,512,0,THREE.AdditiveBlending),this.lensFlare.add(c,60,.6,THREE.AdditiveBlending),this.lensFlare.add(c,70,.7,THREE.AdditiveBlending),this.lensFlare.add(c,120,.9,THREE.AdditiveBlending),this.lensFlare.add(c,70,1,THREE.AdditiveBlending),this.lensFlare.customUpdateCallback=this.lensFlareUpdateCallback,this.lensFlare.position.copy(this.lfLight.position),this.scene.add(this.lensFlare)},setupLighting:function(){var a=this.directionalLight=new THREE.DirectionalLight(16777215,.9);a.castShadow=!1,a.position.set(-1600,800,0),a.target.position.copy(this.camera.position),a.target.y-=700;var b=3200;a.shadowCameraVisible=!0,a.shadowMapWidth=a.shadowMapHeight=4096,a.shadowCameraLeft=-b,a.shadowCameraRight=b,a.shadowCameraTop=b,a.shadowCameraBottom=-b,a.shadowCameraFar=1024e4,a.shadowDarkness=.3,this.treeScene.add(a),this.hemiLight=new THREE.HemisphereLight(1048575,16777215,.9),this.treeScene.add(this.hemiLight),this.ambientLight=new THREE.AmbientLight(16777215),this.treeScene.add(this.ambientLight)},lensFlareUpdateCallback:function(a){var b,c,d=a.lensFlares.length,e=2*-a.positionScreen.x,f=2*-a.positionScreen.y;for(c=0;d>c;c++)b=a.lensFlares[c],b.rotation=0,b.x=a.positionScreen.x+e*b.distance,b.y=a.positionScreen.y+f*b.distance;a.lensFlares[2].y+=.025,a.lensFlares[3].rotation=.5*a.positionScreen.x+THREE.Math.degToRad(45)},setupComposers:function(){var a={antialias:!0,antialiasing:!0,minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat,stencilBufer:!1,alpha:!0,shadowMapEnabled:!1,premultipliedAlpha:!1,devicePixelRatio:1},b=this.finaltg=new THREE.WebGLRenderTarget(this.width,this.height,a),c=new THREE.RenderPass(this.scene,this.camera),d=new THREE.RenderPass(this.treeScene,this.camera);d.clear=!1;var g=new THREE.RenderPass(this.petalScene,this.camera);g.clear=!1;var h=new THREE.BokehPass(this.petalScene,this.camera,{focus:1,aperture:.025,maxblur:1,width:e,height:f}),i=this.postpass=new THREE.ShaderPass(u);if(i.uniforms.bokehOpacity.value=0,i.uniforms.tBokeh.value=o.get("bokeh"),i.uniforms.tLookup.value=o.get("color-lookup"),i.uniforms.tVignette.value=o.get("vignette"),i.enabled=!x.isNoPostShader,!x.isMobile){var j=this.fxaapass=new THREE.ShaderPass(THREE.FXAAShader);j.uniforms.resolution.value=new THREE.Vector2(1/e,1/f)}var k=new THREE.ShaderPass(THREE.CopyShader);k.renderToScreen=!0,finalcomposer=new THREE.EffectComposer(this.renderer,b),finalcomposer.addPass(c),finalcomposer.addPass(d),finalcomposer.addPass(g),finalcomposer.addPass(h),finalcomposer.addPass(i),this.fxaapass&&finalcomposer.addPass(j),this.blurSettings={strenth:1,blur1:0,blur2:0,shaders:[],colorOverlay:0},this.updateBlur=this.updateBlur.bind(this);for(var l,m=0;4>m;m++)l=new THREE.ShaderPass(t),l.uniforms.resolution.value=new THREE.Vector2(this.width,this.height),l.uniforms.dir.value=m%2==0?new THREE.Vector2(1,0):new THREE.Vector2(0,1),l.uniforms.strength.value=this.blurSettings.strength,l.uniforms.radius.value=0,finalcomposer.addPass(l),this.blurSettings.shaders.push(l);finalcomposer.addPass(k),this.finalcomposer=finalcomposer},render:function(){this.finalcomposer.render(.1)},resize:function(a,b){e=a,f=b,this.parent(a,b),this.finalcomposer&&(this.finaltg.setSize(e,f),this.finalcomposer.setSize(e,f),this.fxaapass&&this.fxaapass.uniforms.resolution.value.set(1/e,1/f))},update:function(){var a=this.camera.quaternion,b=A,c=a.x*b.x+a.y*b.y+a.z*b.z+a.w*b.w,d=2*Math.acos(c),e=Math.min(d,B);d=(B-e)/B,this.postpass.uniforms.bokehOpacity.value=d;for(var f=0;f<this.trees.length;f++)this.trees[f].step();this.showStats&&stats.begin(),this.ps.step(),this.swipeCtl.step(),this.parent(),this.showStats&&stats.end()},doDispose:function(a){if(null!==a){for(var b=0;b<a.children.length;b++)this.doDispose(a.children[b]);if(a.geometry&&(a.geometry.dispose(),a.geometry=void 0),a.material){if(a.material.materials)for(b=0;b<a.material.materials.length;b++)a.material.materials[b].dispose();else a.material.dispose();a.material=void 0}a.texture&&(a.texture.dispose(),a.texture=void 0)}a=void 0},setupDAT:function(){var a;a=i.instance.addFolder("Floor");var b="#"+this.floor.material.color.getHexString();a.addColor({color:b},"color").onChange(function(a){a=Number("0x"+a.substr(1)),this.floor.material.color.setHex(a)}.bind(this)),b="#"+this.floor.material.emissive.getHexString(),a.addColor({emissive:b},"emissive").onChange(function(a){a=Number("0x"+a.substr(1)),this.floor.material.emissive.setHex(a)}.bind(this)),b="#"+this.floor.material.specular.getHexString(),a.addColor({specular:b},"specular").onChange(function(a){a=Number("0x"+a.substr(1)),this.floor.material.specular.setHex(a)}.bind(this)),a.add({shininess:0},"shininess",0,100).step(.1).onChange(function(a){this.floor.material.shininess=a}.bind(this)),a=i.instance.addFolder("Blossoms"),a.addColor({color:"#000000"},"color").onChange(function(a){var b=this.trees;a=Number("0x"+a.substr(1));for(var c=0;c<b.length;c++)b[c].blossomA.material.color.setHex(a),b[c].blossomB.material.color.setHex(a),b[c].blossomALow&&b[c].blossomALow.material.color.setHex(a),b[c].blossomBLow&&b[c].blossomBLow.material.color.setHex(a),b[c].petals&&b[c].petals.material.color.setHex(a),b[c].branchA&&b[c].branchA.material.color.setHex(a)}.bind(this)),a.addColor({emissive:"#000000"},"emissive").onChange(function(a){var b=this.trees;a=Number("0x"+a.substr(1));for(var c=0;c<b.length;c++)b[c].blossomA.material.emissive.setHex(a),b[c].blossomB.material.emissive.setHex(a),b[c].blossomALow&&b[c].blossomALow.material.emissive.setHex(a),b[c].blossomBLow&&b[c].blossomBLow.material.emissive.setHex(a),b[c].petals&&b[c].petals.material.emissive.setHex(a),b[c].branchA&&b[c].branchA.material.emissive.setHex(a)}.bind(this)),a.addColor({specular:"#000000"},"specular").onChange(function(a){var b=this.trees;a=Number("0x"+a.substr(1));for(var c=0;c<b.length;c++)b[c].blossomA.material.specular.setHex(a),b[c].blossomB.material.specular.setHex(a),b[c].blossomALow&&b[c].blossomALow.material.specular.setHex(a),b[c].blossomBLow&&b[c].blossomBLow.material.specular.setHex(a),b[c].petals&&b[c].petals.material.specular.setHex(a),b[c].branchA&&b[c].branchA.material.specular.setHex(a)}.bind(this)),a.add({shininess:0},"shininess",0,100).step(.1).onChange(function(a){for(var b=this.trees,c=0;c<b.length;c++)b[c].blossomA.material.shininess=a,b[c].blossomB.material.shininess=a,b[c].blossomALow&&(b[c].blossomALow.material.shininess=a),b[c].blossomBLow&&(b[c].blossomBLow.material.shininess=a),b[c].petals&&(b[c].petals.material.shininess=a),b[c].branchA&&(b[c].branchA.material.shininess=a)}.bind(this));var c=this.trees;a.add({blossomsA:!0},"blossomsA").onChange(function(a){for(var b=0;b<c.length;b++)c[b].blossomA.visible=a}.bind(this)),a.add({blossomsB:!0},"blossomsB").onChange(function(a){for(var b=0;b<c.length;b++)c[b].blossomB.visible=a}.bind(this)),a.add({petals:!0},"petals").onChange(function(a){for(var b=0;b<c.length;b++)c[b].petals&&(c[b].petals.visible=a)}.bind(this)),a.add({branchA:!0},"branchA").onChange(function(a){for(var b=0;b<c.length;b++)c[b].branchA&&(c[b].branchA.visible=a)}.bind(this)),a=i.instance.addFolder("fog"),a.add(this.fog,"near",-6400,32e3).step(10),a.add(this.fog,"far",-6400,32e3).step(10),a.addColor(this,"fogColor").onChange(function(a){this.fog.color.setHex(parseInt(a.substr(1),16))}.bind(this)),this.directionalLight&&(a=i.instance.addFolder("dirlight"),a.add(this.directionalLight.position,"x",-3200,3200),a.add(this.directionalLight.position,"y",-3200,3200),a.add(this.directionalLight.position,"z",-3200,3200),a.add(this.directionalLight,"intensity",0,10)),this.hemiLight&&(a=i.instance.addFolder("hemilight"),a.add(this.hemiLight,"intensity",0,10),a.addColor({color:"#000000"},"color").onChange(function(a){a=Number("0x"+a.substr(1)),this.hemiLight.color.setHex(a)}.bind(this)),a.addColor({groundColor:"#000000"},"groundColor").onChange(function(a){a=Number("0x"+a.substr(1)),this.hemiLight.groundColor.setHex(a)}.bind(this)),a=i.instance.addFolder("ambientLight"),a.addColor({color:"#000000"},"color").onChange(function(a){a=Number("0x"+a.substr(1)),this.ambientLight.color.setHex(a)}.bind(this)))},updateLighting:function(){this.traverse(this.treeScene)},traverse:function(a){for(var b=0;b<a.children.length;b++)a.children[b]instanceof THREE.Light||(a.children[b].material&&(a.children[b].material.needsUpdate=!0),this.traverse(a.children[b]))},setupStats:function(){stats=new j,stats.setMode(0),this.showStats=!0,stats.domElement.style.position="fixed",stats.domElement.style.left="0px",stats.domElement.style.top="0px",document.body.appendChild(stats.domElement)}});b.exports=C},{"../../../settings":217,"../AssetLib3D":183,"../SwipeAudio":185,"../dat":186,"../objects/Floor":191,"../objects/TreeE5":193,"../objects/TreeE6":194,"../objects/TreeE8":195,"../particlesys_buffergeom/ParticleSystem":198,"../particlesys_buffergeom/Shaders":201,"../particlesys_buffergeom/SwipeControlRepulsor":203,"../particlesys_buffergeom/SwipeControlWave":204,"../particlesys_buffergeom/TreeEmitter":205,"../shaders/BlurShader":206,"../shaders/Post":207,"./ColorCorrectedMaterial":209,"./Links":210,"./StreetView":212,"dom-event":27,gsap:41,"js-oop":61,"shuffle-array":92,signals:93,"spooky-element":95,"stats-js":116}],212:[function(a,b){var c=a("js-oop"),d=a("signals"),e=a("./CameraController"),f=(a("./depthUtil"),a("google-maps-api")()),g=a("is-mobile")(),h=a("../../../settings"),i=new c({initialize:function j(a,b,c,f,g,i){this.view=c,this.width=a,this.height=b,this.renderTime=Date.now(),this.renderer=new THREE.WebGLRenderer({canvas:this.view,antialias:!1,alpha:!1,devicePixelRatio:Math.min(1.5,window.devicePixelRatio)}),this.setZoom(g),this.imageType=i||j.Type.STREET,this.time=0,this.ticks=0,this.links=[],this.centerHeading=0,this.sphereContainer=new THREE.Object3D,this.errorDiffuse=new d,this.loadedDiffuse=new d,this.loadedHQDiffuse=new d,this.loadFinished=new d,this.loadStarted=new d,this.camera=new THREE.PerspectiveCamera(75,a/b,1,3e4),this.camera.target=new THREE.Vector3(0,0,0),f||(this.cubeCamera=this.createCubeCamera()),window.DeviceOrientationEvent&&(h.isMobile||h.isTablet)?this.deviceController=new THREE.DeviceOrientationControls(this.camera):(this.controller=new e(this.camera),this.controller.setup()),this.setupScene()},controllerEnabled:{set:function(a){a?this.controller.setup():this.controller.destroy()}},createCubeCamera:function(){return new THREE.CubeCamera(this.camera.near,this.camera.far,512)},setZoom:function(a){this.zoom=a||3;var b=this.renderer.getContext(),c=b.getParameter(b.MAX_TEXTURE_SIZE);2048>=c&&this.zoom>2?this.zoom=2:4096>=c&&this.zoom>3&&(this.zoom=3),console.log("Using zoom level "+this.zoom+" (max size: "+c+")")},setMode:function(a){this.sphereMesh.material=a===i.Mode.NORMAL?this.normalMaterial:this.sphereMaterial},resize:function(a,b){this.width=a,this.height=b,this.camera.aspect=a/b,this.camera.updateProjectionMatrix(),this.renderer.setSize(a,b)},createSphereMaterial:function(){return new THREE.MeshBasicMaterial({map:this.diffuseTexture,depthWrite:!1,depthTest:!1,lights:!1,side:THREE.DoubleSide})},setupScene:function(){this.scene=new THREE.Scene;var a=new THREE.SphereGeometry(500,60,40);a.applyMatrix((new THREE.Matrix4).makeScale(-1,1,1)),this.diffuseTexture=new THREE.Texture,this.diffuseTexture.minFilter=THREE.LinearFilter,this.diffuseTexture.magFilter=THREE.LinearFilter,this.diffuseTexture.wrapS=THREE.ClampToEdgeWrapping,this.diffuseTexture.wrapT=THREE.ClampToEdgeWrapping,this.normalTexture=new THREE.Texture,this.diffuseTexture.generateMipmaps=!1,this.sphereMaterial=this.createSphereMaterial(),this.diffuseMaterial=new THREE.MeshBasicMaterial({map:this.diffuseTexture}),this.normalMaterial=new THREE.MeshBasicMaterial({map:this.normalTexture}),this.scene.add(this.sphereContainer),this.sphereMesh=new THREE.Mesh(a,this.sphereMaterial),this.sphereContainer.add(this.sphereMesh)},setupGSVPano:function(){f().then(function(a){PANOMNOM.GoogleStreetViewService=new a.StreetViewService,this.panoLoader=this.imageType==i.Type.SPHERE?new PANOMNOM.GooglePhotoSphereLoader:new PANOMNOM.GoogleStreetViewLoader,this.panoLoader.addEventListener("load",function(){this.panoLoaded(this.panoLoader.canvas)}.bind(this)),this.panoID?this.panoLoader.load(this.panoID,this.zoom):this.panoLoader.loadFromLocation(new a.LatLng(this.latitude,this.longitude),this.zoom),this.loadStarted.dispatch()}.bind(this))},onError:function(){this.loadFinished.dispatch()},processTextures:function(){},panoLoaded:function(a){this.diffuseTexture.image=a,this.diffuseTexture.needsUpdate=!0,this.loadedDiffuse.dispatch(),this.processTextures(),this.loadFinished.dispatch()},handleHQDiffuseLoad:function(a){this.diffuseTexture.image=a.canvas,this.diffuseTexture.needsUpdate=!0,this.loadedHQDiffuse.dispatch()},handleDiffuseLoad:function(a){this.links=a.links,this.centerHeading=a.centerHeading,this.panoLocation=a.panoLocation,this.diffuseTexture.image=a.canvas,this.diffuseTexture.needsUpdate=!0,this.loadedDiffuse.dispatch(),this.processTextures(),this.loadFinished.dispatch()},generateCubeMap:function(a,b){this.cubeCamera||(this.cubeCamera=this.createCubeCamera()),this.cubeCamera.updateCubeMap(a,b)},loadFromLatLng:function(a,b){this.latitude=a,this.longitude=b,this.setupGSVPano()},loadFromID:function(a){this.panoID=a,this.setupGSVPano()},loadFromTexture:function(a){this.panoLoaded(a)},render:function(){THREE.AnimationHandler.update((Date.now()-this.renderTime)/1e3),this.renderer.render(this.scene,this.camera),this.renderTime=Date.now()},update:function(a){this.deviceController?this.deviceController.update():(this.ticks++,this.time+=a,this.controller.update(a))},destroy:function(){g?this.deviceController.disconnect():this.controller.destroy(),this.diffuseTexture.dispose(),this.normalTexture.dispose(),this.sphereMaterial.dispose(),this.diffuseMaterial.dispose(),this.normalMaterial.dispose()}});i.Mode={DIFFUSE:"DIFFUSE",DEPTH:"DEPTH",NORMAL:"NORMAL"},i.Type={SPHERE:"SPHERE",STREET:"STREET"},b.exports=i},{"../../../settings":217,"./CameraController":208,"./depthUtil":213,"google-maps-api":36,"is-mobile":59,"js-oop":61,signals:93}],213:[function(a,b){function d(a,b,d){var e=document.createElement("canvas");e.width=b,e.height=d;var f=e.getContext("2d"),g=f.createImageData(b,d),h=g.data,i=50;for(y=0;y<d;++y)for(x=0;x<b;++x)c=a[b-1-x+y*b]/i*255,h[4*(y*b+x)]=c,h[4*(y*b+x)+1]=c,h[4*(y*b+x)+2]=c,h[4*(y*b+x)+3]=255;return f.putImageData(g,0,0),e}function e(a,b,c,d){var e=document.createElement("canvas");e.width=c,e.height=d;var f=e.getContext("2d"),g=f.createImageData(c,d),h=g.data;for(y=0;y<d;y++)for(x=0;x<c;x++){var i=new THREE.Vector3,j=a[x+y*c];if(0!==j){var k=b[j];i.set(k.n[1],k.n[2],k.n[0]),i.normalize()}else i.set(.5,.5,.5);h[4*(y*c+x)]=255*(i.x/2+.5),h[4*(y*c+x)+1]=255*(i.y/2+.5),h[4*(y*c+x)+2]=255*(i.z/2+.5),h[4*(y*c+x)+3]=i.y<-.5?0:255}return f.putImageData(g,0,0),e}b.exports.createNormalTexture=e,b.exports.createDepthTexture=d},{}],214:[function(a,b){b.exports={googleapi:"AIzaSyCO8lt_oZxnKZfEbig7HXX2odVcMtKtOnY",preload:["json/lang_en.json","json/tps-common.json","json/3d.json","images/icons.html","images/test-snapshot.png"],landing:{txt:"This is the landing section"},snapshot:{stickers:["images/stickers/sticker-1.png","images/stickers/sticker-2.png","images/stickers/sticker-3.png","images/stickers/sticker-6.png","images/stickers/sticker-7.png","images/stickers/sticker-10.png","images/stickers/sticker-8.png","images/stickers/sticker-9.png","images/stickers/sticker-11.png","images/stickers/sticker-12.png","images/stickers/sticker-4.png","images/stickers/sticker-5.png"],overlays:["images/overlays/filter-1.png","images/overlays/filter-2.png","images/overlays/filter-3.png","images/overlays/filter-4.png"]},assets3d:{"debug-arrow":{type:"model",path:"assets/3d/debug/arrow.json",sceneID:"arrow_root"},"link-arrow":{type:"model",path:"assets/3d/link/Arrow-v7.json"},"treeE5-branches":{type:"model",path:"assets/3d/trees-MAR06/V5/Branches_04.json"},"treeE5-blossomA":{type:"model",path:"assets/3d/trees-MAR06/V5/CherryBlossoms_1.json"},"treeE5-blossomB":{type:"model",path:"assets/3d/trees-MAR06/V5/CherryBlossoms_2.json"},"treeE5-trunk":{type:"model",path:"assets/3d/trees-MAR06/V5/CherryTreeBark.json"},"treeE5-shot2":{type:"model",path:"assets/3d/trees-MAR06/V5/TreeD-v4_leafbranch_2.json"},"treeE5-petals":{type:"model",path:"assets/3d/trees-MAR06/V5/Pedal-1.json"},"treeE6-branches":{type:"model",path:"assets/3d/trees-MAR06/V6/Branches_04.json"},"treeE6-blossomA":{type:"model",path:"assets/3d/trees-MAR06/V6/CherryBlossoms_1.json"},"treeE6-blossomB":{type:"model",path:"assets/3d/trees-MAR06/V6/CherryBlossoms_2.json"},"treeE6-trunk":{type:"model",path:"assets/3d/trees-MAR06/V6/CherryTreeBark.json"},"treeE6-shot2":{type:"model",path:"assets/3d/trees-MAR06/V6/TreeD-v4_leafbranch_2.json"},"treeE6-petals":{type:"model",path:"assets/3d/trees-MAR06/V6/Pedal-1.json"},"treeE6-petals-B":{type:"model",path:"assets/3d/trees-MAR06/V6/Petal-2.json"},"treeE8-branches":{type:"model",path:"assets/3d/trees-MAR06/V8/Branches_04.json"},"treeE8-blossomA":{type:"model",path:"assets/3d/trees-MAR06/V8/CherryBlossoms_1.json"},"treeE8-blossomB":{type:"model",path:"assets/3d/trees-MAR06/V8/CherryBlossoms_2.json"},"treeE8-trunk":{type:"model",path:"assets/3d/trees-MAR06/V8/CherryTreeBark.json"},"treeE8-shot2":{type:"model",path:"assets/3d/trees-MAR06/V8/TreeD-v4_leafbranch_2.json"},"treeE8-petals":{type:"model",path:"assets/3d/trees-MAR06/V8/Pedal-1.json"},planter:{type:"model",path:"assets/3d/planter/Planter-Cement-v2_OBJ.json",sceneID:"Planter-Cement-v2_OBJ_root"}},assets3dTexture:{"color-lookup":{type:"texture",path:"images/3d/textures/postprocessing/lookup-corrected.png"},vignette:{type:"texture",path:"images/3d/textures/postprocessing/vignette.png"},bokeh:{type:"texture",path:"images/3d/textures/postprocessing/bokeh.png"},"petal-A0":{type:"texture",path:"images/3d/textures/petal-A/LeafPetal-v2_00.png"},"petal-A1":{type:"texture",path:"images/3d/textures/petal-A/LeafPetal-v2_05.png"},"petal-A2":{type:"texture",path:"images/3d/textures/petal-A/LeafPetal-v2_10.png"},"petal-A3":{type:"texture",path:"images/3d/textures/petal-A/LeafPetal-v2_15.png"},"petal-B0":{type:"texture",path:"images/3d/textures/petal-B/LeafPetal-v3_00.png"},"petal-B1":{type:"texture",path:"images/3d/textures/petal-B/LeafPetal-v3_05.png"},"petal-B2":{type:"texture",path:"images/3d/textures/petal-B/LeafPetal-v3_10.png"},"petal-B3":{type:"texture",path:"images/3d/textures/petal-B/LeafPetal-v3_15.png"},"petal-C0":{type:"texture",path:"images/3d/textures/petal-C/LeafPetal-v1b_00.png"},"petal-C1":{type:"texture",path:"images/3d/textures/petal-C/LeafPetal-v1b_02.png"},"petal-C2":{type:"texture",path:"images/3d/textures/petal-C/LeafPetal-v1b_05.png"},"petal-C3":{type:"texture",path:"images/3d/textures/petal-C/LeafPetal-v1b_07.png"},"lens-flare-A":{type:"texture",path:"images/3d/textures/lensflare/lensflare0.png"},"lens-flare-B":{type:"texture",path:"images/3d/textures/lensflare/lensflare2.png"},"lens-flare-C":{type:"texture",path:"images/3d/textures/lensflare/lensflare3.png"},"sphere-gradient":{type:"texture",path:"images/3d/textures/sphere-gradient/sphere-gradient.png"},"ground-coverA":{type:"texture",path:"images/3d/textures/ground-cover/ground-plane-square-01.png"},"ground-coverA-fade":{type:"texture",path:"images/3d/textures/ground-cover/ground-plane-square-fade.png"},"tex-branch-diff":{type:"texture",path:"images/3d/textures/tree/Branches_04.png"},"tex-branchA-diff":{type:"texture",path:"images/3d/textures/tree/shot_2.png"},"tex-blossom-1-v2-diff":{type:"texture",path:"images/3d/textures/tree/CherryBlossoms_THIN_1e.png"},"tex-blossom-2-v2-diff":{type:"texture",path:"images/3d/textures/tree/CherryBlossoms_THIN_2e.png"},"tex-tree-shadow":{type:"texture",path:"images/3d/textures/tree/shadow.png"},"tex-trunk-normal":{type:"texture",path:"images/3d/textures/tree/CherryTreeBark_Normal.png"},"tex-trunk-spec":{type:"texture",path:"images/3d/textures/tree/CherryTreeBark_Spec.png"},"tex-trunk-diff":{type:"texture",path:"images/3d/textures/tree/CherryTreeBark.png"},"tex-treeE-petal":{type:"texture",path:"images/3d/textures/tree/Pedal-1.png"},"tex-treeE-petal2":{type:"texture",path:"images/3d/textures/tree/Petal-2.png"},"tex-planter":{type:"texture",path:"images/3d/textures/planter/planter2.png"},"tex-planter-diff":{type:"texture",path:"images/3d/textures/planter/PlanterBrick-2.png"},"tex-planter-normal":{type:"texture",path:"images/3d/textures/planter/PlanterBrick-2_NORM.png"},"tex-planter-spec":{type:"texture",path:"images/3d/textures/planter/PlanterBrick-2_SPEC.jpg"},"tex-arrow-diff":{type:"texture",path:"images/3d/textures/link/Arrow-7_DIFFUSE.png"},"tex-arrow-diff-2":{type:"texture",path:"images/3d/textures/link/Arrow-7_DIFFUSE-2.jpg"},"tex-arrow-diff-3":{type:"texture",path:"images/3d/textures/link/Arrow-7_DIFFUSE-3.jpg"},"tex-arrow-normal":{type:"texture",path:"images/3d/textures/link/Arrow-7_NRM.jpg"},"tex-arrow-spec":{type:"texture",path:"images/3d/textures/link/Arrow-7_SPEC.jpg"},"tex-arrow-shadow":{type:"texture",path:"images/3d/textures/link/linkshadow.png"}},assetsAudio:{"ambient-sound":{paths:["audio/Sakura_AmbientLoop_V4.mp3"]},"koto-bA0":{paths:["audio/Bass_Koto_A0.mp3"]},"koto-bA1":{paths:["audio/Bass_Koto_A1.mp3"]},"koto-bC0":{paths:["audio/Bass_Koto_C0.mp3"]},"koto-bC1":{paths:["audio/Bass_Koto_C1.mp3"]},"koto-bD0":{paths:["audio/Bass_Koto_D0.mp3"]},"koto-bD1":{paths:["audio/Bass_Koto_D1.mp3"]},"koto-bE0":{paths:["audio/Bass_Koto_E0.mp3"]},"koto-bE1":{paths:["audio/Bass_Koto_E1.mp3"]},"koto-bG0":{paths:["audio/Bass_Koto_G0.mp3"]},"koto-bG1":{paths:["audio/Bass_Koto_G1.mp3"]},"koto-A1":{paths:["audio/Koto_A1.mp3"]},"koto-A2":{paths:["audio/Koto_A2.mp3"]},"koto-C1":{paths:["audio/Koto_C1.mp3"]},"koto-C2":{paths:["audio/Koto_C2.mp3"]},"koto-D1":{paths:["audio/Koto_D1.mp3"]},"koto-D2":{paths:["audio/Koto_D2.mp3"]},"koto-E1":{paths:["audio/Koto_E1.mp3"]},"koto-E2":{paths:["audio/Koto_E2.mp3"]},"koto-G1":{paths:["audio/Koto_G1.mp3"]},"koto-G2":{paths:["audio/Koto_G2.mp3"]}},gallery:{columnsPerPg:6,rowsPerPg:3,id:"",photos:[],page:0,next:"",previous:"",total:0,keys:"",count:18,query:"",sid:"",snapshot:{}},landmarks:[{name:"Eiffel Tower",location:"Paris, France",lat:48.860323,lng:2.291279,heading:180,pitch:100,thumbnail:"eiffeltower"},{name:"Time Square",location:"New York, USA",lat:40.758452,lng:-73.985265,heading:31,pitch:102,thumbnail:"timesquare"},{name:"Colloseo",location:"Rome, Italy",lat:41.890509,lng:12.494909,heading:185,pitch:80,thumbnail:"colosseum"},{name:"Leaning Tower of Pisa",location:"Pisa, Italy",lat:43.722226,lng:10.396621,heading:200,pitch:94,thumbnail:"pisa"},{name:"Okinawa",location:"Okinawa, Japan",lat:26.216995,lng:127.71906,heading:0,pitch:85,thumbnail:"okinawa"},{name:"Champs-lyses",location:"Paris, France",lat:48.873393,lng:2.296246,heading:350,pitch:96,thumbnail:"champselysee"},{name:"Tokyo Tower",location:"Tokyo, Japan",lat:35.655039,lng:139.74534,heading:180,pitch:80,thumbnail:"tower"},{name:"Tokyo Skytree",location:"Tokyo, Japan",lat:35.708864,lng:139.816283,heading:355,pitch:102,thumbnail:"skytree"},{name:"Big Ben",location:"London, England",lat:51.500896,lng:-.123064,heading:360,pitch:99,thumbnail:"bigben"}]}},{}],215:[function(a,b){var c=a("extend"),d=a("../util/get"),e=a("../settings"),f=a("./base"),g=a("shuffle-array"),h=a("lodash");f.init=function(a){f.from("json/lang_"+e.LANG+".json",a)},f.from=function(a,e){d(a,function(a){f=c(!0,f,a),b.exports=f,e(f)})},f.getRandomLandmarks=function(){var a=this.landmarks.slice();return g(a),a.slice(0,3)},f.getTexturesReduced=function(){var a=h.forEach(c({},this.assets3dTexture),function(a){return a.path=a.path.replace("/textures/","/textures-reduced/"),a});return a},f.get3dAssetList=function(){var a=this.getTexturesReduced();return c({},this.assets3d,a)},b.exports=f},{"../settings":217,"../util/get":219,"./base":214,extend:33,lodash:63,"shuffle-array":92}],216:[function(a,b){var c=a("./framework");b.exports=function(){c()}},{"./framework":167}],217:[function(a,b){var c=a("detect-browser"),d=new(a("mobile-detect"))(navigator.userAgent),e=new(a("ua-parser-js"));e.setUA(navigator.userAgent);var f=function(){var a=document.documentElement.clientWidth/window.innerHeight,b="landscape";return null!=d.phone()&&1>a&&(b="portrait"),b};b.exports={LANG:"jp",CDN:"",SERVER:"",isMobile:null!=d.phone(),isPhone:null!=d.phone(),isTablet:null!=d.tablet(),isIOS:"iOS"==d.os(),browserVersion:c.version,deviceOrientation:f(),isIE:"ie"===c.name,isFirefox:"firefox"===c.name,isChrome:"chrome"===c.name,isSafari:"safari"===c.name,isWindows:"Windows"==e.getOS().name,isAndroid:"Android"==e.getOS().name,isDegradedMaterials:"Windows"==e.getOS().name&&e.getOS().version>7||"IE"==e.getBrowser().name,isNoPostShader:"IE"==e.getBrowser().name,"ua-parser-js":e,location:{lat:null,lng:null,location:"",landmark:""}}},{"detect-browser":19,"mobile-detect":67,"ua-parser-js":122}],218:[function(a,b){var c=a("js-oop"),d=a("pixi.js");b.exports=new c({Extends:d.JsonLoader,initialize:function(a,b){c.parent(this,a,!1),this.ajaxRequest={responseText:JSON.stringify(b)}},load:function(){this.onJSONLoaded()},onReadyStateChanged:function(){}})},{"js-oop":61,"pixi.js":68}],219:[function(a,b){{var c=a("xhr");a("../settings")}b.exports=function(a,b){c({withCredentials:!1,method:"get",url:a},function(a,c){b&&b(a||200!=c.statusCode?!1:JSON.parse(c.body))})}},{"../settings":217,xhr:130}],220:[function(a,b){b.exports={keys:null,get:function(){return this.keys||this._load(),this.keys},add:function(a){this.keys||this._load(),this.keys.push(a),this._save()},_save:function(){localStorage.setItem("keys",JSON.stringify(this.keys))},_load:function(){var a=localStorage.getItem("keys");this.keys=a?JSON.parse(a):[]}}},{}],221:[function(a,b){a("google-maps-api")(a("../../model").googleapi),b.exports=a("google-maps-api/geocode")},{"../../model":215,"google-maps-api":36,"google-maps-api/geocode":35}],222:[function(a,b){var c=a("./getlocation");b.exports=function(a){"geolocation"in navigator?navigator.geolocation.getCurrentPosition(function(b){var d={lng:b.coords.longitude,lat:b.coords.latitude};c(d,a)},function(){a(new Error("Please enable geolocation"))},{timeout:15e3}):a(new Error("geolocation not supported"))}},{"./getlocation":223}],223:[function(a,b){var c=a("./geocode"),d={locality:5,administrative_area_level_1:4,country:3,sublocality:2,political:1};b.exports=function(a,b){c({location:{lat:a.lat,lng:a.lng}}).then(function(c){var e,f,g,h=-1;if(0==c.length)a.location="";else{for(var i=!1,j=0,k=c.length;k>j;j++){e=c[j],f=e.types;for(var l=0,m=f.length;m>l;l++)if(g=d[f[l]],g&&g>h){h=g,a.location=e.formatted_address,i=!0;break}}if(!i){var n=c[Math.floor(Math.random()*c.length)].formatted_address;a.location=n}}b(void 0,a)})["catch"](function(a){console.log(a.stack)})}},{"./geocode":221}],224:[function(a,b){{var c=a("xhr");a("../settings")}b.exports=function(a,b,d){var e=new FormData;for(var f in b)e.append(f,b[f]);c({withCredentials:!1,method:"post",url:a,body:e},function(a,b){d&&d(a||200!=b.statusCode?!1:JSON.parse(b.body))})}},{"../settings":217,xhr:130}],225:[function(a,b){b.exports={getURL:function(a,b){var c=window.location.origin;return a&&(c+=b?"?id="+a:"/#!/share/"+a),c},getFacebook:function(a){return url=this.getURL(a,!0),"http://www.facebook.com/sharer.php?u="+encodeURIComponent(url)},getTwitter:function(a,b){return url=this.getURL(a),"http://twitter.com/share?url="+encodeURIComponent(url)+"&text="+encodeURIComponent(b)},getGPlus:function(a){return url=this.getURL(a,!0),"https://plus.google.com/share?url="+encodeURIComponent(url)},open:function(a){var b=575,c=400,d=.5*(window.innerWidth-b),e=.5*(window.innerHeight-c),f="status=1,width="+b+",height="+c+",top="+e+",left="+d;window.open(a,"share",f)}}},{}]},{},[1]);